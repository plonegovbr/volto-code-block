"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[3020,8464],{"./src/components/manage/Widgets/RecurrenceWidget/RecurrenceWidget.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return RecurrenceWidget_RecurrenceWidget}});var objectSpread2=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),defineProperty=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),remove=__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/remove.js"),remove_default=__webpack_require__.n(remove),concat=__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/concat.js"),concat_default=__webpack_require__.n(concat),find=__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/find.js"),find_default=__webpack_require__.n(find),map=__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/map.js"),map_default=__webpack_require__.n(map),isEqual=__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isEqual.js"),isEqual_default=__webpack_require__.n(isEqual),react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),redux=__webpack_require__("../../../node_modules/.pnpm/redux@4.2.1/node_modules/redux/es/redux.js"),es=__webpack_require__("../../../node_modules/.pnpm/react-redux@8.1.2_@types+react-dom@18.2.12_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0_redux@4.2.1/node_modules/react-redux/es/index.js"),classnames=__webpack_require__("../../../node_modules/.pnpm/classnames@2.2.6/node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),dist=__webpack_require__("../../../node_modules/.pnpm/@formatjs+macro@0.2.8/node_modules/@formatjs/macro/dist/index.js"),injectIntl=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.8.0_react@18.2.0/node_modules/react-intl/lib/components/injectIntl.js"),Form=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Form/Form.js"),Grid=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Grid/Grid.js"),Label=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Label/Label.js"),Segment=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js"),Button=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Button/Button.js"),Modal=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/modules/Modal/Modal.js"),Header=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Header/Header.js"),components=__webpack_require__("./src/components/index.js"),helpers=__webpack_require__("./src/helpers/index.js"),Loadable=__webpack_require__("./src/helpers/Loadable/Loadable.js"),save=__webpack_require__("./src/icons/save.svg"),save_default=__webpack_require__.n(save),editing=__webpack_require__("./src/icons/editing.svg"),editing_default=__webpack_require__.n(editing),icons_delete=__webpack_require__("./src/icons/delete.svg"),delete_default=__webpack_require__.n(icons_delete),esm=__webpack_require__("../../../node_modules/.pnpm/rrule@2.7.1/node_modules/rrule/dist/esm/index.js");const Days={MO:esm.RRule.MO,TU:esm.RRule.TU,WE:esm.RRule.WE,TH:esm.RRule.TH,FR:esm.RRule.FR,SA:esm.RRule.SA,SU:esm.RRule.SU},WEEKLY_DAYS=[Days.MO,Days.TU,Days.WE,Days.TH,Days.FR],MONDAYFRIDAY_DAYS=[Days.MO,Days.FR],FREQUENCES={DAILY:"daily",MONDAYFRIDAY:"mondayfriday",WEEKDAYS:"weekdays",WEEKLY:"weekly",MONTHLY:"monthly",YEARLY:"yearly"},OPTIONS={frequences:{[FREQUENCES.DAILY]:{rrule:esm.RRule.DAILY,interval:!0},[FREQUENCES.MONDAYFRIDAY]:{rrule:esm.RRule.WEEKLY},[FREQUENCES.WEEKDAYS]:{rrule:esm.RRule.WEEKLY},[FREQUENCES.WEEKLY]:{rrule:esm.RRule.WEEKLY,interval:!0,byday:!0},[FREQUENCES.MONTHLY]:{rrule:esm.RRule.MONTHLY,interval:!0,bymonth:!0},[FREQUENCES.YEARLY]:{rrule:esm.RRule.YEARLY,interval:!0,byyear:!0}}},toISOString=date=>date.toISOString().split("T")[0],rrulei18n=(intl,moment,lang)=>{moment.locale(lang);const messages=(0,dist.O)({every:{id:"rrule_every",defaultMessage:"every"},until:{id:"rrule_until",defaultMessage:"until"},for:{id:"rrule_for",defaultMessage:"for"},time:{id:"rrule_time",defaultMessage:"time"},times:{id:"rrule_times",defaultMessage:"times"},"(~ approximate)":{id:"rrule_approximate",defaultMessage:"(~approximate)"},hour:{id:"rrule_hour",defaultMessage:"hour"},hours:{id:"rrule_hours",defaultMessage:"hours"},minutes:{id:"rrule_minutes",defaultMessage:"minutes"},weekdays:{id:"rrule_weekdays",defaultMessage:"weekdays"},weekday:{id:"rrule_weekday",defaultMessage:"weekday"},day:{id:"rrule_day",defaultMessage:"day"},days:{id:"rrule_days",defaultMessage:"days"},in:{id:"rrule_in",defaultMessage:"in"},week:{id:"rrule_week",defaultMessage:"week"},weeks:{id:"rrule_weeks",defaultMessage:"weeks"},month:{id:"rrule_month",defaultMessage:"month"},months:{id:"rrule_months",defaultMessage:"months"},on:{id:"rrule_on",defaultMessage:"on"},year:{id:"rrule_year",defaultMessage:"year"},years:{id:"rrule_years",defaultMessage:"years"},"on the":{id:"rrule_on the",defaultMessage:"on the"},the:{id:"rrule_the",defaultMessage:"the"},and:{id:"rrule_and",defaultMessage:"and"},or:{id:"rrule_or",defaultMessage:"or"},at:{id:"rrule_at",defaultMessage:"at"},last:{id:"rrule_last",defaultMessage:"last"},st:{id:"rrule_st",defaultMessage:"st"},nd:{id:"rrule_nd",defaultMessage:"nd"},rd:{id:"rrule_rd",defaultMessage:"rd"},th:{id:"rrule_th",defaultMessage:"th"},dateFormat:{id:"rrule_dateFormat",defaultMessage:"[month] [day], [year]"}});let strings={};Object.keys(messages).map((k=>strings[k]=intl.formatMessage(messages[k])));let dateFormat=strings.dateFormat.replace(new RegExp("\\[","g"),"${").replace(new RegExp("\\]","g"),"}");return{dayNames:moment.weekdays(),monthNames:moment.months(),strings:strings,dateFormatter:(year,month,day)=>dateFormat.replace(/\$\{year\}/g,year).replace(/\$\{month\}/g,month).replace(/\$\{day\}/g,day)}};var Input=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Input/Input.js"),__jsx=react.createElement;const IntervalField=({label:label,labelAfter:labelAfter,value:value,onChange:onChange})=>__jsx(Form.c.Field,{inline:!0,className:"text"},__jsx(Grid.c,null,__jsx(Grid.c.Row,{stretched:!0},__jsx(Grid.c.Column,{width:"4"},__jsx("div",{className:"wrapper"},__jsx("label",{htmlFor:"interval"},label))),__jsx(Grid.c.Column,{width:"8"},__jsx(Form.c.Field,{inline:!0},__jsx(Input.c,{id:"interval",name:"interval",value:value||"",onChange:({target:target})=>{onChange(target.id,""===target.value?void 0:parseInt(target.value))}}),labelAfter&&__jsx("span",null,labelAfter))))));IntervalField.defaultProps={label:null,labelAfter:null,onChange:null};var RecurrenceWidget_IntervalField=IntervalField;IntervalField.__docgenInfo={description:"IntervalField component class.\n@function IntervalField\n@returns {string} Markup of the component.",methods:[],displayName:"IntervalField",props:{label:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},labelAfter:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},value:{description:"",type:{name:"any"},required:!1}}};var ByDayField_jsx=react.createElement;const ByDayField=({label:label,value:value,onChange:onChange,moment:momentlib})=>{const lang=(0,es.useSelector)((state=>state.intl.locale)),moment=momentlib.default;moment.locale((0,helpers.mc)(lang));return ByDayField_jsx(Form.c.Field,{inline:!0,className:"text"},ByDayField_jsx(Grid.c,null,ByDayField_jsx(Grid.c.Row,{stretched:!0},ByDayField_jsx(Grid.c.Column,{width:"4"},ByDayField_jsx("div",{className:"wrapper"},ByDayField_jsx("label",{htmlFor:"byday"},label))),ByDayField_jsx(Grid.c.Column,{width:"8"},ByDayField_jsx(Button.c.Group,{basic:!0,className:"byday-field"},Object.keys(Days).map((d=>ByDayField_jsx(Button.c,{key:d,active:(null==value?void 0:value.indexOf(Days[d]))>=0,type:"button",content:moment.weekdaysShort(Days[d].weekday+1),onClick:()=>{var day,byweekday,i;day=Days[d],byweekday=value?[...value]:[],(i=byweekday.indexOf(day))>=0?byweekday.splice(i,1):byweekday.push(day),onChange("byweekday",byweekday)}}))))))))};ByDayField.defaultProps={label:null,value:null,onChange:null};var RecurrenceWidget_ByDayField=(0,Loadable.yM)(["moment"])(ByDayField);ByDayField.__docgenInfo={description:"ByDayField component class.\n@function ByDayField\n@returns {string} Markup of the component.",methods:[],displayName:"ByDayField",props:{label:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var Radio=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/addons/Radio/Radio.js"),DatetimeWidget=__webpack_require__("./src/components/manage/Widgets/DatetimeWidget.jsx"),EndField_jsx=react.createElement;const messages=(0,dist.O)({recurrenceEnds:{id:"Recurrence ends",defaultMessage:"Ends"},recurrenceEndsCount:{id:"Recurrence ends after",defaultMessage:"after"},recurrenceEndsUntil:{id:"Recurrence ends on",defaultMessage:"on"},occurrences:{id:"Occurences",defaultMessage:"occurrence(s)"}}),EndField=({value:value,count:count,until:until,onChange:onChange,intl:intl})=>EndField_jsx(Form.c.Field,{inline:!0,className:"text"},EndField_jsx(Grid.c,null,EndField_jsx(Grid.c.Row,{stretched:!0},EndField_jsx(Grid.c.Column,{width:"4"},EndField_jsx("div",{className:"wrapper"},EndField_jsx("label",{htmlFor:"recurrenceEnds"},intl.formatMessage(messages.recurrenceEnds)))),EndField_jsx(Grid.c.Column,{width:"8"},EndField_jsx(Form.c.Group,{inline:!0},EndField_jsx(Form.c.Field,null,EndField_jsx(Radio.c,{label:"",name:"recurrenceEnds",id:"recurrenceEndsCount",value:"count",checked:"count"===value,onChange:(e,{value:value})=>onChange("recurrenceEnds",value)})),EndField_jsx(Form.c.Field,{disabled:"count"!==value},intl.formatMessage(messages.recurrenceEndsCount)),EndField_jsx(Form.c.Field,{disabled:"count"!==value},EndField_jsx(Input.c,{id:"count",name:"count",value:count||"",onChange:({target:target})=>{onChange(target.id,""===target.value?void 0:target.value)}})),EndField_jsx(Form.c.Field,{disabled:"count"!==value},intl.formatMessage(messages.occurrences))),EndField_jsx(Form.c.Group,{inline:!0},EndField_jsx(Form.c.Field,null,EndField_jsx(Radio.c,{id:"recurrenceEndsUntil",label:"",name:"recurrenceEnds",value:"until",checked:"until"===value,onChange:(e,{value:value})=>onChange("recurrenceEnds",value)})),EndField_jsx(Form.c.Field,{disabled:"until"!==value},EndField_jsx(DatetimeWidget.default,{id:"until",title:intl.formatMessage(messages.recurrenceEndsUntil),dateOnly:!0,value:until||"",resettable:!1,onChange:(id,value)=>{onChange(id,""===value?void 0:value)}})))))));EndField.defaultProps={value:null,count:null,until:null,onChange:null};var RecurrenceWidget_EndField=(0,injectIntl.cp)(EndField);EndField.__docgenInfo={description:"EndField component class.\n@function EndField\n@returns {string} Markup of the component.",methods:[],displayName:"EndField",props:{value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},count:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},until:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var ByMonthDayField_jsx=react.createElement;const ByMonthDayField_messages=(0,dist.O)({bymonthDay:{id:"Month day",defaultMessage:"Day"},ofTheMonth:{id:"of the month",defaultMessage:"of the month"}}),ByMonthDayField=({value:value,disabled:disabled,onChange:onChange,hideAfterLabel:hideAfterLabel,intl:intl})=>ByMonthDayField_jsx(react.Fragment,null,ByMonthDayField_jsx(Form.c.Field,{inline:!0,disabled:disabled},intl.formatMessage(ByMonthDayField_messages.bymonthDay)),ByMonthDayField_jsx(Form.c.Field,{inline:!0,disabled:disabled},ByMonthDayField_jsx(Input.c,{type:"number",id:"bymonthday",name:"bymonthday",value:value||"",onChange:({target:target})=>{onChange(target.id,""===target.value?void 0:[parseInt(target.value)])}})),!hideAfterLabel&&ByMonthDayField_jsx(Form.c.Field,{inline:!0,disabled:disabled},intl.formatMessage(ByMonthDayField_messages.ofTheMonth)));ByMonthDayField.defaultProps={disabled:!1,value:null,onChange:null,hideAfterLabel:!1};var RecurrenceWidget_ByMonthDayField=(0,injectIntl.cp)(ByMonthDayField);ByMonthDayField.__docgenInfo={description:"ByMonthDayField component class.\n@function ByMonthDayField\n@returns {string} Markup of the component.",methods:[],displayName:"ByMonthDayField",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},hideAfterLabel:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}};var esm_extends=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/extends.js"),react_select_esm=__webpack_require__("../../../node_modules/.pnpm/react-select@4.3.1_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0/node_modules/react-select/dist/react-select.esm.js"),SelectStyling=__webpack_require__("./src/components/manage/Widgets/SelectStyling.jsx"),SelectInput_jsx=react.createElement;const SelectInput=({name:name,disabled:disabled,options:options,value:value,onChange:onChange})=>{const inlineSelectStyles=(0,objectSpread2.c)((0,objectSpread2.c)({},SelectStyling.cF),{},{control:(styles,state)=>(0,objectSpread2.c)((0,objectSpread2.c)({},SelectStyling.cF.control(styles,state)),{},{minWidth:"130px"})}),getDefaultValue=(choices,value)=>{const element=find_default()(choices,(o=>o.value===value));return element||{}};return SelectInput_jsx(react_select_esm.default,{isDisabled:disabled,id:name,name:name,className:"react-select-container",classNamePrefix:"react-select",defaultValue:getDefaultValue(options,value),value:getDefaultValue(options,value),options:options,styles:inlineSelectStyles,theme:SelectStyling.qe,components:{DropdownIndicator:SelectStyling.y,Option:SelectStyling.cb},onChange:data=>onChange(name,data.value)})};SelectInput.defaultProps={name:"select",options:[],disabled:!1,value:null,onChange:null};var RecurrenceWidget_SelectInput=SelectInput;SelectInput.__docgenInfo={description:"SelectInput component class.\n@function SelectInput\n@returns {string} Markup of the component.",methods:[],displayName:"SelectInput",props:{name:{defaultValue:{value:"'select'",computed:!1},description:"",type:{name:"string"},required:!1},options:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var WeekdayOfTheMonthIndexField_jsx=react.createElement;const WeekdayOfTheMonthIndexField_messages=(0,dist.O)({bymonthDayNumber:{id:"Weeek day of month",defaultMessage:"The"},first:{id:"First",defaultMessage:"First"},second:{id:"Second",defaultMessage:"Second"},third:{id:"Third",defaultMessage:"Third"},fourth:{id:"Fourth",defaultMessage:"Fourth"},last:{id:"Last",defaultMessage:"Last"}}),ORDINAL_NUMBERS={1:"first",2:"second",3:"third",4:"fourth","-1":"last"};class WeekdayOfTheMonthIndexField extends react.Component{render(){const{intl:intl,disabled:disabled}=this.props,weekdayOfTheMonthIndexList=[...map_default()(Object.keys(ORDINAL_NUMBERS),(option=>({value:parseInt(option),label:intl.formatMessage(WeekdayOfTheMonthIndexField_messages[ORDINAL_NUMBERS[option]])})))];return WeekdayOfTheMonthIndexField_jsx(react.Fragment,null,WeekdayOfTheMonthIndexField_jsx(Form.c.Field,{disabled:disabled},intl.formatMessage(WeekdayOfTheMonthIndexField_messages.bymonthDayNumber)),WeekdayOfTheMonthIndexField_jsx(Form.c.Field,{disabled:disabled},WeekdayOfTheMonthIndexField_jsx(RecurrenceWidget_SelectInput,(0,esm_extends.c)({name:"weekdayOfTheMonthIndex",options:weekdayOfTheMonthIndexList},this.props))))}}(0,defineProperty.c)(WeekdayOfTheMonthIndexField,"defaultProps",{disabled:!1,value:null,onChange:null});var RecurrenceWidget_WeekdayOfTheMonthIndexField=(0,injectIntl.cp)(WeekdayOfTheMonthIndexField);WeekdayOfTheMonthIndexField.__docgenInfo={description:"",methods:[],displayName:"WeekdayOfTheMonthIndexField",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var WeekdayOfTheMonthField_jsx=react.createElement;const WeekdayOfTheMonthField=props=>{const{disabled:disabled=!1,moment:momentlib}=props,lang=(0,es.useSelector)((state=>state.intl.locale)),moment=momentlib.default;moment.locale((0,helpers.mc)(lang));const weekdayOfTheMonthList=[...map_default()(Object.keys(Days),(d=>({value:Days[d].weekday,label:moment.weekdays(Days[d].weekday+1)})))];return WeekdayOfTheMonthField_jsx(Form.c.Field,{disabled:disabled},WeekdayOfTheMonthField_jsx(RecurrenceWidget_SelectInput,(0,esm_extends.c)({name:"weekdayOfTheMonth",options:weekdayOfTheMonthList},props)))};var RecurrenceWidget_WeekdayOfTheMonthField=(0,Loadable.yM)(["moment"])(WeekdayOfTheMonthField);WeekdayOfTheMonthField.__docgenInfo={description:"WeekdayOfTheMonthField component class.\n@function WeekdayOfTheMonthField\n@returns {string} Markup of the component.",methods:[],displayName:"WeekdayOfTheMonthField"};var ByMonthField_jsx=react.createElement;const ByMonthField=({label:label,value:value,bymonthday:bymonthday,weekdayOfTheMonthIndex:weekdayOfTheMonthIndex,weekdayOfTheMonth:weekdayOfTheMonth,onChange:onChange,intl:intl})=>ByMonthField_jsx(Form.c.Field,{inline:!0,className:"text"},ByMonthField_jsx(Grid.c,null,ByMonthField_jsx(Grid.c.Row,{stretched:!0},ByMonthField_jsx(Grid.c.Column,{width:"4"},ByMonthField_jsx("div",{className:"wrapper"},ByMonthField_jsx("label",{htmlFor:"monthly"},label))),ByMonthField_jsx(Grid.c.Column,{width:"8"},ByMonthField_jsx(Form.c.Group,{inline:!0},ByMonthField_jsx(Form.c.Field,null,ByMonthField_jsx(Radio.c,{label:"",name:"monthly",id:"monthly-bymonthday",value:"bymonthday",checked:"bymonthday"===value,onChange:(e,{value:value})=>onChange("monthly",value)})),ByMonthField_jsx(RecurrenceWidget_ByMonthDayField,{value:bymonthday,disabled:"bymonthday"!==value,onChange:onChange})),ByMonthField_jsx(Form.c.Group,{inline:!0},ByMonthField_jsx(Form.c.Field,null,ByMonthField_jsx(Radio.c,{label:"",name:"monthly",id:"monthly-byweekday",value:"byweekday",checked:"byweekday"===value,onChange:(e,{value:value})=>onChange("monthly",value)})),ByMonthField_jsx(RecurrenceWidget_WeekdayOfTheMonthIndexField,{disabled:"byweekday"!==value,value:weekdayOfTheMonthIndex,onChange:onChange}),ByMonthField_jsx(RecurrenceWidget_WeekdayOfTheMonthField,{disabled:"byweekday"!==value,value:weekdayOfTheMonth,onChange:onChange}))))));ByMonthField.defaultProps={label:null,value:null,bymonthday:null,weekdayOfTheMonthIndex:null,weekdayOfTheMonth:null,onChange:null};var RecurrenceWidget_ByMonthField=(0,injectIntl.cp)(ByMonthField);ByMonthField.__docgenInfo={description:"ByMonthField component class.\n@function ByMonthField\n@returns {string} Markup of the component.",methods:[],displayName:"ByMonthField",props:{label:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},bymonthday:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},weekdayOfTheMonthIndex:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},weekdayOfTheMonth:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var MonthOfTheYearField_jsx=react.createElement;const MonthOfTheYearField=({value:value,disabled:disabled,inline:inline,onChange:onChange,moment:momentlib})=>{const moment=momentlib.default,lang=(0,es.useSelector)((state=>state.intl.locale));moment.locale((0,helpers.mc)(lang));const monthList=[...map_default()(moment.months(),((m,i)=>({value:i+1,label:m})))];return MonthOfTheYearField_jsx(Form.c.Field,{inline:inline,disabled:disabled},MonthOfTheYearField_jsx(RecurrenceWidget_SelectInput,{name:"monthOfTheYear",disabled:disabled,options:monthList,value:value,onChange:onChange}))};MonthOfTheYearField.defaultProps={value:null,disabled:!1,inline:!1,onChange:null};var RecurrenceWidget_MonthOfTheYearField=(0,Loadable.yM)(["moment"])(MonthOfTheYearField);MonthOfTheYearField.__docgenInfo={description:"MonthOfTheYearField component class.\n@function MonthOfTheYearField\n@returns {string} Markup of the component.",methods:[],displayName:"MonthOfTheYearField",props:{value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},inline:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var ByYearField_jsx=react.createElement;const ByYearField_messages=(0,dist.O)({ofTheMonth:{id:"of the month",defaultMessage:"of the month"}}),ByYearField=({label:label,value:value,bymonthday:bymonthday,monthOfTheYear:monthOfTheYear,weekdayOfTheMonthIndex:weekdayOfTheMonthIndex,weekdayOfTheMonth:weekdayOfTheMonth,onChange:onChange,intl:intl})=>ByYearField_jsx(Form.c.Field,{inline:!0,className:"text byyear-field"},ByYearField_jsx(Grid.c,null,ByYearField_jsx(Grid.c.Row,{stretched:!0},ByYearField_jsx(Grid.c.Column,{width:"4"},ByYearField_jsx("div",{className:"wrapper"},ByYearField_jsx("label",{htmlFor:"yearly"},label))),ByYearField_jsx(Grid.c.Column,{width:"8"},ByYearField_jsx(Form.c.Group,{inline:!0,className:"byyear-bymonthday"},ByYearField_jsx(Form.c.Field,null,ByYearField_jsx(Radio.c,{label:"",name:"yearly",value:"bymonthday",id:"yearly-bymonthday",checked:"bymonthday"===value,onChange:(e,{value:value})=>onChange("yearly",value)})),ByYearField_jsx(RecurrenceWidget_ByMonthDayField,{value:bymonthday,disabled:"bymonthday"!==value,onChange:onChange,hideAfterLabel:!0}),ByYearField_jsx(RecurrenceWidget_MonthOfTheYearField,{value:monthOfTheYear,disabled:"bymonthday"!==value,onChange:onChange})),ByYearField_jsx(Form.c.Group,{inline:!0,className:"byyear-byday"},ByYearField_jsx(Form.c.Field,null,ByYearField_jsx(Radio.c,{label:"",name:"yearly",id:"yearly-byday",value:"byday",checked:"byday"===value,onChange:(e,{value:value})=>onChange("yearly",value)})),ByYearField_jsx(RecurrenceWidget_WeekdayOfTheMonthIndexField,{disabled:"byday"!==value,value:weekdayOfTheMonthIndex,onChange:onChange}),ByYearField_jsx(RecurrenceWidget_WeekdayOfTheMonthField,{disabled:"byday"!==value,value:weekdayOfTheMonth,onChange:onChange}),ByYearField_jsx(Form.c.Field,{disabled:"byday"!==value},intl.formatMessage(ByYearField_messages.ofTheMonth)),ByYearField_jsx(RecurrenceWidget_MonthOfTheYearField,{value:monthOfTheYear,disabled:"byday"!==value,onChange:onChange,inline:!1}))))));ByYearField.defaultProps={label:null,value:null,bymonthday:null,monthOfTheYear:null,weekdayOfTheMonthIndex:null,weekdayOfTheMonth:null,onChange:null};var RecurrenceWidget_ByYearField=(0,injectIntl.cp)(ByYearField);ByYearField.__docgenInfo={description:"ByYearField component class.\n@function ByYearField\n@returns {string} Markup of the component.",methods:[],displayName:"ByYearField",props:{label:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},bymonthday:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},monthOfTheYear:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},weekdayOfTheMonthIndex:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},weekdayOfTheMonth:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"any"},required:!1},onChange:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var prop_types=__webpack_require__("../../../node_modules/.pnpm/prop-types@15.7.2/node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),List=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/List/List.js"),circle_plus=__webpack_require__("./src/icons/circle-plus.svg"),circle_plus_default=__webpack_require__.n(circle_plus),Occurences_jsx=react.createElement;const Occurences_messages=(0,dist.O)({selected_dates:{id:"Selected dates",defaultMessage:"Selected dates"},start_of_recurrence:{id:"Start of the recurrence",defaultMessage:"Start of the recurrence"},additional_date:{id:"Additional date",defaultMessage:"Additional date"},other_items:{id:"others",defaultMessage:"others"},no_occurences:{id:"No occurences set",defaultMessage:"No occurences set"},exclude:{id:"Exclude this occurence",defaultMessage:"Exclude this occurence"},include:{id:"Include this occurence",defaultMessage:"Include this occurrence"}}),Occurences_=({rruleSet:rruleSet,exclude:exclude,undoExclude:undoExclude,intl:intl,showTitle:showTitle,editOccurences:editOccurences,moment:momentlib})=>{const moment=momentlib.default,lang=(0,es.useSelector)((state=>state.intl.locale));moment.locale((0,helpers.mc)(lang));let all=[];rruleSet&&(all=rruleSet.all(),rruleSet.exdates().forEach((date=>{all.indexOf(date)<0&&all.push(date)})),all.sort(((a,b)=>a>b?1:-1)));const others=all.splice(100);return Occurences_jsx("div",{className:"occurences"},0===all.length&&Occurences_jsx(react.Fragment,null,intl.formatMessage(Occurences_messages.no_occurences)),showTitle&&Occurences_jsx(Header.c,{as:"h2"},intl.formatMessage(Occurences_messages.selected_dates)),Occurences_jsx(List.c,{divided:!0,verticalAlign:"middle"},all.map(((date,index)=>{const excluded=(date=>{var dateISO=toISOString(date),excluded=!1;return rruleSet.exdates().forEach((ex=>{toISOString(ex)===dateISO&&(excluded=!0)})),excluded})(date);return Occurences_jsx(List.c.Item,{key:date.toString()},editOccurences&&Occurences_jsx(List.c.Content,{floated:"right"},index>0?Occurences_jsx(react.Fragment,null,!excluded&&Occurences_jsx(Button.c,{basic:!0,icon:!0,className:"exclude-button",onClick:()=>{exclude(date)},"aria-label":intl.formatMessage(Occurences_messages.exclude)},Occurences_jsx(components.GWx,{name:delete_default(),size:"18px"})),excluded&&Occurences_jsx(Button.c,{basic:!0,icon:!0,className:"include-button",onClick:()=>{undoExclude(date)},"aria-label":intl.formatMessage(Occurences_messages.include)},Occurences_jsx(components.GWx,{name:circle_plus_default(),size:"24px"}))):intl.formatMessage(Occurences_messages.start_of_recurrence)),Occurences_jsx(List.c.Content,{className:classnames_default()({excluded:excluded})},((d,moment)=>{const m=moment(d);return m.format("dddd")+", "+m.format("LL")})(date,moment),(date=>{var dateISO=toISOString(date),additional=!1;return rruleSet.rdates().forEach((d=>{toISOString(d)===dateISO&&(additional=!0)})),additional})(date)&&Occurences_jsx(Label.c,{pointing:"left",size:"small",color:excluded?"grey":"green"},intl.formatMessage(Occurences_messages.additional_date))))})),others.length>0&&Occurences_jsx(List.c.Item,null,Occurences_jsx(List.c.Content,null,`... ${intl.formatMessage(Occurences_messages.other_items)} ${others.length}`))))},Occurences=(0,Loadable.yM)(["moment"])(Occurences_);Occurences.propTypes={rruleSet:prop_types_default().any,showTitle:prop_types_default().bool,editOccurences:prop_types_default().bool},Occurences.defaultProps={rruleSet:null,showTitle:!0,editOccurences:!0};var RecurrenceWidget_Occurences=(0,injectIntl.cp)(Occurences);Occurences_.__docgenInfo={description:"Occurences component class.\n@function Occurences\n@returns {string} Markup of the component.",methods:[],displayName:"Occurences_"};var RecurrenceWidget_jsx=react.createElement;const RecurrenceWidget_messages=(0,dist.O)({editRecurrence:{id:"Edit recurrence",defaultMessage:"Edit recurrence"},save:{id:"Save recurrence",defaultMessage:"Save"},remove:{id:"Remove recurrence",defaultMessage:"Remove"},repeat:{id:"Repeat",defaultMessage:"Repeat"},daily:{id:"Daily",defaultMessage:"Daily"},mondayfriday:{id:"Monday and Friday",defaultMessage:"Monday and Friday"},weekdays:{id:"Weekday",defaultMessage:"Weekday"},weekly:{id:"Weekly",defaultMessage:"Weekly"},monthly:{id:"Monthly",defaultMessage:"Monthly"},yearly:{id:"Yearly",defaultMessage:"Yearly"},repeatEvery:{id:"Repeat every",defaultMessage:"Repeat every"},repeatOn:{id:"Repeat on",defaultMessage:"Repeat on"},interval_daily:{id:"Interval Daily",defaultMessage:"days"},interval_weekly:{id:"Interval Weekly",defaultMessage:"week(s)"},interval_monthly:{id:"Interval Monthly",defaultMessage:"Month(s)"},interval_yearly:{id:"Interval Yearly",defaultMessage:"year(s)"},add_date:{id:"Add date",defaultMessage:"Add date"},select_date_to_add_to_recurrence:{id:"Select a date to add to recurrence",defaultMessage:"Select a date to add to recurrence"}}),NoRRuleOptions=["recurrenceEnds","monthly","weekdayOfTheMonthIndex","weekdayOfTheMonth","yearly","monthOfTheYear","byhour","byminute","bysecond","bynmonthday","exdates","rdates"];class RecurrenceWidget extends react.Component{constructor(props,intl){super(props),(0,defineProperty.c)(this,"editRecurrence",(()=>{this.setRecurrenceStartEnd()})),(0,defineProperty.c)(this,"setRecurrenceStartEnd",(()=>{var _this$props$formData;const start=null===(_this$props$formData=this.props.formData)||void 0===_this$props$formData?void 0:_this$props$formData.start;let _start=this.getUTCDate(start).startOf("day").toDate();this.setState((prevState=>{let rruleSet=prevState.rruleSet;const formValues=this.getFormValues(rruleSet);return rruleSet=this.updateRruleSet(rruleSet,formValues,"dtstart",_start),(0,objectSpread2.c)((0,objectSpread2.c)({},prevState),{},{rruleSet:rruleSet,formValues:formValues})}))})),(0,defineProperty.c)(this,"getUTCDate",(date=>date.match(/T(.)*(-|\+|Z)/g)?this.moment(date).utc():this.moment(`${date}Z`).utc())),(0,defineProperty.c)(this,"show",(dimmer=>()=>{this.setState({dimmer:dimmer,open:!0}),this.editRecurrence()})),(0,defineProperty.c)(this,"close",(()=>this.setState({open:!1}))),(0,defineProperty.c)(this,"getFreq",((number,weekdays)=>{let freq=FREQUENCES.DAILY;return Object.entries(OPTIONS.frequences).forEach((([f,o])=>{o.rrule===number&&(freq=f)})),freq===FREQUENCES.WEEKLY&&weekdays&&isEqual_default()(weekdays.sort(),WEEKLY_DAYS.map((w=>w.weekday)).sort())&&(freq=FREQUENCES.WEEKDAYS),freq})),(0,defineProperty.c)(this,"getWeekday",(number=>{var day=null;const n=-1===number?6:number;return Object.keys(Days).forEach((d=>{Days[d].weekday===n&&(day=Days[d])})),day})),(0,defineProperty.c)(this,"getFormValues",(rruleSet=>{var _this$props$formData2;let formValues={freq:FREQUENCES.DAILY,interval:1};formValues=this.changeField(formValues,"recurrenceEnds",null!==(_this$props$formData2=this.props.formData)&&void 0!==_this$props$formData2&&_this$props$formData2.end?"until":"count");const rrule=rruleSet.rrules()[0];if(rrule){var freq=this.getFreq(rrule.options.freq,rrule.options.byweekday);Object.entries(rrule.options).forEach((([option,value])=>{switch(option){case"freq":formValues[option]=freq;break;case"count":null!=value&&(formValues.recurrenceEnds=option,formValues[option]=value);break;case"until":null!=value&&(formValues.recurrenceEnds=option,formValues[option]=toISOString(value));break;case"byweekday":value&&value.length>0&&(isEqual_default()(value,WEEKLY_DAYS)&&(formValues.freq=FREQUENCES.WEEKDAYS),isEqual_default()(value,MONDAYFRIDAY_DAYS)&&(formValues.freq=FREQUENCES.MONDAYFRIDAY)),formValues[option]=value?value.map((d=>this.getWeekday(d))):[];break;case"bymonthday":value&&value.length>0?(freq===FREQUENCES.MONTHLY&&(formValues.monthly=option),freq===FREQUENCES.YEARLY&&(formValues.yearly=option)):(freq===FREQUENCES.MONTHLY&&(formValues.monthly=null),freq===FREQUENCES.YEARLY&&(formValues.yearly=null)),formValues[option]=value;break;case"bynweekday":value&&value.length>0&&(freq===FREQUENCES.SMONTHLY&&(formValues.monthly="byweekday"),freq===FREQUENCES.YEARLY&&(formValues.yearly="byday"),formValues.weekdayOfTheMonth=value[0][0],formValues.weekdayOfTheMonthIndex=value[0][1]);break;case"bymonth":freq===FREQUENCES.YEARLY&&(formValues.yearly="byday"),formValues.monthOfTheYear=value?value[0]:null;break;default:formValues[option]=value}}))}return formValues})),(0,defineProperty.c)(this,"formValuesToRRuleOptions",(formValues=>{var values=Object.assign({},formValues);return NoRRuleOptions.forEach((opt=>{delete values[opt]})),Object.keys(values).forEach((field=>{var value=values[field];switch(field){case"freq":value&&(value=OPTIONS.frequences[value].rrule);break;case"until":value=value?this.moment(new Date(value)).utc().toDate():null}0===value||value?values[field]=value:delete values[field]})),values})),(0,defineProperty.c)(this,"updateRruleSet",((rruleSet,formValues,field,value)=>{var rruleOptions=this.formValuesToRRuleOptions(formValues),dstart="dtstart"===field?value:rruleSet.dtstart()?rruleSet.dtstart():this.moment().utc().toDate(),exdates="exdates"===field?value:Object.assign([],rruleSet.exdates()),rdates="rdates"===field?value:Object.assign([],rruleSet.rdates());rruleOptions.dtstart=dstart;const{RRule:RRule,RRuleSet:RRuleSet}=this.props.rrule;let set=new RRuleSet;return set.rrule(new RRule(rruleOptions)),exdates.map((ex=>set.exdate(ex))),rdates.map((r=>set.rdate(r))),set})),(0,defineProperty.c)(this,"getDefaultUntil",(freq=>{var _this$props$formData3;const moment=this.moment;var end=null!==(_this$props$formData3=this.props.formData)&&void 0!==_this$props$formData3&&_this$props$formData3.end?toISOString(this.getUTCDate(this.props.formData.end).toDate()):null,tomorrow=toISOString(moment().add(1,"days").utc().toDate()),nextWeek=toISOString(moment().add(7,"days").utc().toDate()),nextMonth=toISOString(moment().add(1,"months").utc().toDate()),nextYear=toISOString(moment().add(1,"years").utc().toDate()),until=end;switch(freq){case FREQUENCES.DAILY:until=end||tomorrow;break;case FREQUENCES.WEEKLY:case FREQUENCES.WEEKDAYS:case FREQUENCES.MONDAYFRIDAY:until=end||nextWeek;break;case FREQUENCES.MONTHLY:until=end||nextMonth;break;case FREQUENCES.YEARLY:until=end||nextYear}return until})),(0,defineProperty.c)(this,"changeField",((formValues,field,value)=>{var _this$state,_this$state$rruleSet,_this$props$formData4,_this$props$formData5,_this$props$formData6;const moment=this.moment,byweekday=(null===(_this$state=this.state)||void 0===_this$state||null===(_this$state$rruleSet=_this$state.rruleSet)||void 0===_this$state$rruleSet?void 0:_this$state$rruleSet.rrules().length)>0?this.state.rruleSet.rrules()[0].origOptions.byweekday:null,currWeekday=this.getWeekday(moment().day()-1),currMonth=moment().month()+1,startMonth=null!==(_this$props$formData4=this.props.formData)&&void 0!==_this$props$formData4&&_this$props$formData4.start?moment(this.props.formData.start).month()+1:currMonth,startWeekday=null!==(_this$props$formData5=this.props.formData)&&void 0!==_this$props$formData5&&_this$props$formData5.start?this.getWeekday(moment(this.props.formData.start).day()-1):currWeekday;formValues[field]=value;const defaultMonthDay=null!==(_this$props$formData6=this.props.formData)&&void 0!==_this$props$formData6&&_this$props$formData6.start?moment(this.props.formData.start).date():moment().date();switch(field){case"freq":formValues.interval=1;switch(OPTIONS.frequences[value].interval||(formValues.interval=null),formValues=this.changeField(formValues,"byweekday",null),formValues=this.changeField(formValues,"yearly",null),formValues=this.changeField(formValues,"bymonthday",null),formValues=this.changeField(formValues,"byweekday",null),(formValues=this.changeField(formValues,"monthOfTheYear",null)).until||(formValues.until=this.getDefaultUntil(value)),value){case FREQUENCES.DAILY:break;case FREQUENCES.WEEKDAYS:formValues=this.changeField(formValues,"byweekday",WEEKLY_DAYS);break;case FREQUENCES.MONDAYFRIDAY:formValues=this.changeField(formValues,"byweekday",MONDAYFRIDAY_DAYS);break;case FREQUENCES.WEEKLY:formValues=this.changeField(formValues,"byweekday",[startWeekday]);break;case FREQUENCES.MONTHLY:formValues=this.changeField(formValues,"monthly","bymonthday");break;case FREQUENCES.YEARLY:formValues=this.changeField(formValues,"yearly","bymonthday")}break;case"recurrenceEnds":"count"===value&&(formValues.count=1,formValues.until=null),"until"===value&&(formValues.until=this.getDefaultUntil(formValues.freq),formValues.count=null);break;case"byweekday":formValues.byweekday=value,FREQUENCES.WEEKLY!==formValues.freq?(formValues.weekdayOfTheMonth=value?value[0].weekday:null,formValues.weekdayOfTheMonthIndex=value?value[0].n:null):(delete formValues.weekdayOfTheMonth,delete formValues.weekdayOfTheMonthIndex);break;case"weekdayOfTheMonth":var weekday=this.getWeekday(value),n=byweekday?byweekday[0].n:1;formValues.byweekday=weekday?[weekday.nth(n)]:null;break;case"weekdayOfTheMonthIndex":var week_day=byweekday?byweekday[0]:currWeekday;formValues.byweekday=value?[week_day.nth(value)]:null;break;case"monthOfTheYear":null==value?delete formValues.bymonth:formValues.bymonth=[value];break;case"monthly":"bymonthday"===value&&(formValues.bymonthday=[defaultMonthDay],formValues=this.changeField(formValues,"byweekday",null)),"byweekday"===value&&(formValues.bymonthday=null,formValues=this.changeField(formValues,"byweekday",[currWeekday.nth(1)])),null===value&&(formValues=this.changeField(formValues,"bymonthday",null),formValues=this.changeField(formValues,"byweekday",null));break;case"yearly":"bymonthday"===value&&(formValues.bymonthday=[defaultMonthDay],formValues=this.changeField(formValues,"monthOfTheYear",startMonth),formValues=this.changeField(formValues,"byweekday",null)),"byday"===value&&(formValues=this.changeField(formValues,"bymonthday",null),formValues=this.changeField(formValues,"byweekday",[startWeekday.nth(1)]),formValues=this.changeField(formValues,"monthOfTheYear",startMonth))}return formValues})),(0,defineProperty.c)(this,"onChangeRule",((field,value)=>{var formValues=Object.assign({},this.state.formValues);formValues=this.changeField(formValues,field,value),this.setState((prevState=>{var rruleSet=prevState.rruleSet;return rruleSet=this.updateRruleSet(rruleSet,formValues,field,value),(0,objectSpread2.c)((0,objectSpread2.c)({},prevState),{},{rruleSet:rruleSet,formValues:formValues})}))})),(0,defineProperty.c)(this,"exclude",(date=>{let list=this.state.rruleSet.exdates().slice(0);list.push(date),this.onChangeRule("exdates",list)})),(0,defineProperty.c)(this,"undoExclude",(date=>{let list=this.state.rruleSet.exdates().slice(0);remove_default()(list,(e=>e.getTime()===date.getTime())),this.onChangeRule("exdates",list)})),(0,defineProperty.c)(this,"addDate",(date=>{const moment=this.moment;let all=concat_default()(this.state.rruleSet.all(),this.state.rruleSet.exdates());var simpleDate=moment(new Date(date)).startOf("day").toDate().getTime();if(!find_default()(all,(e=>moment(e).startOf("day").toDate().getTime()===simpleDate))){let list=this.state.rruleSet.rdates().slice(0);list.push(new Date(date)),this.onChangeRule("rdates",list)}})),(0,defineProperty.c)(this,"save",(()=>{var value=this.state.rruleSet.toString();this.props.onChange(this.props.id,value),this.close()})),(0,defineProperty.c)(this,"remove",(()=>{const{RRuleSet:RRuleSet}=this.props.rrule;this.props.onChange(this.props.id,null);let rruleSet=new RRuleSet;this.setState({rruleSet:rruleSet,formValues:this.getFormValues(rruleSet)})}));const{RRuleSet:_RRuleSet,rrulestr:rrulestr}=props.rrule;this.moment=this.props.moment.default,this.moment.locale((0,helpers.mc)(this.props.lang));let _rruleSet=this.props.value?rrulestr(props.value,{compatible:!0,forceset:!0}):new _RRuleSet;this.state={open:!1,rruleSet:_rruleSet,formValues:this.getFormValues(_rruleSet),RRULE_LANGUAGE:rrulei18n(this.props.intl,this.moment,(0,helpers.mc)(this.props.lang))}}componentDidMount(){this.props.value&&this.setRecurrenceStartEnd()}componentDidUpdate(prevProps){var _prevProps$formData,_this$props$formData7;if(this.props.value&&(null===(_prevProps$formData=prevProps.formData)||void 0===_prevProps$formData?void 0:_prevProps$formData.start)!==(null===(_this$props$formData7=this.props.formData)||void 0===_this$props$formData7?void 0:_this$props$formData7.start)){var _this$props$formData8;let start=this.getUTCDate(null===(_this$props$formData8=this.props.formData)||void 0===_this$props$formData8?void 0:_this$props$formData8.start).startOf("day").toDate();this.setState((prevState=>{let rruleSet=prevState.rruleSet;return rruleSet=this.updateRruleSet(rruleSet,prevState.formValues,"dtstart",start),(0,objectSpread2.c)((0,objectSpread2.c)({},prevState),{},{rruleSet:rruleSet})}))}}render(){var _rruleSet$rrules$;const{open:open,dimmer:dimmer,rruleSet:rruleSet,formValues:formValues,RRULE_LANGUAGE:RRULE_LANGUAGE}=this.state,{id:id,title:title,required:required,description:description,error:error,fieldSet:fieldSet,intl:intl}=this.props;return RecurrenceWidget_jsx(Form.c.Field,{inline:!0,required:required,error:error.length>0,className:classnames_default()("recurrence-widget",description?"help":""),id:`${fieldSet||"field"}-${id}`},RecurrenceWidget_jsx(Grid.c,null,RecurrenceWidget_jsx(Grid.c.Row,{stretched:!0,verticalAlign:"middle"},RecurrenceWidget_jsx(Grid.c.Column,{width:"4"},RecurrenceWidget_jsx("div",{className:"wrapper"},RecurrenceWidget_jsx("label",{htmlFor:`field-${id}`},title))),RecurrenceWidget_jsx(Grid.c.Column,{width:"8"},rruleSet.rrules()[0]&&RecurrenceWidget_jsx(react.Fragment,null,RecurrenceWidget_jsx(Label.c,null,null===(_rruleSet$rrules$=rruleSet.rrules()[0])||void 0===_rruleSet$rrules$?void 0:_rruleSet$rrules$.toText((t=>RRULE_LANGUAGE.strings[t]),RRULE_LANGUAGE,RRULE_LANGUAGE.dateFormatter)),RecurrenceWidget_jsx(Segment.c,null,RecurrenceWidget_jsx(RecurrenceWidget_Occurences,{rruleSet:rruleSet,exclude:this.exclude,undoExclude:this.undoExclude,showTitle:!1,editOccurences:!1}))),RecurrenceWidget_jsx("div",null,RecurrenceWidget_jsx(Button.c,{basic:!0,disabled:this.props.isDisabled,color:"blue",className:"edit-recurrence",onClick:this.show("blurring"),type:"button","aria-label":intl.formatMessage(RecurrenceWidget_messages.editRecurrence)},RecurrenceWidget_jsx(components.GWx,{name:editing_default(),size:"20px",title:intl.formatMessage(RecurrenceWidget_messages.editRecurrence)})),this.props.value&&RecurrenceWidget_jsx(Button.c,{basic:!0,color:"pink",className:"remove-recurrence",onClick:()=>{this.remove()},type:"button","aria-label":intl.formatMessage(RecurrenceWidget_messages.remove)},RecurrenceWidget_jsx(components.GWx,{name:delete_default(),size:"20px",title:intl.formatMessage(RecurrenceWidget_messages.remove)}))),RecurrenceWidget_jsx(Modal.c,{dimmer:dimmer,open:open,onClose:this.close,className:"recurrence-form",closeIcon:!0},RecurrenceWidget_jsx(Modal.c.Header,null,intl.formatMessage(RecurrenceWidget_messages.editRecurrence)," "),RecurrenceWidget_jsx(Modal.c.Content,{scrolling:!0},rruleSet.rrules().length>0&&RecurrenceWidget_jsx(Modal.c.Description,null,RecurrenceWidget_jsx(Segment.c,null,RecurrenceWidget_jsx(Form.c,null,RecurrenceWidget_jsx(components.MHJ,{id:"freq",title:intl.formatMessage(RecurrenceWidget_messages.repeat),getVocabulary:()=>{},getVocabularyTokenTitle:()=>{},choices:Object.keys(OPTIONS.frequences).map((t=>[t,intl.formatMessage(RecurrenceWidget_messages[t])])),value:formValues.freq,onChange:this.onChangeRule}),OPTIONS.frequences[formValues.freq].interval&&RecurrenceWidget_jsx(RecurrenceWidget_IntervalField,{label:intl.formatMessage(RecurrenceWidget_messages.repeatEvery),labelAfter:formValues.freq&&intl.formatMessage(RecurrenceWidget_messages["interval_"+formValues.freq]),value:formValues.interval,onChange:this.onChangeRule}),OPTIONS.frequences[formValues.freq].byday&&RecurrenceWidget_jsx(RecurrenceWidget_ByDayField,{label:intl.formatMessage(RecurrenceWidget_messages.repeatOn),value:formValues.byweekday,onChange:this.onChangeRule}),OPTIONS.frequences[formValues.freq].bymonth&&RecurrenceWidget_jsx(RecurrenceWidget_ByMonthField,{label:intl.formatMessage(RecurrenceWidget_messages.repeatOn),value:formValues.monthly,bymonthday:formValues.bymonthday,weekdayOfTheMonthIndex:formValues.weekdayOfTheMonthIndex,weekdayOfTheMonth:formValues.weekdayOfTheMonth,onChange:this.onChangeRule}),OPTIONS.frequences[formValues.freq].byyear&&RecurrenceWidget_jsx(RecurrenceWidget_ByYearField,{label:intl.formatMessage(RecurrenceWidget_messages.repeatOn),value:formValues.yearly,bymonthday:formValues.bymonthday,monthOfTheYear:formValues.monthOfTheYear,weekdayOfTheMonthIndex:formValues.weekdayOfTheMonthIndex,weekdayOfTheMonth:formValues.weekdayOfTheMonth,onChange:this.onChangeRule}),RecurrenceWidget_jsx(RecurrenceWidget_EndField,{value:formValues.recurrenceEnds,count:formValues.count,until:formValues.until,onChange:this.onChangeRule}))),RecurrenceWidget_jsx(Segment.c,null,RecurrenceWidget_jsx(RecurrenceWidget_Occurences,{rruleSet:rruleSet,exclude:this.exclude,undoExclude:this.undoExclude})),RecurrenceWidget_jsx(Segment.c,null,RecurrenceWidget_jsx(Header.c,{as:"h2"},intl.formatMessage(RecurrenceWidget_messages.add_date)),RecurrenceWidget_jsx(components.yY9,{id:"addDate",title:intl.formatMessage(RecurrenceWidget_messages.select_date_to_add_to_recurrence),dateOnly:!0,noPastDates:!0,onChange:(id,value)=>{this.addDate(""===value?void 0:value)}})))),RecurrenceWidget_jsx(Modal.c.Actions,null,RecurrenceWidget_jsx(Button.c,{className:"save",basic:!0,onClick:()=>{this.save()},"aria-label":intl.formatMessage(RecurrenceWidget_messages.save)},RecurrenceWidget_jsx(components.GWx,{name:save_default(),className:"circled",size:"30px",title:intl.formatMessage(RecurrenceWidget_messages.save)})))),map_default()(error,(message=>RecurrenceWidget_jsx(Label.c,{key:message,basic:!0,color:"red",pointing:!0},message))))),description&&RecurrenceWidget_jsx(Grid.c.Row,{stretched:!0},RecurrenceWidget_jsx(Grid.c.Column,{stretched:!0,width:"12"},RecurrenceWidget_jsx("p",{className:"help"},description)))))}}(0,defineProperty.c)(RecurrenceWidget,"defaultProps",{description:null,required:!1,error:[],value:null});var RecurrenceWidget_RecurrenceWidget=(0,redux.compose)((0,Loadable.yM)(["moment","rrule"]),(0,es.connect)((state=>({lang:state.intl.locale}))),injectIntl.cp)(RecurrenceWidget);RecurrenceWidget.__docgenInfo={description:"RecurrenceWidget component class.\n@function RecurrenceWidget\n@returns {string} Markup of the component.",methods:[{name:"editRecurrence",docblock:null,modifiers:[],params:[],returns:null},{name:"setRecurrenceStartEnd",docblock:null,modifiers:[],params:[],returns:null},{name:"getUTCDate",docblock:null,modifiers:[],params:[{name:"date",optional:!1,type:null}],returns:null},{name:"show",docblock:null,modifiers:[],params:[{name:"dimmer",optional:!1,type:null}],returns:null},{name:"close",docblock:null,modifiers:[],params:[],returns:null},{name:"getFreq",docblock:null,modifiers:[],params:[{name:"number",optional:!1,type:null},{name:"weekdays",optional:!1,type:null}],returns:null},{name:"getWeekday",docblock:null,modifiers:[],params:[{name:"number",optional:!1,type:null}],returns:null},{name:"getFormValues",docblock:"Called on init, to populate form values",modifiers:[],params:[{name:"rruleSet",optional:!1}],returns:null,description:"Called on init, to populate form values"},{name:"formValuesToRRuleOptions",docblock:null,modifiers:[],params:[{name:"formValues",optional:!1,type:null}],returns:null},{name:"updateRruleSet",docblock:null,modifiers:[],params:[{name:"rruleSet",optional:!1,type:null},{name:"formValues",optional:!1,type:null},{name:"field",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"getDefaultUntil",docblock:null,modifiers:[],params:[{name:"freq",optional:!1,type:null}],returns:null},{name:"changeField",docblock:null,modifiers:[],params:[{name:"formValues",optional:!1,type:null},{name:"field",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"onChangeRule",docblock:null,modifiers:[],params:[{name:"field",optional:!1,type:null},{name:"value",optional:!1,type:null}],returns:null},{name:"exclude",docblock:null,modifiers:[],params:[{name:"date",optional:!1,type:null}],returns:null},{name:"undoExclude",docblock:null,modifiers:[],params:[{name:"date",optional:!1,type:null}],returns:null},{name:"addDate",docblock:null,modifiers:[],params:[{name:"date",optional:!1,type:null}],returns:null},{name:"save",docblock:null,modifiers:[],params:[],returns:null},{name:"remove",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RecurrenceWidget",props:{description:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},required:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},error:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},id:{description:"",type:{name:"string"},required:!0},formData:{description:"",type:{name:"object"},required:!1},title:{description:"",type:{name:"string"},required:!0},onChange:{description:"",type:{name:"func"},required:!0}}}},"../../../node_modules/.pnpm/react-select@4.3.1_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0/node_modules/react-select/dist/react-select.esm.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NonceProvider:function(){return NonceProvider},components:function(){return _index_4bd03571_esm_js__WEBPACK_IMPORTED_MODULE_1__.c},createFilter:function(){return _Select_dbb12e54_esm_js__WEBPACK_IMPORTED_MODULE_0__.c},defaultTheme:function(){return _Select_dbb12e54_esm_js__WEBPACK_IMPORTED_MODULE_0__.d},mergeStyles:function(){return _Select_dbb12e54_esm_js__WEBPACK_IMPORTED_MODULE_0__.m}});var _Select_dbb12e54_esm_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/react-select@4.3.1_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0/node_modules/react-select/dist/Select-dbb12e54.esm.js"),_stateManager_845a3300_esm_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../../node_modules/.pnpm/react-select@4.3.1_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0/node_modules/react-select/dist/stateManager-845a3300.esm.js"),_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/createClass.js"),_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/inherits.js"),_index_4bd03571_esm_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/react-select@4.3.1_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0/node_modules/react-select/dist/index-4bd03571.esm.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),_emotion_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../../node_modules/.pnpm/@emotion+react@11.11.4_@types+react@18.2.27_react@18.2.0/node_modules/@emotion/react/dist/emotion-element-43c6fea0.browser.esm.js"),_emotion_cache__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/@emotion+cache@11.11.0/node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js"),memoize_one__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../../node_modules/.pnpm/memoize-one@5.2.1/node_modules/memoize-one/dist/memoize-one.esm.js"),NonceProvider=(__webpack_require__("../../../node_modules/.pnpm/react-input-autosize@3.0.0_react@18.2.0/node_modules/react-input-autosize/lib/AutosizeInput.js"),__webpack_require__("../../../node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/index.js"),function(_Component){(0,_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.c)(NonceProvider,_Component);var _super=(0,_index_4bd03571_esm_js__WEBPACK_IMPORTED_MODULE_1__._)(NonceProvider);function NonceProvider(props){var _this;return(0,_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_7__.c)(this,NonceProvider),(_this=_super.call(this,props)).createEmotionCache=function(nonce,key){return(0,_emotion_cache__WEBPACK_IMPORTED_MODULE_3__.c)({nonce:nonce,key:key})},_this.createEmotionCache=(0,memoize_one__WEBPACK_IMPORTED_MODULE_8__.c)(_this.createEmotionCache),_this}return(0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__.c)(NonceProvider,[{key:"render",value:function render(){var emotionCache=this.createEmotionCache(this.props.nonce,this.props.cacheKey);return react__WEBPACK_IMPORTED_MODULE_2__.createElement(_emotion_react__WEBPACK_IMPORTED_MODULE_10__.C,{value:emotionCache},this.props.children)}}]),NonceProvider}(react__WEBPACK_IMPORTED_MODULE_2__.Component)),index=(0,_stateManager_845a3300_esm_js__WEBPACK_IMPORTED_MODULE_11__.m)(_Select_dbb12e54_esm_js__WEBPACK_IMPORTED_MODULE_0__.S);__webpack_exports__.default=index}}]);