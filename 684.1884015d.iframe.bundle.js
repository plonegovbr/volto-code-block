"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[684],{"../../../node_modules/.pnpm/mermaid@10.8.0/node_modules/mermaid/dist/stateDiagram-v2-205e8e15.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{diagram:function(){return diagram}});var _styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/mermaid@10.8.0/node_modules/mermaid/dist/styles-4551667c.js"),_graph_03626afa_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../../node_modules/.pnpm/mermaid@10.8.0/node_modules/mermaid/dist/graph-03626afa.js"),_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/mermaid@10.8.0/node_modules/mermaid/dist/mermaid-4f066ae1.js"),_index_b5c99bd1_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../../node_modules/.pnpm/mermaid@10.8.0/node_modules/mermaid/dist/index-b5c99bd1.js");let nodeDb={},graphItemCount=0;function stateDomId(itemId="",counter=0,type="",typeSpacer="----"){return`state-${itemId}${null!==type&&type.length>0?`${typeSpacer}${type}`:""}-${counter}`}const setupNode=(g,parent,parsedItem,diagramStates,diagramDb,altFlag)=>{const itemId=parsedItem.id,classStr=function getClassesFromDbInfo(dbInfoItem){return null==dbInfoItem?"":dbInfoItem.classes?dbInfoItem.classes.join(" "):""}(diagramStates[itemId]);if("root"!==itemId){let shape="rect";!0===parsedItem.start&&(shape="start"),!1===parsedItem.start&&(shape="end"),parsedItem.type!==_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.D&&(shape=parsedItem.type),nodeDb[itemId]||(nodeDb[itemId]={id:itemId,shape:shape,description:_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.f.sanitizeText(itemId,(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.c)()),classes:`${classStr} statediagram-state`});const newNode=nodeDb[itemId];parsedItem.description&&(Array.isArray(newNode.description)?(newNode.shape="rectWithTitle",newNode.description.push(parsedItem.description)):newNode.description.length>0?(newNode.shape="rectWithTitle",newNode.description===itemId?newNode.description=[parsedItem.description]:newNode.description=[newNode.description,parsedItem.description]):(newNode.shape="rect",newNode.description=parsedItem.description),newNode.description=_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.f.sanitizeTextOrArray(newNode.description,(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.c)())),1===newNode.description.length&&"rectWithTitle"===newNode.shape&&(newNode.shape="rect"),!newNode.type&&parsedItem.doc&&(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.info("Setting cluster for ",itemId,getDir(parsedItem)),newNode.type="group",newNode.dir=getDir(parsedItem),newNode.shape=parsedItem.type===_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.a?"divider":"roundedWithTitle",newNode.classes=newNode.classes+" statediagram-cluster "+(altFlag?"statediagram-cluster-alt":""));const nodeData={labelStyle:"",shape:newNode.shape,labelText:newNode.description,classes:newNode.classes,style:"",id:itemId,dir:newNode.dir,domId:stateDomId(itemId,graphItemCount),type:newNode.type,padding:15,centerLabel:!0};if(parsedItem.note){const noteData={labelStyle:"",shape:"note",labelText:parsedItem.note.text,classes:"statediagram-note",style:"",id:itemId+"----note-"+graphItemCount,domId:stateDomId(itemId,graphItemCount,"note"),type:newNode.type,padding:15},groupData={labelStyle:"",shape:"noteGroup",labelText:parsedItem.note.text,classes:newNode.classes,style:"",id:itemId+"----parent",domId:stateDomId(itemId,graphItemCount,"parent"),type:"group",padding:0};graphItemCount++;const parentNodeId=itemId+"----parent";g.setNode(parentNodeId,groupData),g.setNode(noteData.id,noteData),g.setNode(itemId,nodeData),g.setParent(itemId,parentNodeId),g.setParent(noteData.id,parentNodeId);let from=itemId,to=noteData.id;"left of"===parsedItem.note.position&&(from=noteData.id,to=itemId),g.setEdge(from,to,{arrowhead:"none",arrowType:"",style:"fill:none",labelStyle:"",classes:"transition note-edge",arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal"})}else g.setNode(itemId,nodeData)}parent&&"root"!==parent.id&&(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.trace("Setting node ",itemId," to be child of its parent ",parent.id),g.setParent(itemId,parent.id)),parsedItem.doc&&(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.trace("Adding nodes children "),setupDoc(g,parsedItem,parsedItem.doc,diagramStates,diagramDb,!altFlag))},setupDoc=(g,parentParsedItem,doc,diagramStates,diagramDb,altFlag)=>{_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.trace("items",doc),doc.forEach((item=>{switch(item.stmt){case _styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.b:case _styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.D:setupNode(g,parentParsedItem,item,diagramStates,diagramDb,altFlag);break;case _styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.S:{setupNode(g,parentParsedItem,item.state1,diagramStates,diagramDb,altFlag),setupNode(g,parentParsedItem,item.state2,diagramStates,diagramDb,altFlag);const edgeData={id:"edge"+graphItemCount,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:"fill:none",labelStyle:"",label:_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.f.sanitizeText(item.description,(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.c)()),arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",classes:"transition"};g.setEdge(item.state1.id,item.state2.id,edgeData,graphItemCount),graphItemCount++}}}))},getDir=(parsedItem,defaultDir=_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.c)=>{let dir=defaultDir;if(parsedItem.doc)for(let i=0;i<parsedItem.doc.length;i++){const parsedItemDoc=parsedItem.doc[i];"dir"===parsedItemDoc.stmt&&(dir=parsedItemDoc.value)}return dir},renderer={setConf:function(cnf){const keys=Object.keys(cnf);for(const key of keys)cnf[key]},getClasses:function(text,diagramObj){return diagramObj.db.extract(diagramObj.db.getRootDocV2()),diagramObj.db.getClasses()},draw:async function(text,id,_version,diag){_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.info("Drawing state diagram (v2)",id),nodeDb={},diag.db.getDirection();const{securityLevel:securityLevel,state:conf}=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.c)(),nodeSpacing=conf.nodeSpacing||50,rankSpacing=conf.rankSpacing||50;_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.info(diag.db.getRootDocV2()),diag.db.extract(diag.db.getRootDocV2()),_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.info(diag.db.getRootDocV2());const diagramStates=diag.db.getStates(),g=new _graph_03626afa_js__WEBPACK_IMPORTED_MODULE_2__.G({multigraph:!0,compound:!0}).setGraph({rankdir:getDir(diag.db.getRootDocV2()),nodesep:nodeSpacing,ranksep:rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let sandboxElement;setupNode(g,void 0,diag.db.getRootDocV2(),diagramStates,diag.db,!0),"sandbox"===securityLevel&&(sandboxElement=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.j)("#i"+id));const root="sandbox"===securityLevel?(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.j)(sandboxElement.nodes()[0].contentDocument.body):(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.j)("body"),svg=root.select(`[id="${id}"]`),element=root.select("#"+id+" g");await(0,_index_b5c99bd1_js__WEBPACK_IMPORTED_MODULE_3__.r)(element,g,["barb"],"statediagram",id);_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.z.insertTitle(svg,"statediagramTitleText",conf.titleTopMargin,diag.db.getDiagramTitle());const bounds=svg.node().getBBox(),width=bounds.width+16,height=bounds.height+16;svg.attr("class","statediagram");const svgBounds=svg.node().getBBox();(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.k)(svg,height,width,conf.useMaxWidth);const vBox=`${svgBounds.x-8} ${svgBounds.y-8} ${width} ${height}`;_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_1__.l.debug(`viewBox ${vBox}`),svg.attr("viewBox",vBox);const labels=document.querySelectorAll('[id="'+id+'"] .edgeLabel .label');for(const label of labels){const dim=label.getBBox(),rect=document.createElementNS("http://www.w3.org/2000/svg","rect");rect.setAttribute("rx",0),rect.setAttribute("ry",0),rect.setAttribute("width",dim.width),rect.setAttribute("height",dim.height),label.insertBefore(rect,label.firstChild)}}},diagram={parser:_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.p,db:_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.d,renderer:renderer,styles:_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.s,init:cnf=>{cnf.state||(cnf.state={}),cnf.state.arrowMarkerAbsolute=cnf.arrowMarkerAbsolute,_styles_4551667c_js__WEBPACK_IMPORTED_MODULE_0__.d.clear()}}}}]);