/*! For license information please see 5868.9058135a.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5868],{"./node_modules/mermaid/dist/mindmap-definition-2bdb15f9.js":function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{diagram:function(){return diagram}});var _mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/mermaid/dist/mermaid-4f066ae1.js"),_createText_ac1cb2fc_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/mermaid/dist/createText-ac1cb2fc.js"),parser=function(){var o=function(k,v,o2,l){for(o2=o2||{},l=k.length;l--;o2[k[l]]=v);return o2},$V0=[1,4],$V1=[1,13],$V2=[1,12],$V3=[1,15],$V4=[1,16],$V5=[1,20],$V6=[1,19],$V7=[6,7,8],$V8=[1,26],$V9=[1,24],$Va=[1,25],$Vb=[6,7,11],$Vc=[1,6,13,15,16,19,22],$Vd=[1,33],$Ve=[1,34],$Vf=[1,6,7,11,13,15,16,19,22],parser2={trace:function trace(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 6:case 7:return yy;case 8:yy.getLogger().trace("Stop NL ");break;case 9:yy.getLogger().trace("Stop EOF ");break;case 11:yy.getLogger().trace("Stop NL2 ");break;case 12:yy.getLogger().trace("Stop EOF2 ");break;case 15:yy.getLogger().info("Node: ",$$[$0].id),yy.addNode($$[$0-1].length,$$[$0].id,$$[$0].descr,$$[$0].type);break;case 16:yy.getLogger().trace("Icon: ",$$[$0]),yy.decorateNode({icon:$$[$0]});break;case 17:case 21:yy.decorateNode({class:$$[$0]});break;case 18:yy.getLogger().trace("SPACELIST");break;case 19:yy.getLogger().trace("Node: ",$$[$0].id),yy.addNode(0,$$[$0].id,$$[$0].descr,$$[$0].type);break;case 20:yy.decorateNode({icon:$$[$0]});break;case 25:yy.getLogger().trace("node found ..",$$[$0-2]),this.$={id:$$[$0-1],descr:$$[$0-1],type:yy.getType($$[$0-2],$$[$0])};break;case 26:this.$={id:$$[$0],descr:$$[$0],type:yy.nodeType.DEFAULT};break;case 27:yy.getLogger().trace("node found ..",$$[$0-3]),this.$={id:$$[$0-3],descr:$$[$0-1],type:yy.getType($$[$0-2],$$[$0])}}},table:[{3:1,4:2,5:3,6:[1,5],8:$V0},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:$V0},{6:$V1,7:[1,10],9:9,12:11,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},o($V7,[2,3]),{1:[2,2]},o($V7,[2,4]),o($V7,[2,5]),{1:[2,6],6:$V1,12:21,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},{6:$V1,9:22,12:11,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},{6:$V8,7:$V9,10:23,11:$Va},o($Vb,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:$V5,22:$V6}),o($Vb,[2,18]),o($Vb,[2,19]),o($Vb,[2,20]),o($Vb,[2,21]),o($Vb,[2,23]),o($Vb,[2,24]),o($Vb,[2,26],{19:[1,30]}),{20:[1,31]},{6:$V8,7:$V9,10:32,11:$Va},{1:[2,7],6:$V1,12:21,13:$V2,14:14,15:$V3,16:$V4,17:17,18:18,19:$V5,22:$V6},o($Vc,[2,14],{7:$Vd,11:$Ve}),o($Vf,[2,8]),o($Vf,[2,9]),o($Vf,[2,10]),o($Vb,[2,15]),o($Vb,[2,16]),o($Vb,[2,17]),{20:[1,35]},{21:[1,36]},o($Vc,[2,13],{7:$Vd,11:$Ve}),o($Vf,[2,11]),o($Vf,[2,12]),{21:[1,37]},o($Vb,[2,25]),o($Vb,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function parseError(str,hash){if(!hash.recoverable){var error=new Error(str);throw error.hash=hash,error}this.trace(str)},parse:function parse(input){var self2=this,stack=[0],tstack=[],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,TERROR=2,EOF=1,args=lstack.slice.call(arguments,1),lexer2=Object.create(this.lexer),sharedState={yy:{}};for(var k in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k)&&(sharedState.yy[k]=this.yy[k]);lexer2.setInput(input,sharedState.yy),sharedState.yy.lexer=lexer2,sharedState.yy.parser=this,void 0===lexer2.yylloc&&(lexer2.yylloc={});var yyloc=lexer2.yylloc;lstack.push(yyloc);var ranges=lexer2.options&&lexer2.options.ranges;function lex(){var token;return"number"!=typeof(token=tstack.pop()||lexer2.lex()||EOF)&&(token instanceof Array&&(token=(tstack=token).pop()),token=self2.symbols_[token]||token),token}"function"==typeof sharedState.yy.parseError?this.parseError=sharedState.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var symbol,state,action,r,p,len,newState,expected,yyval={};;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(null==symbol&&(symbol=lex()),action=table[state]&&table[state][symbol]),void 0===action||!action.length||!action[0]){var errStr="";for(p in expected=[],table[state])this.terminals_[p]&&p>TERROR&&expected.push("'"+this.terminals_[p]+"'");errStr=lexer2.showPosition?"Parse error on line "+(yylineno+1)+":\n"+lexer2.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==EOF?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:lexer2.match,token:this.terminals_[symbol]||symbol,line:lexer2.yylineno,loc:yyloc,expected:expected})}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(lexer2.yytext),lstack.push(lexer2.yylloc),stack.push(action[1]),symbol=null,yyleng=lexer2.yyleng,yytext=lexer2.yytext,yylineno=lexer2.yylineno,yyloc=lexer2.yylloc;break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.apply(yyval,[yytext,yyleng,yylineno,sharedState.yy,action[1],vstack,lstack].concat(args))))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer={EOF:1,parseError:function parseError(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input,yy){return this.yy=yy||this.yy||{},this._input=input,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next2=this.match;return next2.length<20&&(next2+=this._input.substr(0,20-next2.length)),(next2.substr(0,20)+(next2.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},test_match:function(match,indexed_rule){var token,lines,backup;if(this.options.backtrack_lexer&&(backup={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(backup.yylloc.range=this.yylloc.range.slice(0))),(lines=match[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,indexed_rule,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token)return token;if(this._backtrack){for(var k in backup)this[k]=backup[k];return!1}return!1},next:function(){if(this.done)return this.EOF;var token,match,tempMatch,index;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length;i++)if((tempMatch=this._input.match(this.rules[rules[i]]))&&(!match||tempMatch[0].length>match[0].length)){if(match=tempMatch,index=i,this.options.backtrack_lexer){if(!1!==(token=this.test_match(tempMatch,rules[i])))return token;if(this._backtrack){match=!1;continue}return!1}if(!this.options.flex)break}return match?!1!==(token=this.test_match(match,rules[index]))&&token:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function lex(){var r=this.next();return r||this.lex()},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function _currentRules(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function topState(n){return(n=this.conditionStack.length-1-Math.abs(n||0))>=0?this.conditionStack[n]:"INITIAL"},pushState:function pushState(condition){this.begin(condition)},stateStackSize:function stateStackSize(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){switch($avoiding_name_collisions){case 0:return yy.getLogger().trace("Found comment",yy_.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:yy.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return yy.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:yy.getLogger().trace("end icon"),this.popState();break;case 10:return yy.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return yy.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return yy.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return yy.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:yy.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return yy.getLogger().trace("description:",yy_.yytext),"NODE_DESCR";case 27:return this.popState(),yy.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),yy.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),yy.getLogger().trace("node end ...",yy_.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),yy.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),yy.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return yy.getLogger().trace("Long description:",yy_.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};function Parser(){this.yy={}}return parser2.lexer=lexer,Parser.prototype=parser2,parser2.Parser=Parser,new Parser}();parser.parser=parser;const parser$1=parser;let nodes=[],cnt=0,elements={};const nodeType={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},db$1={clear:()=>{nodes=[],cnt=0,elements={}},addNode:(level,id,descr,type)=>{var _a,_b;_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l.info("addNode",level,id,descr,type);const conf=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.c)();let padding=(null==(_a=conf.mindmap)?void 0:_a.padding)??_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.V.mindmap.padding;switch(type){case nodeType.ROUNDED_RECT:case nodeType.RECT:case nodeType.HEXAGON:padding*=2}const node={id:cnt++,nodeId:(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.d)(id,conf),level:level,descr:(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.d)(descr,conf),type:type,children:[],width:(null==(_b=conf.mindmap)?void 0:_b.maxNodeWidth)??_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.V.mindmap.maxNodeWidth,padding:padding},parent=function(level){for(let i=nodes.length-1;i>=0;i--)if(nodes[i].level<level)return nodes[i];return null}(level);if(parent)parent.children.push(node),nodes.push(node);else{if(0!==nodes.length)throw new Error('There can be only one root. No parent could be found for ("'+node.descr+'")');nodes.push(node)}},getMindmap:()=>nodes.length>0?nodes[0]:null,nodeType:nodeType,getType:(startStr,endStr)=>{switch(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l.debug("In get type",startStr,endStr),startStr){case"[":return nodeType.RECT;case"(":return")"===endStr?nodeType.ROUNDED_RECT:nodeType.CLOUD;case"((":return nodeType.CIRCLE;case")":return nodeType.CLOUD;case"))":return nodeType.BANG;case"{{":return nodeType.HEXAGON;default:return nodeType.DEFAULT}},setElementForId:(id,element)=>{elements[id]=element},decorateNode:decoration=>{if(!decoration)return;const config=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.c)(),node=nodes[nodes.length-1];decoration.icon&&(node.icon=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.d)(decoration.icon,config)),decoration.class&&(node.class=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.d)(decoration.class,config))},type2Str:type=>{switch(type){case nodeType.DEFAULT:return"no-border";case nodeType.RECT:return"rect";case nodeType.ROUNDED_RECT:return"rounded-rect";case nodeType.CIRCLE:return"circle";case nodeType.CLOUD:return"cloud";case nodeType.BANG:return"bang";case nodeType.HEXAGON:return"hexgon";default:return"no-border"}},getLogger:()=>_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l,getElementById:id=>elements[id]};var module,cytoscape_umd={exports:{}};module=cytoscape_umd,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.O,module.exports=function(){function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj2){return typeof obj2}:function(obj2){return obj2&&"function"==typeof Symbol&&obj2.constructor===Symbol&&obj2!==Symbol.prototype?"symbol":typeof obj2})(obj)}function _classCallCheck(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i2=0;i2<props.length;i2++){var descriptor=props[i2];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _defineProperty$1(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i2){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i2)||_unsupportedIterableToArray(arr,i2)||_nonIterableRest()}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArrayLimit(arr,i2){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i2||_arr.length!==i2);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i2=0,arr2=new Array(len);i2<len;i2++)arr2[i2]=arr[i2];return arr2}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _window="undefined"==typeof window?null:window,navigator=_window?_window.navigator:null;_window&&_window.document;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof((function(){})),typeofhtmlele="undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement),instanceStr=function instanceStr2(obj){return obj&&obj.instanceString&&fn$6(obj.instanceString)?obj.instanceString():null},string=function string2(obj){return null!=obj&&_typeof(obj)==typeofstr},fn$6=function fn2(obj){return null!=obj&&_typeof(obj)===typeoffn},array=function array2(obj){return!elementOrCollection(obj)&&(Array.isArray?Array.isArray(obj):null!=obj&&obj instanceof Array)},plainObject=function plainObject2(obj){return null!=obj&&_typeof(obj)===typeofobj&&!array(obj)&&obj.constructor===Object},object=function object2(obj){return null!=obj&&_typeof(obj)===typeofobj},number$1=function number2(obj){return null!=obj&&_typeof(obj)===_typeof(1)&&!isNaN(obj)},integer=function integer2(obj){return number$1(obj)&&Math.floor(obj)===obj},htmlElement=function htmlElement2(obj){return"undefined"===typeofhtmlele?void 0:null!=obj&&obj instanceof HTMLElement},elementOrCollection=function elementOrCollection2(obj){return element(obj)||collection(obj)},element=function element2(obj){return"collection"===instanceStr(obj)&&obj._private.single},collection=function collection2(obj){return"collection"===instanceStr(obj)&&!obj._private.single},core=function core2(obj){return"core"===instanceStr(obj)},stylesheet=function stylesheet2(obj){return"stylesheet"===instanceStr(obj)},event=function event2(obj){return"event"===instanceStr(obj)},emptyString=function emptyString2(obj){return null==obj||!(""!==obj&&!obj.match(/^\s+$/))},domElement=function domElement2(obj){return"undefined"!=typeof HTMLElement&&obj instanceof HTMLElement},boundingBox=function boundingBox2(obj){return plainObject(obj)&&number$1(obj.x1)&&number$1(obj.x2)&&number$1(obj.y1)&&number$1(obj.y2)},promise=function promise2(obj){return object(obj)&&fn$6(obj.then)},ms=function ms2(){return navigator&&navigator.userAgent.match(/msie|trident|edge/i)},memoize$1=function memoize2(fn2,keyFn){keyFn||(keyFn=function keyFn2(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var args=[],i2=0;i2<arguments.length;i2++)args.push(arguments[i2]);return args.join("$")});var memoizedFn=function memoizedFn2(){var ret,self2=this,args=arguments,k=keyFn.apply(self2,args),cache2=memoizedFn2.cache;return(ret=cache2[k])||(ret=cache2[k]=fn2.apply(self2,args)),ret};return memoizedFn.cache={},memoizedFn},camel2dash=memoize$1((function(str){return str.replace(/([A-Z])/g,(function(v){return"-"+v.toLowerCase()}))})),dash2camel=memoize$1((function(str){return str.replace(/(-\w)/g,(function(v){return v[1].toUpperCase()}))})),prependCamel=memoize$1((function(prefix,str){return prefix+str[0].toUpperCase()+str.substring(1)}),(function(prefix,str){return prefix+"$"+str})),capitalize=function capitalize2(str){return emptyString(str)?str:str.charAt(0).toUpperCase()+str.substring(1)},number="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number+"[%]?)\\s*,\\s*("+number+"[%]?)\\s*,\\s*("+number+"[%]?)(?:\\s*,\\s*("+number+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number+"[%]?)\\s*,\\s*(?:"+number+"[%]?)\\s*,\\s*(?:"+number+"[%]?)(?:\\s*,\\s*(?:"+number+"))?\\)",hsla="hsl[a]?\\(("+number+")\\s*,\\s*("+number+"[%])\\s*,\\s*("+number+"[%])(?:\\s*,\\s*("+number+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number+")\\s*,\\s*(?:"+number+"[%])\\s*,\\s*(?:"+number+"[%])(?:\\s*,\\s*(?:"+number+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function ascending2(a,b){return a<b?-1:a>b?1:0},descending=function descending2(a,b){return-1*ascending(a,b)},extend=null!=Object.assign?Object.assign.bind(Object):function(tgt){for(var args=arguments,i2=1;i2<args.length;i2++){var obj=args[i2];if(null!=obj)for(var keys=Object.keys(obj),j=0;j<keys.length;j++){var k=keys[j];tgt[k]=obj[k]}}return tgt},hex2tuple=function hex2tuple2(hex){if((4===hex.length||7===hex.length)&&"#"===hex[0]){var r,g,b,base=16;return 4===hex.length?(r=parseInt(hex[1]+hex[1],base),g=parseInt(hex[2]+hex[2],base),b=parseInt(hex[3]+hex[3],base)):(r=parseInt(hex[1]+hex[2],base),g=parseInt(hex[3]+hex[4],base),b=parseInt(hex[5]+hex[6],base)),[r,g,b]}},hsl2tuple=function hsl2tuple2(hsl){var ret,h,s,l,a,r,g,b;function hue2rgb(p3,q2,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p3+6*(q2-p3)*t:t<.5?q2:t<2/3?p3+(q2-p3)*(2/3-t)*6:p3}var m=new RegExp("^"+hsla+"$").exec(hsl);if(m){if((h=parseInt(m[1]))<0?h=(360- -1*h%360)%360:h>360&&(h%=360),h/=360,(s=parseFloat(m[2]))<0||s>100)return;if(s/=100,(l=parseFloat(m[3]))<0||l>100)return;if(l/=100,void 0!==(a=m[4])&&((a=parseFloat(a))<0||a>1))return;if(0===s)r=g=b=Math.round(255*l);else{var q=l<.5?l*(1+s):l+s-l*s,p2=2*l-q;r=Math.round(255*hue2rgb(p2,q,h+1/3)),g=Math.round(255*hue2rgb(p2,q,h)),b=Math.round(255*hue2rgb(p2,q,h-1/3))}ret=[r,g,b,a]}return ret},rgb2tuple=function rgb2tuple2(rgb){var ret,m=new RegExp("^"+rgba+"$").exec(rgb);if(m){ret=[];for(var isPct=[],i2=1;i2<=3;i2++){var channel=m[i2];if("%"===channel[channel.length-1]&&(isPct[i2]=!0),channel=parseFloat(channel),isPct[i2]&&(channel=channel/100*255),channel<0||channel>255)return;ret.push(Math.floor(channel))}var atLeastOneIsPct=isPct[1]||isPct[2]||isPct[3],allArePct=isPct[1]&&isPct[2]&&isPct[3];if(atLeastOneIsPct&&!allArePct)return;var alpha=m[4];if(void 0!==alpha){if((alpha=parseFloat(alpha))<0||alpha>1)return;ret.push(alpha)}}return ret},colorname2tuple=function colorname2tuple2(color){return colors[color.toLowerCase()]},color2tuple=function color2tuple2(color){return(array(color)?color:null)||colorname2tuple(color)||hex2tuple(color)||rgb2tuple(color)||hsl2tuple(color)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function setMap2(options){for(var obj=options.map,keys=options.keys,l=keys.length,i2=0;i2<l;i2++){var key=keys[i2];if(plainObject(key))throw Error("Tried to set map with object key");i2<keys.length-1?(null==obj[key]&&(obj[key]={}),obj=obj[key]):obj[key]=options.value}},getMap=function getMap2(options){for(var obj=options.map,keys=options.keys,l=keys.length,i2=0;i2<l;i2++){var key=keys[i2];if(plainObject(key))throw Error("Tried to get map with object key");if(null==(obj=obj[key]))return obj}return obj};function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}var isObject_1=isObject,commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.O?_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.O:"undefined"!=typeof self?self:{};function createCommonjsModule(fn2,module2){return fn2(module2={exports:{}},module2.exports),module2.exports}var _freeGlobal="object"==typeof commonjsGlobal$1&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,_root=_freeGlobal||freeSelf||Function("return this")(),now_1=function(){return _root.Date.now()},reWhitespace=/\s/;function trimmedEndIndex(string2){for(var index=string2.length;index--&&reWhitespace.test(string2.charAt(index)););return index}var _trimmedEndIndex=trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim(string2){return string2?string2.slice(0,_trimmedEndIndex(string2)+1).replace(reTrimStart,""):string2}var _baseTrim=baseTrim,_Symbol=_root.Symbol,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,nativeObjectToString$1=objectProto$5.toString,symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(value){var isOwn=hasOwnProperty$4.call(value,symToStringTag$1),tag=value[symToStringTag$1];try{value[symToStringTag$1]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString$1.call(value);return unmasked&&(isOwn?value[symToStringTag$1]=tag:delete value[symToStringTag$1]),result}var _getRawTag=getRawTag,nativeObjectToString=Object.prototype.toString;function objectToString(value){return nativeObjectToString.call(value)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?_getRawTag(value):_objectToString(value)}var _baseGetTag=baseGetTag;function isObjectLike(value){return null!=value&&"object"==typeof value}var isObjectLike_1=isObjectLike,symbolTag="[object Symbol]";function isSymbol(value){return"symbol"==typeof value||isObjectLike_1(value)&&_baseGetTag(value)==symbolTag}var isSymbol_1=isSymbol,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(value){if("number"==typeof value)return value;if(isSymbol_1(value))return NAN;if(isObject_1(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject_1(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=_baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var toNumber_1=toNumber,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT$1);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now_1();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0}function flush(){return void 0===timerId?result:trailingEdge(now_1())}function debounced(){var time=now_1(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber_1(wait)||0,isObject_1(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber_1(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,debounced.flush=flush,debounced}var debounce_1=debounce,performance=_window?_window.performance:null,pnow=performance&&performance.now?function(){return performance.now()}:function(){return Date.now()},raf=function(){if(_window){if(_window.requestAnimationFrame)return function(fn2){_window.requestAnimationFrame(fn2)};if(_window.mozRequestAnimationFrame)return function(fn2){_window.mozRequestAnimationFrame(fn2)};if(_window.webkitRequestAnimationFrame)return function(fn2){_window.webkitRequestAnimationFrame(fn2)};if(_window.msRequestAnimationFrame)return function(fn2){_window.msRequestAnimationFrame(fn2)}}return function(fn2){fn2&&setTimeout((function(){fn2(pnow())}),1e3/60)}}(),requestAnimationFrame2=function requestAnimationFrame3(fn2){return raf(fn2)},performanceNow=pnow,DEFAULT_HASH_SEED=9261,K=65599,DEFAULT_HASH_SEED_ALT=5381,hashIterableInts=function hashIterableInts2(iterator){for(var entry,hash=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_HASH_SEED;!(entry=iterator.next()).done;)hash=hash*K+entry.value|0;return hash},hashInt=function hashInt2(num){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_HASH_SEED)*K+num|0},hashIntAlt=function hashIntAlt2(num){var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DEFAULT_HASH_SEED_ALT;return(seed<<5)+seed+num|0},combineHashes=function combineHashes2(hash1,hash2){return 2097152*hash1+hash2},combineHashesArray=function combineHashesArray2(hashes){return 2097152*hashes[0]+hashes[1]},hashArrays=function hashArrays2(hashes1,hashes2){return[hashInt(hashes1[0],hashes2[0]),hashIntAlt(hashes1[1],hashes2[1])]},hashIntsArray=function hashIntsArray2(ints,seed){var entry={value:0,done:!1},i2=0,length=ints.length;return hashIterableInts({next:function next2(){return i2<length?entry.value=ints[i2++]:entry.done=!0,entry}},seed)},hashString=function hashString2(str,seed){var entry={value:0,done:!1},i2=0,length=str.length;return hashIterableInts({next:function next2(){return i2<length?entry.value=str.charCodeAt(i2++):entry.done=!0,entry}},seed)},hashStrings=function hashStrings2(){return hashStringsArray(arguments)},hashStringsArray=function hashStringsArray2(strs){for(var hash,i2=0;i2<strs.length;i2++){var str=strs[i2];hash=0===i2?hashString(str):hashString(str,hash)}return hash},warningsEnabled=!0,warnSupported=null!=console.warn,traceSupported=null!=console.trace,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function trueify2(){return!0},falsify=function falsify2(){return!1},zeroify=function zeroify2(){return 0},noop$1=function noop2(){},error=function error2(msg){throw new Error(msg)},warnings=function warnings2(enabled){if(void 0===enabled)return warningsEnabled;warningsEnabled=!!enabled},warn=function warn2(msg){warnings()&&(warnSupported?console.warn(msg):(console.log(msg),traceSupported&&console.trace()))},clone=function clone2(obj){return extend({},obj)},copy=function copy2(obj){return null==obj?obj:array(obj)?obj.slice():plainObject(obj)?clone(obj):obj},copyArray$1=function copyArray2(arr){return arr.slice()},uuid=function uuid2(a,b){for(b=a="";a++<36;b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b},_staticEmptyObject={},staticEmptyObject=function staticEmptyObject2(){return _staticEmptyObject},defaults$g=function defaults2(_defaults){var keys=Object.keys(_defaults);return function(opts){for(var filledOpts={},i2=0;i2<keys.length;i2++){var key=keys[i2],optVal=null==opts?void 0:opts[key];filledOpts[key]=void 0===optVal?_defaults[key]:optVal}return filledOpts}},removeFromArray=function removeFromArray2(arr,ele,oneCopy){for(var i2=arr.length-1;i2>=0&&(arr[i2]!==ele||(arr.splice(i2,1),!oneCopy));i2--);},clearArray=function clearArray2(arr){arr.splice(0,arr.length)},push=function push2(arr,otherArr){for(var i2=0;i2<otherArr.length;i2++){var el=otherArr[i2];arr.push(el)}},getPrefixedProperty=function getPrefixedProperty2(obj,propName,prefix){return prefix&&(propName=prependCamel(prefix,propName)),obj[propName]},setPrefixedProperty=function setPrefixedProperty2(obj,propName,prefix,value){prefix&&(propName=prependCamel(prefix,propName)),obj[propName]=value},ObjectMap=function(){function ObjectMap2(){_classCallCheck(this,ObjectMap2),this._obj={}}return _createClass(ObjectMap2,[{key:"set",value:function set2(key,val){return this._obj[key]=val,this}},{key:"delete",value:function _delete(key){return this._obj[key]=void 0,this}},{key:"clear",value:function clear2(){this._obj={}}},{key:"has",value:function has(key){return void 0!==this._obj[key]}},{key:"get",value:function get2(key){return this._obj[key]}}]),ObjectMap2}(),Map$2="undefined"!=typeof Map?Map:ObjectMap,undef="undefined",ObjectSet=function(){function ObjectSet2(arrayOrObjectSet){if(_classCallCheck(this,ObjectSet2),this._obj=Object.create(null),this.size=0,null!=arrayOrObjectSet){var arr;arr=null!=arrayOrObjectSet.instanceString&&arrayOrObjectSet.instanceString()===this.instanceString()?arrayOrObjectSet.toArray():arrayOrObjectSet;for(var i2=0;i2<arr.length;i2++)this.add(arr[i2])}}return _createClass(ObjectSet2,[{key:"instanceString",value:function instanceString(){return"set"}},{key:"add",value:function add(val){var o=this._obj;1!==o[val]&&(o[val]=1,this.size++)}},{key:"delete",value:function _delete(val){var o=this._obj;1===o[val]&&(o[val]=0,this.size--)}},{key:"clear",value:function clear2(){this._obj=Object.create(null)}},{key:"has",value:function has(val){return 1===this._obj[val]}},{key:"toArray",value:function toArray(){var _this=this;return Object.keys(this._obj).filter((function(key){return _this.has(key)}))}},{key:"forEach",value:function forEach(callback,thisArg){return this.toArray().forEach(callback,thisArg)}}]),ObjectSet2}(),Set$1=("undefined"==typeof Set?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element=function Element2(cy,params){var restore=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==cy&&void 0!==params&&core(cy)){var group=params.group;if(null==group&&(group=params.data&&null!=params.data.source&&null!=params.data.target?"edges":"nodes"),"nodes"===group||"edges"===group){this.length=1,this[0]=this;var _p=this._private={cy:cy,single:!0,data:params.data||{},position:params.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:group,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!params.selected,selectable:void 0===params.selectable||!!params.selectable,locked:!!params.locked,grabbed:!1,grabbable:void 0===params.grabbable||!!params.grabbable,pannable:void 0===params.pannable?"edges"===group:!!params.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:params.scratch||{},edges:[],children:[],parent:params.parent&&params.parent.isNode()?params.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==_p.position.x&&(_p.position.x=0),null==_p.position.y&&(_p.position.y=0),params.renderedPosition){var rpos=params.renderedPosition,pan=cy.pan(),zoom=cy.zoom();_p.position={x:(rpos.x-pan.x)/zoom,y:(rpos.y-pan.y)/zoom}}var classes=[];array(params.classes)?classes=params.classes:string(params.classes)&&(classes=params.classes.split(/\s+/));for(var i2=0,l=classes.length;i2<l;i2++){var cls=classes[i2];cls&&""!==cls&&_p.classes.add(cls)}this.createEmitter();var bypass=params.style||params.css;bypass&&(warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(bypass)),(void 0===restore||restore)&&this.restore()}else error("An element must be of type `nodes` or `edges`; you specified `"+group+"`")}else error("An element must have a core reference and parameters set")},defineSearch=function defineSearch2(params){return params={bfs:params.bfs||!params.dfs,dfs:params.dfs||!params.bfs},function searchFn(roots,fn2,directed){var options;plainObject(roots)&&!elementOrCollection(roots)&&(roots=(options=roots).roots||options.root,fn2=options.visit,directed=options.directed),directed=2!==arguments.length||fn$6(fn2)?directed:fn2,fn2=fn$6(fn2)?fn2:function(){};for(var found,cy=this._private.cy,v=roots=string(roots)?this.filter(roots):roots,Q=[],connectedNodes=[],connectedBy={},id2depth={},V={},j=0,_this$byGroup=this.byGroup(),nodes2=_this$byGroup.nodes,edges=_this$byGroup.edges,i2=0;i2<v.length;i2++){var vi=v[i2],viId=vi.id();vi.isNode()&&(Q.unshift(vi),params.bfs&&(V[viId]=!0,connectedNodes.push(vi)),id2depth[viId]=0)}for(var _loop=function _loop2(){var v2=params.bfs?Q.shift():Q.pop(),vId=v2.id();if(params.dfs){if(V[vId])return"continue";V[vId]=!0,connectedNodes.push(v2)}var depth=id2depth[vId],prevEdge=connectedBy[vId],src=null!=prevEdge?prevEdge.source():null,tgt=null!=prevEdge?prevEdge.target():null,prevNode=null==prevEdge?void 0:v2.same(src)?tgt[0]:src[0],ret=void 0;if(!0===(ret=fn2(v2,prevEdge,prevNode,j++,depth)))return found=v2,"break";if(!1===ret)return"break";for(var vwEdges=v2.connectedEdges().filter((function(e2){return(!directed||e2.source().same(v2))&&edges.has(e2)})),_i2=0;_i2<vwEdges.length;_i2++){var e=vwEdges[_i2],w=e.connectedNodes().filter((function(n){return!n.same(v2)&&nodes2.has(n)})),wId=w.id();0===w.length||V[wId]||(w=w[0],Q.push(w),params.bfs&&(V[wId]=!0,connectedNodes.push(w)),connectedBy[wId]=e,id2depth[wId]=id2depth[vId]+1)}};0!==Q.length;){var _ret=_loop();if("continue"!==_ret&&"break"===_ret)break}for(var connectedEles=cy.collection(),_i=0;_i<connectedNodes.length;_i++){var node=connectedNodes[_i],edge=connectedBy[node.id()];null!=edge&&connectedEles.push(edge),connectedEles.push(node)}return{path:cy.collection(connectedEles),found:cy.collection(found)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch,elesfn$v.dfs=elesfn$v.depthFirstSearch;var heap$1=createCommonjsModule((function(module2,exports2){(function(){var Heap,defaultCmp,floor,heapify,heappop,heappush,heappushpop,heapreplace,insort,min2,nlargest,nsmallest,updateItem,_siftdown,_siftup;floor=Math.floor,min2=Math.min,defaultCmp=function(x,y){return x<y?-1:x>y?1:0},insort=function(a,x,lo,hi,cmp){var mid;if(null==lo&&(lo=0),null==cmp&&(cmp=defaultCmp),lo<0)throw new Error("lo must be non-negative");for(null==hi&&(hi=a.length);lo<hi;)cmp(x,a[mid=floor((lo+hi)/2)])<0?hi=mid:lo=mid+1;return[].splice.apply(a,[lo,lo-lo].concat(x)),x},heappush=function(array2,item,cmp){return null==cmp&&(cmp=defaultCmp),array2.push(item),_siftdown(array2,0,array2.length-1,cmp)},heappop=function(array2,cmp){var lastelt,returnitem;return null==cmp&&(cmp=defaultCmp),lastelt=array2.pop(),array2.length?(returnitem=array2[0],array2[0]=lastelt,_siftup(array2,0,cmp)):returnitem=lastelt,returnitem},heapreplace=function(array2,item,cmp){var returnitem;return null==cmp&&(cmp=defaultCmp),returnitem=array2[0],array2[0]=item,_siftup(array2,0,cmp),returnitem},heappushpop=function(array2,item,cmp){var _ref;return null==cmp&&(cmp=defaultCmp),array2.length&&cmp(array2[0],item)<0&&(item=(_ref=[array2[0],item])[0],array2[0]=_ref[1],_siftup(array2,0,cmp)),item},heapify=function(array2,cmp){var i2,_i,_len,_ref1,_results,_results1;for(null==cmp&&(cmp=defaultCmp),_results=[],_i=0,_len=(_ref1=function(){_results1=[];for(var _j=0,_ref=floor(array2.length/2);0<=_ref?_j<_ref:_j>_ref;0<=_ref?_j++:_j--)_results1.push(_j);return _results1}.apply(this).reverse()).length;_i<_len;_i++)i2=_ref1[_i],_results.push(_siftup(array2,i2,cmp));return _results},updateItem=function(array2,item,cmp){var pos;if(null==cmp&&(cmp=defaultCmp),-1!==(pos=array2.indexOf(item)))return _siftdown(array2,0,pos,cmp),_siftup(array2,pos,cmp)},nlargest=function(array2,n,cmp){var elem,result,_i,_len,_ref;if(null==cmp&&(cmp=defaultCmp),!(result=array2.slice(0,n)).length)return result;for(heapify(result,cmp),_i=0,_len=(_ref=array2.slice(n)).length;_i<_len;_i++)elem=_ref[_i],heappushpop(result,elem,cmp);return result.sort(cmp).reverse()},nsmallest=function(array2,n,cmp){var elem,los,result,_i,_j,_len,_ref,_ref1,_results;if(null==cmp&&(cmp=defaultCmp),10*n<=array2.length){if(!(result=array2.slice(0,n).sort(cmp)).length)return result;for(los=result[result.length-1],_i=0,_len=(_ref=array2.slice(n)).length;_i<_len;_i++)cmp(elem=_ref[_i],los)<0&&(insort(result,elem,0,null,cmp),result.pop(),los=result[result.length-1]);return result}for(heapify(array2,cmp),_results=[],_j=0,_ref1=min2(n,array2.length);0<=_ref1?_j<_ref1:_j>_ref1;0<=_ref1?++_j:--_j)_results.push(heappop(array2,cmp));return _results},_siftdown=function(array2,startpos,pos,cmp){var newitem,parent,parentpos;for(null==cmp&&(cmp=defaultCmp),newitem=array2[pos];pos>startpos&&cmp(newitem,parent=array2[parentpos=pos-1>>1])<0;)array2[pos]=parent,pos=parentpos;return array2[pos]=newitem},_siftup=function(array2,pos,cmp){var childpos,endpos,newitem,rightpos,startpos;for(null==cmp&&(cmp=defaultCmp),endpos=array2.length,startpos=pos,newitem=array2[pos],childpos=2*pos+1;childpos<endpos;)(rightpos=childpos+1)<endpos&&!(cmp(array2[childpos],array2[rightpos])<0)&&(childpos=rightpos),array2[pos]=array2[childpos],childpos=2*(pos=childpos)+1;return array2[pos]=newitem,_siftdown(array2,startpos,pos,cmp)},Heap=function(){function Heap2(cmp){this.cmp=null!=cmp?cmp:defaultCmp,this.nodes=[]}return Heap2.push=heappush,Heap2.pop=heappop,Heap2.replace=heapreplace,Heap2.pushpop=heappushpop,Heap2.heapify=heapify,Heap2.updateItem=updateItem,Heap2.nlargest=nlargest,Heap2.nsmallest=nsmallest,Heap2.prototype.push=function(x){return heappush(this.nodes,x,this.cmp)},Heap2.prototype.pop=function(){return heappop(this.nodes,this.cmp)},Heap2.prototype.peek=function(){return this.nodes[0]},Heap2.prototype.contains=function(x){return-1!==this.nodes.indexOf(x)},Heap2.prototype.replace=function(x){return heapreplace(this.nodes,x,this.cmp)},Heap2.prototype.pushpop=function(x){return heappushpop(this.nodes,x,this.cmp)},Heap2.prototype.heapify=function(){return heapify(this.nodes,this.cmp)},Heap2.prototype.updateItem=function(x){return updateItem(this.nodes,x,this.cmp)},Heap2.prototype.clear=function(){return this.nodes=[]},Heap2.prototype.empty=function(){return 0===this.nodes.length},Heap2.prototype.size=function(){return this.nodes.length},Heap2.prototype.clone=function(){var heap2;return(heap2=new Heap2).nodes=this.nodes.slice(0),heap2},Heap2.prototype.toArray=function(){return this.nodes.slice(0)},Heap2.prototype.insert=Heap2.prototype.push,Heap2.prototype.top=Heap2.prototype.peek,Heap2.prototype.front=Heap2.prototype.peek,Heap2.prototype.has=Heap2.prototype.contains,Heap2.prototype.copy=Heap2.prototype.clone,Heap2}(),function(root2,factory){module2.exports=factory()}(0,(function(){return Heap}))}).call(commonjsGlobal$1)})),heap=heap$1,dijkstraDefaults=defaults$g({root:null,weight:function weight(edge){return 1},directed:!1}),elesfn$u={dijkstra:function dijkstra(options){if(!plainObject(options)){var args=arguments;options={root:args[0],weight:args[1],directed:args[2]}}var _dijkstraDefaults=dijkstraDefaults(options),root2=_dijkstraDefaults.root,weight=_dijkstraDefaults.weight,directed=_dijkstraDefaults.directed,eles=this,weightFn=weight,source=string(root2)?this.filter(root2)[0]:root2[0],dist2={},prev={},knownDist={},_this$byGroup=this.byGroup(),nodes2=_this$byGroup.nodes,edges=_this$byGroup.edges;edges.unmergeBy((function(ele){return ele.isLoop()}));for(var getDist2=function getDist3(node2){return dist2[node2.id()]},setDist=function setDist2(node2,d){dist2[node2.id()]=d,Q.updateItem(node2)},Q=new heap((function(a,b){return getDist2(a)-getDist2(b)})),i2=0;i2<nodes2.length;i2++){var node=nodes2[i2];dist2[node.id()]=node.same(source)?0:1/0,Q.push(node)}for(var distBetween=function distBetween2(u2,v2){for(var smallestEdge,uvs=(directed?u2.edgesTo(v2):u2.edgesWith(v2)).intersect(edges),smallestDistance=1/0,_i=0;_i<uvs.length;_i++){var edge=uvs[_i],_weight=weightFn(edge);(_weight<smallestDistance||!smallestEdge)&&(smallestDistance=_weight,smallestEdge=edge)}return{edge:smallestEdge,dist:smallestDistance}};Q.size()>0;){var u=Q.pop(),smalletsDist=getDist2(u),uid=u.id();if(knownDist[uid]=smalletsDist,smalletsDist!==1/0)for(var neighbors=u.neighborhood().intersect(nodes2),_i2=0;_i2<neighbors.length;_i2++){var v=neighbors[_i2],vid=v.id(),vDist=distBetween(u,v),alt=smalletsDist+vDist.dist;alt<getDist2(v)&&(setDist(v,alt),prev[vid]={node:u,edge:vDist.edge})}}return{distanceTo:function distanceTo(node2){var target=string(node2)?nodes2.filter(node2)[0]:node2[0];return knownDist[target.id()]},pathTo:function pathTo(node2){var target=string(node2)?nodes2.filter(node2)[0]:node2[0],S=[],u2=target,uid2=u2.id();if(target.length>0)for(S.unshift(target);prev[uid2];){var p2=prev[uid2];S.unshift(p2.edge),S.unshift(p2.node),uid2=(u2=p2.node).id()}return eles.spawn(S)}}}},elesfn$t={kruskal:function kruskal(weightFn){weightFn=weightFn||function(edge2){return 1};for(var _this$byGroup=this.byGroup(),nodes2=_this$byGroup.nodes,edges=_this$byGroup.edges,numNodes=nodes2.length,forest=new Array(numNodes),A=nodes2,findSetIndex=function findSetIndex2(ele){for(var i3=0;i3<forest.length;i3++)if(forest[i3].has(ele))return i3},i2=0;i2<numNodes;i2++)forest[i2]=this.spawn(nodes2[i2]);for(var S=edges.sort((function(a,b){return weightFn(a)-weightFn(b)})),_i=0;_i<S.length;_i++){var edge=S[_i],u=edge.source()[0],v=edge.target()[0],setUIndex=findSetIndex(u),setVIndex=findSetIndex(v),setU=forest[setUIndex],setV=forest[setVIndex];setUIndex!==setVIndex&&(A.merge(edge),setU.merge(setV),forest.splice(setVIndex,1))}return A}},aStarDefaults=defaults$g({root:null,goal:null,weight:function weight(edge){return 1},heuristic:function heuristic(edge){return 0},directed:!1}),elesfn$s={aStar:function aStar(options){var cy=this.cy(),_aStarDefaults=aStarDefaults(options),root2=_aStarDefaults.root,goal=_aStarDefaults.goal,heuristic=_aStarDefaults.heuristic,directed=_aStarDefaults.directed,weight=_aStarDefaults.weight;root2=cy.collection(root2)[0],goal=cy.collection(goal)[0];var cMin,cMinId,sid=root2.id(),tid=goal.id(),gScore={},fScore={},closedSetIds={},openSet=new heap((function(a,b){return fScore[a.id()]-fScore[b.id()]})),openSetIds=new Set$1,cameFrom={},cameFromEdge={},addToOpenSet=function addToOpenSet2(ele,id){openSet.push(ele),openSetIds.add(id)},popFromOpenSet=function popFromOpenSet2(){cMin=openSet.pop(),cMinId=cMin.id(),openSetIds.delete(cMinId)},isInOpenSet=function isInOpenSet2(id){return openSetIds.has(id)};addToOpenSet(root2,sid),gScore[sid]=0,fScore[sid]=heuristic(root2);for(var steps=0;openSet.size()>0;){if(popFromOpenSet(),steps++,cMinId===tid){for(var path=[],pathNode=goal,pathNodeId=tid,pathEdge=cameFromEdge[pathNodeId];path.unshift(pathNode),null!=pathEdge&&path.unshift(pathEdge),null!=(pathNode=cameFrom[pathNodeId]);)pathEdge=cameFromEdge[pathNodeId=pathNode.id()];return{found:!0,distance:gScore[cMinId],path:this.spawn(path),steps:steps}}closedSetIds[cMinId]=!0;for(var vwEdges=cMin._private.edges,i2=0;i2<vwEdges.length;i2++){var e=vwEdges[i2];if(this.hasElementWithId(e.id())&&(!directed||e.data("source")===cMinId)){var wSrc=e.source(),wTgt=e.target(),w=wSrc.id()!==cMinId?wSrc:wTgt,wid=w.id();if(this.hasElementWithId(wid)&&!closedSetIds[wid]){var tempScore=gScore[cMinId]+weight(e);isInOpenSet(wid)?tempScore<gScore[wid]&&(gScore[wid]=tempScore,fScore[wid]=tempScore+heuristic(w),cameFrom[wid]=cMin,cameFromEdge[wid]=e):(gScore[wid]=tempScore,fScore[wid]=tempScore+heuristic(w),addToOpenSet(w,wid),cameFrom[wid]=cMin,cameFromEdge[wid]=e)}}}}return{found:!1,distance:void 0,path:void 0,steps:steps}}},floydWarshallDefaults=defaults$g({weight:function weight(edge){return 1},directed:!1}),elesfn$r={floydWarshall:function floydWarshall(options){for(var cy=this.cy(),_floydWarshallDefault=floydWarshallDefaults(options),weight=_floydWarshallDefault.weight,directed=_floydWarshallDefault.directed,weightFn=weight,_this$byGroup=this.byGroup(),nodes2=_this$byGroup.nodes,edges=_this$byGroup.edges,N=nodes2.length,Nsq=N*N,indexOf=function indexOf2(node){return nodes2.indexOf(node)},atIndex=function atIndex2(i3){return nodes2[i3]},dist2=new Array(Nsq),n=0;n<Nsq;n++){var j=n%N,i2=(n-j)/N;dist2[n]=i2===j?0:1/0}for(var next2=new Array(Nsq),edgeNext=new Array(Nsq),_i=0;_i<edges.length;_i++){var edge=edges[_i],src=edge.source()[0],tgt=edge.target()[0];if(src!==tgt){var s=indexOf(src),t=indexOf(tgt),st=s*N+t,_weight=weightFn(edge);if(dist2[st]>_weight&&(dist2[st]=_weight,next2[st]=t,edgeNext[st]=edge),!directed){var ts=t*N+s;!directed&&dist2[ts]>_weight&&(dist2[ts]=_weight,next2[ts]=s,edgeNext[ts]=edge)}}}for(var k=0;k<N;k++)for(var _i2=0;_i2<N;_i2++)for(var ik=_i2*N+k,_j=0;_j<N;_j++){var ij=_i2*N+_j,kj=k*N+_j;dist2[ik]+dist2[kj]<dist2[ij]&&(dist2[ij]=dist2[ik]+dist2[kj],next2[ij]=next2[ik])}var getArgEle=function getArgEle2(ele){return(string(ele)?cy.filter(ele):ele)[0]},indexOfArgEle=function indexOfArgEle2(ele){return indexOf(getArgEle(ele))};return{distance:function distance(from,to){var i3=indexOfArgEle(from),j2=indexOfArgEle(to);return dist2[i3*N+j2]},path:function path(from,to){var i3=indexOfArgEle(from),j2=indexOfArgEle(to),fromNode=atIndex(i3);if(i3===j2)return fromNode.collection();if(null==next2[i3*N+j2])return cy.collection();var edge2,path2=cy.collection(),prev=i3;for(path2.merge(fromNode);i3!==j2;)prev=i3,i3=next2[i3*N+j2],edge2=edgeNext[prev*N+i3],path2.merge(edge2),path2.merge(atIndex(i3));return path2}}}},bellmanFordDefaults=defaults$g({weight:function weight(edge){return 1},directed:!1,root:null}),elesfn$q={bellmanFord:function bellmanFord(options){var _this=this,_bellmanFordDefaults=bellmanFordDefaults(options),weight=_bellmanFordDefaults.weight,directed=_bellmanFordDefaults.directed,root2=_bellmanFordDefaults.root,weightFn=weight,eles=this,cy=this.cy(),_this$byGroup=this.byGroup(),edges=_this$byGroup.edges,nodes2=_this$byGroup.nodes,numNodes=nodes2.length,infoMap=new Map$2,hasNegativeWeightCycle=!1,negativeWeightCycles=[];root2=cy.collection(root2)[0],edges.unmergeBy((function(edge2){return edge2.isLoop()}));for(var numEdges=edges.length,getInfo2=function getInfo3(node2){var obj=infoMap.get(node2.id());return obj||(obj={},infoMap.set(node2.id(),obj)),obj},getNodeFromTo=function getNodeFromTo2(to){return(string(to)?cy.$(to):to)[0]},distanceTo=function distanceTo2(to){return getInfo2(getNodeFromTo(to)).dist},pathTo=function pathTo2(to){for(var thisStart=arguments.length>1&&void 0!==arguments[1]?arguments[1]:root2,path=[],node2=getNodeFromTo(to);;){if(null==node2)return _this.spawn();var _getInfo=getInfo2(node2),edge2=_getInfo.edge,pred=_getInfo.pred;if(path.unshift(node2[0]),node2.same(thisStart)&&path.length>0)break;null!=edge2&&path.unshift(edge2),node2=pred}return eles.spawn(path)},i2=0;i2<numNodes;i2++){var node=nodes2[i2],info=getInfo2(node);node.same(root2)?info.dist=0:info.dist=1/0,info.pred=null,info.edge=null}for(var replacedEdge=!1,checkForEdgeReplacement=function checkForEdgeReplacement2(node1,node2,edge2,info1,info2,weight2){var dist2=info1.dist+weight2;dist2<info2.dist&&!edge2.same(info1.edge)&&(info2.dist=dist2,info2.pred=node1,info2.edge=edge2,replacedEdge=!0)},_i=1;_i<numNodes;_i++){replacedEdge=!1;for(var e=0;e<numEdges;e++){var edge=edges[e],src=edge.source(),tgt=edge.target(),_weight=weightFn(edge),srcInfo=getInfo2(src),tgtInfo=getInfo2(tgt);checkForEdgeReplacement(src,tgt,edge,srcInfo,tgtInfo,_weight),directed||checkForEdgeReplacement(tgt,src,edge,tgtInfo,srcInfo,_weight)}if(!replacedEdge)break}if(replacedEdge)for(var negativeWeightCycleIds=[],_e=0;_e<numEdges;_e++){var _edge=edges[_e],_src=_edge.source(),_tgt=_edge.target(),_weight2=weightFn(_edge),srcDist=getInfo2(_src).dist,tgtDist=getInfo2(_tgt).dist;if(srcDist+_weight2<tgtDist||!directed&&tgtDist+_weight2<srcDist){if(hasNegativeWeightCycle||(warn("Graph contains a negative weight cycle for Bellman-Ford"),hasNegativeWeightCycle=!0),!1===options.findNegativeWeightCycles)break;var negativeNodes=[];srcDist+_weight2<tgtDist&&negativeNodes.push(_src),!directed&&tgtDist+_weight2<srcDist&&negativeNodes.push(_tgt);for(var numNegativeNodes=negativeNodes.length,n=0;n<numNegativeNodes;n++){var start=negativeNodes[n],cycle=[start];cycle.push(getInfo2(start).edge);for(var _node=getInfo2(start).pred;-1===cycle.indexOf(_node);)cycle.push(_node),cycle.push(getInfo2(_node).edge),_node=getInfo2(_node).pred;for(var smallestId=(cycle=cycle.slice(cycle.indexOf(_node)))[0].id(),smallestIndex=0,c=2;c<cycle.length;c+=2)cycle[c].id()<smallestId&&(smallestId=cycle[c].id(),smallestIndex=c);(cycle=cycle.slice(smallestIndex).concat(cycle.slice(0,smallestIndex))).push(cycle[0]);var cycleId=cycle.map((function(el){return el.id()})).join(",");-1===negativeWeightCycleIds.indexOf(cycleId)&&(negativeWeightCycles.push(eles.spawn(cycle)),negativeWeightCycleIds.push(cycleId))}}}return{distanceTo:distanceTo,pathTo:pathTo,hasNegativeWeightCycle:hasNegativeWeightCycle,negativeWeightCycles:negativeWeightCycles}}},sqrt2=Math.sqrt(2),collapse=function collapse2(edgeIndex,nodeMap,remainingEdges){0===remainingEdges.length&&error("Karger-Stein must be run on a connected (sub)graph");for(var edgeInfo=remainingEdges[edgeIndex],sourceIn=edgeInfo[1],targetIn=edgeInfo[2],partition1=nodeMap[sourceIn],partition2=nodeMap[targetIn],newEdges=remainingEdges,i2=newEdges.length-1;i2>=0;i2--){var edge=newEdges[i2],src=edge[1],tgt=edge[2];(nodeMap[src]===partition1&&nodeMap[tgt]===partition2||nodeMap[src]===partition2&&nodeMap[tgt]===partition1)&&newEdges.splice(i2,1)}for(var _i=0;_i<newEdges.length;_i++){var _edge=newEdges[_i];_edge[1]===partition2?(newEdges[_i]=_edge.slice(),newEdges[_i][1]=partition1):_edge[2]===partition2&&(newEdges[_i]=_edge.slice(),newEdges[_i][2]=partition1)}for(var _i2=0;_i2<nodeMap.length;_i2++)nodeMap[_i2]===partition2&&(nodeMap[_i2]=partition1);return newEdges},contractUntil=function contractUntil2(metaNodeMap,remainingEdges,size,sizeLimit){for(;size>sizeLimit;){var edgeIndex=Math.floor(Math.random()*remainingEdges.length);remainingEdges=collapse(edgeIndex,metaNodeMap,remainingEdges),size--}return remainingEdges},elesfn$p={kargerStein:function kargerStein(){var _this=this,_this$byGroup=this.byGroup(),nodes2=_this$byGroup.nodes,edges=_this$byGroup.edges;edges.unmergeBy((function(edge){return edge.isLoop()}));var numNodes=nodes2.length,numEdges=edges.length,numIter=Math.ceil(Math.pow(Math.log(numNodes)/Math.LN2,2)),stopSize=Math.floor(numNodes/sqrt2);if(!(numNodes<2)){for(var edgeIndexes=[],i2=0;i2<numEdges;i2++){var e=edges[i2];edgeIndexes.push([i2,nodes2.indexOf(e.source()),nodes2.indexOf(e.target())])}for(var minCutSize=1/0,minCutEdgeIndexes=[],minCutNodeMap=new Array(numNodes),metaNodeMap=new Array(numNodes),metaNodeMap2=new Array(numNodes),copyNodesMap=function copyNodesMap2(from,to){for(var _i3=0;_i3<numNodes;_i3++)to[_i3]=from[_i3]},iter=0;iter<=numIter;iter++){for(var _i4=0;_i4<numNodes;_i4++)metaNodeMap[_i4]=_i4;var edgesState=contractUntil(metaNodeMap,edgeIndexes.slice(),numNodes,stopSize),edgesState2=edgesState.slice();copyNodesMap(metaNodeMap,metaNodeMap2);var res1=contractUntil(metaNodeMap,edgesState,stopSize,2),res2=contractUntil(metaNodeMap2,edgesState2,stopSize,2);res1.length<=res2.length&&res1.length<minCutSize?(minCutSize=res1.length,minCutEdgeIndexes=res1,copyNodesMap(metaNodeMap,minCutNodeMap)):res2.length<=res1.length&&res2.length<minCutSize&&(minCutSize=res2.length,minCutEdgeIndexes=res2,copyNodesMap(metaNodeMap2,minCutNodeMap))}for(var cut=this.spawn(minCutEdgeIndexes.map((function(e2){return edges[e2[0]]}))),partition1=this.spawn(),partition2=this.spawn(),witnessNodePartition=minCutNodeMap[0],_i5=0;_i5<minCutNodeMap.length;_i5++){var partitionId=minCutNodeMap[_i5],node=nodes2[_i5];partitionId===witnessNodePartition?partition1.merge(node):partition2.merge(node)}var constructComponent=function constructComponent2(subset){var component=_this.spawn();return subset.forEach((function(node2){component.merge(node2),node2.connectedEdges().forEach((function(edge){_this.contains(edge)&&!cut.contains(edge)&&component.merge(edge)}))})),component},components=[constructComponent(partition1),constructComponent(partition2)];return{cut:cut,components:components,partition1:partition1,partition2:partition2}}error("At least 2 nodes are required for Karger-Stein algorithm")}},copyPosition=function copyPosition2(p2){return{x:p2.x,y:p2.y}},modelToRenderedPosition=function modelToRenderedPosition2(p2,zoom,pan){return{x:p2.x*zoom+pan.x,y:p2.y*zoom+pan.y}},renderedToModelPosition=function renderedToModelPosition2(p2,zoom,pan){return{x:(p2.x-pan.x)/zoom,y:(p2.y-pan.y)/zoom}},array2point=function array2point2(arr){return{x:arr[0],y:arr[1]}},min=function min2(arr){for(var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,min3=1/0,i2=begin;i2<end;i2++){var val=arr[i2];isFinite(val)&&(min3=Math.min(val,min3))}return min3},max=function max2(arr){for(var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,max3=-1/0,i2=begin;i2<end;i2++){var val=arr[i2];isFinite(val)&&(max3=Math.max(val,max3))}return max3},mean=function mean2(arr){for(var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,total=0,n=0,i2=begin;i2<end;i2++){var val=arr[i2];isFinite(val)&&(total+=val,n++)}return total/n},median=function median2(arr){var begin=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,end=arguments.length>2&&void 0!==arguments[2]?arguments[2]:arr.length,sort=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],includeHoles=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(end<arr.length&&arr.splice(end,arr.length-end),begin>0&&arr.splice(0,begin)):arr=arr.slice(begin,end);for(var off=0,i2=arr.length-1;i2>=0;i2--){var v=arr[i2];includeHoles?isFinite(v)||(arr[i2]=-1/0,off++):arr.splice(i2,1)}sort&&arr.sort((function(a,b){return a-b}));var len=arr.length,mid=Math.floor(len/2);return len%2!=0?arr[mid+1+off]:(arr[mid-1+off]+arr[mid+off])/2},deg2rad=function deg2rad2(deg){return Math.PI*deg/180},getAngleFromDisp=function getAngleFromDisp2(dispX,dispY){return Math.atan2(dispY,dispX)-Math.PI/2},log2=Math.log2||function(n){return Math.log(n)/Math.log(2)},signum=function signum2(x){return x>0?1:x<0?-1:0},dist=function dist2(p1,p2){return Math.sqrt(sqdist(p1,p2))},sqdist=function sqdist2(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return dx*dx+dy*dy},inPlaceSumNormalize=function inPlaceSumNormalize2(v){for(var length=v.length,total=0,i2=0;i2<length;i2++)total+=v[i2];for(var _i=0;_i<length;_i++)v[_i]=v[_i]/total;return v},qbezierAt=function qbezierAt2(p0,p1,p2,t){return(1-t)*(1-t)*p0+2*(1-t)*t*p1+t*t*p2},qbezierPtAt=function qbezierPtAt2(p0,p1,p2,t){return{x:qbezierAt(p0.x,p1.x,p2.x,t),y:qbezierAt(p0.y,p1.y,p2.y,t)}},lineAt=function lineAt2(p0,p1,t,d){var vec={x:p1.x-p0.x,y:p1.y-p0.y},vecDist=dist(p0,p1),normVec={x:vec.x/vecDist,y:vec.y/vecDist};return t=null==t?0:t,d=null!=d?d:t*vecDist,{x:p0.x+normVec.x*d,y:p0.y+normVec.y*d}},bound=function bound2(min2,val,max2){return Math.max(min2,Math.min(max2,val))},makeBoundingBox=function makeBoundingBox2(bb){if(null==bb)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=bb.x1&&null!=bb.y1){if(null!=bb.x2&&null!=bb.y2&&bb.x2>=bb.x1&&bb.y2>=bb.y1)return{x1:bb.x1,y1:bb.y1,x2:bb.x2,y2:bb.y2,w:bb.x2-bb.x1,h:bb.y2-bb.y1};if(null!=bb.w&&null!=bb.h&&bb.w>=0&&bb.h>=0)return{x1:bb.x1,y1:bb.y1,x2:bb.x1+bb.w,y2:bb.y1+bb.h,w:bb.w,h:bb.h}}},copyBoundingBox=function copyBoundingBox2(bb){return{x1:bb.x1,x2:bb.x2,w:bb.w,y1:bb.y1,y2:bb.y2,h:bb.h}},clearBoundingBox=function clearBoundingBox2(bb){bb.x1=1/0,bb.y1=1/0,bb.x2=-1/0,bb.y2=-1/0,bb.w=0,bb.h=0},shiftBoundingBox=function shiftBoundingBox2(bb,dx,dy){return{x1:bb.x1+dx,x2:bb.x2+dx,y1:bb.y1+dy,y2:bb.y2+dy,w:bb.w,h:bb.h}},updateBoundingBox=function updateBoundingBox2(bb1,bb2){bb1.x1=Math.min(bb1.x1,bb2.x1),bb1.x2=Math.max(bb1.x2,bb2.x2),bb1.w=bb1.x2-bb1.x1,bb1.y1=Math.min(bb1.y1,bb2.y1),bb1.y2=Math.max(bb1.y2,bb2.y2),bb1.h=bb1.y2-bb1.y1},expandBoundingBoxByPoint=function expandBoundingBoxByPoint2(bb,x,y){bb.x1=Math.min(bb.x1,x),bb.x2=Math.max(bb.x2,x),bb.w=bb.x2-bb.x1,bb.y1=Math.min(bb.y1,y),bb.y2=Math.max(bb.y2,y),bb.h=bb.y2-bb.y1},expandBoundingBox=function expandBoundingBox2(bb){var padding=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return bb.x1-=padding,bb.x2+=padding,bb.y1-=padding,bb.y2+=padding,bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1,bb},expandBoundingBoxSides=function expandBoundingBoxSides2(bb){var top,right,bottom,left,padding=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===padding.length)top=right=bottom=left=padding[0];else if(2===padding.length)top=bottom=padding[0],left=right=padding[1];else if(4===padding.length){var _padding=_slicedToArray(padding,4);top=_padding[0],right=_padding[1],bottom=_padding[2],left=_padding[3]}return bb.x1-=left,bb.x2+=right,bb.y1-=top,bb.y2+=bottom,bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1,bb},assignBoundingBox=function assignBoundingBox2(bb1,bb2){bb1.x1=bb2.x1,bb1.y1=bb2.y1,bb1.x2=bb2.x2,bb1.y2=bb2.y2,bb1.w=bb1.x2-bb1.x1,bb1.h=bb1.y2-bb1.y1},boundingBoxesIntersect=function boundingBoxesIntersect2(bb1,bb2){return!(bb1.x1>bb2.x2||bb2.x1>bb1.x2||bb1.x2<bb2.x1||bb2.x2<bb1.x1||bb1.y2<bb2.y1||bb2.y2<bb1.y1||bb1.y1>bb2.y2||bb2.y1>bb1.y2)},inBoundingBox=function inBoundingBox2(bb,x,y){return bb.x1<=x&&x<=bb.x2&&bb.y1<=y&&y<=bb.y2},pointInBoundingBox=function pointInBoundingBox2(bb,pt){return inBoundingBox(bb,pt.x,pt.y)},boundingBoxInBoundingBox=function boundingBoxInBoundingBox2(bb1,bb2){return inBoundingBox(bb1,bb2.x1,bb2.y1)&&inBoundingBox(bb1,bb2.x2,bb2.y2)},roundRectangleIntersectLine=function roundRectangleIntersectLine2(x,y,nodeX,nodeY,width,height,padding){var straightLineIntersections,cornerRadius=getRoundRectangleRadius(width,height),halfWidth=width/2,halfHeight=height/2,topStartY=nodeY-halfHeight-padding;if((straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,nodeX-halfWidth+cornerRadius-padding,topStartY,nodeX+halfWidth-cornerRadius+padding,topStartY,!1)).length>0)return straightLineIntersections;var rightStartX=nodeX+halfWidth+padding;if((straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,rightStartX,nodeY-halfHeight+cornerRadius-padding,rightStartX,nodeY+halfHeight-cornerRadius+padding,!1)).length>0)return straightLineIntersections;var bottomStartY=nodeY+halfHeight+padding;if((straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,nodeX-halfWidth+cornerRadius-padding,bottomStartY,nodeX+halfWidth-cornerRadius+padding,bottomStartY,!1)).length>0)return straightLineIntersections;var arcIntersections,leftStartX=nodeX-halfWidth-padding;if((straightLineIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,leftStartX,nodeY-halfHeight+cornerRadius-padding,leftStartX,nodeY+halfHeight-cornerRadius+padding,!1)).length>0)return straightLineIntersections;var topLeftCenterX=nodeX-halfWidth+cornerRadius,topLeftCenterY=nodeY-halfHeight+cornerRadius;if((arcIntersections=intersectLineCircle(x,y,nodeX,nodeY,topLeftCenterX,topLeftCenterY,cornerRadius+padding)).length>0&&arcIntersections[0]<=topLeftCenterX&&arcIntersections[1]<=topLeftCenterY)return[arcIntersections[0],arcIntersections[1]];var topRightCenterX=nodeX+halfWidth-cornerRadius,topRightCenterY=nodeY-halfHeight+cornerRadius;if((arcIntersections=intersectLineCircle(x,y,nodeX,nodeY,topRightCenterX,topRightCenterY,cornerRadius+padding)).length>0&&arcIntersections[0]>=topRightCenterX&&arcIntersections[1]<=topRightCenterY)return[arcIntersections[0],arcIntersections[1]];var bottomRightCenterX=nodeX+halfWidth-cornerRadius,bottomRightCenterY=nodeY+halfHeight-cornerRadius;if((arcIntersections=intersectLineCircle(x,y,nodeX,nodeY,bottomRightCenterX,bottomRightCenterY,cornerRadius+padding)).length>0&&arcIntersections[0]>=bottomRightCenterX&&arcIntersections[1]>=bottomRightCenterY)return[arcIntersections[0],arcIntersections[1]];var bottomLeftCenterX=nodeX-halfWidth+cornerRadius,bottomLeftCenterY=nodeY+halfHeight-cornerRadius;return(arcIntersections=intersectLineCircle(x,y,nodeX,nodeY,bottomLeftCenterX,bottomLeftCenterY,cornerRadius+padding)).length>0&&arcIntersections[0]<=bottomLeftCenterX&&arcIntersections[1]>=bottomLeftCenterY?[arcIntersections[0],arcIntersections[1]]:[]},inLineVicinity=function inLineVicinity2(x,y,lx1,ly1,lx2,ly2,tolerance){var t=tolerance,x1=Math.min(lx1,lx2),x2=Math.max(lx1,lx2),y1=Math.min(ly1,ly2),y2=Math.max(ly1,ly2);return x1-t<=x&&x<=x2+t&&y1-t<=y&&y<=y2+t},inBezierVicinity=function inBezierVicinity2(x,y,x1,y1,x2,y2,x3,y3,tolerance){var bb={x1:Math.min(x1,x3,x2)-tolerance,x2:Math.max(x1,x3,x2)+tolerance,y1:Math.min(y1,y3,y2)-tolerance,y2:Math.max(y1,y3,y2)+tolerance};return!(x<bb.x1||x>bb.x2||y<bb.y1||y>bb.y2)},solveQuadratic=function solveQuadratic2(a,b,c,val){var r=b*b-4*a*(c-=val);if(r<0)return[];var sqrtR=Math.sqrt(r),denom=2*a;return[(-b+sqrtR)/denom,(-b-sqrtR)/denom]},solveCubic=function solveCubic2(a,b,c,d,result){var discriminant,q,r,dum1,s,t,term1,r13;return 0===a&&(a=1e-5),r=-27*(d/=a)+(b/=a)*(9*(c/=a)-b*b*2),discriminant=(q=(3*c-b*b)/9)*q*q+(r/=54)*r,result[1]=0,term1=b/3,discriminant>0?(s=(s=r+Math.sqrt(discriminant))<0?-Math.pow(-s,1/3):Math.pow(s,1/3),t=(t=r-Math.sqrt(discriminant))<0?-Math.pow(-t,1/3):Math.pow(t,1/3),result[0]=-term1+s+t,term1+=(s+t)/2,result[4]=result[2]=-term1,term1=Math.sqrt(3)*(-t+s)/2,result[3]=term1,void(result[5]=-term1)):(result[5]=result[3]=0,0===discriminant?(r13=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3),result[0]=2*r13-term1,void(result[4]=result[2]=-(r13+term1))):(dum1=(q=-q)*q*q,dum1=Math.acos(r/Math.sqrt(dum1)),r13=2*Math.sqrt(q),result[0]=-term1+r13*Math.cos(dum1/3),result[2]=-term1+r13*Math.cos((dum1+2*Math.PI)/3),void(result[4]=-term1+r13*Math.cos((dum1+4*Math.PI)/3))))},sqdistToQuadraticBezier=function sqdistToQuadraticBezier2(x,y,x1,y1,x2,y2,x3,y3){var roots=[];solveCubic(1*x1*x1-4*x1*x2+2*x1*x3+4*x2*x2-4*x2*x3+x3*x3+y1*y1-4*y1*y2+2*y1*y3+4*y2*y2-4*y2*y3+y3*y3,9*x1*x2-3*x1*x1-3*x1*x3-6*x2*x2+3*x2*x3+9*y1*y2-3*y1*y1-3*y1*y3-6*y2*y2+3*y2*y3,3*x1*x1-6*x1*x2+x1*x3-x1*x+2*x2*x2+2*x2*x-x3*x+3*y1*y1-6*y1*y2+y1*y3-y1*y+2*y2*y2+2*y2*y-y3*y,1*x1*x2-x1*x1+x1*x-x2*x+y1*y2-y1*y1+y1*y-y2*y,roots);for(var zeroThreshold=1e-7,params=[],index=0;index<6;index+=2)Math.abs(roots[index+1])<zeroThreshold&&roots[index]>=0&&roots[index]<=1&&params.push(roots[index]);params.push(1),params.push(0);for(var curX,curY,distSquared,minDistanceSquared=-1,i2=0;i2<params.length;i2++)curX=Math.pow(1-params[i2],2)*x1+2*(1-params[i2])*params[i2]*x2+params[i2]*params[i2]*x3,curY=Math.pow(1-params[i2],2)*y1+2*(1-params[i2])*params[i2]*y2+params[i2]*params[i2]*y3,distSquared=Math.pow(curX-x,2)+Math.pow(curY-y,2),minDistanceSquared>=0?distSquared<minDistanceSquared&&(minDistanceSquared=distSquared):minDistanceSquared=distSquared;return minDistanceSquared},sqdistToFiniteLine=function sqdistToFiniteLine2(x,y,x1,y1,x2,y2){var offset=[x-x1,y-y1],line=[x2-x1,y2-y1],lineSq=line[0]*line[0]+line[1]*line[1],hypSq=offset[0]*offset[0]+offset[1]*offset[1],dotProduct=offset[0]*line[0]+offset[1]*line[1],adjSq=dotProduct*dotProduct/lineSq;return dotProduct<0?hypSq:adjSq>lineSq?(x-x2)*(x-x2)+(y-y2)*(y-y2):hypSq-adjSq},pointInsidePolygonPoints=function pointInsidePolygonPoints2(x,y,points){for(var x1,y1,x2,y2,up=0,i2=0;i2<points.length/2;i2++)if(x1=points[2*i2],y1=points[2*i2+1],i2+1<points.length/2?(x2=points[2*(i2+1)],y2=points[2*(i2+1)+1]):(x2=points[2*(i2+1-points.length/2)],y2=points[2*(i2+1-points.length/2)+1]),x1==x&&x2==x);else{if(!(x1>=x&&x>=x2||x1<=x&&x<=x2))continue;(x-x1)/(x2-x1)*(y2-y1)+y1>y&&up++}return up%2!=0},pointInsidePolygon=function pointInsidePolygon2(x,y,basePoints,centerX,centerY,width,height,direction,padding){var angle,transformedPoints=new Array(basePoints.length);null!=direction[0]?(angle=Math.atan(direction[1]/direction[0]),direction[0]<0?angle+=Math.PI/2:angle=-angle-Math.PI/2):angle=direction;for(var points,cos2=Math.cos(-angle),sin2=Math.sin(-angle),i2=0;i2<transformedPoints.length/2;i2++)transformedPoints[2*i2]=width/2*(basePoints[2*i2]*cos2-basePoints[2*i2+1]*sin2),transformedPoints[2*i2+1]=height/2*(basePoints[2*i2+1]*cos2+basePoints[2*i2]*sin2),transformedPoints[2*i2]+=centerX,transformedPoints[2*i2+1]+=centerY;if(padding>0){var expandedLineSet=expandPolygon(transformedPoints,-padding);points=joinLines(expandedLineSet)}else points=transformedPoints;return pointInsidePolygonPoints(x,y,points)},pointInsideRoundPolygon=function pointInsideRoundPolygon2(x,y,basePoints,centerX,centerY,width,height){for(var cutPolygonPoints=new Array(basePoints.length),halfW=width/2,halfH=height/2,cornerRadius=getRoundPolygonRadius(width,height),squaredCornerRadius=cornerRadius*cornerRadius,i2=0;i2<basePoints.length/4;i2++){var sourceUv=void 0,destUv=void 0;sourceUv=0===i2?basePoints.length-2:4*i2-2,destUv=4*i2+2;var px=centerX+halfW*basePoints[4*i2],py=centerY+halfH*basePoints[4*i2+1],cosTheta=-basePoints[sourceUv]*basePoints[destUv]-basePoints[sourceUv+1]*basePoints[destUv+1],offset=cornerRadius/Math.tan(Math.acos(cosTheta)/2),cp0x=px-offset*basePoints[sourceUv],cp0y=py-offset*basePoints[sourceUv+1],cp1x=px+offset*basePoints[destUv],cp1y=py+offset*basePoints[destUv+1];cutPolygonPoints[4*i2]=cp0x,cutPolygonPoints[4*i2+1]=cp0y,cutPolygonPoints[4*i2+2]=cp1x,cutPolygonPoints[4*i2+3]=cp1y;var orthx=basePoints[sourceUv+1],orthy=-basePoints[sourceUv];orthx*basePoints[destUv]+orthy*basePoints[destUv+1]<0&&(orthx*=-1,orthy*=-1);var cx=cp0x+orthx*cornerRadius,cy=cp0y+orthy*cornerRadius;if(Math.pow(cx-x,2)+Math.pow(cy-y,2)<=squaredCornerRadius)return!0}return pointInsidePolygonPoints(x,y,cutPolygonPoints)},joinLines=function joinLines2(lineSet){for(var currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,vertices=new Array(lineSet.length/2),i2=0;i2<lineSet.length/4;i2++){currentLineStartX=lineSet[4*i2],currentLineStartY=lineSet[4*i2+1],currentLineEndX=lineSet[4*i2+2],currentLineEndY=lineSet[4*i2+3],i2<lineSet.length/4-1?(nextLineStartX=lineSet[4*(i2+1)],nextLineStartY=lineSet[4*(i2+1)+1],nextLineEndX=lineSet[4*(i2+1)+2],nextLineEndY=lineSet[4*(i2+1)+3]):(nextLineStartX=lineSet[0],nextLineStartY=lineSet[1],nextLineEndX=lineSet[2],nextLineEndY=lineSet[3]);var intersection=finiteLinesIntersect(currentLineStartX,currentLineStartY,currentLineEndX,currentLineEndY,nextLineStartX,nextLineStartY,nextLineEndX,nextLineEndY,!0);vertices[2*i2]=intersection[0],vertices[2*i2+1]=intersection[1]}return vertices},expandPolygon=function expandPolygon2(points,pad){for(var currentPointX,currentPointY,nextPointX,nextPointY,expandedLineSet=new Array(2*points.length),i2=0;i2<points.length/2;i2++){currentPointX=points[2*i2],currentPointY=points[2*i2+1],i2<points.length/2-1?(nextPointX=points[2*(i2+1)],nextPointY=points[2*(i2+1)+1]):(nextPointX=points[0],nextPointY=points[1]);var offsetX=nextPointY-currentPointY,offsetY=-(nextPointX-currentPointX),offsetLength=Math.sqrt(offsetX*offsetX+offsetY*offsetY),normalizedOffsetX=offsetX/offsetLength,normalizedOffsetY=offsetY/offsetLength;expandedLineSet[4*i2]=currentPointX+normalizedOffsetX*pad,expandedLineSet[4*i2+1]=currentPointY+normalizedOffsetY*pad,expandedLineSet[4*i2+2]=nextPointX+normalizedOffsetX*pad,expandedLineSet[4*i2+3]=nextPointY+normalizedOffsetY*pad}return expandedLineSet},intersectLineEllipse=function intersectLineEllipse2(x,y,centerX,centerY,ellipseWradius,ellipseHradius){var dispX=centerX-x,dispY=centerY-y;dispX/=ellipseWradius,dispY/=ellipseHradius;var len=Math.sqrt(dispX*dispX+dispY*dispY),newLength=len-1;if(newLength<0)return[];var lenProportion=newLength/len;return[(centerX-x)*lenProportion+x,(centerY-y)*lenProportion+y]},checkInEllipse=function checkInEllipse2(x,y,width,height,centerX,centerY,padding){return x-=centerX,y-=centerY,(x/=width/2+padding)*x+(y/=height/2+padding)*y<=1},intersectLineCircle=function intersectLineCircle2(x1,y1,x2,y2,centerX,centerY,radius){var d=[x2-x1,y2-y1],f=[x1-centerX,y1-centerY],a=d[0]*d[0]+d[1]*d[1],b=2*(f[0]*d[0]+f[1]*d[1]),discriminant=b*b-4*a*(f[0]*f[0]+f[1]*f[1]-radius*radius);if(discriminant<0)return[];var t1=(-b+Math.sqrt(discriminant))/(2*a),t2=(-b-Math.sqrt(discriminant))/(2*a),tMin=Math.min(t1,t2),tMax=Math.max(t1,t2),inRangeParams=[];if(tMin>=0&&tMin<=1&&inRangeParams.push(tMin),tMax>=0&&tMax<=1&&inRangeParams.push(tMax),0===inRangeParams.length)return[];var nearIntersectionX=inRangeParams[0]*d[0]+x1,nearIntersectionY=inRangeParams[0]*d[1]+y1;return inRangeParams.length>1?inRangeParams[0]==inRangeParams[1]?[nearIntersectionX,nearIntersectionY]:[nearIntersectionX,nearIntersectionY,inRangeParams[1]*d[0]+x1,inRangeParams[1]*d[1]+y1]:[nearIntersectionX,nearIntersectionY]},midOfThree=function midOfThree2(a,b,c){return b<=a&&a<=c||c<=a&&a<=b?a:a<=b&&b<=c||c<=b&&b<=a?b:c},finiteLinesIntersect=function finiteLinesIntersect2(x1,y1,x2,y2,x3,y3,x4,y4,infiniteLines){var dx13=x1-x3,dx21=x2-x1,dx43=x4-x3,dy13=y1-y3,dy21=y2-y1,dy43=y4-y3,ua_t=dx43*dy13-dy43*dx13,ub_t=dx21*dy13-dy21*dx13,u_b=dy43*dx21-dx43*dy21;if(0!==u_b){var ua=ua_t/u_b,ub=ub_t/u_b,flptThreshold=.001,_min=0-flptThreshold,_max=1+flptThreshold;return _min<=ua&&ua<=_max&&_min<=ub&&ub<=_max||infiniteLines?[x1+ua*dx21,y1+ua*dy21]:[]}return 0===ua_t||0===ub_t?midOfThree(x1,x2,x4)===x4?[x4,y4]:midOfThree(x1,x2,x3)===x3?[x3,y3]:midOfThree(x3,x4,x2)===x2?[x2,y2]:[]:[]},polygonIntersectLine=function polygonIntersectLine2(x,y,basePoints,centerX,centerY,width,height,padding){var intersection,points,currentX,currentY,nextX,nextY,intersections=[],transformedPoints=new Array(basePoints.length),doTransform=!0;if(null==width&&(doTransform=!1),doTransform){for(var i2=0;i2<transformedPoints.length/2;i2++)transformedPoints[2*i2]=basePoints[2*i2]*width+centerX,transformedPoints[2*i2+1]=basePoints[2*i2+1]*height+centerY;if(padding>0){var expandedLineSet=expandPolygon(transformedPoints,-padding);points=joinLines(expandedLineSet)}else points=transformedPoints}else points=basePoints;for(var _i2=0;_i2<points.length/2;_i2++)currentX=points[2*_i2],currentY=points[2*_i2+1],_i2<points.length/2-1?(nextX=points[2*(_i2+1)],nextY=points[2*(_i2+1)+1]):(nextX=points[0],nextY=points[1]),0!==(intersection=finiteLinesIntersect(x,y,centerX,centerY,currentX,currentY,nextX,nextY)).length&&intersections.push(intersection[0],intersection[1]);return intersections},roundPolygonIntersectLine=function roundPolygonIntersectLine2(x,y,basePoints,centerX,centerY,width,height,padding){for(var intersection,intersections=[],lines=new Array(basePoints.length),halfW=width/2,halfH=height/2,cornerRadius=getRoundPolygonRadius(width,height),i2=0;i2<basePoints.length/4;i2++){var sourceUv=void 0,destUv=void 0;sourceUv=0===i2?basePoints.length-2:4*i2-2,destUv=4*i2+2;var px=centerX+halfW*basePoints[4*i2],py=centerY+halfH*basePoints[4*i2+1],cosTheta=-basePoints[sourceUv]*basePoints[destUv]-basePoints[sourceUv+1]*basePoints[destUv+1],offset=cornerRadius/Math.tan(Math.acos(cosTheta)/2),cp0x=px-offset*basePoints[sourceUv],cp0y=py-offset*basePoints[sourceUv+1],cp1x=px+offset*basePoints[destUv],cp1y=py+offset*basePoints[destUv+1];0===i2?(lines[basePoints.length-2]=cp0x,lines[basePoints.length-1]=cp0y):(lines[4*i2-2]=cp0x,lines[4*i2-1]=cp0y),lines[4*i2]=cp1x,lines[4*i2+1]=cp1y;var orthx=basePoints[sourceUv+1],orthy=-basePoints[sourceUv];orthx*basePoints[destUv]+orthy*basePoints[destUv+1]<0&&(orthx*=-1,orthy*=-1),0!==(intersection=intersectLineCircle(x,y,centerX,centerY,cp0x+orthx*cornerRadius,cp0y+orthy*cornerRadius,cornerRadius)).length&&intersections.push(intersection[0],intersection[1])}for(var _i3=0;_i3<lines.length/4;_i3++)0!==(intersection=finiteLinesIntersect(x,y,centerX,centerY,lines[4*_i3],lines[4*_i3+1],lines[4*_i3+2],lines[4*_i3+3],!1)).length&&intersections.push(intersection[0],intersection[1]);if(intersections.length>2){for(var lowestIntersection=[intersections[0],intersections[1]],lowestSquaredDistance=Math.pow(lowestIntersection[0]-x,2)+Math.pow(lowestIntersection[1]-y,2),_i4=1;_i4<intersections.length/2;_i4++){var squaredDistance=Math.pow(intersections[2*_i4]-x,2)+Math.pow(intersections[2*_i4+1]-y,2);squaredDistance<=lowestSquaredDistance&&(lowestIntersection[0]=intersections[2*_i4],lowestIntersection[1]=intersections[2*_i4+1],lowestSquaredDistance=squaredDistance)}return lowestIntersection}return intersections},shortenIntersection=function shortenIntersection2(intersection,offset,amount){var disp=[intersection[0]-offset[0],intersection[1]-offset[1]],length=Math.sqrt(disp[0]*disp[0]+disp[1]*disp[1]),lenRatio=(length-amount)/length;return lenRatio<0&&(lenRatio=1e-5),[offset[0]+lenRatio*disp[0],offset[1]+lenRatio*disp[1]]},generateUnitNgonPointsFitToSquare=function generateUnitNgonPointsFitToSquare2(sides,rotationRadians){var points=generateUnitNgonPoints(sides,rotationRadians);return points=fitPolygonToSquare(points)},fitPolygonToSquare=function fitPolygonToSquare2(points){for(var x,y,sides=points.length/2,minX=1/0,minY=1/0,maxX=-1/0,maxY=-1/0,i2=0;i2<sides;i2++)x=points[2*i2],y=points[2*i2+1],minX=Math.min(minX,x),maxX=Math.max(maxX,x),minY=Math.min(minY,y),maxY=Math.max(maxY,y);for(var sx=2/(maxX-minX),sy=2/(maxY-minY),_i5=0;_i5<sides;_i5++)x=points[2*_i5]=points[2*_i5]*sx,y=points[2*_i5+1]=points[2*_i5+1]*sy,minX=Math.min(minX,x),maxX=Math.max(maxX,x),minY=Math.min(minY,y),maxY=Math.max(maxY,y);if(minY<-1)for(var _i6=0;_i6<sides;_i6++)y=points[2*_i6+1]=points[2*_i6+1]+(-1-minY);return points},generateUnitNgonPoints=function generateUnitNgonPoints2(sides,rotationRadians){var increment=1/sides*2*Math.PI,startAngle=sides%2==0?Math.PI/2+increment/2:Math.PI/2;startAngle+=rotationRadians;for(var currentAngle,points=new Array(2*sides),i2=0;i2<sides;i2++)currentAngle=i2*increment+startAngle,points[2*i2]=Math.cos(currentAngle),points[2*i2+1]=Math.sin(-currentAngle);return points},getRoundRectangleRadius=function getRoundRectangleRadius2(width,height){return Math.min(width/4,height/4,8)},getRoundPolygonRadius=function getRoundPolygonRadius2(width,height){return Math.min(width/10,height/10,8)},getCutRectangleCornerLength=function getCutRectangleCornerLength2(){return 8},bezierPtsToQuadCoeff=function bezierPtsToQuadCoeff2(p0,p1,p2){return[p0-2*p1+p2,2*(p1-p0),p0]},getBarrelCurveConstants=function getBarrelCurveConstants2(width,height){return{heightOffset:Math.min(15,.05*height),widthOffset:Math.min(100,.25*width),ctrlPtOffsetPct:.05}},pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:function weight(edge){return 1}}),elesfn$o={pageRank:function pageRank(options){for(var _pageRankDefaults=pageRankDefaults(options),dampingFactor=_pageRankDefaults.dampingFactor,precision=_pageRankDefaults.precision,iterations=_pageRankDefaults.iterations,weight=_pageRankDefaults.weight,cy=this._private.cy,_this$byGroup=this.byGroup(),nodes2=_this$byGroup.nodes,edges=_this$byGroup.edges,numNodes=nodes2.length,numNodesSqd=numNodes*numNodes,numEdges=edges.length,matrix=new Array(numNodesSqd),columnSum=new Array(numNodes),additionalProb=(1-dampingFactor)/numNodes,i2=0;i2<numNodes;i2++){for(var j=0;j<numNodes;j++)matrix[i2*numNodes+j]=0;columnSum[i2]=0}for(var _i=0;_i<numEdges;_i++){var edge=edges[_i],srcId=edge.data("source"),tgtId=edge.data("target");if(srcId!==tgtId){var s=nodes2.indexOfId(srcId),t=nodes2.indexOfId(tgtId),w=weight(edge);matrix[t*numNodes+s]+=w,columnSum[s]+=w}}for(var p2=1/numNodes+additionalProb,_j=0;_j<numNodes;_j++)if(0===columnSum[_j])for(var _i2=0;_i2<numNodes;_i2++)matrix[_i2*numNodes+_j]=p2;else for(var _i3=0;_i3<numNodes;_i3++){var _n3=_i3*numNodes+_j;matrix[_n3]=matrix[_n3]/columnSum[_j]+additionalProb}for(var previous,eigenvector=new Array(numNodes),temp=new Array(numNodes),_i4=0;_i4<numNodes;_i4++)eigenvector[_i4]=1;for(var iter=0;iter<iterations;iter++){for(var _i5=0;_i5<numNodes;_i5++)temp[_i5]=0;for(var _i6=0;_i6<numNodes;_i6++)for(var _j2=0;_j2<numNodes;_j2++){var _n4=_i6*numNodes+_j2;temp[_i6]+=matrix[_n4]*eigenvector[_j2]}inPlaceSumNormalize(temp),previous=eigenvector,eigenvector=temp,temp=previous;for(var diff=0,_i7=0;_i7<numNodes;_i7++){var delta=previous[_i7]-eigenvector[_i7];diff+=delta*delta}if(diff<precision)break}return{rank:function rank(node){return node=cy.collection(node)[0],eigenvector[nodes2.indexOf(node)]}}}},defaults$f=defaults$g({root:null,weight:function weight(edge){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function degreeCentralityNormalized(options){options=defaults$f(options);var cy=this.cy(),nodes2=this.nodes(),numNodes=nodes2.length;if(options.directed){for(var indegrees={},outdegrees={},maxIndegree=0,maxOutdegree=0,_i=0;_i<numNodes;_i++){var _node=nodes2[_i],id=_node.id();options.root=_node;var _currDegree=this.degreeCentrality(options);maxIndegree<_currDegree.indegree&&(maxIndegree=_currDegree.indegree),maxOutdegree<_currDegree.outdegree&&(maxOutdegree=_currDegree.outdegree),indegrees[id]=_currDegree.indegree,outdegrees[id]=_currDegree.outdegree}return{indegree:function indegree(node2){return 0==maxIndegree?0:(string(node2)&&(node2=cy.filter(node2)),indegrees[node2.id()]/maxIndegree)},outdegree:function outdegree(node2){return 0===maxOutdegree?0:(string(node2)&&(node2=cy.filter(node2)),outdegrees[node2.id()]/maxOutdegree)}}}for(var degrees={},maxDegree=0,i2=0;i2<numNodes;i2++){var node=nodes2[i2];options.root=node;var currDegree=this.degreeCentrality(options);maxDegree<currDegree.degree&&(maxDegree=currDegree.degree),degrees[node.id()]=currDegree.degree}return{degree:function degree(node2){return 0===maxDegree?0:(string(node2)&&(node2=cy.filter(node2)),degrees[node2.id()]/maxDegree)}}},degreeCentrality:function degreeCentrality(options){options=defaults$f(options);var cy=this.cy(),callingEles=this,_options=options,root2=_options.root,weight=_options.weight,directed=_options.directed,alpha=_options.alpha;if(root2=cy.collection(root2)[0],directed){for(var edges=root2.connectedEdges(),incoming=edges.filter((function(edge){return edge.target().same(root2)&&callingEles.has(edge)})),outgoing=edges.filter((function(edge){return edge.source().same(root2)&&callingEles.has(edge)})),k_in=incoming.length,k_out=outgoing.length,s_in=0,s_out=0,_i2=0;_i2<incoming.length;_i2++)s_in+=weight(incoming[_i2]);for(var _i3=0;_i3<outgoing.length;_i3++)s_out+=weight(outgoing[_i3]);return{indegree:Math.pow(k_in,1-alpha)*Math.pow(s_in,alpha),outdegree:Math.pow(k_out,1-alpha)*Math.pow(s_out,alpha)}}for(var connEdges=root2.connectedEdges().intersection(callingEles),k=connEdges.length,s=0,i2=0;i2<connEdges.length;i2++)s+=weight(connEdges[i2]);return{degree:Math.pow(k,1-alpha)*Math.pow(s,alpha)}}};elesfn$n.dc=elesfn$n.degreeCentrality,elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function weight(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function closenessCentralityNormalized(options){for(var _defaults=defaults$e(options),harmonic=_defaults.harmonic,weight=_defaults.weight,directed=_defaults.directed,cy=this.cy(),closenesses={},maxCloseness=0,nodes2=this.nodes(),fw=this.floydWarshall({weight:weight,directed:directed}),i2=0;i2<nodes2.length;i2++){for(var currCloseness=0,node_i=nodes2[i2],j=0;j<nodes2.length;j++)if(i2!==j){var d=fw.distance(node_i,nodes2[j]);currCloseness+=harmonic?1/d:d}harmonic||(currCloseness=1/currCloseness),maxCloseness<currCloseness&&(maxCloseness=currCloseness),closenesses[node_i.id()]=currCloseness}return{closeness:function closeness(node){return 0==maxCloseness?0:(node=string(node)?cy.filter(node)[0].id():node.id(),closenesses[node]/maxCloseness)}}},closenessCentrality:function closenessCentrality(options){var _defaults2=defaults$e(options),root2=_defaults2.root,weight=_defaults2.weight,directed=_defaults2.directed,harmonic=_defaults2.harmonic;root2=this.filter(root2)[0];for(var dijkstra=this.dijkstra({root:root2,weight:weight,directed:directed}),totalDistance=0,nodes2=this.nodes(),i2=0;i2<nodes2.length;i2++){var n=nodes2[i2];if(!n.same(root2)){var d=dijkstra.distanceTo(n);totalDistance+=harmonic?1/d:d}}return harmonic?totalDistance:1/totalDistance}};elesfn$m.cc=elesfn$m.closenessCentrality,elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function betweennessCentrality(options){for(var _defaults=defaults$d(options),directed=_defaults.directed,weight=_defaults.weight,weighted=null!=weight,cy=this.cy(),V=this.nodes(),A={},_C={},max2=0,C={set:function set2(key,val){_C[key]=val,val>max2&&(max2=val)},get:function get2(key){return _C[key]}},i2=0;i2<V.length;i2++){var v=V[i2],vid=v.id();A[vid]=directed?v.outgoers().nodes():v.openNeighborhood().nodes(),C.set(vid,0)}for(var _loop=function _loop2(s2){for(var sid=V[s2].id(),S=[],P={},g={},d={},Q=new heap((function(a,b){return d[a]-d[b]})),_i=0;_i<V.length;_i++){var _vid=V[_i].id();P[_vid]=[],g[_vid]=0,d[_vid]=1/0}for(g[sid]=1,d[sid]=0,Q.push(sid);!Q.empty();){var _v=Q.pop();if(S.push(_v),weighted)for(var j=0;j<A[_v].length;j++){var w=A[_v][j],vEle=cy.getElementById(_v),edge=void 0;edge=vEle.edgesTo(w).length>0?vEle.edgesTo(w)[0]:w.edgesTo(vEle)[0];var edgeWeight=weight(edge);w=w.id(),d[w]>d[_v]+edgeWeight&&(d[w]=d[_v]+edgeWeight,Q.nodes.indexOf(w)<0?Q.push(w):Q.updateItem(w),g[w]=0,P[w]=[]),d[w]==d[_v]+edgeWeight&&(g[w]=g[w]+g[_v],P[w].push(_v))}else for(var _j=0;_j<A[_v].length;_j++){var _w=A[_v][_j].id();d[_w]==1/0&&(Q.push(_w),d[_w]=d[_v]+1),d[_w]==d[_v]+1&&(g[_w]=g[_w]+g[_v],P[_w].push(_v))}}for(var e={},_i2=0;_i2<V.length;_i2++)e[V[_i2].id()]=0;for(;S.length>0;){for(var _w2=S.pop(),_j2=0;_j2<P[_w2].length;_j2++){var _v2=P[_w2][_j2];e[_v2]=e[_v2]+g[_v2]/g[_w2]*(1+e[_w2])}_w2!=V[s2].id()&&C.set(_w2,C.get(_w2)+e[_w2])}},s=0;s<V.length;s++)_loop(s);var ret={betweenness:function betweenness(node){var id=cy.collection(node).id();return C.get(id)},betweennessNormalized:function betweennessNormalized(node){if(0==max2)return 0;var id=cy.collection(node).id();return C.get(id)/max2}};return ret.betweennessNormalised=ret.betweennessNormalized,ret}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(edge){return 1}]}),setOptions$3=function setOptions2(options){return defaults$c(options)},getSimilarity$1=function getSimilarity2(edge,attributes){for(var total=0,i2=0;i2<attributes.length;i2++)total+=attributes[i2](edge);return total},addLoops=function addLoops2(M,n,val){for(var i2=0;i2<n;i2++)M[i2*n+i2]=val},normalize=function normalize2(M,n){for(var sum,col=0;col<n;col++){sum=0;for(var row=0;row<n;row++)sum+=M[row*n+col];for(var _row=0;_row<n;_row++)M[_row*n+col]=M[_row*n+col]/sum}},mmult=function mmult2(A,B,n){for(var C=new Array(n*n),i2=0;i2<n;i2++){for(var j=0;j<n;j++)C[i2*n+j]=0;for(var k=0;k<n;k++)for(var _j=0;_j<n;_j++)C[i2*n+_j]+=A[i2*n+k]*B[k*n+_j]}return C},expand=function expand2(M,n,expandFactor){for(var _M=M.slice(0),p2=1;p2<expandFactor;p2++)M=mmult(M,_M,n);return M},inflate=function inflate2(M,n,inflateFactor){for(var _M=new Array(n*n),i2=0;i2<n*n;i2++)_M[i2]=Math.pow(M[i2],inflateFactor);return normalize(_M,n),_M},hasConverged=function hasConverged2(M,_M,n2,roundFactor){for(var i2=0;i2<n2;i2++)if(Math.round(M[i2]*Math.pow(10,roundFactor))/Math.pow(10,roundFactor)!=Math.round(_M[i2]*Math.pow(10,roundFactor))/Math.pow(10,roundFactor))return!1;return!0},assign$2=function assign2(M,n,nodes2,cy){for(var clusters=[],i2=0;i2<n;i2++){for(var cluster=[],j=0;j<n;j++)Math.round(1e3*M[i2*n+j])/1e3>0&&cluster.push(nodes2[j]);0!==cluster.length&&clusters.push(cy.collection(cluster))}return clusters},isDuplicate=function isDuplicate2(c1,c2){for(var i2=0;i2<c1.length;i2++)if(!c2[i2]||c1[i2].id()!==c2[i2].id())return!1;return!0},removeDuplicates=function removeDuplicates2(clusters){for(var i2=0;i2<clusters.length;i2++)for(var j=0;j<clusters.length;j++)i2!=j&&isDuplicate(clusters[i2],clusters[j])&&clusters.splice(j,1);return clusters},markovClustering=function markovClustering2(options){for(var nodes2=this.nodes(),edges=this.edges(),cy=this.cy(),opts=setOptions$3(options),id2position={},i2=0;i2<nodes2.length;i2++)id2position[nodes2[i2].id()]=i2;for(var _M,n=nodes2.length,n2=n*n,M=new Array(n2),_i=0;_i<n2;_i++)M[_i]=0;for(var e=0;e<edges.length;e++){var edge=edges[e],_i2=id2position[edge.source().id()],j=id2position[edge.target().id()],sim=getSimilarity$1(edge,opts.attributes);M[_i2*n+j]+=sim,M[j*n+_i2]+=sim}addLoops(M,n,opts.multFactor),normalize(M,n);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;)isStillMoving=!1,_M=expand(M,n,opts.expandFactor),M=inflate(_M,n,opts.inflateFactor),hasConverged(M,_M,n2,4)||(isStillMoving=!0),iterations++;var clusters=assign$2(M,n,nodes2,cy);return clusters=removeDuplicates(clusters)},markovClustering$1={markovClustering:markovClustering,mcl:markovClustering},identity=function identity2(x){return x},absDiff=function absDiff2(p2,q){return Math.abs(q-p2)},addAbsDiff=function addAbsDiff2(total,p2,q){return total+absDiff(p2,q)},addSquaredDiff=function addSquaredDiff2(total,p2,q){return total+Math.pow(q-p2,2)},sqrt=function sqrt3(x){return Math.sqrt(x)},maxAbsDiff=function maxAbsDiff2(currentMax,p2,q){return Math.max(currentMax,absDiff(p2,q))},getDistance=function getDistance2(length,getP,getQ,init,visit){for(var post=arguments.length>5&&void 0!==arguments[5]?arguments[5]:identity,ret=init,dim=0;dim<length;dim++)ret=visit(ret,getP(dim),getQ(dim));return post(ret)},distances={euclidean:function euclidean(length,getP,getQ){return length>=2?getDistance(length,getP,getQ,0,addSquaredDiff,sqrt):getDistance(length,getP,getQ,0,addAbsDiff)},squaredEuclidean:function squaredEuclidean(length,getP,getQ){return getDistance(length,getP,getQ,0,addSquaredDiff)},manhattan:function manhattan(length,getP,getQ){return getDistance(length,getP,getQ,0,addAbsDiff)},max:function max2(length,getP,getQ){return getDistance(length,getP,getQ,-1/0,maxAbsDiff)}};function clusteringDistance(method,length,getP,getQ,nodeP,nodeQ){var impl2;return impl2=fn$6(method)?method:distances[method]||distances.euclidean,0===length&&fn$6(method)?impl2(nodeP,nodeQ):impl2(length,getP,getQ,nodeP,nodeQ)}distances["squared-euclidean"]=distances.squaredEuclidean,distances.squaredeuclidean=distances.squaredEuclidean;var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=function setOptions2(options){return defaults$b(options)},getDist=function getDist2(type,node,centroid,attributes,mode){var getP="kMedoids"!==mode?function(i2){return centroid[i2]}:function(i2){return attributes[i2](centroid)},getQ=function getQ2(i2){return attributes[i2](node)},nodeP=centroid,nodeQ=node;return clusteringDistance(type,attributes.length,getP,getQ,nodeP,nodeQ)},randomCentroids=function randomCentroids2(nodes2,k,attributes){for(var ndim=attributes.length,min2=new Array(ndim),max2=new Array(ndim),centroids=new Array(k),centroid=null,i2=0;i2<ndim;i2++)min2[i2]=nodes2.min(attributes[i2]).value,max2[i2]=nodes2.max(attributes[i2]).value;for(var c=0;c<k;c++){centroid=[];for(var _i=0;_i<ndim;_i++)centroid[_i]=Math.random()*(max2[_i]-min2[_i])+min2[_i];centroids[c]=centroid}return centroids},classify=function classify2(node,centroids,distance,attributes,type){for(var min2=1/0,index=0,i2=0;i2<centroids.length;i2++){var dist2=getDist(distance,node,centroids[i2],attributes,type);dist2<min2&&(min2=dist2,index=i2)}return index},buildCluster=function buildCluster2(centroid,nodes2,assignment){for(var cluster=[],node=null,n=0;n<nodes2.length;n++)assignment[(node=nodes2[n]).id()]===centroid&&cluster.push(node);return cluster},haveValuesConverged=function haveValuesConverged2(v1,v2,sensitivityThreshold){return Math.abs(v2-v1)<=sensitivityThreshold},haveMatricesConverged=function haveMatricesConverged2(v1,v2,sensitivityThreshold){for(var i2=0;i2<v1.length;i2++)for(var j=0;j<v1[i2].length;j++)if(Math.abs(v1[i2][j]-v2[i2][j])>sensitivityThreshold)return!1;return!0},seenBefore=function seenBefore2(node,medoids,n){for(var i2=0;i2<n;i2++)if(node===medoids[i2])return!0;return!1},randomMedoids=function randomMedoids2(nodes2,k){var medoids=new Array(k);if(nodes2.length<50)for(var i2=0;i2<k;i2++){for(var node=nodes2[Math.floor(Math.random()*nodes2.length)];seenBefore(node,medoids,i2);)node=nodes2[Math.floor(Math.random()*nodes2.length)];medoids[i2]=node}else for(var _i2=0;_i2<k;_i2++)medoids[_i2]=nodes2[Math.floor(Math.random()*nodes2.length)];return medoids},findCost=function findCost2(potentialNewMedoid,cluster,attributes){for(var cost=0,n=0;n<cluster.length;n++)cost+=getDist("manhattan",cluster[n],potentialNewMedoid,attributes,"kMedoids");return cost},updateCentroids=function updateCentroids2(centroids,nodes2,U,weight,opts){for(var numerator,denominator,n=0;n<nodes2.length;n++)for(var c=0;c<centroids.length;c++)weight[n][c]=Math.pow(U[n][c],opts.m);for(var _c=0;_c<centroids.length;_c++)for(var dim=0;dim<opts.attributes.length;dim++){numerator=0,denominator=0;for(var _n2=0;_n2<nodes2.length;_n2++)numerator+=weight[_n2][_c]*opts.attributes[dim](nodes2[_n2]),denominator+=weight[_n2][_c];centroids[_c][dim]=numerator/denominator}},updateMembership=function updateMembership2(U,_U,centroids,nodes2,opts){for(var i2=0;i2<U.length;i2++)_U[i2]=U[i2].slice();for(var sum,numerator,denominator,pow=2/(opts.m-1),c=0;c<centroids.length;c++)for(var n=0;n<nodes2.length;n++){sum=0;for(var k=0;k<centroids.length;k++)numerator=getDist(opts.distance,nodes2[n],centroids[c],opts.attributes,"cmeans"),denominator=getDist(opts.distance,nodes2[n],centroids[k],opts.attributes,"cmeans"),sum+=Math.pow(numerator/denominator,pow);U[n][c]=1/sum}},assign$1=function assign2(nodes2,U,opts,cy){for(var max2,index,clusters=new Array(opts.k),c=0;c<clusters.length;c++)clusters[c]=[];for(var n=0;n<U.length;n++){max2=-1/0,index=-1;for(var _c2=0;_c2<U[0].length;_c2++)U[n][_c2]>max2&&(max2=U[n][_c2],index=_c2);clusters[index].push(nodes2[n])}for(var _c3=0;_c3<clusters.length;_c3++)clusters[_c3]=cy.collection(clusters[_c3]);return clusters},fuzzyCMeans=function fuzzyCMeans2(options){var centroids,U,_U,weight,cy=this.cy(),nodes2=this.nodes(),opts=setOptions$2(options);_U=new Array(nodes2.length);for(var i2=0;i2<nodes2.length;i2++)_U[i2]=new Array(opts.k);U=new Array(nodes2.length);for(var _i3=0;_i3<nodes2.length;_i3++)U[_i3]=new Array(opts.k);for(var _i4=0;_i4<nodes2.length;_i4++){for(var total=0,j=0;j<opts.k;j++)U[_i4][j]=Math.random(),total+=U[_i4][j];for(var _j=0;_j<opts.k;_j++)U[_i4][_j]=U[_i4][_j]/total}centroids=new Array(opts.k);for(var _i5=0;_i5<opts.k;_i5++)centroids[_i5]=new Array(opts.attributes.length);weight=new Array(nodes2.length);for(var _i6=0;_i6<nodes2.length;_i6++)weight[_i6]=new Array(opts.k);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;)isStillMoving=!1,updateCentroids(centroids,nodes2,U,weight,opts),updateMembership(U,_U,centroids,nodes2,opts),haveMatricesConverged(U,_U,opts.sensitivityThreshold)||(isStillMoving=!0),iterations++;return{clusters:assign$1(nodes2,U,opts,cy),degreeOfMembership:U}},kClustering={kMeans:function kMeans2(options){var centroids,cy=this.cy(),nodes2=this.nodes(),node=null,opts=setOptions$2(options),clusters=new Array(opts.k),assignment={};opts.testMode?"number"==typeof opts.testCentroids?(opts.testCentroids,centroids=randomCentroids(nodes2,opts.k,opts.attributes)):centroids="object"===_typeof(opts.testCentroids)?opts.testCentroids:randomCentroids(nodes2,opts.k,opts.attributes):centroids=randomCentroids(nodes2,opts.k,opts.attributes);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;){for(var n=0;n<nodes2.length;n++)assignment[(node=nodes2[n]).id()]=classify(node,centroids,opts.distance,opts.attributes,"kMeans");isStillMoving=!1;for(var c=0;c<opts.k;c++){var cluster=buildCluster(c,nodes2,assignment);if(0!==cluster.length){for(var ndim=opts.attributes.length,centroid=centroids[c],newCentroid=new Array(ndim),sum=new Array(ndim),d=0;d<ndim;d++){sum[d]=0;for(var i2=0;i2<cluster.length;i2++)node=cluster[i2],sum[d]+=opts.attributes[d](node);newCentroid[d]=sum[d]/cluster.length,haveValuesConverged(newCentroid[d],centroid[d],opts.sensitivityThreshold)||(isStillMoving=!0)}centroids[c]=newCentroid,clusters[c]=cy.collection(cluster)}}iterations++}return clusters},kMedoids:function kMedoids2(options){var medoids,curCost,cy=this.cy(),nodes2=this.nodes(),node=null,opts=setOptions$2(options),clusters=new Array(opts.k),assignment={},minCosts=new Array(opts.k);opts.testMode?"number"==typeof opts.testCentroids||(medoids="object"===_typeof(opts.testCentroids)?opts.testCentroids:randomMedoids(nodes2,opts.k)):medoids=randomMedoids(nodes2,opts.k);for(var isStillMoving=!0,iterations=0;isStillMoving&&iterations<opts.maxIterations;){for(var n=0;n<nodes2.length;n++)assignment[(node=nodes2[n]).id()]=classify(node,medoids,opts.distance,opts.attributes,"kMedoids");isStillMoving=!1;for(var m=0;m<medoids.length;m++){var cluster=buildCluster(m,nodes2,assignment);if(0!==cluster.length){minCosts[m]=findCost(medoids[m],cluster,opts.attributes);for(var _n=0;_n<cluster.length;_n++)(curCost=findCost(cluster[_n],cluster,opts.attributes))<minCosts[m]&&(minCosts[m]=curCost,medoids[m]=cluster[_n],isStillMoving=!0);clusters[m]=cy.collection(cluster)}}iterations++}return clusters},fuzzyCMeans:fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function setOptions2(options){var opts=defaults$a(options),preferredAlias=linkageAliases[opts.linkage];return null!=preferredAlias&&(opts.linkage=preferredAlias),opts},mergeClosest=function mergeClosest2(clusters,index,dists,mins,opts){for(var dist2,minKey=0,min2=1/0,attrs=opts.attributes,getDist2=function getDist3(n1,n2){return clusteringDistance(opts.distance,attrs.length,(function(i3){return attrs[i3](n1)}),(function(i3){return attrs[i3](n2)}),n1,n2)},i2=0;i2<clusters.length;i2++){var key=clusters[i2].key,_dist=dists[key][mins[key]];_dist<min2&&(minKey=key,min2=_dist)}if("threshold"===opts.mode&&min2>=opts.threshold||"dendrogram"===opts.mode&&1===clusters.length)return!1;var merged,c1=index[minKey],c2=index[mins[minKey]];merged="dendrogram"===opts.mode?{left:c1,right:c2,key:c1.key}:{value:c1.value.concat(c2.value),key:c1.key},clusters[c1.index]=merged,clusters.splice(c2.index,1),index[c1.key]=merged;for(var _i=0;_i<clusters.length;_i++){var cur=clusters[_i];c1.key===cur.key?dist2=1/0:"min"===opts.linkage?(dist2=dists[c1.key][cur.key],dists[c1.key][cur.key]>dists[c2.key][cur.key]&&(dist2=dists[c2.key][cur.key])):"max"===opts.linkage?(dist2=dists[c1.key][cur.key],dists[c1.key][cur.key]<dists[c2.key][cur.key]&&(dist2=dists[c2.key][cur.key])):dist2="mean"===opts.linkage?(dists[c1.key][cur.key]*c1.size+dists[c2.key][cur.key]*c2.size)/(c1.size+c2.size):"dendrogram"===opts.mode?getDist2(cur.value,c1.value):getDist2(cur.value[0],c1.value[0]),dists[c1.key][cur.key]=dists[cur.key][c1.key]=dist2}for(var _i2=0;_i2<clusters.length;_i2++){var key1=clusters[_i2].key;if(mins[key1]===c1.key||mins[key1]===c2.key){for(var _min=key1,j=0;j<clusters.length;j++){var key2=clusters[j].key;dists[key1][key2]<dists[key1][_min]&&(_min=key2)}mins[key1]=_min}clusters[_i2].index=_i2}return c1.key=c2.key=c1.index=c2.index=null,!0},getAllChildren=function getAllChildren2(root2,arr,cy){root2&&(root2.value?arr.push(root2.value):(root2.left&&getAllChildren2(root2.left,arr),root2.right&&getAllChildren2(root2.right,arr)))},buildDendrogram=function buildDendrogram2(root2,cy){if(!root2)return"";if(root2.left&&root2.right){var leftStr=buildDendrogram2(root2.left,cy),rightStr=buildDendrogram2(root2.right,cy),node=cy.add({group:"nodes",data:{id:leftStr+","+rightStr}});return cy.add({group:"edges",data:{source:leftStr,target:node.id()}}),cy.add({group:"edges",data:{source:rightStr,target:node.id()}}),node.id()}return root2.value?root2.value.id():void 0},buildClustersFromTree=function buildClustersFromTree2(root2,k,cy){if(!root2)return[];var left=[],right=[],leaves=[];return 0===k?(root2.left&&getAllChildren(root2.left,left),root2.right&&getAllChildren(root2.right,right),leaves=left.concat(right),[cy.collection(leaves)]):1===k?root2.value?[cy.collection(root2.value)]:(root2.left&&getAllChildren(root2.left,left),root2.right&&getAllChildren(root2.right,right),[cy.collection(left),cy.collection(right)]):root2.value?[cy.collection(root2.value)]:(root2.left&&(left=buildClustersFromTree2(root2.left,k-1,cy)),root2.right&&(right=buildClustersFromTree2(root2.right,k-1,cy)),left.concat(right))},hierarchicalClustering=function hierarchicalClustering2(options){for(var cy=this.cy(),nodes2=this.nodes(),opts=setOptions$1(options),attrs=opts.attributes,getDist2=function getDist3(n1,n2){return clusteringDistance(opts.distance,attrs.length,(function(i3){return attrs[i3](n1)}),(function(i3){return attrs[i3](n2)}),n1,n2)},clusters=[],dists=[],mins=[],index=[],n=0;n<nodes2.length;n++){var cluster={value:"dendrogram"===opts.mode?nodes2[n]:[nodes2[n]],key:n,index:n};clusters[n]=cluster,index[n]=cluster,dists[n]=[],mins[n]=0}for(var i2=0;i2<clusters.length;i2++)for(var j=0;j<=i2;j++){var dist2=void 0;dist2="dendrogram"===opts.mode?i2===j?1/0:getDist2(clusters[i2].value,clusters[j].value):i2===j?1/0:getDist2(clusters[i2].value[0],clusters[j].value[0]),dists[i2][j]=dist2,dists[j][i2]=dist2,dist2<dists[i2][mins[i2]]&&(mins[i2]=j)}for(var retClusters,merged=mergeClosest(clusters,index,dists,mins,opts);merged;)merged=mergeClosest(clusters,index,dists,mins,opts);return"dendrogram"===opts.mode?(retClusters=buildClustersFromTree(clusters[0],opts.dendrogramDepth,cy),opts.addDendrogram&&buildDendrogram(clusters[0],cy)):(retClusters=new Array(clusters.length),clusters.forEach((function(cluster2,i3){cluster2.key=cluster2.index=null,retClusters[i3]=cy.collection(cluster2.value)}))),retClusters},hierarchicalClustering$1={hierarchicalClustering:hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions=function setOptions2(options){var dmp=options.damping,pref=options.preference;.5<=dmp&&dmp<1||error("Damping must range on [0.5, 1).  Got: ".concat(dmp));var validPrefs=["median","mean","min","max"];return validPrefs.some((function(v){return v===pref}))||number$1(pref)||error("Preference must be one of [".concat(validPrefs.map((function(p2){return"'".concat(p2,"'")})).join(", "),"] or a number.  Got: ").concat(pref)),defaults$9(options)},getSimilarity=function getSimilarity2(type,n1,n2,attributes){var attr=function attr2(n,i2){return attributes[i2](n)};return-clusteringDistance(type,attributes.length,(function(i2){return attr(n1,i2)}),(function(i2){return attr(n2,i2)}),n1,n2)},getPreference=function getPreference2(S,preference){return"median"===preference?median(S):"mean"===preference?mean(S):"min"===preference?min(S):"max"===preference?max(S):preference},findExemplars=function findExemplars2(n,R,A){for(var indices=[],i2=0;i2<n;i2++)R[i2*n+i2]+A[i2*n+i2]>0&&indices.push(i2);return indices},assignClusters=function assignClusters2(n,S,exemplars){for(var clusters=[],i2=0;i2<n;i2++){for(var index=-1,max2=-1/0,ei=0;ei<exemplars.length;ei++){var e=exemplars[ei];S[i2*n+e]>max2&&(index=e,max2=S[i2*n+e])}index>0&&clusters.push(index)}for(var _ei=0;_ei<exemplars.length;_ei++)clusters[exemplars[_ei]]=exemplars[_ei];return clusters},assign=function assign2(n,S,exemplars){for(var clusters=assignClusters(n,S,exemplars),ei=0;ei<exemplars.length;ei++){for(var ii=[],c=0;c<clusters.length;c++)clusters[c]===exemplars[ei]&&ii.push(c);for(var maxI=-1,maxSum=-1/0,i2=0;i2<ii.length;i2++){for(var sum=0,j=0;j<ii.length;j++)sum+=S[ii[j]*n+ii[i2]];sum>maxSum&&(maxI=i2,maxSum=sum)}exemplars[ei]=ii[maxI]}return clusters=assignClusters(n,S,exemplars)},affinityPropagation=function affinityPropagation2(options){for(var n,n2,S,p2,R,A,cy=this.cy(),nodes2=this.nodes(),opts=setOptions(options),id2position={},i2=0;i2<nodes2.length;i2++)id2position[nodes2[i2].id()]=i2;n2=(n=nodes2.length)*n,S=new Array(n2);for(var _i=0;_i<n2;_i++)S[_i]=-1/0;for(var _i2=0;_i2<n;_i2++)for(var j=0;j<n;j++)_i2!==j&&(S[_i2*n+j]=getSimilarity(opts.distance,nodes2[_i2],nodes2[j],opts.attributes));p2=getPreference(S,opts.preference);for(var _i3=0;_i3<n;_i3++)S[_i3*n+_i3]=p2;R=new Array(n2);for(var _i4=0;_i4<n2;_i4++)R[_i4]=0;A=new Array(n2);for(var _i5=0;_i5<n2;_i5++)A[_i5]=0;for(var old=new Array(n),Rp=new Array(n),se=new Array(n),_i6=0;_i6<n;_i6++)old[_i6]=0,Rp[_i6]=0,se[_i6]=0;for(var iter,e=new Array(n*opts.minIterations),_i7=0;_i7<e.length;_i7++)e[_i7]=0;for(iter=0;iter<opts.maxIterations;iter++){for(var _i8=0;_i8<n;_i8++){for(var max2=-1/0,max22=-1/0,maxI=-1,AS=0,_j=0;_j<n;_j++)old[_j]=R[_i8*n+_j],(AS=A[_i8*n+_j]+S[_i8*n+_j])>=max2?(max22=max2,max2=AS,maxI=_j):AS>max22&&(max22=AS);for(var _j2=0;_j2<n;_j2++)R[_i8*n+_j2]=(1-opts.damping)*(S[_i8*n+_j2]-max2)+opts.damping*old[_j2];R[_i8*n+maxI]=(1-opts.damping)*(S[_i8*n+maxI]-max22)+opts.damping*old[maxI]}for(var _i9=0;_i9<n;_i9++){for(var sum=0,_j3=0;_j3<n;_j3++)old[_j3]=A[_j3*n+_i9],Rp[_j3]=Math.max(0,R[_j3*n+_i9]),sum+=Rp[_j3];sum-=Rp[_i9],Rp[_i9]=R[_i9*n+_i9],sum+=Rp[_i9];for(var _j4=0;_j4<n;_j4++)A[_j4*n+_i9]=(1-opts.damping)*Math.min(0,sum-Rp[_j4])+opts.damping*old[_j4];A[_i9*n+_i9]=(1-opts.damping)*(sum-Rp[_i9])+opts.damping*old[_i9]}for(var K2=0,_i10=0;_i10<n;_i10++){var E=A[_i10*n+_i10]+R[_i10*n+_i10]>0?1:0;e[iter%opts.minIterations*n+_i10]=E,K2+=E}if(K2>0&&(iter>=opts.minIterations-1||iter==opts.maxIterations-1)){for(var _sum=0,_i11=0;_i11<n;_i11++){se[_i11]=0;for(var _j5=0;_j5<opts.minIterations;_j5++)se[_i11]+=e[_j5*n+_i11];0!==se[_i11]&&se[_i11]!==opts.minIterations||_sum++}if(_sum===n)break}}for(var exemplarsIndices=findExemplars(n,R,A),clusterIndices=assign(n,S,exemplarsIndices),clusters={},c=0;c<exemplarsIndices.length;c++)clusters[exemplarsIndices[c]]=[];for(var _i12=0;_i12<nodes2.length;_i12++){var clusterIndex=clusterIndices[id2position[nodes2[_i12].id()]];null!=clusterIndex&&clusters[clusterIndex].push(nodes2[_i12])}for(var retClusters=new Array(exemplarsIndices.length),_c=0;_c<exemplarsIndices.length;_c++)retClusters[_c]=cy.collection(clusters[exemplarsIndices[_c]]);return retClusters},affinityPropagation$1={affinityPropagation:affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:function hierholzer(options){if(!plainObject(options)){var args=arguments;options={root:args[0],directed:args[1]}}var oddIn,oddOut,startVertex,_hierholzerDefaults=hierholzerDefaults(options),root2=_hierholzerDefaults.root,directed=_hierholzerDefaults.directed,eles=this,dflag=!1;root2&&(startVertex=string(root2)?this.filter(root2)[0].id():root2[0].id());var nodes2={},edges={};directed?eles.forEach((function(ele){var id=ele.id();if(ele.isNode()){var ind=ele.indegree(!0),outd=ele.outdegree(!0),d1=ind-outd,d2=outd-ind;1==d1?oddIn?dflag=!0:oddIn=id:1==d2?oddOut?dflag=!0:oddOut=id:(d2>1||d1>1)&&(dflag=!0),nodes2[id]=[],ele.outgoers().forEach((function(e){e.isEdge()&&nodes2[id].push(e.id())}))}else edges[id]=[void 0,ele.target().id()]})):eles.forEach((function(ele){var id=ele.id();ele.isNode()?(ele.degree(!0)%2&&(oddIn?oddOut?dflag=!0:oddOut=id:oddIn=id),nodes2[id]=[],ele.connectedEdges().forEach((function(e){return nodes2[id].push(e.id())}))):edges[id]=[ele.source().id(),ele.target().id()]}));var result={found:!1,trail:void 0};if(dflag)return result;if(oddOut&&oddIn)if(directed){if(startVertex&&oddOut!=startVertex)return result;startVertex=oddOut}else{if(startVertex&&oddOut!=startVertex&&oddIn!=startVertex)return result;startVertex||(startVertex=oddOut)}else startVertex||(startVertex=eles[0].id());var walk=function walk2(v){for(var adj,adjTail,adjHead,currentNode=v,subtour2=[v];nodes2[currentNode].length;)adj=nodes2[currentNode].shift(),adjTail=edges[adj][0],currentNode!=(adjHead=edges[adj][1])?(nodes2[adjHead]=nodes2[adjHead].filter((function(e){return e!=adj})),currentNode=adjHead):directed||currentNode==adjTail||(nodes2[adjTail]=nodes2[adjTail].filter((function(e){return e!=adj})),currentNode=adjTail),subtour2.unshift(adj),subtour2.unshift(currentNode);return subtour2},trail=[],subtour=[];for(subtour=walk(startVertex);1!=subtour.length;)0==nodes2[subtour[0]].length?(trail.unshift(eles.getElementById(subtour.shift())),trail.unshift(eles.getElementById(subtour.shift()))):subtour=walk(subtour.shift()).concat(subtour);for(var d in trail.unshift(eles.getElementById(subtour.shift())),nodes2)if(nodes2[d].length)return result;return result.found=!0,result.trail=this.spawn(trail,!0),result}},hopcroftTarjanBiconnected=function hopcroftTarjanBiconnected2(){var eles=this,nodes2={},id=0,edgeCount=0,components=[],stack=[],visitedEdges={},buildComponent=function buildComponent2(x,y){for(var i2=stack.length-1,cutset=[],component=eles.spawn();stack[i2].x!=x||stack[i2].y!=y;)cutset.push(stack.pop().edge),i2--;cutset.push(stack.pop().edge),cutset.forEach((function(edge){var connectedNodes=edge.connectedNodes().intersection(eles);component.merge(edge),connectedNodes.forEach((function(node){var nodeId=node.id(),connectedEdges=node.connectedEdges().intersection(eles);component.merge(node),nodes2[nodeId].cutVertex?component.merge(connectedEdges.filter((function(edge2){return edge2.isLoop()}))):component.merge(connectedEdges)}))})),components.push(component)},biconnectedSearch=function biconnectedSearch2(root2,currentNode,parent){root2===parent&&(edgeCount+=1),nodes2[currentNode]={id:id,low:id++,cutVertex:!1};var sourceId,targetId,otherNodeId,edgeId,edges=eles.getElementById(currentNode).connectedEdges().intersection(eles);0===edges.size()?components.push(eles.spawn(eles.getElementById(currentNode))):edges.forEach((function(edge){sourceId=edge.source().id(),targetId=edge.target().id(),(otherNodeId=sourceId===currentNode?targetId:sourceId)!==parent&&(edgeId=edge.id(),visitedEdges[edgeId]||(visitedEdges[edgeId]=!0,stack.push({x:currentNode,y:otherNodeId,edge:edge})),otherNodeId in nodes2?nodes2[currentNode].low=Math.min(nodes2[currentNode].low,nodes2[otherNodeId].id):(biconnectedSearch2(root2,otherNodeId,currentNode),nodes2[currentNode].low=Math.min(nodes2[currentNode].low,nodes2[otherNodeId].low),nodes2[currentNode].id<=nodes2[otherNodeId].low&&(nodes2[currentNode].cutVertex=!0,buildComponent(currentNode,otherNodeId))))}))};eles.forEach((function(ele){if(ele.isNode()){var nodeId=ele.id();nodeId in nodes2||(edgeCount=0,biconnectedSearch(nodeId,nodeId),nodes2[nodeId].cutVertex=edgeCount>1)}}));var cutVertices=Object.keys(nodes2).filter((function(id2){return nodes2[id2].cutVertex})).map((function(id2){return eles.getElementById(id2)}));return{cut:eles.spawn(cutVertices),components:components}},tarjanStronglyConnected=function tarjanStronglyConnected2(){var eles=this,nodes2={},index=0,components=[],stack=[],cut=eles.spawn(eles),stronglyConnectedSearch=function stronglyConnectedSearch2(sourceNodeId){if(stack.push(sourceNodeId),nodes2[sourceNodeId]={index:index,low:index++,explored:!1},eles.getElementById(sourceNodeId).connectedEdges().intersection(eles).forEach((function(edge){var targetNodeId=edge.target().id();targetNodeId!==sourceNodeId&&(targetNodeId in nodes2||stronglyConnectedSearch2(targetNodeId),nodes2[targetNodeId].explored||(nodes2[sourceNodeId].low=Math.min(nodes2[sourceNodeId].low,nodes2[targetNodeId].low)))})),nodes2[sourceNodeId].index===nodes2[sourceNodeId].low){for(var componentNodes=eles.spawn();;){var nodeId=stack.pop();if(componentNodes.merge(eles.getElementById(nodeId)),nodes2[nodeId].low=nodes2[sourceNodeId].index,nodes2[nodeId].explored=!0,nodeId===sourceNodeId)break}var componentEdges=componentNodes.edgesWith(componentNodes),component=componentNodes.merge(componentEdges);components.push(component),cut=cut.difference(component)}};return eles.forEach((function(ele){if(ele.isNode()){var nodeId=ele.id();nodeId in nodes2||stronglyConnectedSearch(nodeId)}})),{cut:cut,components:components}},elesfn$j={};[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,{hopcroftTarjanBiconnected:hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},{tarjanStronglyConnected:tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected}].forEach((function(props){extend(elesfn$j,props)}));var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,api=function api2(executor){if(!(this instanceof api2))return new api2(executor);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof executor&&executor.call(this,this.fulfill.bind(this),this.reject.bind(this))};api.prototype={fulfill:function fulfill(value){return deliver(this,STATE_FULFILLED,"fulfillValue",value)},reject:function reject(value){return deliver(this,STATE_REJECTED,"rejectReason",value)},then:function then(onFulfilled,onRejected){var curr=this,next2=new api;return curr.onFulfilled.push(resolver(onFulfilled,next2,"fulfill")),curr.onRejected.push(resolver(onRejected,next2,"reject")),execute(curr),next2.proxy}};var deliver=function deliver2(curr,state,name,value){return curr.state===STATE_PENDING&&(curr.state=state,curr[name]=value,execute(curr)),curr},execute=function execute2(curr){curr.state===STATE_FULFILLED?execute_handlers(curr,"onFulfilled",curr.fulfillValue):curr.state===STATE_REJECTED&&execute_handlers(curr,"onRejected",curr.rejectReason)},execute_handlers=function execute_handlers2(curr,name,value){if(0!==curr[name].length){var handlers=curr[name];curr[name]=[];var func=function func2(){for(var i2=0;i2<handlers.length;i2++)handlers[i2](value)};"function"==typeof setImmediate?setImmediate(func):setTimeout(func,0)}},resolver=function resolver2(cb,next2,method){return function(value){if("function"!=typeof cb)next2[method].call(next2,value);else{var result;try{result=cb(value)}catch(e){return void next2.reject(e)}resolve(next2,result)}}},resolve=function resolve2(promise2,x){if(promise2!==x&&promise2.proxy!==x){var then;if("object"===_typeof(x)&&null!==x||"function"==typeof x)try{then=x.then}catch(e){return void promise2.reject(e)}if("function"!=typeof then)promise2.fulfill(x);else{var resolved=!1;try{then.call(x,(function(y){resolved||(resolved=!0,y===x?promise2.reject(new TypeError("circular thenable chain")):resolve2(promise2,y))}),(function(r){resolved||(resolved=!0,promise2.reject(r))}))}catch(e){resolved||promise2.reject(e)}}}else promise2.reject(new TypeError("cannot resolve promise with itself"))};api.all=function(ps){return new api((function(resolveAll,rejectAll){for(var vals=new Array(ps.length),doneCount=0,fulfill=function fulfill2(i3,val){vals[i3]=val,++doneCount===ps.length&&resolveAll(vals)},i2=0;i2<ps.length;i2++)!function(i3){var p2=ps[i3];null!=p2&&null!=p2.then?p2.then((function(val2){fulfill(i3,val2)}),(function(err){rejectAll(err)})):fulfill(i3,p2)}(i2)}))},api.resolve=function(val){return new api((function(resolve2,reject){resolve2(val)}))},api.reject=function(val){return new api((function(resolve2,reject){reject(val)}))};var Promise$1="undefined"!=typeof Promise?Promise:api,Animation=function Animation2(target,opts,opts2){var isCore=core(target),isEle=!isCore,_p=this._private=extend({duration:1e3},opts,opts2);if(_p.target=target,_p.style=_p.style||_p.css,_p.started=!1,_p.playing=!1,_p.hooked=!1,_p.applying=!1,_p.progress=0,_p.completes=[],_p.frames=[],_p.complete&&fn$6(_p.complete)&&_p.completes.push(_p.complete),isEle){var pos=target.position();_p.startPosition=_p.startPosition||{x:pos.x,y:pos.y},_p.startStyle=_p.startStyle||target.cy().style().getAnimationStartStyle(target,_p.style)}if(isCore){var pan=target.pan();_p.startPan={x:pan.x,y:pan.y},_p.startZoom=target.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function instanceString(){return"animation"},hook:function hook(){var _p=this._private;if(!_p.hooked){var tAni=_p.target._private.animation;(_p.queue?tAni.queue:tAni.current).push(this),elementOrCollection(_p.target)&&_p.target.cy().addToAnimationPool(_p.target),_p.hooked=!0}return this},play:function play(){var _p=this._private;return 1===_p.progress&&(_p.progress=0),_p.playing=!0,_p.started=!1,_p.stopped=!1,this.hook(),this},playing:function playing(){return this._private.playing},apply:function apply(){var _p=this._private;return _p.applying=!0,_p.started=!1,_p.stopped=!1,this.hook(),this},applying:function applying(){return this._private.applying},pause:function pause(){var _p=this._private;return _p.playing=!1,_p.started=!1,this},stop:function stop(){var _p=this._private;return _p.playing=!1,_p.started=!1,_p.stopped=!0,this},rewind:function rewind(){return this.progress(0)},fastforward:function fastforward(){return this.progress(1)},time:function time(t){var _p=this._private;return void 0===t?_p.progress*_p.duration:this.progress(t/_p.duration)},progress:function progress(p2){var _p=this._private,wasPlaying=_p.playing;return void 0===p2?_p.progress:(wasPlaying&&this.pause(),_p.progress=p2,_p.started=!1,wasPlaying&&this.play(),this)},completed:function completed(){return 1===this._private.progress},reverse:function reverse(){var _p=this._private,wasPlaying=_p.playing;wasPlaying&&this.pause(),_p.progress=1-_p.progress,_p.started=!1;var swap=function swap2(a,b){var _pa=_p[a];null!=_pa&&(_p[a]=_p[b],_p[b]=_pa)};if(swap("zoom","startZoom"),swap("pan","startPan"),swap("position","startPosition"),_p.style)for(var i2=0;i2<_p.style.length;i2++){var prop=_p.style[i2],name=prop.name,startStyleProp=_p.startStyle[name];_p.startStyle[name]=prop,_p.style[i2]=startStyleProp}return wasPlaying&&this.play(),this},promise:function promise2(type){var arr,_p=this._private;return arr="frame"===type?_p.frames:_p.completes,new Promise$1((function(resolve2,reject){arr.push((function(){resolve2()}))}))}}),anifn.complete=anifn.completed,anifn.run=anifn.play,anifn.running=anifn.playing;var define$3={animated:function animated(){return function animatedImpl(){var self2=this,all=void 0!==self2.length?self2:[self2];if(!(this._private.cy||this).styleEnabled())return!1;var ele=all[0];return ele?ele._private.animation.current.length>0:void 0}},clearQueue:function clearQueue(){return function clearQueueImpl(){var self2=this,all=void 0!==self2.length?self2:[self2];if(!(this._private.cy||this).styleEnabled())return this;for(var i2=0;i2<all.length;i2++)all[i2]._private.animation.queue=[];return this}},delay:function delay(){return function delayImpl(time,complete){return(this._private.cy||this).styleEnabled()?this.animate({delay:time,duration:time,complete:complete}):this}},delayAnimation:function delayAnimation(){return function delayAnimationImpl(time,complete){return(this._private.cy||this).styleEnabled()?this.animation({delay:time,duration:time,complete:complete}):this}},animation:function animation(){return function animationImpl(properties,params){var self2=this,selfIsArrayLike=void 0!==self2.length,all=selfIsArrayLike?self2:[self2],cy=this._private.cy||this,isCore=!selfIsArrayLike,isEles=!isCore;if(!cy.styleEnabled())return this;var style=cy.style();if(properties=extend({},properties,params),0===Object.keys(properties).length)return new Animation(all[0],properties);switch(void 0===properties.duration&&(properties.duration=400),properties.duration){case"slow":properties.duration=600;break;case"fast":properties.duration=200}if(isEles&&(properties.style=style.getPropsList(properties.style||properties.css),properties.css=void 0),isEles&&null!=properties.renderedPosition){var rpos=properties.renderedPosition,pan=cy.pan(),zoom=cy.zoom();properties.position=renderedToModelPosition(rpos,zoom,pan)}if(isCore&&null!=properties.panBy){var panBy=properties.panBy,cyPan=cy.pan();properties.pan={x:cyPan.x+panBy.x,y:cyPan.y+panBy.y}}var center=properties.center||properties.centre;if(isCore&&null!=center){var centerPan=cy.getCenterPan(center.eles,properties.zoom);null!=centerPan&&(properties.pan=centerPan)}if(isCore&&null!=properties.fit){var fit=properties.fit,fitVp=cy.getFitViewport(fit.eles||fit.boundingBox,fit.padding);null!=fitVp&&(properties.pan=fitVp.pan,properties.zoom=fitVp.zoom)}if(isCore&&plainObject(properties.zoom)){var vp=cy.getZoomedViewport(properties.zoom);null!=vp?(vp.zoomed&&(properties.zoom=vp.zoom),vp.panned&&(properties.pan=vp.pan)):properties.zoom=null}return new Animation(all[0],properties)}},animate:function animate(){return function animateImpl(properties,params){var self2=this,all=void 0!==self2.length?self2:[self2];if(!(this._private.cy||this).styleEnabled())return this;params&&(properties=extend({},properties,params));for(var i2=0;i2<all.length;i2++){var ele=all[i2],queue=ele.animated()&&(void 0===properties.queue||properties.queue);ele.animation(properties,queue?{queue:!0}:void 0).play()}return this}},stop:function stop(){return function stopImpl(clearQueue,jumpToEnd){var self2=this,all=void 0!==self2.length?self2:[self2],cy=this._private.cy||this;if(!cy.styleEnabled())return this;for(var i2=0;i2<all.length;i2++){for(var _p=all[i2]._private,anis=_p.animation.current,j=0;j<anis.length;j++){var ani_p=anis[j]._private;jumpToEnd&&(ani_p.duration=0)}clearQueue&&(_p.animation.queue=[]),jumpToEnd||(_p.animation.current=[])}return cy.notify("draw"),this}}},isArray_1=Array.isArray,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object2){if(isArray_1(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol_1(value))||reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object2&&value in Object(object2)}var _isKey=isKey,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject_1(value))return!1;var tag=_baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var uid,isFunction_1=isFunction,_coreJsData=_root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"";function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var _isMasked=isMasked,funcToString$1=Function.prototype.toString;function toSource(func){if(null!=func){try{return funcToString$1.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$3=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$3.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$3).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){return!(!isObject_1(value)||_isMasked(value))&&(isFunction_1(value)?reIsNative:reIsHostCtor).test(_toSource(value))}var _baseIsNative=baseIsNative;function getValue$1(object2,key){return null==object2?void 0:object2[key]}var _getValue=getValue$1;function getNative(object2,key){var value=_getValue(object2,key);return _baseIsNative(value)?value:void 0}var _getNative=getNative,_nativeCreate=_getNative(Object,"create");function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result}var _hashDelete=hashDelete,HASH_UNDEFINED$1="__lodash_hash_undefined__",hasOwnProperty$2=Object.prototype.hasOwnProperty;function hashGet(key){var data2=this.__data__;if(_nativeCreate){var result=data2[key];return result===HASH_UNDEFINED$1?void 0:result}return hasOwnProperty$2.call(data2,key)?data2[key]:void 0}var _hashGet=hashGet,hasOwnProperty$1=Object.prototype.hasOwnProperty;function hashHas(key){var data2=this.__data__;return _nativeCreate?void 0!==data2[key]:hasOwnProperty$1.call(data2,key)}var _hashHas=hashHas,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data2=this.__data__;return this.size+=this.has(key)?0:1,data2[key]=_nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}var _hashSet=hashSet;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(value,other){return value===other||value!=value&&other!=other}var eq_1=eq;function assocIndexOf(array2,key){for(var length=array2.length;length--;)if(eq_1(array2[length][0],key))return length;return-1}var _assocIndexOf=assocIndexOf,splice=Array.prototype.splice;function listCacheDelete(key){var data2=this.__data__,index=_assocIndexOf(data2,key);return!(index<0||(index==data2.length-1?data2.pop():splice.call(data2,index,1),--this.size,0))}var _listCacheDelete=listCacheDelete;function listCacheGet(key){var data2=this.__data__,index=_assocIndexOf(data2,key);return index<0?void 0:data2[index][1]}var _listCacheGet=listCacheGet;function listCacheHas(key){return _assocIndexOf(this.__data__,key)>-1}var _listCacheHas=listCacheHas;function listCacheSet(key,value){var data2=this.__data__,index=_assocIndexOf(data2,key);return index<0?(++this.size,data2.push([key,value])):data2[index][1]=value,this}var _listCacheSet=listCacheSet;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,_Map=_getNative(_root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}var _isKeyable=isKeyable;function getMapData(map,key){var data2=map.__data__;return _isKeyable(key)?data2["string"==typeof key?"string":"hash"]:data2.map}var _getMapData=getMapData;function mapCacheDelete(key){var result=_getMapData(this,key).delete(key);return this.size-=result?1:0,result}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(key){return _getMapData(this,key).get(key)}var _mapCacheGet=mapCacheGet;function mapCacheHas(key){return _getMapData(this,key).has(key)}var _mapCacheHas=mapCacheHas;function mapCacheSet(key,value){var data2=_getMapData(this,key),size=data2.size;return data2.set(key,value),this.size+=data2.size==size?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver2){if("function"!=typeof func||null!=resolver2&&"function"!=typeof resolver2)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver2?resolver2.apply(this,args):args[0],cache2=memoized.cache;if(cache2.has(key))return cache2.get(key);var result=func.apply(this,args);return memoized.cache=cache2.set(key,result)||cache2,result};return memoized.cache=new(memoize.Cache||_MapCache),memoized}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize_1(func,(function(key){return cache2.size===MAX_MEMOIZE_SIZE&&cache2.clear(),key})),cache2=result.cache;return result}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,_stringToPath=memoizeCapped((function(string2){var result=[];return 46===string2.charCodeAt(0)&&result.push(""),string2.replace(rePropName,(function(match2,number2,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number2||match2)})),result}));function arrayMap(array2,iteratee){for(var index=-1,length=null==array2?0:array2.length,result=Array(length);++index<length;)result[index]=iteratee(array2[index],index,array2);return result}var _arrayMap=arrayMap,INFINITY$1=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(value){if("string"==typeof value)return value;if(isArray_1(value))return _arrayMap(value,baseToString)+"";if(isSymbol_1(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY$1?"-0":result}var _baseToString=baseToString;function toString$1(value){return null==value?"":_baseToString(value)}var toString_1=toString$1;function castPath(value,object2){return isArray_1(value)?value:_isKey(value,object2)?[value]:_stringToPath(toString_1(value))}var _castPath=castPath,INFINITY=1/0;function toKey(value){if("string"==typeof value||isSymbol_1(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}var _toKey=toKey;function baseGet(object2,path){for(var index=0,length=(path=_castPath(path,object2)).length;null!=object2&&index<length;)object2=object2[_toKey(path[index++])];return index&&index==length?object2:void 0}var _baseGet=baseGet;function get(object2,path,defaultValue){var result=null==object2?void 0:_baseGet(object2,path);return void 0===result?defaultValue:result}var get_1=get,_defineProperty=function(){try{var func=_getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}();function baseAssignValue(object2,key,value){"__proto__"==key&&_defineProperty?_defineProperty(object2,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object2[key]=value}var _baseAssignValue=baseAssignValue,hasOwnProperty=Object.prototype.hasOwnProperty;function assignValue(object2,key,value){var objValue=object2[key];hasOwnProperty.call(object2,key)&&eq_1(objValue,value)&&(void 0!==value||key in object2)||_baseAssignValue(object2,key,value)}var _assignValue=assignValue,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}var _isIndex=isIndex;function baseSet(object2,path,value,customizer){if(!isObject_1(object2))return object2;for(var index=-1,length=(path=_castPath(path,object2)).length,lastIndex=length-1,nested=object2;null!=nested&&++index<length;){var key=_toKey(path[index]),newValue=value;if("__proto__"===key||"constructor"===key||"prototype"===key)return object2;if(index!=lastIndex){var objValue=nested[key];void 0===(newValue=customizer?customizer(objValue,key,nested):void 0)&&(newValue=isObject_1(objValue)?objValue:_isIndex(path[index+1])?[]:{})}_assignValue(nested,key,newValue),nested=nested[key]}return object2}var _baseSet=baseSet;function set(object2,path,value){return null==object2?object2:_baseSet(object2,path,value)}var set_1=set;function copyArray(source,array2){var index=-1,length=source.length;for(array2||(array2=Array(length));++index<length;)array2[index]=source[index];return array2}var _copyArray=copyArray;function toPath(value){return isArray_1(value)?_arrayMap(value,_toKey):isSymbol_1(value)?[value]:_copyArray(_stringToPath(toString_1(value)))}var toPath_1=toPath,define$1={eventAliasesOn:function eventAliasesOn(proto){var p2=proto;p2.addListener=p2.listen=p2.bind=p2.on,p2.unlisten=p2.unbind=p2.off=p2.removeListener,p2.trigger=p2.emit,p2.pon=p2.promiseOn=function(events,selector){var self2=this,args=Array.prototype.slice.call(arguments,0);return new Promise$1((function(resolve2,reject){var callback=function callback2(e){self2.off.apply(self2,offArgs),resolve2(e)},onArgs=args.concat([callback]),offArgs=onArgs.concat([]);self2.on.apply(self2,onArgs)}))}}},define={};[define$3,{data:function data2(params){return params=extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function beforeGet(self2){},beforeSet:function beforeSet(self2,obj){},onSet:function onSet(self2){},canSet:function canSet(self2){return!0}},params),function dataImpl(name,value){var p2=params,self2=this,selfIsArrayLike=void 0!==self2.length,all=selfIsArrayLike?self2:[self2],single=selfIsArrayLike?self2[0]:self2;if(string(name)){var ret,path=-1!==name.indexOf(".")&&toPath_1(name);if(p2.allowGetting&&void 0===value)return single&&(p2.beforeGet(single),ret=path&&void 0===single._private[p2.field][name]?get_1(single._private[p2.field],path):single._private[p2.field][name]),ret;if(p2.allowSetting&&void 0!==value&&!p2.immutableKeys[name]){var change=_defineProperty$1({},name,value);p2.beforeSet(self2,change);for(var i2=0,l=all.length;i2<l;i2++){var ele=all[i2];p2.canSet(ele)&&(path&&void 0===single._private[p2.field][name]?set_1(ele._private[p2.field],path,value):ele._private[p2.field][name]=value)}p2.updateStyle&&self2.updateStyle(),p2.onSet(self2),p2.settingTriggersEvent&&self2[p2.triggerFnName](p2.settingEvent)}}else if(p2.allowSetting&&plainObject(name)){var k,v,obj=name,keys=Object.keys(obj);p2.beforeSet(self2,obj);for(var _i=0;_i<keys.length;_i++)if(v=obj[k=keys[_i]],!p2.immutableKeys[k])for(var j=0;j<all.length;j++){var _ele=all[j];p2.canSet(_ele)&&(_ele._private[p2.field][k]=v)}p2.updateStyle&&self2.updateStyle(),p2.onSet(self2),p2.settingTriggersEvent&&self2[p2.triggerFnName](p2.settingEvent)}else if(p2.allowBinding&&fn$6(name)){var fn2=name;self2.on(p2.bindingEvent,fn2)}else if(p2.allowGetting&&void 0===name){var _ret;return single&&(p2.beforeGet(single),_ret=single._private[p2.field]),_ret}return self2}},removeData:function removeData(params){return params=extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},params),function removeDataImpl(names){var p2=params,self2=this,all=void 0!==self2.length?self2:[self2];if(string(names)){for(var keys=names.split(/\s+/),l=keys.length,i2=0;i2<l;i2++){var key=keys[i2];if(!emptyString(key)&&!p2.immutableKeys[key])for(var i_a=0,l_a=all.length;i_a<l_a;i_a++)all[i_a]._private[p2.field][key]=void 0}p2.triggerEvent&&self2[p2.triggerFnName](p2.event)}else if(void 0===names){for(var _i_a=0,_l_a=all.length;_i_a<_l_a;_i_a++)for(var _privateFields=all[_i_a]._private[p2.field],_keys=Object.keys(_privateFields),_i2=0;_i2<_keys.length;_i2++){var _key=_keys[_i2];!p2.immutableKeys[_key]&&(_privateFields[_key]=void 0)}p2.triggerEvent&&self2[p2.triggerFnName](p2.event)}return self2}}},define$1].forEach((function(m){extend(define,m)}));var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function classes(_classes){var self2=this;if(void 0===_classes){var ret=[];return self2[0]._private.classes.forEach((function(cls2){return ret.push(cls2)})),ret}array(_classes)||(_classes=(_classes||"").match(/\S+/g)||[]);for(var changed=[],classesSet=new Set$1(_classes),j=0;j<self2.length;j++){for(var ele=self2[j],_p=ele._private,eleClasses=_p.classes,changedEle=!1,i2=0;i2<_classes.length;i2++){var cls=_classes[i2];if(!eleClasses.has(cls)){changedEle=!0;break}}changedEle||(changedEle=eleClasses.size!==_classes.length),changedEle&&(_p.classes=classesSet,changed.push(ele))}return changed.length>0&&this.spawn(changed).updateStyle().emit("class"),self2},addClass:function addClass(classes){return this.toggleClass(classes,!0)},hasClass:function hasClass(className){var ele=this[0];return null!=ele&&ele._private.classes.has(className)},toggleClass:function toggleClass(classes,toggle){array(classes)||(classes=classes.match(/\S+/g)||[]);for(var self2=this,toggleUndefd=void 0===toggle,changed=[],i2=0,il=self2.length;i2<il;i2++)for(var ele=self2[i2],eleClasses=ele._private.classes,changedEle=!1,j=0;j<classes.length;j++){var cls=classes[j],hasClass=eleClasses.has(cls),changedNow=!1;toggle||toggleUndefd&&!hasClass?(eleClasses.add(cls),changedNow=!0):(!toggle||toggleUndefd&&hasClass)&&(eleClasses.delete(cls),changedNow=!0),!changedEle&&changedNow&&(changed.push(ele),changedEle=!0)}return changed.length>0&&this.spawn(changed).updateStyle().emit("class"),self2},removeClass:function removeClass(classes){return this.toggleClass(classes,!1)},flashClass:function flashClass(classes,duration){var self2=this;if(null==duration)duration=250;else if(0===duration)return self2;return self2.addClass(classes),setTimeout((function(){self2.removeClass(classes)}),duration),self2}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+",tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+",tokens.value=tokens.string+"|"+tokens.number,tokens.id=tokens.variable,function(){var ops,op,i2;for(ops=tokens.comparatorOp.split("|"),i2=0;i2<ops.length;i2++)op=ops[i2],tokens.comparatorOp+="|@"+op;for(ops=tokens.comparatorOp.split("|"),i2=0;i2<ops.length;i2++)(op=ops[i2]).indexOf("!")>=0||"="!==op&&(tokens.comparatorOp+="|\\!"+op)}();var newQuery=function newQuery2(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function matches2(ele){return ele.selected()}},{selector:":unselected",matches:function matches2(ele){return!ele.selected()}},{selector:":selectable",matches:function matches2(ele){return ele.selectable()}},{selector:":unselectable",matches:function matches2(ele){return!ele.selectable()}},{selector:":locked",matches:function matches2(ele){return ele.locked()}},{selector:":unlocked",matches:function matches2(ele){return!ele.locked()}},{selector:":visible",matches:function matches2(ele){return ele.visible()}},{selector:":hidden",matches:function matches2(ele){return!ele.visible()}},{selector:":transparent",matches:function matches2(ele){return ele.transparent()}},{selector:":grabbed",matches:function matches2(ele){return ele.grabbed()}},{selector:":free",matches:function matches2(ele){return!ele.grabbed()}},{selector:":removed",matches:function matches2(ele){return ele.removed()}},{selector:":inside",matches:function matches2(ele){return!ele.removed()}},{selector:":grabbable",matches:function matches2(ele){return ele.grabbable()}},{selector:":ungrabbable",matches:function matches2(ele){return!ele.grabbable()}},{selector:":animated",matches:function matches2(ele){return ele.animated()}},{selector:":unanimated",matches:function matches2(ele){return!ele.animated()}},{selector:":parent",matches:function matches2(ele){return ele.isParent()}},{selector:":childless",matches:function matches2(ele){return ele.isChildless()}},{selector:":child",matches:function matches2(ele){return ele.isChild()}},{selector:":orphan",matches:function matches2(ele){return ele.isOrphan()}},{selector:":nonorphan",matches:function matches2(ele){return ele.isChild()}},{selector:":compound",matches:function matches2(ele){return ele.isNode()?ele.isParent():ele.source().isParent()||ele.target().isParent()}},{selector:":loop",matches:function matches2(ele){return ele.isLoop()}},{selector:":simple",matches:function matches2(ele){return ele.isSimple()}},{selector:":active",matches:function matches2(ele){return ele.active()}},{selector:":inactive",matches:function matches2(ele){return!ele.active()}},{selector:":backgrounding",matches:function matches2(ele){return ele.backgrounding()}},{selector:":nonbackgrounding",matches:function matches2(ele){return!ele.backgrounding()}}].sort((function(a,b){return descending(a.selector,b.selector)})),lookup=function(){for(var s,selToFn={},i2=0;i2<stateSelectors.length;i2++)selToFn[(s=stateSelectors[i2]).selector]=s.matches;return selToFn}(),stateSelectorMatches=function stateSelectorMatches2(sel,ele){return lookup[sel](ele)},stateSelectorRegex="("+stateSelectors.map((function(s){return s.selector})).join("|")+")",cleanMetaChars=function cleanMetaChars2(str){return str.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),(function(match2,$1){return $1}))},replaceLastQuery=function replaceLastQuery2(selector,examiningQuery,replacementQuery){selector[selector.length-1]=replacementQuery},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function populate(selector,query,_ref){var group=_slicedToArray(_ref,1)[0];query.checks.push({type:Type.GROUP,value:"*"===group?group:group+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function populate(selector,query,_ref3){var state=_slicedToArray(_ref3,1)[0];query.checks.push({type:Type.STATE,value:state})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function populate(selector,query,_ref5){var id=_slicedToArray(_ref5,1)[0];query.checks.push({type:Type.ID,value:cleanMetaChars(id)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function populate(selector,query,_ref7){var className=_slicedToArray(_ref7,1)[0];query.checks.push({type:Type.CLASS,value:cleanMetaChars(className)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function populate(selector,query,_ref9){var variable=_slicedToArray(_ref9,1)[0];query.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(variable)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function populate(selector,query,_ref11){var _ref12=_slicedToArray(_ref11,3),variable=_ref12[0],comparatorOp=_ref12[1],value=_ref12[2];value=null!=new RegExp("^"+tokens.string+"$").exec(value)?value.substring(1,value.length-1):parseFloat(value),query.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function populate(selector,query,_ref13){var _ref14=_slicedToArray(_ref13,2),boolOp=_ref14[0],variable=_ref14[1];query.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(variable),operator:boolOp})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function populate(selector,query,_ref15){var _ref16=_slicedToArray(_ref15,3),meta2=_ref16[0],comparatorOp=_ref16[1],number2=_ref16[2];query.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(meta2),operator:comparatorOp,value:parseFloat(number2)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function populate(selector,query){var currentSubject=selector.currentSubject,edgeCount=selector.edgeCount,compoundCount=selector.compoundCount,lastQ=selector[selector.length-1];return null!=currentSubject&&(lastQ.subject=currentSubject,selector.currentSubject=null),lastQ.edgeCount=edgeCount,lastQ.compoundCount=compoundCount,selector.edgeCount=0,selector.compoundCount=0,selector[selector.length++]=newQuery()}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function populate(selector,query){if(null==selector.currentSubject){var edgeQuery=newQuery(),source=query,target=newQuery();return edgeQuery.checks.push({type:Type.DIRECTED_EDGE,source:source,target:target}),replaceLastQuery(selector,query,edgeQuery),selector.edgeCount++,target}var srcTgtQ=newQuery(),_source=query,_target=newQuery();return srcTgtQ.checks.push({type:Type.NODE_SOURCE,source:_source,target:_target}),replaceLastQuery(selector,query,srcTgtQ),selector.edgeCount++,_target}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function populate(selector,query){if(null==selector.currentSubject){var edgeQuery=newQuery(),source=query,target=newQuery();return edgeQuery.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[source,target]}),replaceLastQuery(selector,query,edgeQuery),selector.edgeCount++,target}var nhoodQ=newQuery(),node=query,neighbor=newQuery();return nhoodQ.checks.push({type:Type.NODE_NEIGHBOR,node:node,neighbor:neighbor}),replaceLastQuery(selector,query,nhoodQ),neighbor}},{name:"child",separator:!0,regex:tokens.child,populate:function populate(selector,query){if(null==selector.currentSubject){var parentChildQuery=newQuery(),child=newQuery(),parent=selector[selector.length-1];return parentChildQuery.checks.push({type:Type.CHILD,parent:parent,child:child}),replaceLastQuery(selector,query,parentChildQuery),selector.compoundCount++,child}if(selector.currentSubject===query){var compound=newQuery(),left=selector[selector.length-1],right=newQuery(),subject=newQuery(),_child=newQuery(),_parent=newQuery();return compound.checks.push({type:Type.COMPOUND_SPLIT,left:left,right:right,subject:subject}),subject.checks=query.checks,query.checks=[{type:Type.TRUE}],_parent.checks.push({type:Type.TRUE}),right.checks.push({type:Type.PARENT,parent:_parent,child:_child}),replaceLastQuery(selector,left,compound),selector.currentSubject=subject,selector.compoundCount++,_child}var _parent2=newQuery(),_child2=newQuery(),pcQChecks=[{type:Type.PARENT,parent:_parent2,child:_child2}];return _parent2.checks=query.checks,query.checks=pcQChecks,selector.compoundCount++,_child2}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function populate(selector,query){if(null==selector.currentSubject){var ancChQuery=newQuery(),descendant=newQuery(),ancestor=selector[selector.length-1];return ancChQuery.checks.push({type:Type.DESCENDANT,ancestor:ancestor,descendant:descendant}),replaceLastQuery(selector,query,ancChQuery),selector.compoundCount++,descendant}if(selector.currentSubject===query){var compound=newQuery(),left=selector[selector.length-1],right=newQuery(),subject=newQuery(),_descendant=newQuery(),_ancestor=newQuery();return compound.checks.push({type:Type.COMPOUND_SPLIT,left:left,right:right,subject:subject}),subject.checks=query.checks,query.checks=[{type:Type.TRUE}],_ancestor.checks.push({type:Type.TRUE}),right.checks.push({type:Type.ANCESTOR,ancestor:_ancestor,descendant:_descendant}),replaceLastQuery(selector,left,compound),selector.currentSubject=subject,selector.compoundCount++,_descendant}var _ancestor2=newQuery(),_descendant2=newQuery(),adQChecks=[{type:Type.ANCESTOR,ancestor:_ancestor2,descendant:_descendant2}];return _ancestor2.checks=query.checks,query.checks=adQChecks,selector.compoundCount++,_descendant2}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function populate(selector,query){if(null!=selector.currentSubject&&selector.currentSubject!==query)return warn("Redefinition of subject in selector `"+selector.toString()+"`"),!1;selector.currentSubject=query;var topChk=selector[selector.length-1].checks[0],topType=null==topChk?null:topChk.type;topType===Type.DIRECTED_EDGE?topChk.type=Type.NODE_TARGET:topType===Type.UNDIRECTED_EDGE&&(topChk.type=Type.NODE_NEIGHBOR,topChk.node=topChk.nodes[1],topChk.neighbor=topChk.nodes[0],topChk.nodes=null)}}];exprs.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var consumeExpr=function consumeExpr2(remaining){for(var expr,match2,name,j=0;j<exprs.length;j++){var e=exprs[j],n=e.name,m=remaining.match(e.regexObj);if(null!=m){match2=m,expr=e,name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);break}}return{expr:expr,match:match2,name:name,remaining:remaining}},consumeWhitespace=function consumeWhitespace2(remaining){var match2=remaining.match(/^\s+/);if(match2){var consumed=match2[0];remaining=remaining.substring(consumed.length)}return remaining},parse$1={parse:function parse2(selector){var self2=this,remaining=self2.inputText=selector,currentQuery=self2[0]=newQuery();for(self2.length=1,remaining=consumeWhitespace(remaining);;){var exprInfo=consumeExpr(remaining);if(null==exprInfo.expr)return warn("The selector `"+selector+"`is invalid"),!1;var args=exprInfo.match.slice(1),ret=exprInfo.expr.populate(self2,currentQuery,args);if(!1===ret)return!1;if(null!=ret&&(currentQuery=ret),(remaining=exprInfo.remaining).match(/^\s*$/))break}var lastQ=self2[self2.length-1];null!=self2.currentSubject&&(lastQ.subject=self2.currentSubject),lastQ.edgeCount=self2.edgeCount,lastQ.compoundCount=self2.compoundCount;for(var i2=0;i2<self2.length;i2++){var q=self2[i2];if(q.compoundCount>0&&q.edgeCount>0)return warn("The selector `"+selector+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(q.edgeCount>1)return warn("The selector `"+selector+"` is invalid because it uses multiple edge selectors"),!1;1===q.edgeCount&&warn("The selector `"+selector+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function toString2(){if(null!=this.toStringCache)return this.toStringCache;for(var clean=function clean2(obj){return null==obj?"":obj},cleanVal=function cleanVal2(val){return string(val)?'"'+val+'"':clean(val)},space=function space2(val){return" "+val+" "},checkToString=function checkToString2(check,subject){var type=check.type,value=check.value;switch(type){case Type.GROUP:var group=clean(value);return group.substring(0,group.length-1);case Type.DATA_COMPARE:var field=check.field,operator=check.operator;return"["+field+space(clean(operator))+cleanVal(value)+"]";case Type.DATA_BOOL:var _operator=check.operator,_field=check.field;return"["+clean(_operator)+_field+"]";case Type.DATA_EXIST:return"["+check.field+"]";case Type.META_COMPARE:var _operator2=check.operator;return"[["+check.field+space(clean(_operator2))+cleanVal(value)+"]]";case Type.STATE:return value;case Type.ID:return"#"+value;case Type.CLASS:return"."+value;case Type.PARENT:case Type.CHILD:return queryToString(check.parent,subject)+space(">")+queryToString(check.child,subject);case Type.ANCESTOR:case Type.DESCENDANT:return queryToString(check.ancestor,subject)+" "+queryToString(check.descendant,subject);case Type.COMPOUND_SPLIT:var lhs=queryToString(check.left,subject),sub=queryToString(check.subject,subject),rhs=queryToString(check.right,subject);return lhs+(lhs.length>0?" ":"")+sub+rhs;case Type.TRUE:return""}},queryToString=function queryToString2(query2,subject){return query2.checks.reduce((function(str2,chk,i3){return str2+(subject===query2&&0===i3?"$":"")+checkToString(chk,subject)}),"")},str="",i2=0;i2<this.length;i2++){var query=this[i2];str+=queryToString(query,query.subject),this.length>1&&i2<this.length-1&&(str+=", ")}return this.toStringCache=str,str}},valCmp=function valCmp2(fieldVal,operator,value){var matches2,fieldStr,valStr,isFieldStr=string(fieldVal),isFieldNum=number$1(fieldVal),isValStr=string(value),caseInsensitive=!1,notExpr=!1,isIneqCmp=!1;switch(operator.indexOf("!")>=0&&(operator=operator.replace("!",""),notExpr=!0),operator.indexOf("@")>=0&&(operator=operator.replace("@",""),caseInsensitive=!0),(isFieldStr||isValStr||caseInsensitive)&&(fieldStr=isFieldStr||isFieldNum?""+fieldVal:"",valStr=""+value),caseInsensitive&&(fieldVal=fieldStr=fieldStr.toLowerCase(),value=valStr=valStr.toLowerCase()),operator){case"*=":matches2=fieldStr.indexOf(valStr)>=0;break;case"$=":matches2=fieldStr.indexOf(valStr,fieldStr.length-valStr.length)>=0;break;case"^=":matches2=0===fieldStr.indexOf(valStr);break;case"=":matches2=fieldVal===value;break;case">":isIneqCmp=!0,matches2=fieldVal>value;break;case">=":isIneqCmp=!0,matches2=fieldVal>=value;break;case"<":isIneqCmp=!0,matches2=fieldVal<value;break;case"<=":isIneqCmp=!0,matches2=fieldVal<=value;break;default:matches2=!1}return!notExpr||null==fieldVal&&isIneqCmp||(matches2=!matches2),matches2},boolCmp=function boolCmp2(fieldVal,operator){switch(operator){case"?":return!!fieldVal;case"!":return!fieldVal;case"^":return void 0===fieldVal}},existCmp=function existCmp2(fieldVal){return void 0!==fieldVal},data$1=function data2(ele,field){return ele.data(field)},meta=function meta2(ele,field){return ele[field]()},match=[],matches$1=function matches2(query,ele){return query.checks.every((function(chk){return match[chk.type](chk,ele)}))};match[Type.GROUP]=function(check,ele){var group=check.value;return"*"===group||group===ele.group()},match[Type.STATE]=function(check,ele){var stateSelector=check.value;return stateSelectorMatches(stateSelector,ele)},match[Type.ID]=function(check,ele){var id=check.value;return ele.id()===id},match[Type.CLASS]=function(check,ele){var cls=check.value;return ele.hasClass(cls)},match[Type.META_COMPARE]=function(check,ele){var field=check.field,operator=check.operator,value=check.value;return valCmp(meta(ele,field),operator,value)},match[Type.DATA_COMPARE]=function(check,ele){var field=check.field,operator=check.operator,value=check.value;return valCmp(data$1(ele,field),operator,value)},match[Type.DATA_BOOL]=function(check,ele){var field=check.field,operator=check.operator;return boolCmp(data$1(ele,field),operator)},match[Type.DATA_EXIST]=function(check,ele){var field=check.field;return check.operator,existCmp(data$1(ele,field))},match[Type.UNDIRECTED_EDGE]=function(check,ele){var qA=check.nodes[0],qB=check.nodes[1],src=ele.source(),tgt=ele.target();return matches$1(qA,src)&&matches$1(qB,tgt)||matches$1(qB,src)&&matches$1(qA,tgt)},match[Type.NODE_NEIGHBOR]=function(check,ele){return matches$1(check.node,ele)&&ele.neighborhood().some((function(n){return n.isNode()&&matches$1(check.neighbor,n)}))},match[Type.DIRECTED_EDGE]=function(check,ele){return matches$1(check.source,ele.source())&&matches$1(check.target,ele.target())},match[Type.NODE_SOURCE]=function(check,ele){return matches$1(check.source,ele)&&ele.outgoers().some((function(n){return n.isNode()&&matches$1(check.target,n)}))},match[Type.NODE_TARGET]=function(check,ele){return matches$1(check.target,ele)&&ele.incomers().some((function(n){return n.isNode()&&matches$1(check.source,n)}))},match[Type.CHILD]=function(check,ele){return matches$1(check.child,ele)&&matches$1(check.parent,ele.parent())},match[Type.PARENT]=function(check,ele){return matches$1(check.parent,ele)&&ele.children().some((function(c){return matches$1(check.child,c)}))},match[Type.DESCENDANT]=function(check,ele){return matches$1(check.descendant,ele)&&ele.ancestors().some((function(a){return matches$1(check.ancestor,a)}))},match[Type.ANCESTOR]=function(check,ele){return matches$1(check.ancestor,ele)&&ele.descendants().some((function(d){return matches$1(check.descendant,d)}))},match[Type.COMPOUND_SPLIT]=function(check,ele){return matches$1(check.subject,ele)&&matches$1(check.left,ele)&&matches$1(check.right,ele)},match[Type.TRUE]=function(){return!0},match[Type.COLLECTION]=function(check,ele){return check.value.has(ele)},match[Type.FILTER]=function(check,ele){return(0,check.value)(ele)};var matching={matches:function matches2(ele){for(var self2=this,j=0;j<self2.length;j++){var query=self2[j];if(matches$1(query,ele))return!0}return!1},filter:function filter2(collection2){var self2=this;if(1===self2.length&&1===self2[0].checks.length&&self2[0].checks[0].type===Type.ID)return collection2.getElementById(self2[0].checks[0].value).collection();var selectorFunction=function selectorFunction2(element2){for(var j=0;j<self2.length;j++){var query=self2[j];if(matches$1(query,element2))return!0}return!1};return null==self2.text()&&(selectorFunction=function selectorFunction2(){return!0}),collection2.filter(selectorFunction)}},Selector=function Selector2(selector){this.inputText=selector,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==selector||string(selector)&&selector.match(/^\s*$/)||(elementOrCollection(selector)?this.addQuery({checks:[{type:Type.COLLECTION,value:selector.collection()}]}):fn$6(selector)?this.addQuery({checks:[{type:Type.FILTER,value:selector}]}):string(selector)?this.parse(selector)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach((function(p2){return extend(selfn,p2)})),selfn.text=function(){return this.inputText},selfn.size=function(){return this.length},selfn.eq=function(i2){return this[i2]},selfn.sameText=function(otherSel){return!this.invalid&&!otherSel.invalid&&this.text()===otherSel.text()},selfn.addQuery=function(q){this[this.length++]=q},selfn.selector=selfn.toString;var elesfn$g={allAre:function allAre(selector){var selObj=new Selector(selector);return this.every((function(ele){return selObj.matches(ele)}))},is:function is(selector){var selObj=new Selector(selector);return this.some((function(ele){return selObj.matches(ele)}))},some:function some(fn2,thisArg){for(var i2=0;i2<this.length;i2++)if(thisArg?fn2.apply(thisArg,[this[i2],i2,this]):fn2(this[i2],i2,this))return!0;return!1},every:function every(fn2,thisArg){for(var i2=0;i2<this.length;i2++)if(!(thisArg?fn2.apply(thisArg,[this[i2],i2,this]):fn2(this[i2],i2,this)))return!1;return!0},same:function same(collection2){if(this===collection2)return!0;collection2=this.cy().collection(collection2);var thisLength=this.length;return thisLength===collection2.length&&(1===thisLength?this[0]===collection2[0]:this.every((function(ele){return collection2.hasElementWithId(ele.id())})))},anySame:function anySame(collection2){return collection2=this.cy().collection(collection2),this.some((function(ele){return collection2.hasElementWithId(ele.id())}))},allAreNeighbors:function allAreNeighbors(collection2){collection2=this.cy().collection(collection2);var nhood=this.neighborhood();return collection2.every((function(ele){return nhood.hasElementWithId(ele.id())}))},contains:function contains(collection2){collection2=this.cy().collection(collection2);var self2=this;return collection2.every((function(ele){return self2.hasElementWithId(ele.id())}))}};elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors,elesfn$g.has=elesfn$g.contains,elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var fn$5,elesfn$e,cache=function cache2(fn2,name){return function traversalCache(arg1,arg2,arg3,arg4){var key,selectorOrEles=arg1,eles=this;if(null==selectorOrEles?key="":elementOrCollection(selectorOrEles)&&1===selectorOrEles.length&&(key=selectorOrEles.id()),1===eles.length&&key){var _p=eles[0]._private,tch=_p.traversalCache=_p.traversalCache||{},ch=tch[name]=tch[name]||[],hash=hashString(key),cacheHit=ch[hash];return cacheHit||(ch[hash]=fn2.call(eles,arg1,arg2,arg3,arg4))}return fn2.call(eles,arg1,arg2,arg3,arg4)}},elesfn$f={parent:function parent(selector){var parents=[];if(1===this.length){var parent2=this[0]._private.parent;if(parent2)return parent2}for(var i2=0;i2<this.length;i2++){var _parent=this[i2]._private.parent;_parent&&parents.push(_parent)}return this.spawn(parents,!0).filter(selector)},parents:function parents(selector){for(var parents2=[],eles=this.parent();eles.nonempty();){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];parents2.push(ele)}eles=eles.parent()}return this.spawn(parents2,!0).filter(selector)},commonAncestors:function commonAncestors(selector){for(var ancestors,i2=0;i2<this.length;i2++){var parents=this[i2].parents();ancestors=(ancestors=ancestors||parents).intersect(parents)}return ancestors.filter(selector)},orphans:function orphans(selector){return this.stdFilter((function(ele){return ele.isOrphan()})).filter(selector)},nonorphans:function nonorphans(selector){return this.stdFilter((function(ele){return ele.isChild()})).filter(selector)},children:cache((function(selector){for(var children=[],i2=0;i2<this.length;i2++)for(var eleChildren=this[i2]._private.children,j=0;j<eleChildren.length;j++)children.push(eleChildren[j]);return this.spawn(children,!0).filter(selector)}),"children"),siblings:function siblings(selector){return this.parent().children().not(this).filter(selector)},isParent:function isParent(){var ele=this[0];if(ele)return ele.isNode()&&0!==ele._private.children.length},isChildless:function isChildless(){var ele=this[0];if(ele)return ele.isNode()&&0===ele._private.children.length},isChild:function isChild(){var ele=this[0];if(ele)return ele.isNode()&&null!=ele._private.parent},isOrphan:function isOrphan(){var ele=this[0];if(ele)return ele.isNode()&&null==ele._private.parent},descendants:function descendants(selector){var elements2=[];function add(eles){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];elements2.push(ele),ele.children().nonempty()&&add(ele.children())}}return add(this.children()),this.spawn(elements2,!0).filter(selector)}};function forEachCompound(eles,fn2,includeSelf,recursiveStep){for(var q=[],did=new Set$1,hasCompounds=eles.cy().hasCompoundNodes(),i2=0;i2<eles.length;i2++){var ele=eles[i2];includeSelf?q.push(ele):hasCompounds&&recursiveStep(q,did,ele)}for(;q.length>0;){var _ele=q.shift();fn2(_ele),did.add(_ele.id()),hasCompounds&&recursiveStep(q,did,_ele)}return eles}function addChildren(q,did,ele){if(ele.isParent())for(var children=ele._private.children,i2=0;i2<children.length;i2++){var child=children[i2];did.has(child.id())||q.push(child)}}function addParent(q,did,ele){if(ele.isChild()){var parent=ele._private.parent;did.has(parent.id())||q.push(parent)}}function addParentAndChildren(q,did,ele){addParent(q,did,ele),addChildren(q,did,ele)}elesfn$f.forEachDown=function(fn2){return forEachCompound(this,fn2,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addChildren)},elesfn$f.forEachUp=function(fn2){return forEachCompound(this,fn2,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParent)},elesfn$f.forEachUpAndDown=function(fn2){return forEachCompound(this,fn2,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParentAndChildren)},elesfn$f.ancestors=elesfn$f.parents,(fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function id(){var ele=this[0];if(ele)return ele._private.data.id}}).attr=fn$5.data,fn$5.removeAttr=fn$5.removeData;var fn$4,elesfn$c,data=elesfn$e,elesfn$d={};function defineDegreeFunction(callback){return function(includeLoops){var self2=this;if(void 0===includeLoops&&(includeLoops=!0),0!==self2.length&&self2.isNode()&&!self2.removed()){for(var degree=0,node=self2[0],connectedEdges=node._private.edges,i2=0;i2<connectedEdges.length;i2++){var edge=connectedEdges[i2];!includeLoops&&edge.isLoop()||(degree+=callback(node,edge))}return degree}}}function defineDegreeBoundsFunction(degreeFn,callback){return function(includeLoops){for(var ret,nodes2=this.nodes(),i2=0;i2<nodes2.length;i2++){var degree=nodes2[i2][degreeFn](includeLoops);void 0===degree||void 0!==ret&&!callback(degree,ret)||(ret=degree)}return ret}}extend(elesfn$d,{degree:defineDegreeFunction((function(node,edge){return edge.source().same(edge.target())?2:1})),indegree:defineDegreeFunction((function(node,edge){return edge.target().same(node)?1:0})),outdegree:defineDegreeFunction((function(node,edge){return edge.source().same(node)?1:0}))}),extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",(function(degree,min2){return degree<min2})),maxDegree:defineDegreeBoundsFunction("degree",(function(degree,max2){return degree>max2})),minIndegree:defineDegreeBoundsFunction("indegree",(function(degree,min2){return degree<min2})),maxIndegree:defineDegreeBoundsFunction("indegree",(function(degree,max2){return degree>max2})),minOutdegree:defineDegreeBoundsFunction("outdegree",(function(degree,min2){return degree<min2})),maxOutdegree:defineDegreeBoundsFunction("outdegree",(function(degree,max2){return degree>max2}))}),extend(elesfn$d,{totalDegree:function totalDegree(includeLoops){for(var total=0,nodes2=this.nodes(),i2=0;i2<nodes2.length;i2++)total+=nodes2[i2].degree(includeLoops);return total}});var beforePositionSet=function beforePositionSet2(eles,newPos,silent){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];if(!ele.locked()){var oldPos=ele._private.position,delta={x:null!=newPos.x?newPos.x-oldPos.x:0,y:null!=newPos.y?newPos.y-oldPos.y:0};!ele.isParent()||0===delta.x&&0===delta.y||ele.children().shift(delta,silent),ele.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function beforeGet(ele){ele.updateCompoundBounds()},beforeSet:function beforeSet(eles,newPos){beforePositionSet(eles,newPos,!1)},onSet:function onSet(eles){eles.dirtyCompoundBoundsCache()},canSet:function canSet(ele){return!ele.locked()}};(fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function beforeSet(eles,newPos){beforePositionSet(eles,newPos,!0)},onSet:function onSet(eles){eles.dirtyCompoundBoundsCache()}})),positions:function positions(pos,silent){if(plainObject(pos))silent?this.silentPosition(pos):this.position(pos);else if(fn$6(pos)){var _fn=pos,cy=this.cy();cy.startBatch();for(var i2=0;i2<this.length;i2++){var ele=this[i2],_pos=void 0;(_pos=_fn(ele,i2))&&(silent?ele.silentPosition(_pos):ele.position(_pos))}cy.endBatch()}return this},silentPositions:function silentPositions(pos){return this.positions(pos,!0)},shift:function shift(dim,val,silent){var delta;if(plainObject(dim)?(delta={x:number$1(dim.x)?dim.x:0,y:number$1(dim.y)?dim.y:0},silent=val):string(dim)&&number$1(val)&&((delta={x:0,y:0})[dim]=val),null!=delta){var cy=this.cy();cy.startBatch();for(var i2=0;i2<this.length;i2++){var ele=this[i2];if(!(cy.hasCompoundNodes()&&ele.isChild()&&ele.ancestors().anySame(this))){var pos=ele.position(),newPos={x:pos.x+delta.x,y:pos.y+delta.y};silent?ele.silentPosition(newPos):ele.position(newPos)}}cy.endBatch()}return this},silentShift:function silentShift(dim,val){return plainObject(dim)?this.shift(dim,!0):string(dim)&&number$1(val)&&this.shift(dim,val,!0),this},renderedPosition:function renderedPosition(dim,val){var ele=this[0],cy=this.cy(),zoom=cy.zoom(),pan=cy.pan(),rpos=plainObject(dim)?dim:void 0,setting=void 0!==rpos||void 0!==val&&string(dim);if(ele&&ele.isNode()){if(!setting){var pos=ele.position();return rpos=modelToRenderedPosition(pos,zoom,pan),void 0===dim?rpos:rpos[dim]}for(var i2=0;i2<this.length;i2++){var _ele=this[i2];void 0!==val?_ele.position(dim,(val-pan[dim])/zoom):void 0!==rpos&&_ele.position(renderedToModelPosition(rpos,zoom,pan))}}else if(!setting)return;return this},relativePosition:function relativePosition(dim,val){var ele=this[0],cy=this.cy(),ppos=plainObject(dim)?dim:void 0,setting=void 0!==ppos||void 0!==val&&string(dim),hasCompoundNodes=cy.hasCompoundNodes();if(ele&&ele.isNode()){if(!setting){var pos=ele.position(),_parent=hasCompoundNodes?ele.parent():null,_hasParent=_parent&&_parent.length>0,_relativeToParent=_hasParent;_hasParent&&(_parent=_parent[0]);var _origin=_relativeToParent?_parent.position():{x:0,y:0};return ppos={x:pos.x-_origin.x,y:pos.y-_origin.y},void 0===dim?ppos:ppos[dim]}for(var i2=0;i2<this.length;i2++){var _ele2=this[i2],parent=hasCompoundNodes?_ele2.parent():null,hasParent=parent&&parent.length>0,relativeToParent=hasParent;hasParent&&(parent=parent[0]);var origin=relativeToParent?parent.position():{x:0,y:0};void 0!==val?_ele2.position(dim,val+origin[dim]):void 0!==ppos&&_ele2.position({x:ppos.x+origin.x,y:ppos.y+origin.y})}}else if(!setting)return;return this}}).modelPosition=fn$4.point=fn$4.position,fn$4.modelPositions=fn$4.points=fn$4.positions,fn$4.renderedPoint=fn$4.renderedPosition,fn$4.relativePoint=fn$4.relativePosition;var fn$3,elesfn$b,position=elesfn$c;fn$3=elesfn$b={},elesfn$b.renderedBoundingBox=function(options){var bb=this.boundingBox(options),cy=this.cy(),zoom=cy.zoom(),pan=cy.pan(),x1=bb.x1*zoom+pan.x,x2=bb.x2*zoom+pan.x,y1=bb.y1*zoom+pan.y,y2=bb.y2*zoom+pan.y;return{x1:x1,x2:x2,y1:y1,y2:y2,w:x2-x1,h:y2-y1}},elesfn$b.dirtyCompoundBoundsCache=function(){var silent=arguments.length>0&&void 0!==arguments[0]&&arguments[0],cy=this.cy();return cy.styleEnabled()&&cy.hasCompoundNodes()?(this.forEachUp((function(ele){if(ele.isParent()){var _p=ele._private;_p.compoundBoundsClean=!1,_p.bbCache=null,silent||ele.emitAndNotify("bounds")}})),this):this},elesfn$b.updateCompoundBounds=function(){var force=arguments.length>0&&void 0!==arguments[0]&&arguments[0],cy=this.cy();if(!cy.styleEnabled()||!cy.hasCompoundNodes())return this;if(!force&&cy.batching())return this;function update2(parent){if(parent.isParent()){var _p2=parent._private,children=parent.children(),includeLabels="include"===parent.pstyle("compound-sizing-wrt-labels").value,min2={width:{val:parent.pstyle("min-width").pfValue,left:parent.pstyle("min-width-bias-left"),right:parent.pstyle("min-width-bias-right")},height:{val:parent.pstyle("min-height").pfValue,top:parent.pstyle("min-height-bias-top"),bottom:parent.pstyle("min-height-bias-bottom")}},bb=children.boundingBox({includeLabels:includeLabels,includeOverlays:!1,useCache:!1}),pos=_p2.position;0!==bb.w&&0!==bb.h||((bb={w:parent.pstyle("width").pfValue,h:parent.pstyle("height").pfValue}).x1=pos.x-bb.w/2,bb.x2=pos.x+bb.w/2,bb.y1=pos.y-bb.h/2,bb.y2=pos.y+bb.h/2);var leftVal=min2.width.left.value;"px"===min2.width.left.units&&min2.width.val>0&&(leftVal=100*leftVal/min2.width.val);var rightVal=min2.width.right.value;"px"===min2.width.right.units&&min2.width.val>0&&(rightVal=100*rightVal/min2.width.val);var topVal=min2.height.top.value;"px"===min2.height.top.units&&min2.height.val>0&&(topVal=100*topVal/min2.height.val);var bottomVal=min2.height.bottom.value;"px"===min2.height.bottom.units&&min2.height.val>0&&(bottomVal=100*bottomVal/min2.height.val);var widthBiasDiffs=computeBiasValues(min2.width.val-bb.w,leftVal,rightVal),diffLeft=widthBiasDiffs.biasDiff,diffRight=widthBiasDiffs.biasComplementDiff,heightBiasDiffs=computeBiasValues(min2.height.val-bb.h,topVal,bottomVal),diffTop=heightBiasDiffs.biasDiff,diffBottom=heightBiasDiffs.biasComplementDiff;_p2.autoPadding=computePaddingValues(bb.w,bb.h,parent.pstyle("padding"),parent.pstyle("padding-relative-to").value),_p2.autoWidth=Math.max(bb.w,min2.width.val),pos.x=(-diffLeft+bb.x1+bb.x2+diffRight)/2,_p2.autoHeight=Math.max(bb.h,min2.height.val),pos.y=(-diffTop+bb.y1+bb.y2+diffBottom)/2}function computeBiasValues(propDiff,propBias,propBiasComplement){var biasDiff=0,biasComplementDiff=0,biasTotal=propBias+propBiasComplement;return propDiff>0&&biasTotal>0&&(biasDiff=propBias/biasTotal*propDiff,biasComplementDiff=propBiasComplement/biasTotal*propDiff),{biasDiff:biasDiff,biasComplementDiff:biasComplementDiff}}function computePaddingValues(width,height,paddingObject,relativeTo){if("%"!==paddingObject.units)return"px"===paddingObject.units?paddingObject.pfValue:0;switch(relativeTo){case"width":return width>0?paddingObject.pfValue*width:0;case"height":return height>0?paddingObject.pfValue*height:0;case"average":return width>0&&height>0?paddingObject.pfValue*(width+height)/2:0;case"min":return width>0&&height>0?width>height?paddingObject.pfValue*height:paddingObject.pfValue*width:0;case"max":return width>0&&height>0?width>height?paddingObject.pfValue*width:paddingObject.pfValue*height:0;default:return 0}}}for(var i2=0;i2<this.length;i2++){var ele=this[i2],_p=ele._private;_p.compoundBoundsClean&&!force||(update2(ele),cy.batching()||(_p.compoundBoundsClean=!0))}return this};var noninf=function noninf2(x){return x===1/0||x===-1/0?0:x},updateBounds=function updateBounds2(b,x1,y1,x2,y2){x2-x1!=0&&y2-y1!=0&&null!=x1&&null!=y1&&null!=x2&&null!=y2&&(b.x1=x1<b.x1?x1:b.x1,b.x2=x2>b.x2?x2:b.x2,b.y1=y1<b.y1?y1:b.y1,b.y2=y2>b.y2?y2:b.y2,b.w=b.x2-b.x1,b.h=b.y2-b.y1)},updateBoundsFromBox=function updateBoundsFromBox2(b,b2){return null==b2?b:updateBounds(b,b2.x1,b2.y1,b2.x2,b2.y2)},prefixedProperty=function prefixedProperty2(obj,field,prefix){return getPrefixedProperty(obj,field,prefix)},updateBoundsFromArrow=function updateBoundsFromArrow2(bounds2,ele,prefix){if(!ele.cy().headless()){var x,y,_p=ele._private,rstyle=_p.rstyle,halfArW=rstyle.arrowWidth/2;if("none"!==ele.pstyle(prefix+"-arrow-shape").value){"source"===prefix?(x=rstyle.srcX,y=rstyle.srcY):"target"===prefix?(x=rstyle.tgtX,y=rstyle.tgtY):(x=rstyle.midX,y=rstyle.midY);var bbs=_p.arrowBounds=_p.arrowBounds||{},bb=bbs[prefix]=bbs[prefix]||{};bb.x1=x-halfArW,bb.y1=y-halfArW,bb.x2=x+halfArW,bb.y2=y+halfArW,bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1,expandBoundingBox(bb,1),updateBounds(bounds2,bb.x1,bb.y1,bb.x2,bb.y2)}}},updateBoundsFromLabel=function updateBoundsFromLabel2(bounds2,ele,prefix){if(!ele.cy().headless()){var prefixDash;prefixDash=prefix?prefix+"-":"";var _p=ele._private,rstyle=_p.rstyle;if(ele.pstyle(prefixDash+"label").strValue){var lx1,lx2,ly1,ly2,halign=ele.pstyle("text-halign"),valign=ele.pstyle("text-valign"),labelWidth=prefixedProperty(rstyle,"labelWidth",prefix),labelHeight=prefixedProperty(rstyle,"labelHeight",prefix),labelX=prefixedProperty(rstyle,"labelX",prefix),labelY=prefixedProperty(rstyle,"labelY",prefix),marginX=ele.pstyle(prefixDash+"text-margin-x").pfValue,marginY=ele.pstyle(prefixDash+"text-margin-y").pfValue,isEdge=ele.isEdge(),rotation=ele.pstyle(prefixDash+"text-rotation"),outlineWidth=ele.pstyle("text-outline-width").pfValue,halfBorderWidth=ele.pstyle("text-border-width").pfValue/2,padding=ele.pstyle("text-background-padding").pfValue,marginOfError=2,lh=labelHeight,lw=labelWidth,lw_2=lw/2,lh_2=lh/2;if(isEdge)lx1=labelX-lw_2,lx2=labelX+lw_2,ly1=labelY-lh_2,ly2=labelY+lh_2;else{switch(halign.value){case"left":lx1=labelX-lw,lx2=labelX;break;case"center":lx1=labelX-lw_2,lx2=labelX+lw_2;break;case"right":lx1=labelX,lx2=labelX+lw}switch(valign.value){case"top":ly1=labelY-lh,ly2=labelY;break;case"center":ly1=labelY-lh_2,ly2=labelY+lh_2;break;case"bottom":ly1=labelY,ly2=labelY+lh}}lx1+=marginX-Math.max(outlineWidth,halfBorderWidth)-padding-marginOfError,lx2+=marginX+Math.max(outlineWidth,halfBorderWidth)+padding+marginOfError,ly1+=marginY-Math.max(outlineWidth,halfBorderWidth)-padding-marginOfError,ly2+=marginY+Math.max(outlineWidth,halfBorderWidth)+padding+marginOfError;var bbPrefix=prefix||"main",bbs=_p.labelBounds,bb=bbs[bbPrefix]=bbs[bbPrefix]||{};bb.x1=lx1,bb.y1=ly1,bb.x2=lx2,bb.y2=ly2,bb.w=lx2-lx1,bb.h=ly2-ly1;var isAutorotate=isEdge&&"autorotate"===rotation.strValue,isPfValue=null!=rotation.pfValue&&0!==rotation.pfValue;if(isAutorotate||isPfValue){var theta=isAutorotate?prefixedProperty(_p.rstyle,"labelAngle",prefix):rotation.pfValue,cos2=Math.cos(theta),sin2=Math.sin(theta),xo=(lx1+lx2)/2,yo=(ly1+ly2)/2;if(!isEdge){switch(halign.value){case"left":xo=lx2;break;case"right":xo=lx1}switch(valign.value){case"top":yo=ly2;break;case"bottom":yo=ly1}}var rotate=function rotate2(x,y){return{x:(x-=xo)*cos2-(y-=yo)*sin2+xo,y:x*sin2+y*cos2+yo}},px1y1=rotate(lx1,ly1),px1y2=rotate(lx1,ly2),px2y1=rotate(lx2,ly1),px2y2=rotate(lx2,ly2);lx1=Math.min(px1y1.x,px1y2.x,px2y1.x,px2y2.x),lx2=Math.max(px1y1.x,px1y2.x,px2y1.x,px2y2.x),ly1=Math.min(px1y1.y,px1y2.y,px2y1.y,px2y2.y),ly2=Math.max(px1y1.y,px1y2.y,px2y1.y,px2y2.y)}var bbPrefixRot=bbPrefix+"Rot",bbRot=bbs[bbPrefixRot]=bbs[bbPrefixRot]||{};bbRot.x1=lx1,bbRot.y1=ly1,bbRot.x2=lx2,bbRot.y2=ly2,bbRot.w=lx2-lx1,bbRot.h=ly2-ly1,updateBounds(bounds2,lx1,ly1,lx2,ly2),updateBounds(_p.labelBounds.all,lx1,ly1,lx2,ly2)}return bounds2}},updateBoundsFromOutline=function updateBoundsFromOutline2(bounds2,ele){if(!ele.cy().headless()){var outlineOpacity=ele.pstyle("outline-opacity").value,outlineWidth=ele.pstyle("outline-width").value;if(outlineOpacity>0&&outlineWidth>0){var outlineOffset=ele.pstyle("outline-offset").value,nodeShape=ele.pstyle("shape").value,outlineSize=outlineWidth+outlineOffset,scaleX=(bounds2.w+2*outlineSize)/bounds2.w,scaleY=(bounds2.h+2*outlineSize)/bounds2.h,xOffset=0,yOffset=0;["diamond","pentagon","round-triangle"].includes(nodeShape)?(scaleX=(bounds2.w+2.4*outlineSize)/bounds2.w,yOffset=-outlineSize/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(nodeShape)?scaleX=(bounds2.w+2.4*outlineSize)/bounds2.w:"star"===nodeShape?(scaleX=(bounds2.w+2.8*outlineSize)/bounds2.w,scaleY=(bounds2.h+2.6*outlineSize)/bounds2.h,yOffset=-outlineSize/3.8):"triangle"===nodeShape?(scaleX=(bounds2.w+2.8*outlineSize)/bounds2.w,scaleY=(bounds2.h+2.4*outlineSize)/bounds2.h,yOffset=-outlineSize/1.4):"vee"===nodeShape&&(scaleX=(bounds2.w+4.4*outlineSize)/bounds2.w,scaleY=(bounds2.h+3.8*outlineSize)/bounds2.h,yOffset=.5*-outlineSize);var hDelta=bounds2.h*scaleY-bounds2.h,wDelta=bounds2.w*scaleX-bounds2.w;if(expandBoundingBoxSides(bounds2,[Math.ceil(hDelta/2),Math.ceil(wDelta/2)]),0!=xOffset||0!==yOffset){var oBounds=shiftBoundingBox(bounds2,xOffset,yOffset);updateBoundingBox(bounds2,oBounds)}}}},boundingBoxImpl=function boundingBoxImpl2(ele,options){var ex1,ex2,ey1,ey2,x,y,cy=ele._private.cy,styleEnabled=cy.styleEnabled(),headless=cy.headless(),bounds2=makeBoundingBox(),_p=ele._private,isNode=ele.isNode(),isEdge=ele.isEdge(),rstyle=_p.rstyle,manualExpansion=isNode&&styleEnabled?ele.pstyle("bounds-expansion").pfValue:[0],isDisplayed=function isDisplayed2(ele2){return"none"!==ele2.pstyle("display").value},displayed=!styleEnabled||isDisplayed(ele)&&(!isEdge||isDisplayed(ele.source())&&isDisplayed(ele.target()));if(displayed){var overlayPadding=0;styleEnabled&&options.includeOverlays&&0!==ele.pstyle("overlay-opacity").value&&(overlayPadding=ele.pstyle("overlay-padding").value);var underlayPadding=0;styleEnabled&&options.includeUnderlays&&0!==ele.pstyle("underlay-opacity").value&&(underlayPadding=ele.pstyle("underlay-padding").value);var padding=Math.max(overlayPadding,underlayPadding),wHalf=0;if(styleEnabled&&(wHalf=ele.pstyle("width").pfValue/2),isNode&&options.includeNodes){var pos=ele.position();x=pos.x,y=pos.y;var halfW=ele.outerWidth()/2,halfH=ele.outerHeight()/2;updateBounds(bounds2,ex1=x-halfW,ey1=y-halfH,ex2=x+halfW,ey2=y+halfH),styleEnabled&&options.includeOutlines&&updateBoundsFromOutline(bounds2,ele)}else if(isEdge&&options.includeEdges)if(styleEnabled&&!headless){var curveStyle=ele.pstyle("curve-style").strValue;if(ex1=Math.min(rstyle.srcX,rstyle.midX,rstyle.tgtX),ex2=Math.max(rstyle.srcX,rstyle.midX,rstyle.tgtX),ey1=Math.min(rstyle.srcY,rstyle.midY,rstyle.tgtY),ey2=Math.max(rstyle.srcY,rstyle.midY,rstyle.tgtY),updateBounds(bounds2,ex1-=wHalf,ey1-=wHalf,ex2+=wHalf,ey2+=wHalf),"haystack"===curveStyle){var hpts=rstyle.haystackPts;if(hpts&&2===hpts.length){if(ex1=hpts[0].x,ey1=hpts[0].y,ex1>(ex2=hpts[1].x)){var temp=ex1;ex1=ex2,ex2=temp}if(ey1>(ey2=hpts[1].y)){var _temp=ey1;ey1=ey2,ey2=_temp}updateBounds(bounds2,ex1-wHalf,ey1-wHalf,ex2+wHalf,ey2+wHalf)}}else if("bezier"===curveStyle||"unbundled-bezier"===curveStyle||"segments"===curveStyle||"taxi"===curveStyle){var pts2;switch(curveStyle){case"bezier":case"unbundled-bezier":pts2=rstyle.bezierPts;break;case"segments":case"taxi":pts2=rstyle.linePts}if(null!=pts2)for(var j=0;j<pts2.length;j++){var pt=pts2[j];ex1=pt.x-wHalf,ex2=pt.x+wHalf,ey1=pt.y-wHalf,ey2=pt.y+wHalf,updateBounds(bounds2,ex1,ey1,ex2,ey2)}}}else{var n1pos=ele.source().position(),n2pos=ele.target().position();if((ex1=n1pos.x)>(ex2=n2pos.x)){var _temp2=ex1;ex1=ex2,ex2=_temp2}if((ey1=n1pos.y)>(ey2=n2pos.y)){var _temp3=ey1;ey1=ey2,ey2=_temp3}updateBounds(bounds2,ex1-=wHalf,ey1-=wHalf,ex2+=wHalf,ey2+=wHalf)}if(styleEnabled&&options.includeEdges&&isEdge&&(updateBoundsFromArrow(bounds2,ele,"mid-source"),updateBoundsFromArrow(bounds2,ele,"mid-target"),updateBoundsFromArrow(bounds2,ele,"source"),updateBoundsFromArrow(bounds2,ele,"target")),styleEnabled&&"yes"===ele.pstyle("ghost").value){var gx=ele.pstyle("ghost-offset-x").pfValue,gy=ele.pstyle("ghost-offset-y").pfValue;updateBounds(bounds2,bounds2.x1+gx,bounds2.y1+gy,bounds2.x2+gx,bounds2.y2+gy)}var bbBody=_p.bodyBounds=_p.bodyBounds||{};assignBoundingBox(bbBody,bounds2),expandBoundingBoxSides(bbBody,manualExpansion),expandBoundingBox(bbBody,1),styleEnabled&&(ex1=bounds2.x1,ex2=bounds2.x2,ey1=bounds2.y1,ey2=bounds2.y2,updateBounds(bounds2,ex1-padding,ey1-padding,ex2+padding,ey2+padding));var bbOverlay=_p.overlayBounds=_p.overlayBounds||{};assignBoundingBox(bbOverlay,bounds2),expandBoundingBoxSides(bbOverlay,manualExpansion),expandBoundingBox(bbOverlay,1);var bbLabels=_p.labelBounds=_p.labelBounds||{};null!=bbLabels.all?clearBoundingBox(bbLabels.all):bbLabels.all=makeBoundingBox(),styleEnabled&&options.includeLabels&&(options.includeMainLabels&&updateBoundsFromLabel(bounds2,ele,null),isEdge&&(options.includeSourceLabels&&updateBoundsFromLabel(bounds2,ele,"source"),options.includeTargetLabels&&updateBoundsFromLabel(bounds2,ele,"target")))}return bounds2.x1=noninf(bounds2.x1),bounds2.y1=noninf(bounds2.y1),bounds2.x2=noninf(bounds2.x2),bounds2.y2=noninf(bounds2.y2),bounds2.w=noninf(bounds2.x2-bounds2.x1),bounds2.h=noninf(bounds2.y2-bounds2.y1),bounds2.w>0&&bounds2.h>0&&displayed&&(expandBoundingBoxSides(bounds2,manualExpansion),expandBoundingBox(bounds2,1)),bounds2},getKey=function getKey2(opts){var i2=0,tf=function tf2(val){return(val?1:0)<<i2++},key=0;return key+=tf(opts.incudeNodes),key+=tf(opts.includeEdges),key+=tf(opts.includeLabels),key+=tf(opts.includeMainLabels),key+=tf(opts.includeSourceLabels),key+=tf(opts.includeTargetLabels),key+=tf(opts.includeOverlays),key+=tf(opts.includeOutlines)},getBoundingBoxPosKey=function getBoundingBoxPosKey2(ele){if(ele.isEdge()){var p1=ele.source().position(),p2=ele.target().position(),r=function r2(x){return Math.round(x)};return hashIntsArray([r(p1.x),r(p1.y),r(p2.x),r(p2.y)])}return 0},cachedBoundingBoxImpl=function cachedBoundingBoxImpl2(ele,opts){var bb,_p=ele._private,isEdge=ele.isEdge(),usingDefOpts=(null==opts?defBbOptsKey:getKey(opts))===defBbOptsKey,currPosKey=getBoundingBoxPosKey(ele),isPosKeySame=_p.bbCachePosKey===currPosKey,useCache=opts.useCache&&isPosKeySame,isDirty=function isDirty2(ele2){return null==ele2._private.bbCache||ele2._private.styleDirty};if(!useCache||isDirty(ele)||isEdge&&isDirty(ele.source())||isDirty(ele.target())?(isPosKeySame||ele.recalculateRenderedStyle(useCache),bb=boundingBoxImpl(ele,defBbOpts),_p.bbCache=bb,_p.bbCachePosKey=currPosKey):bb=_p.bbCache,!usingDefOpts){var isNode=ele.isNode();bb=makeBoundingBox(),(opts.includeNodes&&isNode||opts.includeEdges&&!isNode)&&(opts.includeOverlays?updateBoundsFromBox(bb,_p.overlayBounds):updateBoundsFromBox(bb,_p.bodyBounds)),opts.includeLabels&&(opts.includeMainLabels&&(!isEdge||opts.includeSourceLabels&&opts.includeTargetLabels)?updateBoundsFromBox(bb,_p.labelBounds.all):(opts.includeMainLabels&&updateBoundsFromBox(bb,_p.labelBounds.mainRot),opts.includeSourceLabels&&updateBoundsFromBox(bb,_p.labelBounds.sourceRot),opts.includeTargetLabels&&updateBoundsFromBox(bb,_p.labelBounds.targetRot))),bb.w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1}return bb},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(options){var bounds2;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==options&&void 0!==options.useCache&&!0!==options.useCache){bounds2=makeBoundingBox();var opts=filledBbOpts(options=options||defBbOpts),eles=this;if(eles.cy().styleEnabled())for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_p=ele._private,currPosKey=getBoundingBoxPosKey(ele),isPosKeySame=_p.bbCachePosKey===currPosKey,useCache=opts.useCache&&isPosKeySame&&!_p.styleDirty;ele.recalculateRenderedStyle(useCache)}this.updateCompoundBounds(!options.useCache);for(var _i=0;_i<eles.length;_i++){var _ele=eles[_i];updateBoundsFromBox(bounds2,cachedBoundingBoxImpl(_ele,opts))}}else options=void 0===options?defBbOpts:filledBbOpts(options),bounds2=cachedBoundingBoxImpl(this[0],options);return bounds2.x1=noninf(bounds2.x1),bounds2.y1=noninf(bounds2.y1),bounds2.x2=noninf(bounds2.x2),bounds2.y2=noninf(bounds2.y2),bounds2.w=noninf(bounds2.x2-bounds2.x1),bounds2.h=noninf(bounds2.y2-bounds2.y1),bounds2},elesfn$b.dirtyBoundingBoxCache=function(){for(var i2=0;i2<this.length;i2++){var _p=this[i2]._private;_p.bbCache=null,_p.bbCachePosKey=null,_p.bodyBounds=null,_p.overlayBounds=null,_p.labelBounds.all=null,_p.labelBounds.source=null,_p.labelBounds.target=null,_p.labelBounds.main=null,_p.labelBounds.sourceRot=null,_p.labelBounds.targetRot=null,_p.labelBounds.mainRot=null,_p.arrowBounds.source=null,_p.arrowBounds.target=null,_p.arrowBounds["mid-source"]=null,_p.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},elesfn$b.boundingBoxAt=function(fn2){var nodes2=this.nodes(),cy=this.cy(),hasCompoundNodes=cy.hasCompoundNodes(),parents=cy.collection();if(hasCompoundNodes&&(parents=nodes2.filter((function(node){return node.isParent()})),nodes2=nodes2.not(parents)),plainObject(fn2)){var obj=fn2;fn2=function fn3(){return obj}}var storeOldPos=function storeOldPos2(node,i2){return node._private.bbAtOldPos=fn2(node,i2)},getOldPos=function getOldPos2(node){return node._private.bbAtOldPos};cy.startBatch(),nodes2.forEach(storeOldPos).silentPositions(fn2),hasCompoundNodes&&(parents.dirtyCompoundBoundsCache(),parents.dirtyBoundingBoxCache(),parents.updateCompoundBounds(!0));var bb=copyBoundingBox(this.boundingBox({useCache:!1}));return nodes2.silentPositions(getOldPos),hasCompoundNodes&&(parents.dirtyCompoundBoundsCache(),parents.dirtyBoundingBoxCache(),parents.updateCompoundBounds(!0)),cy.endBatch(),bb},fn$3.boundingbox=fn$3.bb=fn$3.boundingBox,fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var fn$2,elesfn$a,bounds=elesfn$b;fn$2=elesfn$a={};var defineDimFns=function defineDimFns2(opts){opts.uppercaseName=capitalize(opts.name),opts.autoName="auto"+opts.uppercaseName,opts.labelName="label"+opts.uppercaseName,opts.outerName="outer"+opts.uppercaseName,opts.uppercaseOuterName=capitalize(opts.outerName),fn$2[opts.name]=function dimImpl(){var ele=this[0],_p=ele._private,styleEnabled=_p.cy._private.styleEnabled;if(ele){if(styleEnabled){if(ele.isParent())return ele.updateCompoundBounds(),_p[opts.autoName]||0;var d=ele.pstyle(opts.name);return"label"===d.strValue?(ele.recalculateRenderedStyle(),_p.rstyle[opts.labelName]||0):d.pfValue}return 1}},fn$2["outer"+opts.uppercaseName]=function outerDimImpl(){var ele=this[0],styleEnabled=ele._private.cy._private.styleEnabled;if(ele)return styleEnabled?ele[opts.name]()+ele.pstyle("border-width").pfValue+2*ele.padding():1},fn$2["rendered"+opts.uppercaseName]=function renderedDimImpl(){var ele=this[0];if(ele)return ele[opts.name]()*this.cy().zoom()},fn$2["rendered"+opts.uppercaseOuterName]=function renderedOuterDimImpl(){var ele=this[0];if(ele)return ele[opts.outerName]()*this.cy().zoom()}};defineDimFns({name:"width"}),defineDimFns({name:"height"}),elesfn$a.padding=function(){var ele=this[0],_p=ele._private;return ele.isParent()?(ele.updateCompoundBounds(),void 0!==_p.autoPadding?_p.autoPadding:ele.pstyle("padding").pfValue):ele.pstyle("padding").pfValue},elesfn$a.paddedHeight=function(){var ele=this[0];return ele.height()+2*ele.padding()},elesfn$a.paddedWidth=function(){var ele=this[0];return ele.width()+2*ele.padding()};var widthHeight=elesfn$a,ifEdge=function ifEdge2(ele,getValue2){if(ele.isEdge())return getValue2(ele)},ifEdgeRenderedPosition=function ifEdgeRenderedPosition2(ele,getPoint){if(ele.isEdge()){var cy=ele.cy();return modelToRenderedPosition(getPoint(ele),cy.zoom(),cy.pan())}},ifEdgeRenderedPositions=function ifEdgeRenderedPositions2(ele,getPoints){if(ele.isEdge()){var cy=ele.cy(),pan=cy.pan(),zoom=cy.zoom();return getPoints(ele).map((function(p2){return modelToRenderedPosition(p2,zoom,pan)}))}},pts={controlPoints:{get:function controlPoints2(ele){return ele.renderer().getControlPoints(ele)},mult:!0},segmentPoints:{get:function segmentPoints2(ele){return ele.renderer().getSegmentPoints(ele)},mult:!0},sourceEndpoint:{get:function sourceEndpoint2(ele){return ele.renderer().getSourceEndpoint(ele)}},targetEndpoint:{get:function targetEndpoint2(ele){return ele.renderer().getTargetEndpoint(ele)}},midpoint:{get:function midpoint2(ele){return ele.renderer().getEdgeMidpoint(ele)}}},renderedName=function renderedName2(name){return"rendered"+name[0].toUpperCase()+name.substr(1)},edgePoints=Object.keys(pts).reduce((function(obj,name){var spec=pts[name],rName=renderedName(name);return obj[name]=function(){return ifEdge(this,spec.get)},spec.mult?obj[rName]=function(){return ifEdgeRenderedPositions(this,spec.get)}:obj[rName]=function(){return ifEdgeRenderedPosition(this,spec.get)},obj}),{}),dimensions=extend({},position,bounds,widthHeight,edgePoints),Event=function Event2(src,props){this.recycle(src,props)};function returnFalse(){return!1}function returnTrue(){return!0}Event.prototype={instanceString:function instanceString(){return"event"},recycle:function recycle(src,props){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,null!=src&&src.preventDefault?(this.type=src.type,this.isDefaultPrevented=src.defaultPrevented?returnTrue:returnFalse):null!=src&&src.type?props=src:this.type=src,null!=props&&(this.originalEvent=props.originalEvent,this.type=null!=props.type?props.type:this.type,this.cy=props.cy,this.target=props.target,this.position=props.position,this.renderedPosition=props.renderedPosition,this.namespace=props.namespace,this.layout=props.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var pos=this.position,zoom=this.cy.zoom(),pan=this.cy.pan();this.renderedPosition={x:pos.x*zoom+pan.x,y:pos.y*zoom+pan.y}}this.timeStamp=src&&src.timeStamp||Date.now()},preventDefault:function preventDefault(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function stopPropagation(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function stopImmediatePropagation(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function qualifierCompare(q1,q2){return q1===q2},eventMatches:function eventMatches(){return!0},addEventFields:function addEventFields(){},callbackContext:function callbackContext(context){return context},beforeEmit:function beforeEmit(){},afterEmit:function afterEmit(){},bubble:function bubble(){return!1},parent:function parent(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:emptyOpts,context=arguments.length>1?arguments[1]:void 0,i2=0;i2<defaultsKeys.length;i2++){var key=defaultsKeys[i2];this[key]=opts[key]||defaults$8[key]}this.context=context||this.context,this.listeners=[],this.emitting=0}var p=Emitter.prototype,forEachEvent=function forEachEvent2(self2,handler,events,qualifier,callback,conf,confOverrides){fn$6(qualifier)&&(callback=qualifier,qualifier=null),confOverrides&&(conf=null==conf?confOverrides:extend({},conf,confOverrides));for(var eventList=array(events)?events:events.split(/\s+/),i2=0;i2<eventList.length;i2++){var evt=eventList[i2];if(!emptyString(evt)){var match2=evt.match(eventRegex);if(match2&&!1===handler(self2,evt,match2[1],match2[2]?match2[2]:null,qualifier,callback,conf))break}}},makeEventObj=function makeEventObj2(self2,obj){return self2.addEventFields(self2.context,obj),new Event(obj.type,obj)},forEachEventObj=function forEachEventObj2(self2,handler,events){if(event(events))handler(self2,events);else if(plainObject(events))handler(self2,makeEventObj(self2,events));else for(var eventList=array(events)?events:events.split(/\s+/),i2=0;i2<eventList.length;i2++){var evt=eventList[i2];if(!emptyString(evt)){var match2=evt.match(eventRegex);if(match2){var type=match2[1],namespace=match2[2]?match2[2]:null;handler(self2,makeEventObj(self2,{type:type,namespace:namespace,target:self2.context}))}}}};p.on=p.addListener=function(events,qualifier,callback,conf,confOverrides){return forEachEvent(this,(function(self2,event2,type,namespace,qualifier2,callback2,conf2){fn$6(callback2)&&self2.listeners.push({event:event2,callback:callback2,type:type,namespace:namespace,qualifier:qualifier2,conf:conf2})}),events,qualifier,callback,conf,confOverrides),this},p.one=function(events,qualifier,callback,conf){return this.on(events,qualifier,callback,conf,{one:!0})},p.removeListener=p.off=function(events,qualifier,callback,conf){var _this=this;0!==this.emitting&&(this.listeners=copyArray$1(this.listeners));for(var listeners=this.listeners,_loop=function _loop2(i3){var listener=listeners[i3];forEachEvent(_this,(function(self2,event2,type,namespace,qualifier2,callback2){if((listener.type===type||"*"===events)&&(!namespace&&".*"!==listener.namespace||listener.namespace===namespace)&&(!qualifier2||self2.qualifierCompare(listener.qualifier,qualifier2))&&(!callback2||listener.callback===callback2))return listeners.splice(i3,1),!1}),events,qualifier,callback,conf)},i2=listeners.length-1;i2>=0;i2--)_loop(i2);return this},p.removeAllListeners=function(){return this.removeListener("*")},p.emit=p.trigger=function(events,extraParams,manualCallback){var listeners=this.listeners,numListenersBeforeEmit=listeners.length;return this.emitting++,array(extraParams)||(extraParams=[extraParams]),forEachEventObj(this,(function(self2,eventObj){null!=manualCallback&&(listeners=[{event:eventObj.event,type:eventObj.type,namespace:eventObj.namespace,callback:manualCallback}],numListenersBeforeEmit=listeners.length);for(var _loop2=function _loop22(i3){var listener=listeners[i3];if(listener.type===eventObj.type&&(!listener.namespace||listener.namespace===eventObj.namespace||listener.namespace===universalNamespace)&&self2.eventMatches(self2.context,listener,eventObj)){var args=[eventObj];null!=extraParams&&push(args,extraParams),self2.beforeEmit(self2.context,listener,eventObj),listener.conf&&listener.conf.one&&(self2.listeners=self2.listeners.filter((function(l){return l!==listener})));var context=self2.callbackContext(self2.context,listener,eventObj),ret=listener.callback.apply(context,args);self2.afterEmit(self2.context,listener,eventObj),!1===ret&&(eventObj.stopPropagation(),eventObj.preventDefault())}},i2=0;i2<numListenersBeforeEmit;i2++)_loop2(i2);self2.bubble(self2.context)&&!eventObj.isPropagationStopped()&&self2.parent(self2.context).emit(eventObj,extraParams)}),events),this.emitting--,this};var emitterOptions$1={qualifierCompare:function qualifierCompare(selector1,selector2){return null==selector1||null==selector2?null==selector1&&null==selector2:selector1.sameText(selector2)},eventMatches:function eventMatches(ele,listener,eventObj){var selector=listener.qualifier;return null==selector||ele!==eventObj.target&&element(eventObj.target)&&selector.matches(eventObj.target)},addEventFields:function addEventFields(ele,evt){evt.cy=ele.cy(),evt.target=ele},callbackContext:function callbackContext(ele,listener,eventObj){return null!=listener.qualifier?eventObj.target:ele},beforeEmit:function beforeEmit(context,listener){listener.conf&&listener.conf.once&&listener.conf.onceCollection.removeListener(listener.event,listener.qualifier,listener.callback)},bubble:function bubble(){return!0},parent:function parent(ele){return ele.isChild()?ele.parent():ele.cy()}},argSelector$1=function argSelector2(arg){return string(arg)?new Selector(arg):arg},elesfn$9={createEmitter:function createEmitter(){for(var i2=0;i2<this.length;i2++){var ele=this[i2],_p=ele._private;_p.emitter||(_p.emitter=new Emitter(emitterOptions$1,ele))}return this},emitter:function emitter(){return this._private.emitter},on:function on(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++)this[i2].emitter().on(events,argSel,callback);return this},removeListener:function removeListener(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++)this[i2].emitter().removeListener(events,argSel,callback);return this},removeAllListeners:function removeAllListeners(){for(var i2=0;i2<this.length;i2++)this[i2].emitter().removeAllListeners();return this},one:function one(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++)this[i2].emitter().one(events,argSel,callback);return this},once:function once(events,selector,callback){for(var argSel=argSelector$1(selector),i2=0;i2<this.length;i2++)this[i2].emitter().on(events,argSel,callback,{once:!0,onceCollection:this})},emit:function emit(events,extraParams){for(var i2=0;i2<this.length;i2++)this[i2].emitter().emit(events,extraParams);return this},emitAndNotify:function emitAndNotify(event2,extraParams){if(0!==this.length)return this.cy().notify(event2,this),this.emit(event2,extraParams),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function nodes2(selector){return this.filter((function(ele){return ele.isNode()})).filter(selector)},edges:function edges(selector){return this.filter((function(ele){return ele.isEdge()})).filter(selector)},byGroup:function byGroup(){for(var nodes2=this.spawn(),edges=this.spawn(),i2=0;i2<this.length;i2++){var ele=this[i2];ele.isNode()?nodes2.push(ele):edges.push(ele)}return{nodes:nodes2,edges:edges}},filter:function filter2(_filter,thisArg){if(void 0===_filter)return this;if(string(_filter)||elementOrCollection(_filter))return new Selector(_filter).filter(this);if(fn$6(_filter)){for(var filterEles=this.spawn(),eles=this,i2=0;i2<eles.length;i2++){var ele=eles[i2];(thisArg?_filter.apply(thisArg,[ele,i2,eles]):_filter(ele,i2,eles))&&filterEles.push(ele)}return filterEles}return this.spawn()},not:function not(toRemove){if(toRemove){string(toRemove)&&(toRemove=this.filter(toRemove));for(var elements2=this.spawn(),i2=0;i2<this.length;i2++){var element2=this[i2];toRemove.has(element2)||elements2.push(element2)}return elements2}return this},absoluteComplement:function absoluteComplement(){return this.cy().mutableElements().not(this)},intersect:function intersect(other){if(string(other)){var selector=other;return this.filter(selector)}for(var elements2=this.spawn(),col1=this,col2=other,col1Smaller=this.length<other.length,colS=col1Smaller?col1:col2,colL=col1Smaller?col2:col1,i2=0;i2<colS.length;i2++){var ele=colS[i2];colL.has(ele)&&elements2.push(ele)}return elements2},xor:function xor(other){var cy=this._private.cy;string(other)&&(other=cy.$(other));var elements2=this.spawn(),col1=this,col2=other,add=function add2(col,other2){for(var i2=0;i2<col.length;i2++){var ele=col[i2],id=ele._private.data.id;other2.hasElementWithId(id)||elements2.push(ele)}};return add(col1,col2),add(col2,col1),elements2},diff:function diff(other){var cy=this._private.cy;string(other)&&(other=cy.$(other));var left=this.spawn(),right=this.spawn(),both=this.spawn(),col1=this,col2=other,add=function add2(col,other2,retEles){for(var i2=0;i2<col.length;i2++){var ele=col[i2],id=ele._private.data.id;other2.hasElementWithId(id)?both.merge(ele):retEles.push(ele)}};return add(col1,col2,left),add(col2,col1,right),{left:left,right:right,both:both}},add:function add(toAdd){var cy=this._private.cy;if(!toAdd)return this;if(string(toAdd)){var selector=toAdd;toAdd=cy.mutableElements().filter(selector)}for(var elements2=this.spawnSelf(),i2=0;i2<toAdd.length;i2++){var ele=toAdd[i2];!this.has(ele)&&elements2.push(ele)}return elements2},merge:function merge(toAdd){var _p=this._private,cy=_p.cy;if(!toAdd)return this;if(toAdd&&string(toAdd)){var selector=toAdd;toAdd=cy.mutableElements().filter(selector)}for(var map=_p.map,i2=0;i2<toAdd.length;i2++){var toAddEle=toAdd[i2],id=toAddEle._private.data.id;if(!map.has(id)){var index=this.length++;this[index]=toAddEle,map.set(id,{ele:toAddEle,index:index})}}return this},unmergeAt:function unmergeAt(i2){var id=this[i2].id(),map=this._private.map;this[i2]=void 0,map.delete(id);var unmergedLastEle=i2===this.length-1;if(this.length>1&&!unmergedLastEle){var lastEleI=this.length-1,lastEle=this[lastEleI],lastEleId=lastEle._private.data.id;this[lastEleI]=void 0,this[i2]=lastEle,map.set(lastEleId,{ele:lastEle,index:i2})}return this.length--,this},unmergeOne:function unmergeOne(ele){ele=ele[0];var _p=this._private,id=ele._private.data.id,entry=_p.map.get(id);if(!entry)return this;var i2=entry.index;return this.unmergeAt(i2),this},unmerge:function unmerge(toRemove){var cy=this._private.cy;if(!toRemove)return this;if(toRemove&&string(toRemove)){var selector=toRemove;toRemove=cy.mutableElements().filter(selector)}for(var i2=0;i2<toRemove.length;i2++)this.unmergeOne(toRemove[i2]);return this},unmergeBy:function unmergeBy(toRmFn){for(var i2=this.length-1;i2>=0;i2--)toRmFn(this[i2])&&this.unmergeAt(i2);return this},map:function map(mapFn,thisArg){for(var arr=[],eles=this,i2=0;i2<eles.length;i2++){var ele=eles[i2],ret=thisArg?mapFn.apply(thisArg,[ele,i2,eles]):mapFn(ele,i2,eles);arr.push(ret)}return arr},reduce:function reduce(fn2,initialValue){for(var val=initialValue,eles=this,i2=0;i2<eles.length;i2++)val=fn2(val,eles[i2],i2,eles);return val},max:function max2(valFn,thisArg){for(var maxEle,max3=-1/0,eles=this,i2=0;i2<eles.length;i2++){var ele=eles[i2],val=thisArg?valFn.apply(thisArg,[ele,i2,eles]):valFn(ele,i2,eles);val>max3&&(max3=val,maxEle=ele)}return{value:max3,ele:maxEle}},min:function min2(valFn,thisArg){for(var minEle,min3=1/0,eles=this,i2=0;i2<eles.length;i2++){var ele=eles[i2],val=thisArg?valFn.apply(thisArg,[ele,i2,eles]):valFn(ele,i2,eles);val<min3&&(min3=val,minEle=ele)}return{value:min3,ele:minEle}}},fn$1=elesfn$8;fn$1.u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add,fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not,fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect,fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor,fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter,fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement;var elesfn$7={isNode:function isNode(){return"nodes"===this.group()},isEdge:function isEdge(){return"edges"===this.group()},isLoop:function isLoop(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function isSimple(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function group(){var ele=this[0];if(ele)return ele._private.group}},zIndexSort=function zIndexSort2(a,b){var hasCompoundNodes=a.cy().hasCompoundNodes();function getDepth(ele){var style=ele.pstyle("z-compound-depth");return"auto"===style.value?hasCompoundNodes?ele.zDepth():0:"bottom"===style.value?-1:"top"===style.value?MAX_INT$1:0}var depthDiff=getDepth(a)-getDepth(b);if(0!==depthDiff)return depthDiff;function getEleDepth(ele){return"auto"===ele.pstyle("z-index-compare").value&&ele.isNode()?1:0}var eleDiff=getEleDepth(a)-getEleDepth(b);if(0!==eleDiff)return eleDiff;var zDiff=a.pstyle("z-index").value-b.pstyle("z-index").value;return 0!==zDiff?zDiff:a.poolIndex()-b.poolIndex()},elesfn$6={forEach:function forEach(fn2,thisArg){if(fn$6(fn2))for(var N=this.length,i2=0;i2<N;i2++){var ele=this[i2];if(!1===(thisArg?fn2.apply(thisArg,[ele,i2,this]):fn2(ele,i2,this)))break}return this},toArray:function toArray(){for(var array2=[],i2=0;i2<this.length;i2++)array2.push(this[i2]);return array2},slice:function slice(start,end){var array2=[],thisSize=this.length;null==end&&(end=thisSize),null==start&&(start=0),start<0&&(start=thisSize+start),end<0&&(end=thisSize+end);for(var i2=start;i2>=0&&i2<end&&i2<thisSize;i2++)array2.push(this[i2]);return this.spawn(array2)},size:function size(){return this.length},eq:function eq2(i2){return this[i2]||this.spawn()},first:function first(){return this[0]||this.spawn()},last:function last(){return this[this.length-1]||this.spawn()},empty:function empty(){return 0===this.length},nonempty:function nonempty(){return!this.empty()},sort:function sort(sortFn){if(!fn$6(sortFn))return this;var sorted=this.toArray().sort(sortFn);return this.spawn(sorted)},sortByZIndex:function sortByZIndex(){return this.sort(zIndexSort)},zDepth:function zDepth(){var ele=this[0];if(ele){var _p=ele._private;if("nodes"===_p.group){var depth=_p.data.parent?ele.parents().size():0;return ele.isParent()?depth:MAX_INT$1-1}var src=_p.source,tgt=_p.target,srcDepth=src.zDepth(),tgtDepth=tgt.zDepth();return Math.max(srcDepth,tgtDepth,0)}}};elesfn$6.each=elesfn$6.forEach,function defineSymbolIterator2(){var typeofUndef="undefined";("undefined"==typeof Symbol?"undefined":_typeof(Symbol))!=typeofUndef&&_typeof(Symbol.iterator)!=typeofUndef&&(elesfn$6[Symbol.iterator]=function(){var _this=this,entry={value:void 0,done:!1},i2=0,length=this.length;return _defineProperty$1({next:function next2(){return i2<length?entry.value=_this[i2++]:(entry.value=void 0,entry.done=!0),entry}},Symbol.iterator,(function(){return this}))})}();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function layoutDimensions(options){var dims;if(options=getLayoutDimensionOptions(options),this.takesUpSpace())if(options.nodeDimensionsIncludeLabels){var bbDim=this.boundingBox();dims={w:bbDim.w,h:bbDim.h}}else dims={w:this.outerWidth(),h:this.outerHeight()};else dims={w:0,h:0};return 0!==dims.w&&0!==dims.h||(dims.w=dims.h=1),dims},layoutPositions:function layoutPositions(layout2,options,fn2){var nodes2=this.nodes().filter((function(n){return!n.isParent()})),cy=this.cy(),layoutEles=options.eles,getMemoizeKey=function getMemoizeKey2(node2){return node2.id()},fnMem=memoize$1(fn2,getMemoizeKey);layout2.emit({type:"layoutstart",layout:layout2}),layout2.animations=[];var calculateSpacing=function calculateSpacing2(spacing,nodesBb,pos){var center={x:nodesBb.x1+nodesBb.w/2,y:nodesBb.y1+nodesBb.h/2},spacingVector={x:(pos.x-center.x)*spacing,y:(pos.y-center.y)*spacing};return{x:center.x+spacingVector.x,y:center.y+spacingVector.y}},useSpacingFactor=options.spacingFactor&&1!==options.spacingFactor,bb=function spacingBb2(){if(!useSpacingFactor)return null;for(var bb2=makeBoundingBox(),i3=0;i3<nodes2.length;i3++){var node2=nodes2[i3],pos=fnMem(node2,i3);expandBoundingBoxByPoint(bb2,pos.x,pos.y)}return bb2}(),getFinalPos=memoize$1((function(node2,i3){var newPos2=fnMem(node2,i3);if(useSpacingFactor){var spacing=Math.abs(options.spacingFactor);newPos2=calculateSpacing(spacing,bb,newPos2)}return null!=options.transform&&(newPos2=options.transform(node2,newPos2)),newPos2}),getMemoizeKey);if(options.animate){for(var i2=0;i2<nodes2.length;i2++){var node=nodes2[i2],newPos=getFinalPos(node,i2);if(null==options.animateFilter||options.animateFilter(node,i2)){var ani=node.animation({position:newPos,duration:options.animationDuration,easing:options.animationEasing});layout2.animations.push(ani)}else node.position(newPos)}if(options.fit){var fitAni=cy.animation({fit:{boundingBox:layoutEles.boundingBoxAt(getFinalPos),padding:options.padding},duration:options.animationDuration,easing:options.animationEasing});layout2.animations.push(fitAni)}else if(void 0!==options.zoom&&void 0!==options.pan){var zoomPanAni=cy.animation({zoom:options.zoom,pan:options.pan,duration:options.animationDuration,easing:options.animationEasing});layout2.animations.push(zoomPanAni)}layout2.animations.forEach((function(ani2){return ani2.play()})),layout2.one("layoutready",options.ready),layout2.emit({type:"layoutready",layout:layout2}),Promise$1.all(layout2.animations.map((function(ani2){return ani2.promise()}))).then((function(){layout2.one("layoutstop",options.stop),layout2.emit({type:"layoutstop",layout:layout2})}))}else nodes2.positions(getFinalPos),options.fit&&cy.fit(options.eles,options.padding),null!=options.zoom&&cy.zoom(options.zoom),options.pan&&cy.pan(options.pan),layout2.one("layoutready",options.ready),layout2.emit({type:"layoutready",layout:layout2}),layout2.one("layoutstop",options.stop),layout2.emit({type:"layoutstop",layout:layout2});return this},layout:function layout2(options){return this.cy().makeLayout(extend({},options,{eles:this}))}};function styleCache(key,fn2,ele){var val,_p=ele._private,cache2=_p.styleCache=_p.styleCache||[];return null!=(val=cache2[key])?val:val=cache2[key]=fn2(ele)}function cacheStyleFunction(key,fn2){return key=hashString(key),function cachedStyleFunction(ele){return styleCache(key,fn2,ele)}}function cachePrototypeStyleFunction(key,fn2){key=hashString(key);var selfFn=function selfFn2(ele){return fn2.call(ele)};return function cachedPrototypeStyleFunction(){var ele=this[0];if(ele)return styleCache(key,selfFn,ele)}}elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout;var elesfn$4={recalculateRenderedStyle:function recalculateRenderedStyle(useCache){var cy=this.cy(),renderer3=cy.renderer(),styleEnabled=cy.styleEnabled();return renderer3&&styleEnabled&&renderer3.recalculateRenderedStyle(this,useCache),this},dirtyStyleCache:function dirtyStyleCache(){var eles,cy=this.cy(),dirty=function dirty2(ele){return ele._private.styleCache=null};return cy.hasCompoundNodes()?((eles=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(eles.connectedEdges()),eles.forEach(dirty)):this.forEach((function(ele){dirty(ele),ele.connectedEdges().forEach(dirty)})),this},updateStyle:function updateStyle(notifyRenderer){var cy=this._private.cy;if(!cy.styleEnabled())return this;if(cy.batching())return cy._private.batchStyleEles.merge(this),this;var updatedEles=this;notifyRenderer=!(!notifyRenderer&&void 0!==notifyRenderer),cy.hasCompoundNodes()&&(updatedEles=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var changedEles=updatedEles;return notifyRenderer?changedEles.emitAndNotify("style"):changedEles.emit("style"),updatedEles.forEach((function(ele){return ele._private.styleDirty=!0})),this},cleanStyle:function cleanStyle(){var cy=this.cy();if(cy.styleEnabled())for(var i2=0;i2<this.length;i2++){var ele=this[i2];ele._private.styleDirty&&(ele._private.styleDirty=!1,cy.style().apply(ele))}},parsedStyle:function parsedStyle(property){var includeNonDefault=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ele=this[0],cy=ele.cy();if(cy.styleEnabled()&&ele){this.cleanStyle();var overriddenStyle=ele._private.style[property];return null!=overriddenStyle?overriddenStyle:includeNonDefault?cy.style().getDefaultProperty(property):null}},numericStyle:function numericStyle(property){var ele=this[0];if(ele.cy().styleEnabled()&&ele){var pstyle=ele.pstyle(property);return void 0!==pstyle.pfValue?pstyle.pfValue:pstyle.value}},numericStyleUnits:function numericStyleUnits(property){var ele=this[0];if(ele.cy().styleEnabled())return ele?ele.pstyle(property).units:void 0},renderedStyle:function renderedStyle(property){var cy=this.cy();if(!cy.styleEnabled())return this;var ele=this[0];return ele?cy.style().getRenderedStyle(ele,property):void 0},style:function style(name,value){var cy=this.cy();if(!cy.styleEnabled())return this;var updateTransitions=!1,style2=cy.style();if(plainObject(name)){var props=name;style2.applyBypass(this,props,updateTransitions),this.emitAndNotify("style")}else if(string(name)){if(void 0===value){var ele=this[0];return ele?style2.getStylePropertyValue(ele,name):void 0}style2.applyBypass(this,name,value,updateTransitions),this.emitAndNotify("style")}else if(void 0===name){var _ele=this[0];return _ele?style2.getRawStyle(_ele):void 0}return this},removeStyle:function removeStyle(names){var cy=this.cy();if(!cy.styleEnabled())return this;var updateTransitions=!1,style=cy.style(),eles=this;if(void 0===names)for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];style.removeAllBypasses(ele,updateTransitions)}else{names=names.split(/\s+/);for(var _i=0;_i<eles.length;_i++){var _ele2=eles[_i];style.removeBypasses(_ele2,names,updateTransitions)}}return this.emitAndNotify("style"),this},show:function show(){return this.css("display","element"),this},hide:function hide(){return this.css("display","none"),this},effectiveOpacity:function effectiveOpacity(){var cy=this.cy();if(!cy.styleEnabled())return 1;var hasCompoundNodes=cy.hasCompoundNodes(),ele=this[0];if(ele){var _p=ele._private,parentOpacity=ele.pstyle("opacity").value;if(!hasCompoundNodes)return parentOpacity;var parents=_p.data.parent?ele.parents():null;if(parents)for(var i2=0;i2<parents.length;i2++)parentOpacity*=parents[i2].pstyle("opacity").value;return parentOpacity}},transparent:function transparent(){if(!this.cy().styleEnabled())return!1;var ele=this[0],hasCompoundNodes=ele.cy().hasCompoundNodes();return ele?hasCompoundNodes?0===ele.effectiveOpacity():0===ele.pstyle("opacity").value:void 0},backgrounding:function backgrounding(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function checkCompound(ele,parentOk){var parents=ele._private.data.parent?ele.parents():null;if(parents)for(var i2=0;i2<parents.length;i2++)if(!parentOk(parents[i2]))return!1;return!0}function defineDerivedStateFunction(specs){var ok=specs.ok,edgeOkViaNode=specs.edgeOkViaNode||specs.ok,parentOk=specs.parentOk||specs.ok;return function(){var cy=this.cy();if(!cy.styleEnabled())return!0;var ele=this[0],hasCompoundNodes=cy.hasCompoundNodes();if(ele){var _p=ele._private;if(!ok(ele))return!1;if(ele.isNode())return!hasCompoundNodes||checkCompound(ele,parentOk);var src=_p.source,tgt=_p.target;return edgeOkViaNode(src)&&(!hasCompoundNodes||checkCompound(src,edgeOkViaNode))&&(src===tgt||edgeOkViaNode(tgt)&&(!hasCompoundNodes||checkCompound(tgt,edgeOkViaNode)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",(function(ele){return"element"===ele.pstyle("display").value&&0!==ele.width()&&(!ele.isNode()||0!==ele.height())}));elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",(function(ele){return"yes"===ele.pstyle("events").value&&"visible"===ele.pstyle("visibility").value&&eleTakesUpSpace(ele)})),parentInteractive=cacheStyleFunction("parentInteractive",(function(parent){return"visible"===parent.pstyle("visibility").value&&eleTakesUpSpace(parent)}));elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace})),elesfn$4.noninteractive=function(){var ele=this[0];if(ele)return!ele.interactive()};var eleVisible=cacheStyleFunction("eleVisible",(function(ele){return"visible"===ele.pstyle("visibility").value&&0!==ele.pstyle("opacity").pfValue&&eleTakesUpSpace(ele)})),edgeVisibleViaNode=eleTakesUpSpace;elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode})),elesfn$4.hidden=function(){var ele=this[0];if(ele)return!ele.visible()},elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()})),elesfn$4.bypass=elesfn$4.css=elesfn$4.style,elesfn$4.renderedCss=elesfn$4.renderedStyle,elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle,elesfn$4.pstyle=elesfn$4.parsedStyle;var elesfn$3={};function defineSwitchFunction(params){return function(){var args=arguments,changedEles=[];if(2===args.length){var data2=args[0],handler=args[1];this.on(params.event,data2,handler)}else if(1===args.length&&fn$6(args[0])){var _handler=args[0];this.on(params.event,_handler)}else if(0===args.length||1===args.length&&array(args[0])){for(var addlEvents=1===args.length?args[0]:null,i2=0;i2<this.length;i2++){var ele=this[i2],able=!params.ableField||ele._private[params.ableField],changed=ele._private[params.field]!=params.value;if(params.overrideAble){var overrideAble=params.overrideAble(ele);if(void 0!==overrideAble&&(able=overrideAble,!overrideAble))return this}able&&(ele._private[params.field]=params.value,changed&&changedEles.push(ele))}var changedColl=this.spawn(changedEles);changedColl.updateStyle(),changedColl.emit(params.event),addlEvents&&changedColl.emit(addlEvents)}return this}}function defineSwitchSet(params){elesfn$3[params.field]=function(){var ele=this[0];if(ele){if(params.overrideField){var val=params.overrideField(ele);if(void 0!==val)return val}return ele._private[params.field]}},elesfn$3[params.on]=defineSwitchFunction({event:params.on,field:params.field,ableField:params.ableField,overrideAble:params.overrideAble,value:!0}),elesfn$3[params.off]=defineSwitchFunction({event:params.off,field:params.field,ableField:params.ableField,overrideAble:params.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function overrideField(ele){return!!ele.cy().autolock()||void 0},on:"lock",off:"unlock"}),defineSwitchSet({field:"grabbable",overrideField:function overrideField(ele){return!ele.cy().autoungrabify()&&!ele.pannable()&&void 0},on:"grabify",off:"ungrabify"}),defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function overrideAble(ele){return!ele.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),defineSwitchSet({field:"selectable",overrideField:function overrideField(ele){return!ele.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),elesfn$3.deselect=elesfn$3.unselect,elesfn$3.grabbed=function(){var ele=this[0];if(ele)return ele._private.grabbed},defineSwitchSet({field:"active",on:"activate",off:"unactivate"}),defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"}),elesfn$3.inactive=function(){var ele=this[0];if(ele)return!ele._private.active};var elesfn$2={},defineDagExtremity=function defineDagExtremity2(params){return function dagExtremityImpl(selector){for(var eles=this,ret=[],i2=0;i2<eles.length;i2++){var ele=eles[i2];if(ele.isNode()){for(var disqualified=!1,edges=ele.connectedEdges(),j=0;j<edges.length;j++){var edge=edges[j],src=edge.source(),tgt=edge.target();if(params.noIncomingEdges&&tgt===ele&&src!==ele||params.noOutgoingEdges&&src===ele&&tgt!==ele){disqualified=!0;break}}disqualified||ret.push(ele)}}return this.spawn(ret,!0).filter(selector)}},defineDagOneHop=function defineDagOneHop2(params){return function(selector){for(var eles=this,oEles=[],i2=0;i2<eles.length;i2++){var ele=eles[i2];if(ele.isNode())for(var edges=ele.connectedEdges(),j=0;j<edges.length;j++){var edge=edges[j],src=edge.source(),tgt=edge.target();params.outgoing&&src===ele?(oEles.push(edge),oEles.push(tgt)):params.incoming&&tgt===ele&&(oEles.push(edge),oEles.push(src))}}return this.spawn(oEles,!0).filter(selector)}},defineDagAllHops=function defineDagAllHops2(params){return function(selector){for(var eles=this,sEles=[],sElesIds={};;){var next2=params.outgoing?eles.outgoers():eles.incomers();if(0===next2.length)break;for(var newNext=!1,i2=0;i2<next2.length;i2++){var n=next2[i2],nid=n.id();sElesIds[nid]||(sElesIds[nid]=!0,sEles.push(n),newNext=!0)}if(!newNext)break;eles=next2}return this.spawn(sEles,!0).filter(selector)}};function defineSourceFunction(params){return function sourceImpl(selector){for(var sources=[],i2=0;i2<this.length;i2++){var src=this[i2]._private[params.attr];src&&sources.push(src)}return this.spawn(sources,!0).filter(selector)}}function defineEdgesWithFunction(params){return function edgesWithImpl(otherNodes){var elements2=[],cy=this._private.cy,p2=params||{};string(otherNodes)&&(otherNodes=cy.$(otherNodes));for(var h=0;h<otherNodes.length;h++)for(var edges=otherNodes[h]._private.edges,i2=0;i2<edges.length;i2++){var edge=edges[i2],edgeData=edge._private.data,thisToOther=this.hasElementWithId(edgeData.source)&&otherNodes.hasElementWithId(edgeData.target),otherToThis=otherNodes.hasElementWithId(edgeData.source)&&this.hasElementWithId(edgeData.target);if(thisToOther||otherToThis){if(p2.thisIsSrc||p2.thisIsTgt){if(p2.thisIsSrc&&!thisToOther)continue;if(p2.thisIsTgt&&!otherToThis)continue}elements2.push(edge)}}return this.spawn(elements2,!0)}}function defineParallelEdgesFunction(params){return params=extend({},{codirected:!1},params),function parallelEdgesImpl(selector){for(var elements2=[],edges=this.edges(),p2=params,i2=0;i2<edges.length;i2++)for(var edge1_p=edges[i2]._private,src1=edge1_p.source,srcid1=src1._private.data.id,tgtid1=edge1_p.data.target,srcEdges1=src1._private.edges,j=0;j<srcEdges1.length;j++){var edge2=srcEdges1[j],edge2data=edge2._private.data,tgtid2=edge2data.target,srcid2=edge2data.source,codirected=tgtid2===tgtid1&&srcid2===srcid1,oppdirected=srcid1===tgtid2&&tgtid1===srcid2;(p2.codirected&&codirected||!p2.codirected&&(codirected||oppdirected))&&elements2.push(edge2)}return this.spawn(elements2,!0).filter(selector)}}elesfn$2.clearTraversalCache=function(){for(var i2=0;i2<this.length;i2++)this[i2]._private.traversalCache=null},extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({incoming:!0})}),extend(elesfn$2,{neighborhood:cache((function(selector){for(var elements2=[],nodes2=this.nodes(),i2=0;i2<nodes2.length;i2++)for(var node=nodes2[i2],connectedEdges=node.connectedEdges(),j=0;j<connectedEdges.length;j++){var edge=connectedEdges[j],src=edge.source(),tgt=edge.target(),otherNode=node===src?tgt:src;otherNode.length>0&&elements2.push(otherNode[0]),elements2.push(edge[0])}return this.spawn(elements2,!0).filter(selector)}),"neighborhood"),closedNeighborhood:function closedNeighborhood(selector){return this.neighborhood().add(this).filter(selector)},openNeighborhood:function openNeighborhood(selector){return this.neighborhood(selector)}}),elesfn$2.neighbourhood=elesfn$2.neighborhood,elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood,elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood,extend(elesfn$2,{source:cache((function sourceImpl(selector){var src,ele=this[0];return ele&&(src=ele._private.source||ele.cy().collection()),src&&selector?src.filter(selector):src}),"source"),target:cache((function targetImpl(selector){var tgt,ele=this[0];return ele&&(tgt=ele._private.target||ele.cy().collection()),tgt&&selector?tgt.filter(selector):tgt}),"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})}),extend(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")}),extend(elesfn$2,{connectedEdges:cache((function(selector){for(var retEles=[],eles=this,i2=0;i2<eles.length;i2++){var node=eles[i2];if(node.isNode())for(var edges=node._private.edges,j=0;j<edges.length;j++){var edge=edges[j];retEles.push(edge)}}return this.spawn(retEles,!0).filter(selector)}),"connectedEdges"),connectedNodes:cache((function(selector){for(var retEles=[],eles=this,i2=0;i2<eles.length;i2++){var edge=eles[i2];edge.isEdge()&&(retEles.push(edge.source()[0]),retEles.push(edge.target()[0]))}return this.spawn(retEles,!0).filter(selector)}),"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")}),extend(elesfn$2,{components:function components(root2){var self2=this,cy=self2.cy(),visited=cy.collection(),unvisited=null==root2?self2.nodes():root2.nodes(),components2=[];null!=root2&&unvisited.empty()&&(unvisited=root2.sources());var visitInComponent=function visitInComponent2(node,component){visited.merge(node),unvisited.unmerge(node),component.merge(node)};if(unvisited.empty())return self2.spawn();var _loop=function _loop2(){var cmpt=cy.collection();components2.push(cmpt);var root3=unvisited[0];visitInComponent(root3,cmpt),self2.bfs({directed:!1,roots:root3,visit:function visit(v){return visitInComponent(v,cmpt)}}),cmpt.forEach((function(node){node.connectedEdges().forEach((function(e){self2.has(e)&&cmpt.has(e.source())&&cmpt.has(e.target())&&cmpt.merge(e)}))}))};do{_loop()}while(unvisited.length>0);return components2},component:function component(){var ele=this[0];return ele.cy().mutableElements().components(ele)[0]}}),elesfn$2.componentsOf=elesfn$2.components;var Collection=function Collection2(cy,elements2){var unique=arguments.length>2&&void 0!==arguments[2]&&arguments[2],removed=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==cy){var map=new Map$2,createdElements=!1;if(elements2){if(elements2.length>0&&plainObject(elements2[0])&&!element(elements2[0])){createdElements=!0;for(var eles=[],elesIds=new Set$1,i2=0,l=elements2.length;i2<l;i2++){var json=elements2[i2];null==json.data&&(json.data={});var _data=json.data;if(null==_data.id)_data.id=uuid();else if(cy.hasElementWithId(_data.id)||elesIds.has(_data.id))continue;var ele=new Element(cy,json,!1);eles.push(ele),elesIds.add(_data.id)}elements2=eles}}else elements2=[];this.length=0;for(var _i=0,_l=elements2.length;_i<_l;_i++){var element$1=elements2[_i][0];if(null!=element$1){var id=element$1._private.data.id;unique&&map.has(id)||(unique&&map.set(id,{index:this.length,ele:element$1}),this[this.length]=element$1,this.length++)}}this._private={eles:this,cy:cy,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function rebuildMap(){for(var m=this.lazyMap=new Map$2,eles2=this.eles,_i2=0;_i2<eles2.length;_i2++){var _ele=eles2[_i2];m.set(_ele.id(),{index:_i2,ele:_ele})}}},unique&&(this._private.map=map),createdElements&&!removed&&this.restore()}else error("A collection must have a reference to the core")},elesfn$1=Element.prototype=Collection.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"},elesfn$1.spawn=function(eles,unique){return new Collection(this.cy(),eles,unique)},elesfn$1.spawnSelf=function(){return this.spawn(this)},elesfn$1.cy=function(){return this._private.cy},elesfn$1.renderer=function(){return this._private.cy.renderer()},elesfn$1.element=function(){return this[0]},elesfn$1.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])},elesfn$1.unique=function(){return new Collection(this._private.cy,this,!0)},elesfn$1.hasElementWithId=function(id){return id=""+id,this._private.map.has(id)},elesfn$1.getElementById=function(id){id=""+id;var cy=this._private.cy,entry=this._private.map.get(id);return entry?entry.ele:new Collection(cy)},elesfn$1.$id=elesfn$1.getElementById,elesfn$1.poolIndex=function(){var eles=this._private.cy._private.elements,id=this[0]._private.data.id;return eles._private.map.get(id).index},elesfn$1.indexOf=function(ele){var id=ele[0]._private.data.id;return this._private.map.get(id).index},elesfn$1.indexOfId=function(id){return id=""+id,this._private.map.get(id).index},elesfn$1.json=function(obj){var ele=this.element(),cy=this.cy();if(null==ele&&obj)return this;if(null!=ele){var p2=ele._private;if(plainObject(obj)){if(cy.startBatch(),obj.data){ele.data(obj.data);var _data2=p2.data;if(ele.isEdge()){var move=!1,spec={},src=obj.data.source,tgt=obj.data.target;null!=src&&src!=_data2.source&&(spec.source=""+src,move=!0),null!=tgt&&tgt!=_data2.target&&(spec.target=""+tgt,move=!0),move&&(ele=ele.move(spec))}else{var newParentValSpecd="parent"in obj.data,parent=obj.data.parent;!newParentValSpecd||null==parent&&null==_data2.parent||parent==_data2.parent||(void 0===parent&&(parent=null),null!=parent&&(parent=""+parent),ele=ele.move({parent:parent}))}}obj.position&&ele.position(obj.position);var checkSwitch=function checkSwitch2(k,trueFnName,falseFnName){var obj_k=obj[k];null!=obj_k&&obj_k!==p2[k]&&(obj_k?ele[trueFnName]():ele[falseFnName]())};return checkSwitch("removed","remove","restore"),checkSwitch("selected","select","unselect"),checkSwitch("selectable","selectify","unselectify"),checkSwitch("locked","lock","unlock"),checkSwitch("grabbable","grabify","ungrabify"),checkSwitch("pannable","panify","unpanify"),null!=obj.classes&&ele.classes(obj.classes),cy.endBatch(),this}if(void 0===obj){var json={data:copy(p2.data),position:copy(p2.position),group:p2.group,removed:p2.removed,selected:p2.selected,selectable:p2.selectable,locked:p2.locked,grabbable:p2.grabbable,pannable:p2.pannable,classes:null};json.classes="";var i2=0;return p2.classes.forEach((function(cls){return json.classes+=0==i2++?cls:" "+cls})),json}}},elesfn$1.jsons=function(){for(var jsons=[],i2=0;i2<this.length;i2++){var json=this[i2].json();jsons.push(json)}return jsons},elesfn$1.clone=function(){for(var cy=this.cy(),elesArr=[],i2=0;i2<this.length;i2++){var json=this[i2].json(),clone2=new Element(cy,json,!1);elesArr.push(clone2)}return new Collection(cy,elesArr)},elesfn$1.copy=elesfn$1.clone,elesfn$1.restore=function(){for(var elements2,i2,notifyRenderer=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],addToPool=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],self2=this,cy=self2.cy(),cy_p=cy._private,nodes2=[],edges=[],_i3=0,l=self2.length;_i3<l;_i3++){var ele=self2[_i3];addToPool&&!ele.removed()||(ele.isNode()?nodes2.push(ele):edges.push(ele))}elements2=nodes2.concat(edges);var removeFromElements=function removeFromElements2(){elements2.splice(i2,1),i2--};for(i2=0;i2<elements2.length;i2++){var _ele2=elements2[i2],_private=_ele2._private,_data3=_private.data;if(_ele2.clearTraversalCache(),addToPool||_private.removed)if(void 0===_data3.id)_data3.id=uuid();else if(number$1(_data3.id))_data3.id=""+_data3.id;else{if(emptyString(_data3.id)||!string(_data3.id)){error("Can not create element with invalid string ID `"+_data3.id+"`"),removeFromElements();continue}if(cy.hasElementWithId(_data3.id)){error("Can not create second element with ID `"+_data3.id+"`"),removeFromElements();continue}}var id=_data3.id;if(_ele2.isNode()){var pos=_private.position;null==pos.x&&(pos.x=0),null==pos.y&&(pos.y=0)}if(_ele2.isEdge()){for(var edge=_ele2,fields=["source","target"],fieldsLength=fields.length,badSourceOrTarget=!1,j=0;j<fieldsLength;j++){var field=fields[j],val=_data3[field];number$1(val)&&(val=_data3[field]=""+_data3[field]),null==val||""===val?(error("Can not create edge `"+id+"` with unspecified "+field),badSourceOrTarget=!0):cy.hasElementWithId(val)||(error("Can not create edge `"+id+"` with nonexistant "+field+" `"+val+"`"),badSourceOrTarget=!0)}if(badSourceOrTarget){removeFromElements();continue}var src=cy.getElementById(_data3.source),tgt=cy.getElementById(_data3.target);src.same(tgt)?src._private.edges.push(edge):(src._private.edges.push(edge),tgt._private.edges.push(edge)),edge._private.source=src,edge._private.target=tgt}_private.map=new Map$2,_private.map.set(id,{ele:_ele2,index:0}),_private.removed=!1,addToPool&&cy.addToPool(_ele2)}for(var _i4=0;_i4<nodes2.length;_i4++){var node=nodes2[_i4],_data4=node._private.data;number$1(_data4.parent)&&(_data4.parent=""+_data4.parent);var parentId=_data4.parent;if(null!=parentId||node._private.parent){var parent=node._private.parent?cy.collection().merge(node._private.parent):cy.getElementById(parentId);if(parent.empty())_data4.parent=void 0;else if(parent[0].removed())warn("Node added with missing parent, reference to parent removed"),_data4.parent=void 0,node._private.parent=null;else{for(var selfAsParent=!1,ancestor=parent;!ancestor.empty();){if(node.same(ancestor)){selfAsParent=!0,_data4.parent=void 0;break}ancestor=ancestor.parent()}selfAsParent||(parent[0]._private.children.push(node),node._private.parent=parent[0],cy_p.hasCompoundNodes=!0)}}}if(elements2.length>0){for(var restored=elements2.length===self2.length?self2:new Collection(cy,elements2),_i5=0;_i5<restored.length;_i5++){var _ele3=restored[_i5];_ele3.isNode()||(_ele3.parallelEdges().clearTraversalCache(),_ele3.source().clearTraversalCache(),_ele3.target().clearTraversalCache())}(cy_p.hasCompoundNodes?cy.collection().merge(restored).merge(restored.connectedNodes()).merge(restored.parent()):restored).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(notifyRenderer),notifyRenderer?restored.emitAndNotify("add"):addToPool&&restored.emit("add")}return self2},elesfn$1.removed=function(){var ele=this[0];return ele&&ele._private.removed},elesfn$1.inside=function(){var ele=this[0];return ele&&!ele._private.removed},elesfn$1.remove=function(){var notifyRenderer=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],removeFromPool=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],self2=this,elesToRemove=[],elesToRemoveIds={},cy=self2._private.cy;function addConnectedEdges(node){for(var edges=node._private.edges,i3=0;i3<edges.length;i3++)add(edges[i3])}function addChildren2(node){for(var children=node._private.children,i3=0;i3<children.length;i3++)add(children[i3])}function add(ele2){var alreadyAdded=elesToRemoveIds[ele2.id()];removeFromPool&&ele2.removed()||alreadyAdded||(elesToRemoveIds[ele2.id()]=!0,ele2.isNode()?(elesToRemove.push(ele2),addConnectedEdges(ele2),addChildren2(ele2)):elesToRemove.unshift(ele2))}for(var i2=0,l=self2.length;i2<l;i2++)add(self2[i2]);function removeEdgeRef(node,edge){var connectedEdges=node._private.edges;removeFromArray(connectedEdges,edge),node.clearTraversalCache()}function removeParallelRef(pllEdge2){pllEdge2.clearTraversalCache()}var alteredParents=[];function removeChildRef(parent2,ele2){ele2=ele2[0];var children=(parent2=parent2[0])._private.children,pid=parent2.id();removeFromArray(children,ele2),ele2._private.parent=null,alteredParents.ids[pid]||(alteredParents.ids[pid]=!0,alteredParents.push(parent2))}alteredParents.ids={},self2.dirtyCompoundBoundsCache(),removeFromPool&&cy.removeFromPool(elesToRemove);for(var _i6=0;_i6<elesToRemove.length;_i6++){var _ele4=elesToRemove[_i6];if(_ele4.isEdge()){var src=_ele4.source()[0],tgt=_ele4.target()[0];removeEdgeRef(src,_ele4),removeEdgeRef(tgt,_ele4);for(var pllEdges=_ele4.parallelEdges(),j=0;j<pllEdges.length;j++){var pllEdge=pllEdges[j];removeParallelRef(pllEdge),pllEdge.isBundledBezier()&&pllEdge.dirtyBoundingBoxCache()}}else{var parent=_ele4.parent();0!==parent.length&&removeChildRef(parent,_ele4)}removeFromPool&&(_ele4._private.removed=!0)}var elesStillInside=cy._private.elements;cy._private.hasCompoundNodes=!1;for(var _i7=0;_i7<elesStillInside.length;_i7++)if(elesStillInside[_i7].isParent()){cy._private.hasCompoundNodes=!0;break}var removedElements=new Collection(this.cy(),elesToRemove);removedElements.size()>0&&(notifyRenderer?removedElements.emitAndNotify("remove"):removeFromPool&&removedElements.emit("remove"));for(var _i8=0;_i8<alteredParents.length;_i8++){var _ele6=alteredParents[_i8];removeFromPool&&_ele6.removed()||_ele6.updateStyle()}return removedElements},elesfn$1.move=function(struct){var cy=this._private.cy,eles=this,notifyRenderer=!1,modifyPool=!1,toString2=function toString3(id){return null==id?id:""+id};if(void 0!==struct.source||void 0!==struct.target){var srcId=toString2(struct.source),tgtId=toString2(struct.target),srcExists=null!=srcId&&cy.hasElementWithId(srcId),tgtExists=null!=tgtId&&cy.hasElementWithId(tgtId);(srcExists||tgtExists)&&(cy.batch((function(){eles.remove(notifyRenderer,modifyPool),eles.emitAndNotify("moveout");for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_data5=ele._private.data;ele.isEdge()&&(srcExists&&(_data5.source=srcId),tgtExists&&(_data5.target=tgtId))}eles.restore(notifyRenderer,modifyPool)})),eles.emitAndNotify("move"))}else if(void 0!==struct.parent){var parentId=toString2(struct.parent);if(null===parentId||cy.hasElementWithId(parentId)){var pidToAssign=null===parentId?void 0:parentId;cy.batch((function(){var updated=eles.remove(notifyRenderer,modifyPool);updated.emitAndNotify("moveout");for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_data6=ele._private.data;ele.isNode()&&(_data6.parent=pidToAssign)}updated.restore(notifyRenderer,modifyPool)})),eles.emitAndNotify("move")}}return this},[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach((function(props){extend(elesfn$1,props)}));var corefn$9={add:function add(opts){var elements2,cy=this;if(elementOrCollection(opts)){var eles=opts;if(eles._private.cy===cy)elements2=eles.restore();else{for(var jsons=[],i2=0;i2<eles.length;i2++){var ele=eles[i2];jsons.push(ele.json())}elements2=new Collection(cy,jsons)}}else if(array(opts))elements2=new Collection(cy,opts);else if(plainObject(opts)&&(array(opts.nodes)||array(opts.edges))){for(var elesByGroup=opts,_jsons2=[],grs=["nodes","edges"],_i=0,il=grs.length;_i<il;_i++){var group=grs[_i],elesArray=elesByGroup[group];if(array(elesArray))for(var j=0,jl=elesArray.length;j<jl;j++){var json=extend({group:group},elesArray[j]);_jsons2.push(json)}}elements2=new Collection(cy,_jsons2)}else elements2=new Element(cy,opts).collection();return elements2},remove:function remove(collection2){if(elementOrCollection(collection2));else if(string(collection2)){var selector=collection2;collection2=this.$(selector)}return collection2.remove()}};function generateCubicBezier(mX1,mY1,mX2,mY2){var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var i2=0;i2<4;++i2)if("number"!=typeof arguments[i2]||isNaN(arguments[i2])||!isFinite(arguments[i2]))return!1;mX1=Math.min(mX1,1),mX2=Math.min(mX2,1),mX1=Math.max(mX1,0),mX2=Math.max(mX2,0);var mSampleValues=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function C(aA1){return 3*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+C(aA1)}function newtonRaphsonIterate(aX,aGuessT){for(var _i=0;_i<NEWTON_ITERATIONS;++_i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(0===currentSlope)return aGuessT;aGuessT-=(calcBezier(aGuessT,mX1,mX2)-aX)/currentSlope}return aGuessT}function calcSampleValues(){for(var _i2=0;_i2<kSplineTableSize;++_i2)mSampleValues[_i2]=calcBezier(_i2*kSampleStepSize,mX1,mX2)}function binarySubdivide(aX,aA,aB){var currentX,currentT,i3=0;do{(currentX=calcBezier(currentT=aA+(aB-aA)/2,mX1,mX2)-aX)>0?aB=currentT:aA=currentT}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i3<SUBDIVISION_MAX_ITERATIONS);return currentT}function getTForX(aX){for(var intervalStart=0,currentSample=1,lastSample=kSplineTableSize-1;currentSample!==lastSample&&mSampleValues[currentSample]<=aX;++currentSample)intervalStart+=kSampleStepSize;--currentSample;var guessForT=intervalStart+(aX-mSampleValues[currentSample])/(mSampleValues[currentSample+1]-mSampleValues[currentSample])*kSampleStepSize,initialSlope=getSlope(guessForT,mX1,mX2);return initialSlope>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(aX,guessForT):0===initialSlope?guessForT:binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize)}var _precomputed=!1;function precompute(){_precomputed=!0,mX1===mY1&&mX2===mY2||calcSampleValues()}var f=function f2(aX){return _precomputed||precompute(),mX1===mY1&&mX2===mY2?aX:0===aX?0:1===aX?1:calcBezier(getTForX(aX),mY1,mY2)};f.getControlPoints=function(){return[{x:mX1,y:mY1},{x:mX2,y:mY2}]};var str="generateBezier("+[mX1,mY1,mX2,mY2]+")";return f.toString=function(){return str},f}var generateSpringRK4=function(){function springAccelerationForState(state){return-state.tension*state.x-state.friction*state.v}function springEvaluateStateWithDerivative(initialState,dt,derivative){var state={x:initialState.x+derivative.dx*dt,v:initialState.v+derivative.dv*dt,tension:initialState.tension,friction:initialState.friction};return{dx:state.v,dv:springAccelerationForState(state)}}function springIntegrateState(state,dt){var a={dx:state.v,dv:springAccelerationForState(state)},b=springEvaluateStateWithDerivative(state,.5*dt,a),c=springEvaluateStateWithDerivative(state,.5*dt,b),d=springEvaluateStateWithDerivative(state,dt,c),dxdt=1/6*(a.dx+2*(b.dx+c.dx)+d.dx),dvdt=1/6*(a.dv+2*(b.dv+c.dv)+d.dv);return state.x=state.x+dxdt*dt,state.v=state.v+dvdt*dt,state}return function springRK4Factory(tension,friction,duration){var have_duration,dt,last_state,initState={x:-1,v:0,tension:null,friction:null},path=[0],time_lapsed=0,tolerance=1e-4,DT=.016;for(tension=parseFloat(tension)||500,friction=parseFloat(friction)||20,duration=duration||null,initState.tension=tension,initState.friction=friction,dt=(have_duration=null!==duration)?(time_lapsed=springRK4Factory(tension,friction))/duration*DT:DT;last_state=springIntegrateState(last_state||initState,dt),path.push(1+last_state.x),time_lapsed+=16,Math.abs(last_state.x)>tolerance&&Math.abs(last_state.v)>tolerance;);return have_duration?function(percentComplete){return path[percentComplete*(path.length-1)|0]}:time_lapsed}}(),cubicBezier=function cubicBezier2(t1,p1,t2,p2){var bezier=generateCubicBezier(t1,p1,t2,p2);return function(start,end,percent){return start+(end-start)*bezier(percent)}},easings={linear:function linear(start,end,percent){return start+(end-start)*percent},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function spring(tension,friction,duration){if(0===duration)return easings.linear;var spring2=generateSpringRK4(tension,friction,duration);return function(start,end,percent){return start+(end-start)*spring2(percent)}},"cubic-bezier":cubicBezier};function getEasedValue(type,start,end,percent,easingFn){if(1===percent)return end;if(start===end)return end;var val=easingFn(start,end,percent);return null==type||((type.roundValue||type.color)&&(val=Math.round(val)),void 0!==type.min&&(val=Math.max(val,type.min)),void 0!==type.max&&(val=Math.min(val,type.max))),val}function getValue(prop,spec){return null!=prop.pfValue||null!=prop.value?null==prop.pfValue||null!=spec&&"%"===spec.type.units?prop.value:prop.pfValue:prop}function ease(startProp,endProp,percent,easingFn,propSpec){var type=null!=propSpec?propSpec.type:null;percent<0?percent=0:percent>1&&(percent=1);var start=getValue(startProp,propSpec),end=getValue(endProp,propSpec);if(number$1(start)&&number$1(end))return getEasedValue(type,start,end,percent,easingFn);if(array(start)&&array(end)){for(var easedArr=[],i2=0;i2<end.length;i2++){var si=start[i2],ei=end[i2];if(null!=si&&null!=ei){var val=getEasedValue(type,si,ei,percent,easingFn);easedArr.push(val)}else easedArr.push(ei)}return easedArr}}function step$1(self2,ani,now2,isCore){var isEles=!isCore,_p=self2._private,ani_p=ani._private,pEasing=ani_p.easing,startTime=ani_p.startTime,style=(isCore?self2:self2.cy()).style();if(!ani_p.easingImpl)if(null==pEasing)ani_p.easingImpl=easings.linear;else{var easingVals,name,args;easingVals=string(pEasing)?style.parse("transition-timing-function",pEasing).value:pEasing,string(easingVals)?(name=easingVals,args=[]):(name=easingVals[1],args=easingVals.slice(2).map((function(n){return+n}))),args.length>0?("spring"===name&&args.push(ani_p.duration),ani_p.easingImpl=easings[name].apply(null,args)):ani_p.easingImpl=easings[name]}var percent,easing=ani_p.easingImpl;if(percent=0===ani_p.duration?1:(now2-startTime)/ani_p.duration,ani_p.applying&&(percent=ani_p.progress),percent<0?percent=0:percent>1&&(percent=1),null==ani_p.delay){var startPos=ani_p.startPosition,endPos=ani_p.position;if(endPos&&isEles&&!self2.locked()){var newPos={};valid(startPos.x,endPos.x)&&(newPos.x=ease(startPos.x,endPos.x,percent,easing)),valid(startPos.y,endPos.y)&&(newPos.y=ease(startPos.y,endPos.y,percent,easing)),self2.position(newPos)}var startPan=ani_p.startPan,endPan=ani_p.pan,pan=_p.pan,animatingPan=null!=endPan&&isCore;animatingPan&&(valid(startPan.x,endPan.x)&&(pan.x=ease(startPan.x,endPan.x,percent,easing)),valid(startPan.y,endPan.y)&&(pan.y=ease(startPan.y,endPan.y,percent,easing)),self2.emit("pan"));var startZoom=ani_p.startZoom,endZoom=ani_p.zoom,animatingZoom=null!=endZoom&&isCore;animatingZoom&&(valid(startZoom,endZoom)&&(_p.zoom=bound(_p.minZoom,ease(startZoom,endZoom,percent,easing),_p.maxZoom)),self2.emit("zoom")),(animatingPan||animatingZoom)&&self2.emit("viewport");var props=ani_p.style;if(props&&props.length>0&&isEles){for(var i2=0;i2<props.length;i2++){var prop=props[i2],_name=prop.name,end=prop,start=ani_p.startStyle[_name],easedVal=ease(start,end,percent,easing,style.properties[start.name]);style.overrideBypass(self2,_name,easedVal)}self2.emit("style")}}return ani_p.progress=percent,percent}function valid(start,end){return!(null==start||null==end||!(number$1(start)&&number$1(end)||start&&end))}function startAnimation(self2,ani,now2,isCore){var ani_p=ani._private;ani_p.started=!0,ani_p.startTime=now2-ani_p.progress*ani_p.duration}function stepAll(now2,cy){var eles=cy._private.aniEles,doneEles=[];function stepOne(ele2,isCore){var _p=ele2._private,current=_p.animation.current,queue=_p.animation.queue,ranAnis=!1;if(0===current.length){var next2=queue.shift();next2&&current.push(next2)}for(var callbacks=function callbacks2(_callbacks){for(var j=_callbacks.length-1;j>=0;j--)(0,_callbacks[j])();_callbacks.splice(0,_callbacks.length)},i2=current.length-1;i2>=0;i2--){var ani=current[i2],ani_p=ani._private;ani_p.stopped?(current.splice(i2,1),ani_p.hooked=!1,ani_p.playing=!1,ani_p.started=!1,callbacks(ani_p.frames)):(ani_p.playing||ani_p.applying)&&(ani_p.playing&&ani_p.applying&&(ani_p.applying=!1),ani_p.started||startAnimation(ele2,ani,now2),step$1(ele2,ani,now2,isCore),ani_p.applying&&(ani_p.applying=!1),callbacks(ani_p.frames),null!=ani_p.step&&ani_p.step(now2),ani.completed()&&(current.splice(i2,1),ani_p.hooked=!1,ani_p.playing=!1,ani_p.started=!1,callbacks(ani_p.completes)),ranAnis=!0)}return isCore||0!==current.length||0!==queue.length||doneEles.push(ele2),ranAnis}for(var ranEleAni=!1,e=0;e<eles.length;e++){var handledThisEle=stepOne(eles[e]);ranEleAni=ranEleAni||handledThisEle}var ranCoreAni=stepOne(cy,!0);(ranEleAni||ranCoreAni)&&(eles.length>0?cy.notify("draw",eles):cy.notify("draw")),eles.unmerge(doneEles),cy.emit("step")}var corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function addToAnimationPool(eles){var cy=this;cy.styleEnabled()&&cy._private.aniEles.merge(eles)},stopAnimationLoop:function stopAnimationLoop(){this._private.animationsRunning=!1},startAnimationLoop:function startAnimationLoop(){var cy=this;if(cy._private.animationsRunning=!0,cy.styleEnabled()){var renderer3=cy.renderer();renderer3&&renderer3.beforeRender?renderer3.beforeRender((function rendererAnimationStep(willDraw,now2){stepAll(now2,cy)}),renderer3.beforeRenderPriorities.animations):headlessStep()}function headlessStep(){cy._private.animationsRunning&&requestAnimationFrame2((function animationStep(now2){stepAll(now2,cy),headlessStep()}))}}},emitterOptions={qualifierCompare:function qualifierCompare(selector1,selector2){return null==selector1||null==selector2?null==selector1&&null==selector2:selector1.sameText(selector2)},eventMatches:function eventMatches(cy,listener,eventObj){var selector=listener.qualifier;return null==selector||cy!==eventObj.target&&element(eventObj.target)&&selector.matches(eventObj.target)},addEventFields:function addEventFields(cy,evt){evt.cy=cy,evt.target=cy},callbackContext:function callbackContext(cy,listener,eventObj){return null!=listener.qualifier?eventObj.target:cy}},argSelector=function argSelector2(arg){return string(arg)?new Selector(arg):arg},elesfn={createEmitter:function createEmitter(){var _p=this._private;return _p.emitter||(_p.emitter=new Emitter(emitterOptions,this)),this},emitter:function emitter(){return this._private.emitter},on:function on(events,selector,callback){return this.emitter().on(events,argSelector(selector),callback),this},removeListener:function removeListener(events,selector,callback){return this.emitter().removeListener(events,argSelector(selector),callback),this},removeAllListeners:function removeAllListeners(){return this.emitter().removeAllListeners(),this},one:function one(events,selector,callback){return this.emitter().one(events,argSelector(selector),callback),this},once:function once(events,selector,callback){return this.emitter().one(events,argSelector(selector),callback),this},emit:function emit(events,extraParams){return this.emitter().emit(events,extraParams),this},emitAndNotify:function emitAndNotify(event2,eles){return this.emit(event2),this.notify(event2,eles),this}};define.eventAliasesOn(elesfn);var corefn$7={png:function png(options){return options=options||{},this._private.renderer.png(options)},jpg:function jpg(options){var renderer3=this._private.renderer;return(options=options||{}).bg=options.bg||"#fff",renderer3.jpg(options)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function layout2(options){var cy=this;if(null!=options)if(null!=options.name){var eles,name=options.name,Layout2=cy.extension("layout",name);if(null!=Layout2)return eles=string(options.eles)?cy.$(options.eles):null!=options.eles?options.eles:cy.$(),new Layout2(extend({},options,{cy:cy,eles:eles}));error("No such layout `"+name+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else error("A `name` must be specified to make a layout");else error("Layout options must be specified to make a layout")}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var corefn$5={notify:function notify(eventName,eventEles){var _p=this._private;if(this.batching()){_p.batchNotifications=_p.batchNotifications||{};var eles=_p.batchNotifications[eventName]=_p.batchNotifications[eventName]||this.collection();null!=eventEles&&eles.merge(eventEles)}else if(_p.notificationsEnabled){var renderer3=this.renderer();!this.destroyed()&&renderer3&&renderer3.notify(eventName,eventEles)}},notifications:function notifications(bool){var p2=this._private;return void 0===bool?p2.notificationsEnabled:(p2.notificationsEnabled=!!bool,this)},noNotifications:function noNotifications(callback){this.notifications(!1),callback(),this.notifications(!0)},batching:function batching(){return this._private.batchCount>0},startBatch:function startBatch(){var _p=this._private;return null==_p.batchCount&&(_p.batchCount=0),0===_p.batchCount&&(_p.batchStyleEles=this.collection(),_p.batchNotifications={}),_p.batchCount++,this},endBatch:function endBatch(){var _p=this._private;if(0===_p.batchCount)return this;if(_p.batchCount--,0===_p.batchCount){_p.batchStyleEles.updateStyle();var renderer3=this.renderer();Object.keys(_p.batchNotifications).forEach((function(eventName){var eles=_p.batchNotifications[eventName];eles.empty()?renderer3.notify(eventName):renderer3.notify(eventName,eles)}))}return this},batch:function batch(callback){return this.startBatch(),callback(),this.endBatch(),this},batchData:function batchData(map){var cy=this;return this.batch((function(){for(var ids=Object.keys(map),i2=0;i2<ids.length;i2++){var id=ids[i2],data2=map[id];cy.getElementById(id).data(data2)}}))}},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),corefn$4={renderTo:function renderTo(context,zoom,pan,pxRatio){return this._private.renderer.renderTo(context,zoom,pan,pxRatio),this},renderer:function renderer3(){return this._private.renderer},forceRender:function forceRender(){return this.notify("draw"),this},resize:function resize(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function initRenderer(options){var cy=this,RendererProto=cy.extension("renderer",options.name);if(null!=RendererProto){void 0!==options.wheelSensitivity&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var rOpts=rendererDefaults(options);rOpts.cy=cy,cy._private.renderer=new RendererProto(rOpts),this.notify("init")}else error("Can not initialise: No such renderer `".concat(options.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function destroyRenderer(){var cy=this;cy.notify("destroy");var domEle=cy.container();if(domEle)for(domEle._cyreg=null;domEle.childNodes.length>0;)domEle.removeChild(domEle.childNodes[0]);cy._private.renderer=null,cy.mutableElements().forEach((function(ele){var _p=ele._private;_p.rscratch={},_p.rstyle={},_p.animation.current=[],_p.animation.queue=[]}))},onRender:function onRender(fn2){return this.on("render",fn2)},offRender:function offRender(fn2){return this.off("render",fn2)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function collection2(eles,opts){return string(eles)?this.$(eles):elementOrCollection(eles)?eles.collection():array(eles)?(opts||(opts={}),new Collection(this,eles,opts.unique,opts.removed)):new Collection(this)},nodes:function nodes2(selector){var nodes3=this.$((function(ele){return ele.isNode()}));return selector?nodes3.filter(selector):nodes3},edges:function edges(selector){var edges2=this.$((function(ele){return ele.isEdge()}));return selector?edges2.filter(selector):edges2},$:function $(selector){var eles=this._private.elements;return selector?eles.filter(selector):eles.spawnSelf()},mutableElements:function mutableElements(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$8={},TRUE="t",FALSE="f";styfn$8.apply=function(eles){for(var self2=this,updatedEles=self2._private.cy.collection(),ie=0;ie<eles.length;ie++){var ele=eles[ie],cxtMeta=self2.getContextMeta(ele);if(!cxtMeta.empty){var cxtStyle=self2.getContextStyle(cxtMeta),app=self2.applyContextStyle(cxtMeta,cxtStyle,ele);ele._private.appliedInitStyle?self2.updateTransitions(ele,app.diffProps):ele._private.appliedInitStyle=!0,self2.updateStyleHints(ele)&&updatedEles.push(ele)}}return updatedEles},styfn$8.getPropertiesDiff=function(oldCxtKey,newCxtKey){var self2=this,cache2=self2._private.propDiffs=self2._private.propDiffs||{},dualCxtKey=oldCxtKey+"-"+newCxtKey,cachedVal=cache2[dualCxtKey];if(cachedVal)return cachedVal;for(var diffProps=[],addedProp={},i2=0;i2<self2.length;i2++){var cxt=self2[i2],oldHasCxt=oldCxtKey[i2]===TRUE,newHasCxt=newCxtKey[i2]===TRUE,cxtHasDiffed=oldHasCxt!==newHasCxt,cxtHasMappedProps=cxt.mappedProperties.length>0;if(cxtHasDiffed||newHasCxt&&cxtHasMappedProps){var props=void 0;cxtHasDiffed&&cxtHasMappedProps||cxtHasDiffed?props=cxt.properties:cxtHasMappedProps&&(props=cxt.mappedProperties);for(var j=0;j<props.length;j++){for(var prop=props[j],name=prop.name,laterCxtOverrides=!1,k=i2+1;k<self2.length;k++){var laterCxt=self2[k];if(newCxtKey[k]===TRUE&&(laterCxtOverrides=null!=laterCxt.properties[prop.name]))break}addedProp[name]||laterCxtOverrides||(addedProp[name]=!0,diffProps.push(name))}}}return cache2[dualCxtKey]=diffProps,diffProps},styfn$8.getContextMeta=function(ele){for(var diffProps,self2=this,cxtKey="",prevKey=ele._private.styleCxtKey||"",i2=0;i2<self2.length;i2++){var context=self2[i2];cxtKey+=context.selector&&context.selector.matches(ele)?TRUE:FALSE}return diffProps=self2.getPropertiesDiff(prevKey,cxtKey),ele._private.styleCxtKey=cxtKey,{key:cxtKey,diffPropNames:diffProps,empty:0===diffProps.length}},styfn$8.getContextStyle=function(cxtMeta){var cxtKey=cxtMeta.key,self2=this,cxtStyles=this._private.contextStyles=this._private.contextStyles||{};if(cxtStyles[cxtKey])return cxtStyles[cxtKey];for(var style={_private:{key:cxtKey}},i2=0;i2<self2.length;i2++){var cxt=self2[i2];if(cxtKey[i2]===TRUE)for(var j=0;j<cxt.properties.length;j++){var prop=cxt.properties[j];style[prop.name]=prop}}return cxtStyles[cxtKey]=style,style},styfn$8.applyContextStyle=function(cxtMeta,cxtStyle,ele){for(var self2=this,diffProps=cxtMeta.diffPropNames,retDiffProps={},types=self2.types,i2=0;i2<diffProps.length;i2++){var diffPropName=diffProps[i2],cxtProp=cxtStyle[diffPropName],eleProp=ele.pstyle(diffPropName);if(!cxtProp){if(!eleProp)continue;cxtProp=eleProp.bypass?{name:diffPropName,deleteBypassed:!0}:{name:diffPropName,delete:!0}}if(eleProp!==cxtProp){if(cxtProp.mapped===types.fn&&null!=eleProp&&null!=eleProp.mapping&&eleProp.mapping.value===cxtProp.value){var mapping=eleProp.mapping;if((mapping.fnValue=cxtProp.value(ele))===mapping.prevFnValue)continue}var retDiffProp=retDiffProps[diffPropName]={prev:eleProp};self2.applyParsedProperty(ele,cxtProp),retDiffProp.next=ele.pstyle(diffPropName),retDiffProp.next&&retDiffProp.next.bypass&&(retDiffProp.next=retDiffProp.next.bypassed)}}return{diffProps:retDiffProps}},styfn$8.updateStyleHints=function(ele){var _p=ele._private,self2=this,propNames=self2.propertyGroupNames,propGrKeys=self2.propertyGroupKeys,propHash=function propHash2(ele2,propNames2,seedKey){return self2.getPropertiesHash(ele2,propNames2,seedKey)},oldStyleKey=_p.styleKey;if(ele.removed())return!1;var isNode="nodes"===_p.group,overriddenStyles=ele._private.style;propNames=Object.keys(overriddenStyles);for(var i2=0;i2<propGrKeys.length;i2++){var grKey=propGrKeys[i2];_p.styleKeys[grKey]=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]}for(var updateGrKey1=function updateGrKey12(val,grKey2){return _p.styleKeys[grKey2][0]=hashInt(val,_p.styleKeys[grKey2][0])},updateGrKey2=function updateGrKey22(val,grKey2){return _p.styleKeys[grKey2][1]=hashIntAlt(val,_p.styleKeys[grKey2][1])},updateGrKey=function updateGrKey3(val,grKey2){updateGrKey1(val,grKey2),updateGrKey2(val,grKey2)},updateGrKeyWStr=function updateGrKeyWStr2(strVal,grKey2){for(var j=0;j<strVal.length;j++){var ch=strVal.charCodeAt(j);updateGrKey1(ch,grKey2),updateGrKey2(ch,grKey2)}},N=2e9,cleanNum=function cleanNum2(val){return-128<val&&val<128&&Math.floor(val)!==val?N-(1024*val|0):val},_i=0;_i<propNames.length;_i++){var name=propNames[_i],parsedProp=overriddenStyles[name];if(null!=parsedProp){var propInfo=this.properties[name],type=propInfo.type,_grKey=propInfo.groupKey,normalizedNumberVal=void 0;null!=propInfo.hashOverride?normalizedNumberVal=propInfo.hashOverride(ele,parsedProp):null!=parsedProp.pfValue&&(normalizedNumberVal=parsedProp.pfValue);var numberVal=null==propInfo.enums?parsedProp.value:null,haveNormNum=null!=normalizedNumberVal,haveNum=haveNormNum||null!=numberVal,units=parsedProp.units;type.number&&haveNum&&!type.multiple?(updateGrKey(cleanNum(haveNormNum?normalizedNumberVal:numberVal),_grKey),haveNormNum||null==units||updateGrKeyWStr(units,_grKey)):updateGrKeyWStr(parsedProp.strValue,_grKey)}}for(var hash=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT],_i2=0;_i2<propGrKeys.length;_i2++){var _grKey2=propGrKeys[_i2],grHash=_p.styleKeys[_grKey2];hash[0]=hashInt(grHash[0],hash[0]),hash[1]=hashIntAlt(grHash[1],hash[1])}_p.styleKey=combineHashes(hash[0],hash[1]);var sk=_p.styleKeys;_p.labelDimsKey=combineHashesArray(sk.labelDimensions);var labelKeys=propHash(ele,["label"],sk.labelDimensions);if(_p.labelKey=combineHashesArray(labelKeys),_p.labelStyleKey=combineHashesArray(hashArrays(sk.commonLabel,labelKeys)),!isNode){var sourceLabelKeys=propHash(ele,["source-label"],sk.labelDimensions);_p.sourceLabelKey=combineHashesArray(sourceLabelKeys),_p.sourceLabelStyleKey=combineHashesArray(hashArrays(sk.commonLabel,sourceLabelKeys));var targetLabelKeys=propHash(ele,["target-label"],sk.labelDimensions);_p.targetLabelKey=combineHashesArray(targetLabelKeys),_p.targetLabelStyleKey=combineHashesArray(hashArrays(sk.commonLabel,targetLabelKeys))}if(isNode){var _p$styleKeys=_p.styleKeys,nodeBody=_p$styleKeys.nodeBody,nodeBorder=_p$styleKeys.nodeBorder,nodeOutline=_p$styleKeys.nodeOutline,backgroundImage=_p$styleKeys.backgroundImage,compound=_p$styleKeys.compound,pie=_p$styleKeys.pie,nodeKeys=[nodeBody,nodeBorder,nodeOutline,backgroundImage,compound,pie].filter((function(k){return null!=k})).reduce(hashArrays,[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]);_p.nodeKey=combineHashesArray(nodeKeys),_p.hasPie=null!=pie&&pie[0]!==DEFAULT_HASH_SEED&&pie[1]!==DEFAULT_HASH_SEED_ALT}return oldStyleKey!==_p.styleKey},styfn$8.clearStyleHints=function(ele){var _p=ele._private;_p.styleCxtKey="",_p.styleKeys={},_p.styleKey=null,_p.labelKey=null,_p.labelStyleKey=null,_p.sourceLabelKey=null,_p.sourceLabelStyleKey=null,_p.targetLabelKey=null,_p.targetLabelStyleKey=null,_p.nodeKey=null,_p.hasPie=null},styfn$8.applyParsedProperty=function(ele,parsedProp){var flatProp,self2=this,prop=parsedProp,style=ele._private.style,types=self2.types,type=self2.properties[prop.name].type,propIsBypass=prop.bypass,origProp=style[prop.name],origPropIsBypass=origProp&&origProp.bypass,_p=ele._private,flatPropMapping="mapping",getVal=function getVal2(p2){return null==p2?null:null!=p2.pfValue?p2.pfValue:p2.value},checkTriggers=function checkTriggers2(){var fromVal=getVal(origProp),toVal=getVal(prop);self2.checkTriggers(ele,prop.name,fromVal,toVal)};if("curve-style"===parsedProp.name&&ele.isEdge()&&("bezier"!==parsedProp.value&&ele.isLoop()||"haystack"===parsedProp.value&&(ele.source().isParent()||ele.target().isParent()))&&(prop=parsedProp=this.parse(parsedProp.name,"bezier",propIsBypass)),prop.delete)return style[prop.name]=void 0,checkTriggers(),!0;if(prop.deleteBypassed)return origProp?!!origProp.bypass&&(origProp.bypassed=void 0,checkTriggers(),!0):(checkTriggers(),!0);if(prop.deleteBypass)return origProp?!!origProp.bypass&&(style[prop.name]=origProp.bypassed,checkTriggers(),!0):(checkTriggers(),!0);var printMappingErr=function printMappingErr2(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+ele.id()+"` has no mapping for property `"+prop.name+"` with data field `"+prop.field+"`); try a `["+prop.field+"]` selector to limit scope to elements with `"+prop.field+"` defined")};switch(prop.mapped){case types.mapData:for(var percent,fields=prop.field.split("."),fieldVal=_p.data,i2=0;i2<fields.length&&fieldVal;i2++)fieldVal=fieldVal[fields[i2]];if(null==fieldVal)return printMappingErr(),!1;if(!number$1(fieldVal))return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+prop.field+": "+fieldVal+"` for `"+ele.id()+"` is non-numeric)"),!1;var fieldWidth=prop.fieldMax-prop.fieldMin;if((percent=0===fieldWidth?0:(fieldVal-prop.fieldMin)/fieldWidth)<0?percent=0:percent>1&&(percent=1),type.color){var r1=prop.valueMin[0],r2=prop.valueMax[0],g1=prop.valueMin[1],g2=prop.valueMax[1],b1=prop.valueMin[2],b2=prop.valueMax[2],a1=null==prop.valueMin[3]?1:prop.valueMin[3],a2=null==prop.valueMax[3]?1:prop.valueMax[3],clr=[Math.round(r1+(r2-r1)*percent),Math.round(g1+(g2-g1)*percent),Math.round(b1+(b2-b1)*percent),Math.round(a1+(a2-a1)*percent)];flatProp={bypass:prop.bypass,name:prop.name,value:clr,strValue:"rgb("+clr[0]+", "+clr[1]+", "+clr[2]+")"}}else{if(!type.number)return!1;var calcValue=prop.valueMin+(prop.valueMax-prop.valueMin)*percent;flatProp=this.parse(prop.name,calcValue,prop.bypass,flatPropMapping)}if(!flatProp)return printMappingErr(),!1;flatProp.mapping=prop,prop=flatProp;break;case types.data:for(var _fields=prop.field.split("."),_fieldVal=_p.data,_i3=0;_i3<_fields.length&&_fieldVal;_i3++)_fieldVal=_fieldVal[_fields[_i3]];if(null!=_fieldVal&&(flatProp=this.parse(prop.name,_fieldVal,prop.bypass,flatPropMapping)),!flatProp)return printMappingErr(),!1;flatProp.mapping=prop,prop=flatProp;break;case types.fn:var fn2=prop.value,fnRetVal=null!=prop.fnValue?prop.fnValue:fn2(ele);if(prop.prevFnValue=fnRetVal,null==fnRetVal)return warn("Custom function mappers may not return null (i.e. `"+prop.name+"` for ele `"+ele.id()+"` is null)"),!1;if(!(flatProp=this.parse(prop.name,fnRetVal,prop.bypass,flatPropMapping)))return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+prop.name+"` for ele `"+ele.id()+"` is invalid)"),!1;flatProp.mapping=copy(prop),prop=flatProp;break;case void 0:break;default:return!1}return propIsBypass?(prop.bypassed=origPropIsBypass?origProp.bypassed:origProp,style[prop.name]=prop):origPropIsBypass?origProp.bypassed=prop:style[prop.name]=prop,checkTriggers(),!0},styfn$8.cleanElements=function(eles,keepBypasses){for(var i2=0;i2<eles.length;i2++){var ele=eles[i2];if(this.clearStyleHints(ele),ele.dirtyCompoundBoundsCache(),ele.dirtyBoundingBoxCache(),keepBypasses)for(var style=ele._private.style,propNames=Object.keys(style),j=0;j<propNames.length;j++){var propName=propNames[j],eleProp=style[propName];null!=eleProp&&(eleProp.bypass?eleProp.bypassed=null:style[propName]=null)}else ele._private.style={}}},styfn$8.update=function(){this._private.cy.mutableElements().updateStyle()},styfn$8.updateTransitions=function(ele,diffProps){var self2=this,_p=ele._private,props=ele.pstyle("transition-property").value,duration=ele.pstyle("transition-duration").pfValue,delay=ele.pstyle("transition-delay").pfValue;if(props.length>0&&duration>0){for(var style={},anyPrev=!1,i2=0;i2<props.length;i2++){var prop=props[i2],styProp=ele.pstyle(prop),diffProp=diffProps[prop];if(diffProp){var fromProp=diffProp.prev,toProp=null!=diffProp.next?diffProp.next:styProp,diff=!1,initVal=void 0,initDt=1e-6;fromProp&&(number$1(fromProp.pfValue)&&number$1(toProp.pfValue)?(diff=toProp.pfValue-fromProp.pfValue,initVal=fromProp.pfValue+initDt*diff):number$1(fromProp.value)&&number$1(toProp.value)?(diff=toProp.value-fromProp.value,initVal=fromProp.value+initDt*diff):array(fromProp.value)&&array(toProp.value)&&(diff=fromProp.value[0]!==toProp.value[0]||fromProp.value[1]!==toProp.value[1]||fromProp.value[2]!==toProp.value[2],initVal=fromProp.strValue),diff&&(style[prop]=toProp.strValue,this.applyBypass(ele,prop,initVal),anyPrev=!0))}}if(!anyPrev)return;_p.transitioning=!0,new Promise$1((function(resolve2){delay>0?ele.delayAnimation(delay).play().promise().then(resolve2):resolve2()})).then((function(){return ele.animation({style:style,duration:duration,easing:ele.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){self2.removeBypasses(ele,props),ele.emitAndNotify("style"),_p.transitioning=!1}))}else _p.transitioning&&(this.removeBypasses(ele,props),ele.emitAndNotify("style"),_p.transitioning=!1)},styfn$8.checkTrigger=function(ele,name,fromValue,toValue,getTrigger,onTrigger){var prop=this.properties[name],triggerCheck=getTrigger(prop);null!=triggerCheck&&triggerCheck(fromValue,toValue)&&onTrigger(prop)},styfn$8.checkZOrderTrigger=function(ele,name,fromValue,toValue){var _this=this;this.checkTrigger(ele,name,fromValue,toValue,(function(prop){return prop.triggersZOrder}),(function(){_this._private.cy.notify("zorder",ele)}))},styfn$8.checkBoundsTrigger=function(ele,name,fromValue,toValue){this.checkTrigger(ele,name,fromValue,toValue,(function(prop){return prop.triggersBounds}),(function(prop){ele.dirtyCompoundBoundsCache(),ele.dirtyBoundingBoxCache(),!prop.triggersBoundsOfParallelBeziers||"curve-style"!==name||"bezier"!==fromValue&&"bezier"!==toValue||ele.parallelEdges().forEach((function(pllEdge){pllEdge.isBundledBezier()&&pllEdge.dirtyBoundingBoxCache()})),!prop.triggersBoundsOfConnectedEdges||"display"!==name||"none"!==fromValue&&"none"!==toValue||ele.connectedEdges().forEach((function(edge){edge.dirtyBoundingBoxCache()}))}))},styfn$8.checkTriggers=function(ele,name,fromValue,toValue){ele.dirtyStyleCache(),this.checkZOrderTrigger(ele,name,fromValue,toValue),this.checkBoundsTrigger(ele,name,fromValue,toValue)};var styfn$7={applyBypass:function(eles,name,value,updateTransitions){var self2=this,props=[],isBypass=!0;if("*"===name||"**"===name){if(void 0!==value)for(var i2=0;i2<self2.properties.length;i2++){var _name=self2.properties[i2].name,parsedProp=this.parse(_name,value,!0);parsedProp&&props.push(parsedProp)}}else if(string(name)){var _parsedProp=this.parse(name,value,!0);_parsedProp&&props.push(_parsedProp)}else{if(!plainObject(name))return!1;var specifiedProps=name;updateTransitions=value;for(var names=Object.keys(specifiedProps),_i=0;_i<names.length;_i++){var _name2=names[_i],_value=specifiedProps[_name2];if(void 0===_value&&(_value=specifiedProps[dash2camel(_name2)]),void 0!==_value){var _parsedProp2=this.parse(_name2,_value,!0);_parsedProp2&&props.push(_parsedProp2)}}}if(0===props.length)return!1;for(var ret=!1,_i2=0;_i2<eles.length;_i2++){for(var ele=eles[_i2],diffProps={},diffProp=void 0,j=0;j<props.length;j++){var _prop=props[j];if(updateTransitions){var prevProp=ele.pstyle(_prop.name);diffProp=diffProps[_prop.name]={prev:prevProp}}ret=this.applyParsedProperty(ele,copy(_prop))||ret,updateTransitions&&(diffProp.next=ele.pstyle(_prop.name))}ret&&this.updateStyleHints(ele),updateTransitions&&this.updateTransitions(ele,diffProps,isBypass)}return ret},overrideBypass:function(eles,name,value){name=camel2dash(name);for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],prop=ele._private.style[name],type=this.properties[name].type,isColor=type.color,isMulti=type.mutiple,oldValue=prop?null!=prop.pfValue?prop.pfValue:prop.value:null;prop&&prop.bypass?(prop.value=value,null!=prop.pfValue&&(prop.pfValue=value),prop.strValue=isColor?"rgb("+value.join(",")+")":isMulti?value.join(" "):""+value,this.updateStyleHints(ele)):this.applyBypass(ele,name,value),this.checkTriggers(ele,name,oldValue,value)}},removeAllBypasses:function(eles,updateTransitions){return this.removeBypasses(eles,this.propertyNames,updateTransitions)},removeBypasses:function(eles,props,updateTransitions){for(var isBypass=!0,j=0;j<eles.length;j++){for(var ele=eles[j],diffProps={},i2=0;i2<props.length;i2++){var name=props[i2],prop=this.properties[name],prevProp=ele.pstyle(prop.name);if(prevProp&&prevProp.bypass){var value="",parsedProp=this.parse(name,value,!0),diffProp=diffProps[prop.name]={prev:prevProp};this.applyParsedProperty(ele,parsedProp),diffProp.next=ele.pstyle(prop.name)}}this.updateStyleHints(ele),updateTransitions&&this.updateTransitions(ele,diffProps,isBypass)}}},styfn$6={getEmSizeInPixels:function(){var px=this.containerCss("font-size");return null!=px?parseFloat(px):1},containerCss:function(propName){var cy=this._private.cy,domElement2=cy.container(),containerWindow=cy.window();if(containerWindow&&domElement2&&containerWindow.getComputedStyle)return containerWindow.getComputedStyle(domElement2).getPropertyValue(propName)}},styfn$5={getRenderedStyle:function(ele,prop){return prop?this.getStylePropertyValue(ele,prop,!0):this.getRawStyle(ele,!0)},getRawStyle:function(ele,isRenderedVal){var self2=this;if(ele=ele[0]){for(var rstyle={},i2=0;i2<self2.properties.length;i2++){var prop=self2.properties[i2],val=self2.getStylePropertyValue(ele,prop.name,isRenderedVal);null!=val&&(rstyle[prop.name]=val,rstyle[dash2camel(prop.name)]=val)}return rstyle}},getIndexedStyle:function(ele,property,subproperty,index){var pstyle=ele.pstyle(property)[subproperty][index];return null!=pstyle?pstyle:ele.cy().style().getDefaultProperty(property)[subproperty][0]},getStylePropertyValue:function(ele,propName,isRenderedVal){var self2=this;if(ele=ele[0]){var prop=self2.properties[propName];prop.alias&&(prop=prop.pointsTo);var type=prop.type,styleProp=ele.pstyle(prop.name);if(styleProp){var value=styleProp.value,units=styleProp.units,strValue=styleProp.strValue;if(isRenderedVal&&type.number&&null!=value&&number$1(value)){var zoom=ele.cy().zoom(),getRenderedValue=function getRenderedValue2(val){return val*zoom},getValueStringWithUnits=function getValueStringWithUnits2(val,units2){return getRenderedValue(val)+units2},isArrayValue=array(value);return(isArrayValue?units.every((function(u){return null!=u})):null!=units)?isArrayValue?value.map((function(v,i2){return getValueStringWithUnits(v,units[i2])})).join(" "):getValueStringWithUnits(value,units):isArrayValue?value.map((function(v){return string(v)?v:""+getRenderedValue(v)})).join(" "):""+getRenderedValue(value)}if(null!=strValue)return strValue}return null}},getAnimationStartStyle:function(ele,aniProps){for(var rstyle={},i2=0;i2<aniProps.length;i2++){var name=aniProps[i2].name,styleProp=ele.pstyle(name);void 0!==styleProp&&(styleProp=plainObject(styleProp)?this.parse(name,styleProp.strValue):this.parse(name,styleProp)),styleProp&&(rstyle[name]=styleProp)}return rstyle},getPropsList:function(propsObj){var rstyle=[],style=propsObj,props=this.properties;if(style)for(var names=Object.keys(style),i2=0;i2<names.length;i2++){var name=names[i2],val=style[name],prop=props[name]||props[camel2dash(name)],styleProp=this.parse(prop.name,val);styleProp&&rstyle.push(styleProp)}return rstyle},getNonDefaultPropertiesHash:function(ele,propNames,seed){var name,val,strVal,chVal,i2,j,hash=seed.slice();for(i2=0;i2<propNames.length;i2++)if(name=propNames[i2],null!=(val=ele.pstyle(name,!1)))if(null!=val.pfValue)hash[0]=hashInt(chVal,hash[0]),hash[1]=hashIntAlt(chVal,hash[1]);else for(strVal=val.strValue,j=0;j<strVal.length;j++)chVal=strVal.charCodeAt(j),hash[0]=hashInt(chVal,hash[0]),hash[1]=hashIntAlt(chVal,hash[1]);return hash}};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$4={appendFromJson:function(json){for(var style=this,i2=0;i2<json.length;i2++){var context=json[i2],selector=context.selector,props=context.style||context.css,names=Object.keys(props);style.selector(selector);for(var j=0;j<names.length;j++){var name=names[j],value=props[name];style.css(name,value)}}return style},fromJson:function(json){var style=this;return style.resetToDefault(),style.appendFromJson(json),style},json:function(){for(var json=[],i2=this.defaultLength;i2<this.length;i2++){for(var cxt=this[i2],selector=cxt.selector,props=cxt.properties,css={},j=0;j<props.length;j++){var prop=props[j];css[prop.name]=prop.strValue}json.push({selector:selector?selector.toString():"core",style:css})}return json}},styfn$3={appendFromString:function(string2){var selAndBlockStr,blockRem,propAndValStr,self2=this,style=this,remaining=""+string2;function removeSelAndBlockFromRemaining(){remaining=remaining.length>selAndBlockStr.length?remaining.substr(selAndBlockStr.length):""}function removePropAndValFromRem(){blockRem=blockRem.length>propAndValStr.length?blockRem.substr(propAndValStr.length):""}for(remaining=remaining.replace(/[/][*](\s|.)+?[*][/]/g,"");!remaining.match(/^\s*$/);){var selAndBlock=remaining.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!selAndBlock){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+remaining);break}selAndBlockStr=selAndBlock[0];var selectorStr=selAndBlock[1];if("core"!==selectorStr&&new Selector(selectorStr).invalid)warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+selectorStr),removeSelAndBlockFromRemaining();else{var blockStr=selAndBlock[2],invalidBlock=!1;blockRem=blockStr;for(var props=[];!blockRem.match(/^\s*$/);){var propAndVal=blockRem.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!propAndVal){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+blockStr),invalidBlock=!0;break}propAndValStr=propAndVal[0];var propStr=propAndVal[1],valStr=propAndVal[2];self2.properties[propStr]?style.parse(propStr,valStr)?(props.push({name:propStr,val:valStr}),removePropAndValFromRem()):(warn("Skipping property: Invalid property definition in: "+propAndValStr),removePropAndValFromRem()):(warn("Skipping property: Invalid property name in: "+propAndValStr),removePropAndValFromRem())}if(invalidBlock){removeSelAndBlockFromRemaining();break}style.selector(selectorStr);for(var i2=0;i2<props.length;i2++){var _prop=props[i2];style.css(_prop.name,_prop.val)}removeSelAndBlockFromRemaining()}}return style},fromString:function(string2){var style=this;return style.resetToDefault(),style.appendFromString(string2),style}},styfn$2={};(function(){var number$12=number,rgba2=rgbaNoBackRefs,hsla2=hslaNoBackRefs,hex3$1=hex3,hex6$1=hex6,data2=function data3(prefix){return"^"+prefix+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},mapData=function mapData2(prefix){var mapArg=number$12+"|\\w+|"+rgba2+"|"+hsla2+"|"+hex3$1+"|"+hex6$1;return"^"+prefix+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+number$12+")\\s*\\,\\s*("+number$12+")\\s*,\\s*("+mapArg+")\\s*\\,\\s*("+mapArg+")\\)$"},urlRegexes=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:data2("data")},layoutData:{mapping:!0,regex:data2("layoutData")},scratch:{mapping:!0,regex:data2("scratch")},mapData:{mapping:!0,regex:mapData("mapData")},mapLayoutData:{mapping:!0,regex:mapData("mapLayoutData")},mapScratch:{mapping:!0,regex:mapData("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:urlRegexes,singleRegexMatchValue:!0},urls:{regexes:urlRegexes,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function validate(valArr,unitsArr){switch(valArr.length){case 2:return"deg"!==unitsArr[0]&&"rad"!==unitsArr[0]&&"deg"!==unitsArr[1]&&"rad"!==unitsArr[1];case 1:return string(valArr[0])||"deg"===unitsArr[0]||"rad"===unitsArr[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*,\\s*("+number$12+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function validate(valArr){var length=valArr.length;return 1===length||2===length||4===length}}};var diff={zeroNonZero:function zeroNonZero(val1,val2){return(null==val1||null==val2)&&val1!==val2||0==val1&&0!=val2||0!=val1&&0==val2},any:function any(val1,val2){return val1!=val2},emptyNonEmpty:function emptyNonEmpty(str1,str2){var empty1=emptyString(str1),empty2=emptyString(str2);return empty1&&!empty2||!empty1&&empty2}},t=styfn$2.types,mainLabel=[{name:"label",type:t.text,triggersBounds:diff.any,triggersZOrder:diff.emptyNonEmpty},{name:"text-rotation",type:t.textRotation,triggersBounds:diff.any},{name:"text-margin-x",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"text-margin-y",type:t.bidirectionalSize,triggersBounds:diff.any}],sourceLabel=[{name:"source-label",type:t.text,triggersBounds:diff.any},{name:"source-text-rotation",type:t.textRotation,triggersBounds:diff.any},{name:"source-text-margin-x",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"source-text-margin-y",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"source-text-offset",type:t.size,triggersBounds:diff.any}],targetLabel=[{name:"target-label",type:t.text,triggersBounds:diff.any},{name:"target-text-rotation",type:t.textRotation,triggersBounds:diff.any},{name:"target-text-margin-x",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"target-text-margin-y",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"target-text-offset",type:t.size,triggersBounds:diff.any}],labelDimensions=[{name:"font-family",type:t.fontFamily,triggersBounds:diff.any},{name:"font-style",type:t.fontStyle,triggersBounds:diff.any},{name:"font-weight",type:t.fontWeight,triggersBounds:diff.any},{name:"font-size",type:t.size,triggersBounds:diff.any},{name:"text-transform",type:t.textTransform,triggersBounds:diff.any},{name:"text-wrap",type:t.textWrap,triggersBounds:diff.any},{name:"text-overflow-wrap",type:t.textOverflowWrap,triggersBounds:diff.any},{name:"text-max-width",type:t.size,triggersBounds:diff.any},{name:"text-outline-width",type:t.size,triggersBounds:diff.any},{name:"line-height",type:t.positiveNumber,triggersBounds:diff.any}],commonLabel=[{name:"text-valign",type:t.valign,triggersBounds:diff.any},{name:"text-halign",type:t.halign,triggersBounds:diff.any},{name:"color",type:t.color},{name:"text-outline-color",type:t.color},{name:"text-outline-opacity",type:t.zeroOneNumber},{name:"text-background-color",type:t.color},{name:"text-background-opacity",type:t.zeroOneNumber},{name:"text-background-padding",type:t.size,triggersBounds:diff.any},{name:"text-border-opacity",type:t.zeroOneNumber},{name:"text-border-color",type:t.color},{name:"text-border-width",type:t.size,triggersBounds:diff.any},{name:"text-border-style",type:t.borderStyle,triggersBounds:diff.any},{name:"text-background-shape",type:t.textBackgroundShape,triggersBounds:diff.any},{name:"text-justification",type:t.justification}],behavior=[{name:"events",type:t.bool,triggersZOrder:diff.any},{name:"text-events",type:t.bool,triggersZOrder:diff.any}],visibility=[{name:"display",type:t.display,triggersZOrder:diff.any,triggersBounds:diff.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:t.visibility,triggersZOrder:diff.any},{name:"opacity",type:t.zeroOneNumber,triggersZOrder:diff.zeroNonZero},{name:"text-opacity",type:t.zeroOneNumber},{name:"min-zoomed-font-size",type:t.size},{name:"z-compound-depth",type:t.zCompoundDepth,triggersZOrder:diff.any},{name:"z-index-compare",type:t.zIndexCompare,triggersZOrder:diff.any},{name:"z-index",type:t.number,triggersZOrder:diff.any}],overlay=[{name:"overlay-padding",type:t.size,triggersBounds:diff.any},{name:"overlay-color",type:t.color},{name:"overlay-opacity",type:t.zeroOneNumber,triggersBounds:diff.zeroNonZero},{name:"overlay-shape",type:t.overlayShape,triggersBounds:diff.any}],underlay=[{name:"underlay-padding",type:t.size,triggersBounds:diff.any},{name:"underlay-color",type:t.color},{name:"underlay-opacity",type:t.zeroOneNumber,triggersBounds:diff.zeroNonZero},{name:"underlay-shape",type:t.overlayShape,triggersBounds:diff.any}],transition=[{name:"transition-property",type:t.propList},{name:"transition-duration",type:t.time},{name:"transition-delay",type:t.time},{name:"transition-timing-function",type:t.easing}],nodeSizeHashOverride=function nodeSizeHashOverride2(ele,parsedProp){return"label"===parsedProp.value?-ele.poolIndex():parsedProp.pfValue},nodeBody=[{name:"height",type:t.nodeSize,triggersBounds:diff.any,hashOverride:nodeSizeHashOverride},{name:"width",type:t.nodeSize,triggersBounds:diff.any,hashOverride:nodeSizeHashOverride},{name:"shape",type:t.nodeShape,triggersBounds:diff.any},{name:"shape-polygon-points",type:t.polygonPointList,triggersBounds:diff.any},{name:"background-color",type:t.color},{name:"background-fill",type:t.fill},{name:"background-opacity",type:t.zeroOneNumber},{name:"background-blacken",type:t.nOneOneNumber},{name:"background-gradient-stop-colors",type:t.colors},{name:"background-gradient-stop-positions",type:t.percentages},{name:"background-gradient-direction",type:t.gradientDirection},{name:"padding",type:t.sizeMaybePercent,triggersBounds:diff.any},{name:"padding-relative-to",type:t.paddingRelativeTo,triggersBounds:diff.any},{name:"bounds-expansion",type:t.boundsExpansion,triggersBounds:diff.any}],nodeBorder=[{name:"border-color",type:t.color},{name:"border-opacity",type:t.zeroOneNumber},{name:"border-width",type:t.size,triggersBounds:diff.any},{name:"border-style",type:t.borderStyle}],nodeOutline=[{name:"outline-color",type:t.color},{name:"outline-opacity",type:t.zeroOneNumber},{name:"outline-width",type:t.size,triggersBounds:diff.any},{name:"outline-style",type:t.borderStyle},{name:"outline-offset",type:t.size,triggersBounds:diff.any}],backgroundImage=[{name:"background-image",type:t.urls},{name:"background-image-crossorigin",type:t.bgCrossOrigin},{name:"background-image-opacity",type:t.zeroOneNumbers},{name:"background-image-containment",type:t.bgContainment},{name:"background-image-smoothing",type:t.bools},{name:"background-position-x",type:t.bgPos},{name:"background-position-y",type:t.bgPos},{name:"background-width-relative-to",type:t.bgRelativeTo},{name:"background-height-relative-to",type:t.bgRelativeTo},{name:"background-repeat",type:t.bgRepeat},{name:"background-fit",type:t.bgFit},{name:"background-clip",type:t.bgClip},{name:"background-width",type:t.bgWH},{name:"background-height",type:t.bgWH},{name:"background-offset-x",type:t.bgPos},{name:"background-offset-y",type:t.bgPos}],compound=[{name:"position",type:t.position,triggersBounds:diff.any},{name:"compound-sizing-wrt-labels",type:t.compoundIncludeLabels,triggersBounds:diff.any},{name:"min-width",type:t.size,triggersBounds:diff.any},{name:"min-width-bias-left",type:t.sizeMaybePercent,triggersBounds:diff.any},{name:"min-width-bias-right",type:t.sizeMaybePercent,triggersBounds:diff.any},{name:"min-height",type:t.size,triggersBounds:diff.any},{name:"min-height-bias-top",type:t.sizeMaybePercent,triggersBounds:diff.any},{name:"min-height-bias-bottom",type:t.sizeMaybePercent,triggersBounds:diff.any}],edgeLine=[{name:"line-style",type:t.lineStyle},{name:"line-color",type:t.color},{name:"line-fill",type:t.fill},{name:"line-cap",type:t.lineCap},{name:"line-opacity",type:t.zeroOneNumber},{name:"line-dash-pattern",type:t.numbers},{name:"line-dash-offset",type:t.number},{name:"line-gradient-stop-colors",type:t.colors},{name:"line-gradient-stop-positions",type:t.percentages},{name:"curve-style",type:t.curveStyle,triggersBounds:diff.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:t.zeroOneNumber,triggersBounds:diff.any},{name:"source-endpoint",type:t.edgeEndpoint,triggersBounds:diff.any},{name:"target-endpoint",type:t.edgeEndpoint,triggersBounds:diff.any},{name:"control-point-step-size",type:t.size,triggersBounds:diff.any},{name:"control-point-distances",type:t.bidirectionalSizes,triggersBounds:diff.any},{name:"control-point-weights",type:t.numbers,triggersBounds:diff.any},{name:"segment-distances",type:t.bidirectionalSizes,triggersBounds:diff.any},{name:"segment-weights",type:t.numbers,triggersBounds:diff.any},{name:"taxi-turn",type:t.bidirectionalSizeMaybePercent,triggersBounds:diff.any},{name:"taxi-turn-min-distance",type:t.size,triggersBounds:diff.any},{name:"taxi-direction",type:t.axisDirection,triggersBounds:diff.any},{name:"edge-distances",type:t.edgeDistances,triggersBounds:diff.any},{name:"arrow-scale",type:t.positiveNumber,triggersBounds:diff.any},{name:"loop-direction",type:t.angle,triggersBounds:diff.any},{name:"loop-sweep",type:t.angle,triggersBounds:diff.any},{name:"source-distance-from-node",type:t.size,triggersBounds:diff.any},{name:"target-distance-from-node",type:t.size,triggersBounds:diff.any}],ghost=[{name:"ghost",type:t.bool,triggersBounds:diff.any},{name:"ghost-offset-x",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"ghost-offset-y",type:t.bidirectionalSize,triggersBounds:diff.any},{name:"ghost-opacity",type:t.zeroOneNumber}],core2=[{name:"selection-box-color",type:t.color},{name:"selection-box-opacity",type:t.zeroOneNumber},{name:"selection-box-border-color",type:t.color},{name:"selection-box-border-width",type:t.size},{name:"active-bg-color",type:t.color},{name:"active-bg-opacity",type:t.zeroOneNumber},{name:"active-bg-size",type:t.size},{name:"outside-texture-bg-color",type:t.color},{name:"outside-texture-bg-opacity",type:t.zeroOneNumber}],pie=[];styfn$2.pieBackgroundN=16,pie.push({name:"pie-size",type:t.sizeMaybePercent});for(var i2=1;i2<=styfn$2.pieBackgroundN;i2++)pie.push({name:"pie-"+i2+"-background-color",type:t.color}),pie.push({name:"pie-"+i2+"-background-size",type:t.percent}),pie.push({name:"pie-"+i2+"-background-opacity",type:t.zeroOneNumber});var edgeArrow=[],arrowPrefixes=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:t.arrowShape,triggersBounds:diff.any},{name:"arrow-color",type:t.color},{name:"arrow-fill",type:t.arrowFill},{name:"arrow-width",type:t.arrowWidth}].forEach((function(prop2){arrowPrefixes.forEach((function(prefix){var name=prefix+"-"+prop2.name,type=prop2.type,triggersBounds=prop2.triggersBounds;edgeArrow.push({name:name,type:type,triggersBounds:triggersBounds})}))}),{});var props=styfn$2.properties=[].concat(behavior,transition,visibility,overlay,underlay,ghost,commonLabel,labelDimensions,mainLabel,sourceLabel,targetLabel,nodeBody,nodeBorder,nodeOutline,backgroundImage,pie,compound,edgeLine,edgeArrow,core2),propGroups=styfn$2.propertyGroups={behavior:behavior,transition:transition,visibility:visibility,overlay:overlay,underlay:underlay,ghost:ghost,commonLabel:commonLabel,labelDimensions:labelDimensions,mainLabel:mainLabel,sourceLabel:sourceLabel,targetLabel:targetLabel,nodeBody:nodeBody,nodeBorder:nodeBorder,nodeOutline:nodeOutline,backgroundImage:backgroundImage,pie:pie,compound:compound,edgeLine:edgeLine,edgeArrow:edgeArrow,core:core2},propGroupNames=styfn$2.propertyGroupNames={};(styfn$2.propertyGroupKeys=Object.keys(propGroups)).forEach((function(key){propGroupNames[key]=propGroups[key].map((function(prop2){return prop2.name})),propGroups[key].forEach((function(prop2){return prop2.groupKey=key}))}));var aliases=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=props.map((function(p2){return p2.name}));for(var _i=0;_i<props.length;_i++){var prop=props[_i];props[prop.name]=prop}for(var _i2=0;_i2<aliases.length;_i2++){var alias=aliases[_i2],pointsToProp=props[alias.pointsTo],aliasProp={name:alias.name,alias:!0,pointsTo:pointsToProp};props.push(aliasProp),props[alias.name]=aliasProp}})(),styfn$2.getDefaultProperty=function(name){return this.getDefaultProperties()[name]},styfn$2.getDefaultProperties=function(){var _p=this._private;if(null!=_p.defaultProperties)return _p.defaultProperties;for(var rawProps=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(css,prop2){for(var i3=1;i3<=styfn$2.pieBackgroundN;i3++){var name2=prop2.name.replace("{{i}}",i3),val2=prop2.value;css[name2]=val2}return css}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(css,prop2){return styfn$2.arrowPrefixes.forEach((function(prefix){var name2=prefix+"-"+prop2.name,val2=prop2.value;css[name2]=val2})),css}),{})),parsedProps={},i2=0;i2<this.properties.length;i2++){var prop=this.properties[i2];if(!prop.pointsTo){var name=prop.name,val=rawProps[name],parsedProp=this.parse(name,val);parsedProps[name]=parsedProp}}return _p.defaultProperties=parsedProps,_p.defaultProperties},styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$1={parse:function(name,value,propIsBypass,propIsFlat){var self2=this;if(fn$6(value))return self2.parseImplWarn(name,value,propIsBypass,propIsFlat);var ret,argHash=hashStrings(name,""+value,propIsBypass?"t":"f","mapping"===propIsFlat||!0===propIsFlat||!1===propIsFlat||null==propIsFlat?"dontcare":propIsFlat),propCache=self2.propCache=self2.propCache||[];return(ret=propCache[argHash])||(ret=propCache[argHash]=self2.parseImplWarn(name,value,propIsBypass,propIsFlat)),(propIsBypass||"mapping"===propIsFlat)&&(ret=copy(ret))&&(ret.value=copy(ret.value)),ret},parseImplWarn:function(name,value,propIsBypass,propIsFlat){var prop=this.parseImpl(name,value,propIsBypass,propIsFlat);return prop||null==value||warn("The style property `".concat(name,": ").concat(value,"` is invalid")),!prop||"width"!==prop.name&&"height"!==prop.name||"label"!==value||warn("The style value of `label` is deprecated for `"+prop.name+"`"),prop},parseImpl:function(name,value,propIsBypass,propIsFlat){var self2=this;name=camel2dash(name);var property=self2.properties[name],passedValue=value,types=self2.types;if(!property)return null;if(void 0===value)return null;property.alias&&(property=property.pointsTo,name=property.name);var valueIsString=string(value);valueIsString&&(value=value.trim());var data2,mapData,type=property.type;if(!type)return null;if(propIsBypass&&(""===value||null===value))return{name:name,value:value,bypass:!0,deleteBypass:!0};if(fn$6(value))return{name:name,value:value,strValue:"fn",mapped:types.fn,bypass:propIsBypass};if(!valueIsString||propIsFlat||value.length<7||"a"!==value[1]);else{if(value.length>=7&&"d"===value[0]&&(data2=new RegExp(types.data.regex).exec(value))){if(propIsBypass)return!1;var mapped=types.data;return{name:name,value:data2,strValue:""+value,mapped:mapped,field:data2[1],bypass:propIsBypass}}if(value.length>=10&&"m"===value[0]&&(mapData=new RegExp(types.mapData.regex).exec(value))){if(propIsBypass)return!1;if(type.multiple)return!1;var _mapped=types.mapData;if(!type.color&&!type.number)return!1;var valueMin=this.parse(name,mapData[4]);if(!valueMin||valueMin.mapped)return!1;var valueMax=this.parse(name,mapData[5]);if(!valueMax||valueMax.mapped)return!1;if(valueMin.pfValue===valueMax.pfValue||valueMin.strValue===valueMax.strValue)return warn("`"+name+": "+value+"` is not a valid mapper because the output range is zero; converting to `"+name+": "+valueMin.strValue+"`"),this.parse(name,valueMin.strValue);if(type.color){var c1=valueMin.value,c2=valueMax.value;if(!(c1[0]!==c2[0]||c1[1]!==c2[1]||c1[2]!==c2[2]||c1[3]!==c2[3]&&(null!=c1[3]&&1!==c1[3]||null!=c2[3]&&1!==c2[3])))return!1}return{name:name,value:mapData,strValue:""+value,mapped:_mapped,field:mapData[1],fieldMin:parseFloat(mapData[2]),fieldMax:parseFloat(mapData[3]),valueMin:valueMin.value,valueMax:valueMax.value,bypass:propIsBypass}}}if(type.multiple&&"multiple"!==propIsFlat){var vals;if(vals=valueIsString?value.split(/\s+/):array(value)?value:[value],type.evenMultiple&&vals.length%2!=0)return null;for(var valArr=[],unitsArr=[],pfValArr=[],strVal="",hasEnum=!1,i2=0;i2<vals.length;i2++){var p2=self2.parse(name,vals[i2],propIsBypass,"multiple");hasEnum=hasEnum||string(p2.value),valArr.push(p2.value),pfValArr.push(null!=p2.pfValue?p2.pfValue:p2.value),unitsArr.push(p2.units),strVal+=(i2>0?" ":"")+p2.strValue}return type.validate&&!type.validate(valArr,unitsArr)?null:type.singleEnum&&hasEnum?1===valArr.length&&string(valArr[0])?{name:name,value:valArr[0],strValue:valArr[0],bypass:propIsBypass}:null:{name:name,value:valArr,pfValue:pfValArr,strValue:strVal,bypass:propIsBypass,units:unitsArr}}var checkEnums=function checkEnums2(){for(var _i=0;_i<type.enums.length;_i++)if(type.enums[_i]===value)return{name:name,value:value,strValue:""+value,bypass:propIsBypass};return null};if(type.number){var units,implicitUnits="px";if(type.units&&(units=type.units),type.implicitUnits&&(implicitUnits=type.implicitUnits),!type.unitless)if(valueIsString){var unitsRegex="px|em"+(type.allowPercent?"|\\%":"");units&&(unitsRegex=units);var match2=value.match("^("+number+")("+unitsRegex+")?$");match2&&(value=match2[1],units=match2[2]||implicitUnits)}else units&&!type.implicitUnits||(units=implicitUnits);if(value=parseFloat(value),isNaN(value)&&void 0===type.enums)return null;if(isNaN(value)&&void 0!==type.enums)return value=passedValue,checkEnums();if(type.integer&&!integer(value))return null;if(void 0!==type.min&&(value<type.min||type.strictMin&&value===type.min)||void 0!==type.max&&(value>type.max||type.strictMax&&value===type.max))return null;var ret={name:name,value:value,strValue:""+value+(units||""),units:units,bypass:propIsBypass};return type.unitless||"px"!==units&&"em"!==units?ret.pfValue=value:ret.pfValue="px"!==units&&units?this.getEmSizeInPixels()*value:value,"ms"!==units&&"s"!==units||(ret.pfValue="ms"===units?value:1e3*value),"deg"!==units&&"rad"!==units||(ret.pfValue="rad"===units?value:deg2rad(value)),"%"===units&&(ret.pfValue=value/100),ret}if(type.propList){var props=[],propsStr=""+value;if("none"===propsStr);else{for(var propsSplit=propsStr.split(/\s*,\s*|\s+/),_i2=0;_i2<propsSplit.length;_i2++){var propName=propsSplit[_i2].trim();self2.properties[propName]?props.push(propName):warn("`"+propName+"` is not a valid property name")}if(0===props.length)return null}return{name:name,value:props,strValue:0===props.length?"none":props.join(" "),bypass:propIsBypass}}if(type.color){var tuple=color2tuple(value);return tuple?{name:name,value:tuple,pfValue:tuple,strValue:"rgb("+tuple[0]+","+tuple[1]+","+tuple[2]+")",bypass:propIsBypass}:null}if(type.regex||type.regexes){if(type.enums){var enumProp=checkEnums();if(enumProp)return enumProp}for(var regexes=type.regexes?type.regexes:[type.regex],_i3=0;_i3<regexes.length;_i3++){var m=new RegExp(regexes[_i3]).exec(value);if(m)return{name:name,value:type.singleRegexMatchValue?m[1]:m,strValue:""+value,bypass:propIsBypass}}return null}return type.string?{name:name,value:""+value,strValue:""+value,bypass:propIsBypass}:type.enums?checkEnums():null}},Style=function Style2(cy){if(!(this instanceof Style2))return new Style2(cy);core(cy)?(this._private={cy:cy,coreStyle:{}},this.length=0,this.resetToDefault()):error("A style must have a core reference")},styfn=Style.prototype;styfn.instanceString=function(){return"style"},styfn.clear=function(){for(var _p=this._private,eles=_p.cy.elements(),i2=0;i2<this.length;i2++)this[i2]=void 0;return this.length=0,_p.contextStyles={},_p.propDiffs={},this.cleanElements(eles,!0),eles.forEach((function(ele){var ele_p=ele[0]._private;ele_p.styleDirty=!0,ele_p.appliedInitStyle=!1})),this},styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},styfn.core=function(propName){return this._private.coreStyle[propName]||this.getDefaultProperty(propName)},styfn.selector=function(selectorStr){var selector="core"===selectorStr?null:new Selector(selectorStr),i2=this.length++;return this[i2]={selector:selector,properties:[],mappedProperties:[],index:i2},this},styfn.css=function(){var self2=this,args=arguments;if(1===args.length)for(var map=args[0],i2=0;i2<self2.properties.length;i2++){var prop=self2.properties[i2],mapVal=map[prop.name];void 0===mapVal&&(mapVal=map[dash2camel(prop.name)]),void 0!==mapVal&&this.cssRule(prop.name,mapVal)}else 2===args.length&&this.cssRule(args[0],args[1]);return this},styfn.style=styfn.css,styfn.cssRule=function(name,value){var property=this.parse(name,value);if(property){var i2=this.length-1;this[i2].properties.push(property),this[i2].properties[property.name]=property,property.name.match(/pie-(\d+)-background-size/)&&property.value&&(this._private.hasPie=!0),property.mapped&&this[i2].mappedProperties.push(property),!this[i2].selector&&(this._private.coreStyle[property.name]=property)}return this},styfn.append=function(style){return stylesheet(style)?style.appendToStyle(this):array(style)?this.appendFromJson(style):string(style)&&this.appendFromString(style),this},Style.fromJson=function(cy,json){var style=new Style(cy);return style.fromJson(json),style},Style.fromString=function(cy,string2){return new Style(cy).fromString(string2)},[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach((function(props){extend(styfn,props)})),Style.types=styfn.types,Style.properties=styfn.properties,Style.propertyGroups=styfn.propertyGroups,Style.propertyGroupNames=styfn.propertyGroupNames,Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$2={style:function style(newStyle){return newStyle&&this.setStyle(newStyle).update(),this._private.style},setStyle:function setStyle(style){var _p=this._private;return stylesheet(style)?_p.style=style.generateStyle(this):array(style)?_p.style=Style.fromJson(this,style):string(style)?_p.style=Style.fromString(this,style):_p.style=Style(this),_p.style},updateStyle:function updateStyle(){this.mutableElements().updateStyle()}},defaultSelectionType="single",corefn$1={autolock:function autolock(bool){return void 0===bool?this._private.autolock:(this._private.autolock=!!bool,this)},autoungrabify:function autoungrabify(bool){return void 0===bool?this._private.autoungrabify:(this._private.autoungrabify=!!bool,this)},autounselectify:function autounselectify(bool){return void 0===bool?this._private.autounselectify:(this._private.autounselectify=!!bool,this)},selectionType:function selectionType(selType){var _p=this._private;return null==_p.selectionType&&(_p.selectionType=defaultSelectionType),void 0===selType?_p.selectionType:("additive"!==selType&&"single"!==selType||(_p.selectionType=selType),this)},panningEnabled:function panningEnabled(bool){return void 0===bool?this._private.panningEnabled:(this._private.panningEnabled=!!bool,this)},userPanningEnabled:function userPanningEnabled(bool){return void 0===bool?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!bool,this)},zoomingEnabled:function zoomingEnabled(bool){return void 0===bool?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!bool,this)},userZoomingEnabled:function userZoomingEnabled(bool){return void 0===bool?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!bool,this)},boxSelectionEnabled:function boxSelectionEnabled(bool){return void 0===bool?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!bool,this)},pan:function pan(){var dim,val,dims,x,y,args=arguments,pan2=this._private.pan;switch(args.length){case 0:return pan2;case 1:if(string(args[0]))return pan2[dim=args[0]];if(plainObject(args[0])){if(!this._private.panningEnabled)return this;x=(dims=args[0]).x,y=dims.y,number$1(x)&&(pan2.x=x),number$1(y)&&(pan2.y=y),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;dim=args[0],val=args[1],"x"!==dim&&"y"!==dim||!number$1(val)||(pan2[dim]=val),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function panBy(arg0,arg1){var dim,val,dims,x,y,args=arguments,pan=this._private.pan;if(!this._private.panningEnabled)return this;switch(args.length){case 1:plainObject(arg0)&&(x=(dims=args[0]).x,y=dims.y,number$1(x)&&(pan.x+=x),number$1(y)&&(pan.y+=y),this.emit("pan viewport"));break;case 2:val=arg1,"x"!==(dim=arg0)&&"y"!==dim||!number$1(val)||(pan[dim]+=val),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function fit(elements2,padding){var viewportState=this.getFitViewport(elements2,padding);if(viewportState){var _p=this._private;_p.zoom=viewportState.zoom,_p.pan=viewportState.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function getFitViewport(elements2,padding){if(number$1(elements2)&&void 0===padding&&(padding=elements2,elements2=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var bb;if(string(elements2)){var sel=elements2;elements2=this.$(sel)}else if(boundingBox(elements2)){var bbe=elements2;(bb={x1:bbe.x1,y1:bbe.y1,x2:bbe.x2,y2:bbe.y2}).w=bb.x2-bb.x1,bb.h=bb.y2-bb.y1}else elementOrCollection(elements2)||(elements2=this.mutableElements());if(!elementOrCollection(elements2)||!elements2.empty()){bb=bb||elements2.boundingBox();var zoom,w=this.width(),h=this.height();if(padding=number$1(padding)?padding:0,!isNaN(w)&&!isNaN(h)&&w>0&&h>0&&!isNaN(bb.w)&&!isNaN(bb.h)&&bb.w>0&&bb.h>0)return{zoom:zoom=(zoom=(zoom=Math.min((w-2*padding)/bb.w,(h-2*padding)/bb.h))>this._private.maxZoom?this._private.maxZoom:zoom)<this._private.minZoom?this._private.minZoom:zoom,pan:{x:(w-zoom*(bb.x1+bb.x2))/2,y:(h-zoom*(bb.y1+bb.y2))/2}}}}},zoomRange:function zoomRange(min2,max2){var _p=this._private;if(null==max2){var opts=min2;min2=opts.min,max2=opts.max}return number$1(min2)&&number$1(max2)&&min2<=max2?(_p.minZoom=min2,_p.maxZoom=max2):number$1(min2)&&void 0===max2&&min2<=_p.maxZoom?_p.minZoom=min2:number$1(max2)&&void 0===min2&&max2>=_p.minZoom&&(_p.maxZoom=max2),this},minZoom:function minZoom(zoom){return void 0===zoom?this._private.minZoom:this.zoomRange({min:zoom})},maxZoom:function maxZoom2(zoom){return void 0===zoom?this._private.maxZoom:this.zoomRange({max:zoom})},getZoomedViewport:function getZoomedViewport(params){var pos,zoom,_p=this._private,currentPan=_p.pan,currentZoom=_p.zoom,bail=!1;if(_p.zoomingEnabled||(bail=!0),number$1(params)?zoom=params:plainObject(params)&&(zoom=params.level,null!=params.position?pos=modelToRenderedPosition(params.position,currentZoom,currentPan):null!=params.renderedPosition&&(pos=params.renderedPosition),null==pos||_p.panningEnabled||(bail=!0)),zoom=(zoom=zoom>_p.maxZoom?_p.maxZoom:zoom)<_p.minZoom?_p.minZoom:zoom,bail||!number$1(zoom)||zoom===currentZoom||null!=pos&&(!number$1(pos.x)||!number$1(pos.y)))return null;if(null!=pos){var pan1=currentPan,zoom1=currentZoom,zoom2=zoom;return{zoomed:!0,panned:!0,zoom:zoom2,pan:{x:-zoom2/zoom1*(pos.x-pan1.x)+pos.x,y:-zoom2/zoom1*(pos.y-pan1.y)+pos.y}}}return{zoomed:!0,panned:!1,zoom:zoom,pan:currentPan}},zoom:function zoom(params){if(void 0===params)return this._private.zoom;var vp=this.getZoomedViewport(params),_p=this._private;return null!=vp&&vp.zoomed?(_p.zoom=vp.zoom,vp.panned&&(_p.pan.x=vp.pan.x,_p.pan.y=vp.pan.y),this.emit("zoom"+(vp.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function viewport(opts){var _p=this._private,zoomDefd=!0,panDefd=!0,events=[],zoomFailed=!1,panFailed=!1;if(!opts)return this;if(number$1(opts.zoom)||(zoomDefd=!1),plainObject(opts.pan)||(panDefd=!1),!zoomDefd&&!panDefd)return this;if(zoomDefd){var z=opts.zoom;z<_p.minZoom||z>_p.maxZoom||!_p.zoomingEnabled?zoomFailed=!0:(_p.zoom=z,events.push("zoom"))}if(panDefd&&(!zoomFailed||!opts.cancelOnFailedZoom)&&_p.panningEnabled){var p2=opts.pan;number$1(p2.x)&&(_p.pan.x=p2.x,panFailed=!1),number$1(p2.y)&&(_p.pan.y=p2.y,panFailed=!1),panFailed||events.push("pan")}return events.length>0&&(events.push("viewport"),this.emit(events.join(" ")),this.notify("viewport")),this},center:function center(elements2){var pan=this.getCenterPan(elements2);return pan&&(this._private.pan=pan,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function getCenterPan(elements2,zoom){if(this._private.panningEnabled){if(string(elements2)){var selector=elements2;elements2=this.mutableElements().filter(selector)}else elementOrCollection(elements2)||(elements2=this.mutableElements());if(0!==elements2.length){var bb=elements2.boundingBox(),w=this.width(),h=this.height();return{x:(w-(zoom=void 0===zoom?this._private.zoom:zoom)*(bb.x1+bb.x2))/2,y:(h-zoom*(bb.y1+bb.y2))/2}}}},reset:function reset(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function invalidateSize(){this._private.sizeCache=null},size:function size(){var style,val,_p=this._private,container=_p.container,cy=this;return _p.sizeCache=_p.sizeCache||(container?(style=cy.window().getComputedStyle(container),val=function val2(name){return parseFloat(style.getPropertyValue(name))},{width:container.clientWidth-val("padding-left")-val("padding-right"),height:container.clientHeight-val("padding-top")-val("padding-bottom")}):{width:1,height:1})},width:function width(){return this.size().width},height:function height(){return this.size().height},extent:function extent(){var pan=this._private.pan,zoom=this._private.zoom,rb=this.renderedExtent(),b={x1:(rb.x1-pan.x)/zoom,x2:(rb.x2-pan.x)/zoom,y1:(rb.y1-pan.y)/zoom,y2:(rb.y2-pan.y)/zoom};return b.w=b.x2-b.x1,b.h=b.y2-b.y1,b},renderedExtent:function renderedExtent(){var width=this.width(),height=this.height();return{x1:0,y1:0,x2:width,y2:height,w:width,h:height}},multiClickDebounceTime:function multiClickDebounceTime(_int){return _int?(this._private.multiClickDebounceTime=_int,this):this._private.multiClickDebounceTime}};corefn$1.centre=corefn$1.center,corefn$1.autolockNodes=corefn$1.autolock,corefn$1.autoungrabifyNodes=corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data,fn.removeAttr=fn.removeData;var Core=function Core2(opts){var cy=this,container=(opts=extend({},opts)).container;container&&!htmlElement(container)&&htmlElement(container[0])&&(container=container[0]);var reg=container?container._cyreg:null;(reg=reg||{})&&reg.cy&&(reg.cy.destroy(),reg={});var readies=reg.readies=reg.readies||[];container&&(container._cyreg=reg),reg.cy=cy;var head=void 0!==_window&&void 0!==container&&!opts.headless,options=opts;options.layout=extend({name:head?"grid":"null"},options.layout),options.renderer=extend({name:head?"canvas":"null"},options.renderer);var defVal=function defVal2(def,val,altVal){return void 0!==val?val:void 0!==altVal?altVal:def},_p=this._private={container:container,ready:!1,options:options,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:options.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:defVal(!0,options.zoomingEnabled),userZoomingEnabled:defVal(!0,options.userZoomingEnabled),panningEnabled:defVal(!0,options.panningEnabled),userPanningEnabled:defVal(!0,options.userPanningEnabled),boxSelectionEnabled:defVal(!0,options.boxSelectionEnabled),autolock:defVal(!1,options.autolock,options.autolockNodes),autoungrabify:defVal(!1,options.autoungrabify,options.autoungrabifyNodes),autounselectify:defVal(!1,options.autounselectify),styleEnabled:void 0===options.styleEnabled?head:options.styleEnabled,zoom:number$1(options.zoom)?options.zoom:1,pan:{x:plainObject(options.pan)&&number$1(options.pan.x)?options.pan.x:0,y:plainObject(options.pan)&&number$1(options.pan.y)?options.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:defVal(250,options.multiClickDebounceTime)};this.createEmitter(),this.selectionType(options.selectionType),this.zoomRange({min:options.minZoom,max:options.maxZoom});var loadExtData=function loadExtData2(extData,next2){if(extData.some(promise))return Promise$1.all(extData).then(next2);next2(extData)};_p.styleEnabled&&cy.setStyle([]);var rendererOptions=extend({},options,options.renderer);cy.initRenderer(rendererOptions);var setElesAndLayout=function setElesAndLayout2(elements2,onload,ondone){cy.notifications(!1);var oldEles=cy.mutableElements();oldEles.length>0&&oldEles.remove(),null!=elements2&&(plainObject(elements2)||array(elements2))&&cy.add(elements2),cy.one("layoutready",(function(e){cy.notifications(!0),cy.emit(e),cy.one("load",onload),cy.emitAndNotify("load")})).one("layoutstop",(function(){cy.one("done",ondone),cy.emit("done")}));var layoutOpts=extend({},cy._private.options.layout);layoutOpts.eles=cy.elements(),cy.layout(layoutOpts).run()};loadExtData([options.style,options.elements],(function(thens){var initStyle=thens[0],initEles=thens[1];_p.styleEnabled&&cy.style().append(initStyle),setElesAndLayout(initEles,(function(){cy.startAnimationLoop(),_p.ready=!0,fn$6(options.ready)&&cy.on("ready",options.ready);for(var i2=0;i2<readies.length;i2++){var fn2=readies[i2];cy.on("ready",fn2)}reg&&(reg.readies=[]),cy.emit("ready")}),options.done)}))},corefn=Core.prototype;extend(corefn,{instanceString:function instanceString(){return"core"},isReady:function isReady(){return this._private.ready},destroyed:function destroyed(){return this._private.destroyed},ready:function ready(fn2){return this.isReady()?this.emitter().emit("ready",[],fn2):this.on("ready",fn2),this},destroy:function destroy(){var cy=this;if(!cy.destroyed())return cy.stopAnimationLoop(),cy.destroyRenderer(),this.emit("destroy"),cy._private.destroyed=!0,cy},hasElementWithId:function hasElementWithId(id){return this._private.elements.hasElementWithId(id)},getElementById:function getElementById2(id){return this._private.elements.getElementById(id)},hasCompoundNodes:function hasCompoundNodes(){return this._private.hasCompoundNodes},headless:function headless(){return this._private.renderer.isHeadless()},styleEnabled:function styleEnabled(){return this._private.styleEnabled},addToPool:function addToPool(eles){return this._private.elements.merge(eles),this},removeFromPool:function removeFromPool(eles){return this._private.elements.unmerge(eles),this},container:function container(){return this._private.container||null},window:function window2(){if(null==this._private.container)return _window;var ownerDocument=this._private.container.ownerDocument;return void 0===ownerDocument||null==ownerDocument?_window:ownerDocument.defaultView||_window},mount:function mount(container){if(null!=container){var cy=this,_p=cy._private,options=_p.options;return!htmlElement(container)&&htmlElement(container[0])&&(container=container[0]),cy.stopAnimationLoop(),cy.destroyRenderer(),_p.container=container,_p.styleEnabled=!0,cy.invalidateSize(),cy.initRenderer(extend({},options,options.renderer,{name:"null"===options.renderer.name?"canvas":options.renderer.name})),cy.startAnimationLoop(),cy.style(options.style),cy.emit("mount"),cy}},unmount:function unmount(){var cy=this;return cy.stopAnimationLoop(),cy.destroyRenderer(),cy.initRenderer({name:"null"}),cy.emit("unmount"),cy},options:function options(){return copy(this._private.options)},json:function json(obj){var cy=this,_p=cy._private,eles=cy.mutableElements(),getFreshRef=function getFreshRef2(ele){return cy.getElementById(ele.id())};if(plainObject(obj)){if(cy.startBatch(),obj.elements){var idInJson={},updateEles=function updateEles2(jsons,gr2){for(var toAdd=[],toMod=[],i3=0;i3<jsons.length;i3++){var json3=jsons[i3];if(json3.data.id){var id=""+json3.data.id,ele=cy.getElementById(id);idInJson[id]=!0,0!==ele.length?toMod.push({ele:ele,json:json3}):gr2?(json3.group=gr2,toAdd.push(json3)):toAdd.push(json3)}else warn("cy.json() cannot handle elements without an ID attribute")}cy.add(toAdd);for(var _i=0;_i<toMod.length;_i++){var _toMod$_i=toMod[_i],_ele=_toMod$_i.ele,_json=_toMod$_i.json;_ele.json(_json)}};if(array(obj.elements))updateEles(obj.elements);else for(var grs=["nodes","edges"],i2=0;i2<grs.length;i2++){var gr=grs[i2],elements2=obj.elements[gr];array(elements2)&&updateEles(elements2,gr)}var parentsToRemove=cy.collection();eles.filter((function(ele){return!idInJson[ele.id()]})).forEach((function(ele){ele.isParent()?parentsToRemove.merge(ele):ele.remove()})),parentsToRemove.forEach((function(ele){return ele.children().move({parent:null})})),parentsToRemove.forEach((function(ele){return getFreshRef(ele).remove()}))}obj.style&&cy.style(obj.style),null!=obj.zoom&&obj.zoom!==_p.zoom&&cy.zoom(obj.zoom),obj.pan&&(obj.pan.x===_p.pan.x&&obj.pan.y===_p.pan.y||cy.pan(obj.pan)),obj.data&&cy.data(obj.data);for(var fields=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],_i2=0;_i2<fields.length;_i2++){var f=fields[_i2];null!=obj[f]&&cy[f](obj[f])}return cy.endBatch(),this}var json2={};obj?json2.elements=this.elements().map((function(ele){return ele.json()})):(json2.elements={},eles.forEach((function(ele){var group=ele.group();json2.elements[group]||(json2.elements[group]=[]),json2.elements[group].push(ele.json())}))),this._private.styleEnabled&&(json2.style=cy.style().json()),json2.data=copy(cy.data());var options=_p.options;return json2.zoomingEnabled=_p.zoomingEnabled,json2.userZoomingEnabled=_p.userZoomingEnabled,json2.zoom=_p.zoom,json2.minZoom=_p.minZoom,json2.maxZoom=_p.maxZoom,json2.panningEnabled=_p.panningEnabled,json2.userPanningEnabled=_p.userPanningEnabled,json2.pan=copy(_p.pan),json2.boxSelectionEnabled=_p.boxSelectionEnabled,json2.renderer=copy(options.renderer),json2.hideEdgesOnViewport=options.hideEdgesOnViewport,json2.textureOnViewport=options.textureOnViewport,json2.wheelSensitivity=options.wheelSensitivity,json2.motionBlur=options.motionBlur,json2.multiClickDebounceTime=options.multiClickDebounceTime,json2}}),corefn.$id=corefn.getElementById,[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn].forEach((function(props){extend(corefn,props)}));var defaults$7={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(node,i2){return!0},ready:void 0,stop:void 0,transform:function transform(node,position2){return position2}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function getInfo2(ele){return ele.scratch("breadthfirst")},setInfo=function setInfo2(ele,obj){return ele.scratch("breadthfirst",obj)};function BreadthFirstLayout(options){this.options=extend({},defaults$7,deprecatedOptionDefaults,options)}BreadthFirstLayout.prototype.run=function(){var roots,params=this.options,options=params,cy=params.cy,eles=options.eles,nodes2=eles.nodes().filter((function(n2){return!n2.isParent()})),graph=eles,directed=options.directed,maximal=options.acyclic||options.maximal||options.maximalAdjustments>0,bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});if(elementOrCollection(options.roots))roots=options.roots;else if(array(options.roots)){for(var rootsArray=[],i2=0;i2<options.roots.length;i2++){var id=options.roots[i2],ele=cy.getElementById(id);rootsArray.push(ele)}roots=cy.collection(rootsArray)}else if(string(options.roots))roots=cy.$(options.roots);else if(directed)roots=nodes2.roots();else{var components=eles.components();roots=cy.collection();for(var _loop=function _loop2(_i3){var comp=components[_i3],maxDegree=comp.maxDegree(!1),compRoots=comp.filter((function(ele2){return ele2.degree(!1)===maxDegree}));roots=roots.add(compRoots)},_i=0;_i<components.length;_i++)_loop(_i)}var depths=[],foundByBfs={},addToDepth=function addToDepth2(ele2,d){null==depths[d]&&(depths[d]=[]);var i3=depths[d].length;depths[d].push(ele2),setInfo(ele2,{index:i3,depth:d})},changeDepth=function changeDepth2(ele2,newDepth){var _getInfo=getInfo(ele2),depth=_getInfo.depth,index=_getInfo.index;depths[depth][index]=null,addToDepth(ele2,newDepth)};graph.bfs({roots:roots,directed:options.directed,visit:function visit(node,edge,pNode,i3,depth){var ele2=node[0],id2=ele2.id();addToDepth(ele2,depth),foundByBfs[id2]=!0}});for(var orphanNodes=[],_i2=0;_i2<nodes2.length;_i2++){var _ele=nodes2[_i2];foundByBfs[_ele.id()]||orphanNodes.push(_ele)}var assignDepthsAt=function assignDepthsAt2(i3){for(var eles2=depths[i3],j=0;j<eles2.length;j++){var _ele2=eles2[j];null!=_ele2?setInfo(_ele2,{depth:i3,index:j}):(eles2.splice(j,1),j--)}},assignDepths=function assignDepths2(){for(var _i3=0;_i3<depths.length;_i3++)assignDepthsAt(_i3)},adjustMaximally=function adjustMaximally2(ele2,shifted2){for(var eInfo=getInfo(ele2),incomers=ele2.incomers().filter((function(el){return el.isNode()&&eles.has(el)})),maxDepth=-1,id2=ele2.id(),k=0;k<incomers.length;k++){var incmr=incomers[k],iInfo=getInfo(incmr);maxDepth=Math.max(maxDepth,iInfo.depth)}if(eInfo.depth<=maxDepth){if(!options.acyclic&&shifted2[id2])return null;var newDepth=maxDepth+1;return changeDepth(ele2,newDepth),shifted2[id2]=newDepth,!0}return!1};if(directed&&maximal){var Q=[],shifted={},enqueue=function enqueue2(n2){return Q.push(n2)},dequeue=function dequeue2(){return Q.shift()};for(nodes2.forEach((function(n2){return Q.push(n2)}));Q.length>0;){var _ele3=dequeue(),didShift=adjustMaximally(_ele3,shifted);if(didShift)_ele3.outgoers().filter((function(el){return el.isNode()&&eles.has(el)})).forEach(enqueue);else if(null===didShift){warn("Detected double maximal shift for node `"+_ele3.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}assignDepths();var minDistance=0;if(options.avoidOverlap)for(var _i4=0;_i4<nodes2.length;_i4++){var nbb=nodes2[_i4].layoutDimensions(options),w=nbb.w,h=nbb.h;minDistance=Math.max(minDistance,w,h)}var cachedWeightedPercent={},getWeightedPercent=function getWeightedPercent2(ele2){if(cachedWeightedPercent[ele2.id()])return cachedWeightedPercent[ele2.id()];for(var eleDepth=getInfo(ele2).depth,neighbors=ele2.neighborhood(),percent=0,samples=0,_i5=0;_i5<neighbors.length;_i5++){var neighbor=neighbors[_i5];if(!neighbor.isEdge()&&!neighbor.isParent()&&nodes2.has(neighbor)){var bf=getInfo(neighbor);if(null!=bf){var index=bf.index,depth=bf.depth;if(null!=index&&null!=depth){var nDepth=depths[depth].length;depth<eleDepth&&(percent+=index/nDepth,samples++)}}}}return percent/=samples=Math.max(1,samples),0===samples&&(percent=0),cachedWeightedPercent[ele2.id()]=percent,percent},sortFn=function sortFn2(a,b){var diff=getWeightedPercent(a)-getWeightedPercent(b);return 0===diff?ascending(a.id(),b.id()):diff};void 0!==options.depthSort&&(sortFn=options.depthSort);for(var _i6=0;_i6<depths.length;_i6++)depths[_i6].sort(sortFn),assignDepthsAt(_i6);for(var orphanDepth=[],_i7=0;_i7<orphanNodes.length;_i7++)orphanDepth.push(orphanNodes[_i7]);depths.unshift(orphanDepth),assignDepths();for(var biggestDepthSize=0,_i8=0;_i8<depths.length;_i8++)biggestDepthSize=Math.max(depths[_i8].length,biggestDepthSize);var center={x:bb.x1+bb.w/2,y:bb.x1+bb.h/2},maxDepthSize=depths.reduce((function(max2,eles2){return Math.max(max2,eles2.length)}),0),getPosition=function getPosition2(ele2){var _getInfo2=getInfo(ele2),depth=_getInfo2.depth,index=_getInfo2.index,depthSize=depths[depth].length,distanceX=Math.max(bb.w/((options.grid?maxDepthSize:depthSize)+1),minDistance),distanceY=Math.max(bb.h/(depths.length+1),minDistance),radiusStepSize=Math.min(bb.w/2/depths.length,bb.h/2/depths.length);if(radiusStepSize=Math.max(radiusStepSize,minDistance),options.circle){var radius=radiusStepSize*depth+radiusStepSize-(depths.length>0&&depths[0].length<=3?radiusStepSize/2:0),theta=2*Math.PI/depths[depth].length*index;return 0===depth&&1===depths[0].length&&(radius=1),{x:center.x+radius*Math.cos(theta),y:center.y+radius*Math.sin(theta)}}return{x:center.x+(index+1-(depthSize+1)/2)*distanceX,y:(depth+1)*distanceY}};return eles.nodes().layoutPositions(this,options,getPosition),this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(node,i2){return!0},ready:void 0,stop:void 0,transform:function transform(node,position2){return position2}};function CircleLayout(options){this.options=extend({},defaults$6,options)}CircleLayout.prototype.run=function(){var params=this.options,options=params,cy=params.cy,eles=options.eles,clockwise=void 0!==options.counterclockwise?!options.counterclockwise:options.clockwise,nodes2=eles.nodes().not(":parent");options.sort&&(nodes2=nodes2.sort(options.sort));for(var r,bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),center={x:bb.x1+bb.w/2,y:bb.y1+bb.h/2},dTheta=(void 0===options.sweep?2*Math.PI-2*Math.PI/nodes2.length:options.sweep)/Math.max(1,nodes2.length-1),minDistance=0,i2=0;i2<nodes2.length;i2++){var nbb=nodes2[i2].layoutDimensions(options),w=nbb.w,h=nbb.h;minDistance=Math.max(minDistance,w,h)}if(r=number$1(options.radius)?options.radius:nodes2.length<=1?0:Math.min(bb.h,bb.w)/2-minDistance,nodes2.length>1&&options.avoidOverlap){minDistance*=1.75;var dcos=Math.cos(dTheta)-Math.cos(0),dsin=Math.sin(dTheta)-Math.sin(0),rMin=Math.sqrt(minDistance*minDistance/(dcos*dcos+dsin*dsin));r=Math.max(rMin,r)}var getPos=function getPos2(ele,i3){var theta=options.startAngle+i3*dTheta*(clockwise?1:-1),rx=r*Math.cos(theta),ry=r*Math.sin(theta);return{x:center.x+rx,y:center.y+ry}};return eles.nodes().layoutPositions(this,options,getPos),this};var DEBUG,defaults$5={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function concentric(node){return node.degree()},levelWidth:function levelWidth(nodes2){return nodes2.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(node,i2){return!0},ready:void 0,stop:void 0,transform:function transform(node,position2){return position2}};function ConcentricLayout(options){this.options=extend({},defaults$5,options)}ConcentricLayout.prototype.run=function(){for(var params=this.options,options=params,clockwise=void 0!==options.counterclockwise?!options.counterclockwise:options.clockwise,cy=params.cy,eles=options.eles,nodes2=eles.nodes().not(":parent"),bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),center={x:bb.x1+bb.w/2,y:bb.y1+bb.h/2},nodeValues=[],maxNodeSize=0,i2=0;i2<nodes2.length;i2++){var node=nodes2[i2],value=void 0;value=options.concentric(node),nodeValues.push({value:value,node:node}),node._private.scratch.concentric=value}nodes2.updateStyle();for(var _i=0;_i<nodes2.length;_i++){var nbb=nodes2[_i].layoutDimensions(options);maxNodeSize=Math.max(maxNodeSize,nbb.w,nbb.h)}nodeValues.sort((function(a,b){return b.value-a.value}));for(var levelWidth=options.levelWidth(nodes2),levels=[[]],currentLevel=levels[0],_i2=0;_i2<nodeValues.length;_i2++){var val=nodeValues[_i2];currentLevel.length>0&&Math.abs(currentLevel[0].value-val.value)>=levelWidth&&(currentLevel=[],levels.push(currentLevel)),currentLevel.push(val)}var minDist=maxNodeSize+options.minNodeSpacing;if(!options.avoidOverlap){var firstLvlHasMulti=levels.length>0&&levels[0].length>1,rStep=(Math.min(bb.w,bb.h)/2-minDist)/(levels.length+firstLvlHasMulti?1:0);minDist=Math.min(minDist,rStep)}for(var r=0,_i3=0;_i3<levels.length;_i3++){var level=levels[_i3],sweep=void 0===options.sweep?2*Math.PI-2*Math.PI/level.length:options.sweep,dTheta=level.dTheta=sweep/Math.max(1,level.length-1);if(level.length>1&&options.avoidOverlap){var dcos=Math.cos(dTheta)-Math.cos(0),dsin=Math.sin(dTheta)-Math.sin(0),rMin=Math.sqrt(minDist*minDist/(dcos*dcos+dsin*dsin));r=Math.max(rMin,r)}level.r=r,r+=minDist}if(options.equidistant){for(var rDeltaMax=0,_r=0,_i4=0;_i4<levels.length;_i4++){var rDelta=levels[_i4].r-_r;rDeltaMax=Math.max(rDeltaMax,rDelta)}_r=0;for(var _i5=0;_i5<levels.length;_i5++){var _level2=levels[_i5];0===_i5&&(_r=_level2.r),_level2.r=_r,_r+=rDeltaMax}}for(var pos={},_i6=0;_i6<levels.length;_i6++)for(var _level3=levels[_i6],_dTheta=_level3.dTheta,_r2=_level3.r,j=0;j<_level3.length;j++){var _val=_level3[j],theta=options.startAngle+(clockwise?1:-1)*_dTheta*j,p2={x:center.x+_r2*Math.cos(theta),y:center.y+_r2*Math.sin(theta)};pos[_val.node.id()]=p2}return eles.nodes().layoutPositions(this,options,(function(ele){var id=ele.id();return pos[id]})),this};var defaults$4={ready:function ready(){},stop:function stop(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function animateFilter(node,i2){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function nodeRepulsion2(node){return 2048},nodeOverlap:4,idealEdgeLength:function idealEdgeLength(edge){return 32},edgeElasticity:function edgeElasticity(edge){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(options){this.options=extend({},defaults$4,options),this.options.layout=this;var nodes2=this.options.eles.nodes(),notEdges=this.options.eles.edges().filter((function(e){var sourceId=e.source().data("id"),targetId=e.target().data("id"),hasSource=nodes2.some((function(n){return n.data("id")===sourceId})),hasTarget=nodes2.some((function(n){return n.data("id")===targetId}));return!hasSource||!hasTarget}));this.options.eles=this.options.eles.not(notEdges)}CoseLayout.prototype.run=function(){var options=this.options,cy=options.cy,layout2=this;layout2.stopped=!1,!0!==options.animate&&!1!==options.animate||layout2.emit({type:"layoutstart",layout:layout2}),DEBUG=!0===options.debug;var layoutInfo=createLayoutInfo(cy,layout2,options);DEBUG&&printLayoutInfo(layoutInfo),options.randomize&&randomizePositions(layoutInfo);var startTime=performanceNow(),refresh=function refresh2(){refreshPositions(layoutInfo,cy,options),!0===options.fit&&cy.fit(options.padding)},mainLoop=function mainLoop2(i3){return!(layout2.stopped||i3>=options.numIter||(step(layoutInfo,options),layoutInfo.temperature=layoutInfo.temperature*options.coolingFactor,layoutInfo.temperature<options.minTemp))},done=function done2(){if(!0===options.animate||!1===options.animate)refresh(),layout2.one("layoutstop",options.stop),layout2.emit({type:"layoutstop",layout:layout2});else{var nodes2=options.eles.nodes(),getScaledPos=getScaleInBoundsFn(layoutInfo,options,nodes2);nodes2.layoutPositions(layout2,options,getScaledPos)}},i2=0,loopRet=!0;if(!0===options.animate)!function frame2(){for(var f=0;loopRet&&f<options.refresh;)loopRet=mainLoop(i2),i2++,f++;loopRet?(performanceNow()-startTime>=options.animationThreshold&&refresh(),requestAnimationFrame2(frame2)):(separateComponents(layoutInfo,options),done())}();else{for(;loopRet;)loopRet=mainLoop(i2),i2++;separateComponents(layoutInfo,options),done()}return this},CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var printLayoutInfo,createLayoutInfo=function createLayoutInfo2(cy,layout2,options){for(var edges=options.eles.edges(),nodes2=options.eles.nodes(),bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),layoutInfo={isCompound:cy.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:nodes2.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:edges.size(),temperature:options.initialTemp,clientWidth:bb.w,clientHeight:bb.h,boundingBox:bb},components=options.eles.components(),id2cmptId={},i2=0;i2<components.length;i2++)for(var component=components[i2],j=0;j<component.length;j++)id2cmptId[component[j].id()]=i2;for(i2=0;i2<layoutInfo.nodeSize;i2++){var nbb=(n=nodes2[i2]).layoutDimensions(options);(tempNode={}).isLocked=n.locked(),tempNode.id=n.data("id"),tempNode.parentId=n.data("parent"),tempNode.cmptId=id2cmptId[n.id()],tempNode.children=[],tempNode.positionX=n.position("x"),tempNode.positionY=n.position("y"),tempNode.offsetX=0,tempNode.offsetY=0,tempNode.height=nbb.w,tempNode.width=nbb.h,tempNode.maxX=tempNode.positionX+tempNode.width/2,tempNode.minX=tempNode.positionX-tempNode.width/2,tempNode.maxY=tempNode.positionY+tempNode.height/2,tempNode.minY=tempNode.positionY-tempNode.height/2,tempNode.padLeft=parseFloat(n.style("padding")),tempNode.padRight=parseFloat(n.style("padding")),tempNode.padTop=parseFloat(n.style("padding")),tempNode.padBottom=parseFloat(n.style("padding")),tempNode.nodeRepulsion=fn$6(options.nodeRepulsion)?options.nodeRepulsion(n):options.nodeRepulsion,layoutInfo.layoutNodes.push(tempNode),layoutInfo.idToIndex[tempNode.id]=i2}var queue=[],start=0,end=-1,tempGraph=[];for(i2=0;i2<layoutInfo.nodeSize;i2++){var n,p_id=(n=layoutInfo.layoutNodes[i2]).parentId;null!=p_id?layoutInfo.layoutNodes[layoutInfo.idToIndex[p_id]].children.push(n.id):(queue[++end]=n.id,tempGraph.push(n.id))}for(layoutInfo.graphSet.push(tempGraph);start<=end;){var node_id=queue[start++],node_ix=layoutInfo.idToIndex[node_id],children=layoutInfo.layoutNodes[node_ix].children;if(children.length>0)for(layoutInfo.graphSet.push(children),i2=0;i2<children.length;i2++)queue[++end]=children[i2]}for(i2=0;i2<layoutInfo.graphSet.length;i2++){var graph=layoutInfo.graphSet[i2];for(j=0;j<graph.length;j++){var index=layoutInfo.idToIndex[graph[j]];layoutInfo.indexToGraph[index]=i2}}for(i2=0;i2<layoutInfo.edgeSize;i2++){var e=edges[i2],tempEdge={};tempEdge.id=e.data("id"),tempEdge.sourceId=e.data("source"),tempEdge.targetId=e.data("target");var idealLength=fn$6(options.idealEdgeLength)?options.idealEdgeLength(e):options.idealEdgeLength,elasticity=fn$6(options.edgeElasticity)?options.edgeElasticity(e):options.edgeElasticity,sourceIx=layoutInfo.idToIndex[tempEdge.sourceId],targetIx=layoutInfo.idToIndex[tempEdge.targetId];if(layoutInfo.indexToGraph[sourceIx]!=layoutInfo.indexToGraph[targetIx]){for(var lca=findLCA(tempEdge.sourceId,tempEdge.targetId,layoutInfo),lcaGraph=layoutInfo.graphSet[lca],depth=0,tempNode=layoutInfo.layoutNodes[sourceIx];-1===lcaGraph.indexOf(tempNode.id);)tempNode=layoutInfo.layoutNodes[layoutInfo.idToIndex[tempNode.parentId]],depth++;for(tempNode=layoutInfo.layoutNodes[targetIx];-1===lcaGraph.indexOf(tempNode.id);)tempNode=layoutInfo.layoutNodes[layoutInfo.idToIndex[tempNode.parentId]],depth++;idealLength*=depth*options.nestingFactor}tempEdge.idealLength=idealLength,tempEdge.elasticity=elasticity,layoutInfo.layoutEdges.push(tempEdge)}return layoutInfo},findLCA=function findLCA2(node1,node2,layoutInfo){var res=findLCA_aux(node1,node2,0,layoutInfo);return 2>res.count?0:res.graph},findLCA_aux=function findLCA_aux2(node1,node2,graphIx,layoutInfo){var graph=layoutInfo.graphSet[graphIx];if(-1<graph.indexOf(node1)&&-1<graph.indexOf(node2))return{count:2,graph:graphIx};for(var c=0,i2=0;i2<graph.length;i2++){var nodeId=graph[i2],nodeIx=layoutInfo.idToIndex[nodeId],children=layoutInfo.layoutNodes[nodeIx].children;if(0!==children.length){var result=findLCA_aux2(node1,node2,layoutInfo.indexToGraph[layoutInfo.idToIndex[children[0]]],layoutInfo);if(0!==result.count){if(1!==result.count)return result;if(2==++c)break}}}return{count:c,graph:graphIx}},randomizePositions=function randomizePositions2(layoutInfo,cy){for(var width=layoutInfo.clientWidth,height=layoutInfo.clientHeight,i2=0;i2<layoutInfo.nodeSize;i2++){var n=layoutInfo.layoutNodes[i2];0!==n.children.length||n.isLocked||(n.positionX=Math.random()*width,n.positionY=Math.random()*height)}},getScaleInBoundsFn=function getScaleInBoundsFn2(layoutInfo,options,nodes2){var bb=layoutInfo.boundingBox,coseBB={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return options.boundingBox&&(nodes2.forEach((function(node){var lnode=layoutInfo.layoutNodes[layoutInfo.idToIndex[node.data("id")]];coseBB.x1=Math.min(coseBB.x1,lnode.positionX),coseBB.x2=Math.max(coseBB.x2,lnode.positionX),coseBB.y1=Math.min(coseBB.y1,lnode.positionY),coseBB.y2=Math.max(coseBB.y2,lnode.positionY)})),coseBB.w=coseBB.x2-coseBB.x1,coseBB.h=coseBB.y2-coseBB.y1),function(ele,i2){var lnode=layoutInfo.layoutNodes[layoutInfo.idToIndex[ele.data("id")]];if(options.boundingBox){var pctX=(lnode.positionX-coseBB.x1)/coseBB.w,pctY=(lnode.positionY-coseBB.y1)/coseBB.h;return{x:bb.x1+pctX*bb.w,y:bb.y1+pctY*bb.h}}return{x:lnode.positionX,y:lnode.positionY}}},refreshPositions=function refreshPositions2(layoutInfo,cy,options){var layout2=options.layout,nodes2=options.eles.nodes(),getScaledPos=getScaleInBoundsFn(layoutInfo,options,nodes2);nodes2.positions(getScaledPos),!0!==layoutInfo.ready&&(layoutInfo.ready=!0,layout2.one("layoutready",options.ready),layout2.emit({type:"layoutready",layout:this}))},step=function step2(layoutInfo,options,_step){calculateNodeForces(layoutInfo,options),calculateEdgeForces(layoutInfo),calculateGravityForces(layoutInfo,options),propagateForces(layoutInfo),updatePositions(layoutInfo)},calculateNodeForces=function calculateNodeForces2(layoutInfo,options){for(var i2=0;i2<layoutInfo.graphSet.length;i2++)for(var graph=layoutInfo.graphSet[i2],numNodes=graph.length,j=0;j<numNodes;j++)for(var node1=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[j]]],k=j+1;k<numNodes;k++){var node2=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[k]]];nodeRepulsion(node1,node2,layoutInfo,options)}},randomDistance=function randomDistance2(max2){return-max2+2*max2*Math.random()},nodeRepulsion=function nodeRepulsion2(node1,node2,layoutInfo,options){if(node1.cmptId===node2.cmptId||layoutInfo.isCompound){var directionX=node2.positionX-node1.positionX,directionY=node2.positionY-node1.positionY,maxRandDist=1;0===directionX&&0===directionY&&(directionX=randomDistance(maxRandDist),directionY=randomDistance(maxRandDist));var overlap=nodesOverlap(node1,node2,directionX,directionY);if(overlap>0)var forceX=(force=options.nodeOverlap*overlap)*directionX/(distance=Math.sqrt(directionX*directionX+directionY*directionY)),forceY=force*directionY/distance;else{var force,point1=findClippingPoint(node1,directionX,directionY),point2=findClippingPoint(node2,-1*directionX,-1*directionY),distanceX=point2.x-point1.x,distanceY=point2.y-point1.y,distanceSqr=distanceX*distanceX+distanceY*distanceY,distance=Math.sqrt(distanceSqr);forceX=(force=(node1.nodeRepulsion+node2.nodeRepulsion)/distanceSqr)*distanceX/distance,forceY=force*distanceY/distance}node1.isLocked||(node1.offsetX-=forceX,node1.offsetY-=forceY),node2.isLocked||(node2.offsetX+=forceX,node2.offsetY+=forceY)}},nodesOverlap=function nodesOverlap2(node1,node2,dX,dY){if(dX>0)var overlapX=node1.maxX-node2.minX;else overlapX=node2.maxX-node1.minX;if(dY>0)var overlapY=node1.maxY-node2.minY;else overlapY=node2.maxY-node1.minY;return overlapX>=0&&overlapY>=0?Math.sqrt(overlapX*overlapX+overlapY*overlapY):0},findClippingPoint=function findClippingPoint2(node,dX,dY){var X=node.positionX,Y=node.positionY,H=node.height||1,W=node.width||1,dirSlope=dY/dX,nodeSlope=H/W,res={};return 0===dX&&0<dY||0===dX&&0>dY?(res.x=X,res.y=Y+H/2,res):0<dX&&-1*nodeSlope<=dirSlope&&dirSlope<=nodeSlope?(res.x=X+W/2,res.y=Y+W*dY/2/dX,res):0>dX&&-1*nodeSlope<=dirSlope&&dirSlope<=nodeSlope?(res.x=X-W/2,res.y=Y-W*dY/2/dX,res):0<dY&&(dirSlope<=-1*nodeSlope||dirSlope>=nodeSlope)?(res.x=X+H*dX/2/dY,res.y=Y+H/2,res):0>dY&&(dirSlope<=-1*nodeSlope||dirSlope>=nodeSlope)?(res.x=X-H*dX/2/dY,res.y=Y-H/2,res):res},calculateEdgeForces=function calculateEdgeForces2(layoutInfo,options){for(var i2=0;i2<layoutInfo.edgeSize;i2++){var edge=layoutInfo.layoutEdges[i2],sourceIx=layoutInfo.idToIndex[edge.sourceId],source=layoutInfo.layoutNodes[sourceIx],targetIx=layoutInfo.idToIndex[edge.targetId],target=layoutInfo.layoutNodes[targetIx],directionX=target.positionX-source.positionX,directionY=target.positionY-source.positionY;if(0!==directionX||0!==directionY){var point1=findClippingPoint(source,directionX,directionY),point2=findClippingPoint(target,-1*directionX,-1*directionY),lx=point2.x-point1.x,ly=point2.y-point1.y,l=Math.sqrt(lx*lx+ly*ly),force=Math.pow(edge.idealLength-l,2)/edge.elasticity;if(0!==l)var forceX=force*lx/l,forceY=force*ly/l;else forceX=0,forceY=0;source.isLocked||(source.offsetX+=forceX,source.offsetY+=forceY),target.isLocked||(target.offsetX-=forceX,target.offsetY-=forceY)}}},calculateGravityForces=function calculateGravityForces2(layoutInfo,options){if(0!==options.gravity)for(var distThreshold=1,i2=0;i2<layoutInfo.graphSet.length;i2++){var graph=layoutInfo.graphSet[i2],numNodes=graph.length;if(0===i2)var centerX=layoutInfo.clientHeight/2,centerY=layoutInfo.clientWidth/2;else{var temp=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[0]]],parent=layoutInfo.layoutNodes[layoutInfo.idToIndex[temp.parentId]];centerX=parent.positionX,centerY=parent.positionY}for(var j=0;j<numNodes;j++){var node=layoutInfo.layoutNodes[layoutInfo.idToIndex[graph[j]]];if(!node.isLocked){var dx=centerX-node.positionX,dy=centerY-node.positionY,d=Math.sqrt(dx*dx+dy*dy);if(d>distThreshold){var fx=options.gravity*dx/d,fy=options.gravity*dy/d;node.offsetX+=fx,node.offsetY+=fy}}}}},propagateForces=function propagateForces2(layoutInfo,options){var queue=[],start=0,end=-1;for(queue.push.apply(queue,layoutInfo.graphSet[0]),end+=layoutInfo.graphSet[0].length;start<=end;){var nodeId=queue[start++],nodeIndex=layoutInfo.idToIndex[nodeId],node=layoutInfo.layoutNodes[nodeIndex],children=node.children;if(0<children.length&&!node.isLocked){for(var offX=node.offsetX,offY=node.offsetY,i2=0;i2<children.length;i2++){var childNode=layoutInfo.layoutNodes[layoutInfo.idToIndex[children[i2]]];childNode.offsetX+=offX,childNode.offsetY+=offY,queue[++end]=children[i2]}node.offsetX=0,node.offsetY=0}}},updatePositions=function updatePositions2(layoutInfo,options){for(var i2=0;i2<layoutInfo.nodeSize;i2++)0<(n=layoutInfo.layoutNodes[i2]).children.length&&(n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0);for(i2=0;i2<layoutInfo.nodeSize;i2++)if(!(0<(n=layoutInfo.layoutNodes[i2]).children.length||n.isLocked)){var tempForce=limitForce(n.offsetX,n.offsetY,layoutInfo.temperature);n.positionX+=tempForce.x,n.positionY+=tempForce.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,updateAncestryBoundaries(n,layoutInfo)}for(i2=0;i2<layoutInfo.nodeSize;i2++){var n;0<(n=layoutInfo.layoutNodes[i2]).children.length&&!n.isLocked&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY)}},limitForce=function limitForce2(forceX,forceY,max2){var force=Math.sqrt(forceX*forceX+forceY*forceY);if(force>max2)var res={x:max2*forceX/force,y:max2*forceY/force};else res={x:forceX,y:forceY};return res},updateAncestryBoundaries=function updateAncestryBoundaries2(node,layoutInfo){var parentId=node.parentId;if(null!=parentId){var p2=layoutInfo.layoutNodes[layoutInfo.idToIndex[parentId]],flag=!1;return(null==p2.maxX||node.maxX+p2.padRight>p2.maxX)&&(p2.maxX=node.maxX+p2.padRight,flag=!0),(null==p2.minX||node.minX-p2.padLeft<p2.minX)&&(p2.minX=node.minX-p2.padLeft,flag=!0),(null==p2.maxY||node.maxY+p2.padBottom>p2.maxY)&&(p2.maxY=node.maxY+p2.padBottom,flag=!0),(null==p2.minY||node.minY-p2.padTop<p2.minY)&&(p2.minY=node.minY-p2.padTop,flag=!0),flag?updateAncestryBoundaries2(p2,layoutInfo):void 0}},separateComponents=function separateComponents2(layoutInfo,options){for(var nodes2=layoutInfo.layoutNodes,components=[],i2=0;i2<nodes2.length;i2++){var node=nodes2[i2],cid=node.cmptId;(components[cid]=components[cid]||[]).push(node)}var totalA=0;for(i2=0;i2<components.length;i2++)if(c=components[i2]){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var j=0;j<c.length;j++){var n=c[j];c.x1=Math.min(c.x1,n.positionX-n.width/2),c.x2=Math.max(c.x2,n.positionX+n.width/2),c.y1=Math.min(c.y1,n.positionY-n.height/2),c.y2=Math.max(c.y2,n.positionY+n.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,totalA+=c.w*c.h}components.sort((function(c1,c2){return c2.w*c2.h-c1.w*c1.h}));var x=0,y=0,usedW=0,rowH=0,maxRowW=Math.sqrt(totalA)*layoutInfo.clientWidth/layoutInfo.clientHeight;for(i2=0;i2<components.length;i2++){var c;if(c=components[i2]){for(j=0;j<c.length;j++)(n=c[j]).isLocked||(n.positionX+=x-c.x1,n.positionY+=y-c.y1);x+=c.w+options.componentSpacing,usedW+=c.w+options.componentSpacing,rowH=Math.max(rowH,c.h),usedW>maxRowW&&(y+=rowH+options.componentSpacing,x=0,usedW=0,rowH=0)}}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function position2(node){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(node,i2){return!0},ready:void 0,stop:void 0,transform:function transform(node,position2){return position2}};function GridLayout(options){this.options=extend({},defaults$3,options)}GridLayout.prototype.run=function(){var params=this.options,options=params,cy=params.cy,eles=options.eles,nodes2=eles.nodes().not(":parent");options.sort&&(nodes2=nodes2.sort(options.sort));var bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()});if(0===bb.h||0===bb.w)eles.nodes().layoutPositions(this,options,(function(ele){return{x:bb.x1,y:bb.y1}}));else{var cells=nodes2.size(),splits=Math.sqrt(cells*bb.h/bb.w),rows=Math.round(splits),cols=Math.round(bb.w/bb.h*splits),small=function small2(val){if(null==val)return Math.min(rows,cols);Math.min(rows,cols)==rows?rows=val:cols=val},large=function large2(val){if(null==val)return Math.max(rows,cols);Math.max(rows,cols)==rows?rows=val:cols=val},oRows=options.rows,oCols=null!=options.cols?options.cols:options.columns;if(null!=oRows&&null!=oCols)rows=oRows,cols=oCols;else if(null!=oRows&&null==oCols)rows=oRows,cols=Math.ceil(cells/rows);else if(null==oRows&&null!=oCols)cols=oCols,rows=Math.ceil(cells/cols);else if(cols*rows>cells){var sm=small(),lg=large();(sm-1)*lg>=cells?small(sm-1):(lg-1)*sm>=cells&&large(lg-1)}else for(;cols*rows<cells;){var _sm=small(),_lg=large();(_lg+1)*_sm>=cells?large(_lg+1):small(_sm+1)}var cellWidth=bb.w/cols,cellHeight=bb.h/rows;if(options.condense&&(cellWidth=0,cellHeight=0),options.avoidOverlap)for(var i2=0;i2<nodes2.length;i2++){var node=nodes2[i2],pos=node._private.position;null!=pos.x&&null!=pos.y||(pos.x=0,pos.y=0);var nbb=node.layoutDimensions(options),p2=options.avoidOverlapPadding,w=nbb.w+p2,h=nbb.h+p2;cellWidth=Math.max(cellWidth,w),cellHeight=Math.max(cellHeight,h)}for(var cellUsed={},used=function used2(row2,col2){return!!cellUsed["c-"+row2+"-"+col2]},use=function use2(row2,col2){cellUsed["c-"+row2+"-"+col2]=!0},row=0,col=0,moveToNextCell=function moveToNextCell2(){++col>=cols&&(col=0,row++)},id2manPos={},_i=0;_i<nodes2.length;_i++){var _node=nodes2[_i],rcPos=options.position(_node);if(rcPos&&(void 0!==rcPos.row||void 0!==rcPos.col)){var _pos={row:rcPos.row,col:rcPos.col};if(void 0===_pos.col)for(_pos.col=0;used(_pos.row,_pos.col);)_pos.col++;else if(void 0===_pos.row)for(_pos.row=0;used(_pos.row,_pos.col);)_pos.row++;id2manPos[_node.id()]=_pos,use(_pos.row,_pos.col)}}var getPos=function getPos2(element2,i3){var x,y;if(element2.locked()||element2.isParent())return!1;var rcPos2=id2manPos[element2.id()];if(rcPos2)x=rcPos2.col*cellWidth+cellWidth/2+bb.x1,y=rcPos2.row*cellHeight+cellHeight/2+bb.y1;else{for(;used(row,col);)moveToNextCell();x=col*cellWidth+cellWidth/2+bb.x1,y=row*cellHeight+cellHeight/2+bb.y1,use(row,col),moveToNextCell()}return{x:x,y:y}};nodes2.layoutPositions(this,options,getPos)}return this};var defaults$2={ready:function ready(){},stop:function stop(){}};function NullLayout(options){this.options=extend({},defaults$2,options)}NullLayout.prototype.run=function(){var options=this.options,eles=options.eles,layout2=this;return options.cy,layout2.emit("layoutstart"),eles.nodes().positions((function(){return{x:0,y:0}})),layout2.one("layoutready",options.ready),layout2.emit("layoutready"),layout2.one("layoutstop",options.stop),layout2.emit("layoutstop"),this},NullLayout.prototype.stop=function(){return this};var defaults$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(node,i2){return!0},ready:void 0,stop:void 0,transform:function transform(node,position2){return position2}};function PresetLayout(options){this.options=extend({},defaults$1,options)}PresetLayout.prototype.run=function(){var options=this.options,nodes2=options.eles.nodes(),posIsFn=fn$6(options.positions);function getPosition(node){if(null==options.positions)return copyPosition(node.position());if(posIsFn)return options.positions(node);var pos=options.positions[node._private.data.id];return null==pos?null:pos}return nodes2.layoutPositions(this,options,(function(node,i2){var position2=getPosition(node);return!node.locked()&&null!=position2&&position2})),this};var defaults={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(node,i2){return!0},ready:void 0,stop:void 0,transform:function transform(node,position2){return position2}};function RandomLayout(options){this.options=extend({},defaults,options)}RandomLayout.prototype.run=function(){var options=this.options,cy=options.cy,eles=options.eles,bb=makeBoundingBox(options.boundingBox?options.boundingBox:{x1:0,y1:0,w:cy.width(),h:cy.height()}),getPos=function getPos2(node,i2){return{x:bb.x1+Math.round(Math.random()*bb.w),y:bb.y1+Math.round(Math.random()*bb.h)}};return eles.nodes().layoutPositions(this,options,getPos),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(options){this.options=options,this.notifications=0}var noop=function noop2(){},throwImgErr=function throwImgErr2(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop,notify:function notify(){this.notifications++},init:noop,isHeadless:function isHeadless(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$f={arrowShapeWidth:.3,registerArrowShapes:function(){var arrowShapes=this.arrowShapes={},renderer3=this,bbCollide=function bbCollide2(x,y,size,angle,translation,edgeWidth,padding){var x1=translation.x-size/2-padding,x2=translation.x+size/2+padding,y1=translation.y-size/2-padding,y2=translation.y+size/2+padding;return x1<=x&&x<=x2&&y1<=y&&y<=y2},transform=function transform2(x,y,size,angle,translation){var xRotated=x*Math.cos(angle)-y*Math.sin(angle),yScaled=(x*Math.sin(angle)+y*Math.cos(angle))*size;return{x:xRotated*size+translation.x,y:yScaled+translation.y}},transformPoints=function transformPoints2(pts2,size,angle,translation){for(var retPts=[],i2=0;i2<pts2.length;i2+=2){var x=pts2[i2],y=pts2[i2+1];retPts.push(transform(x,y,size,angle,translation))}return retPts},pointsToArr=function pointsToArr2(pts2){for(var ret=[],i2=0;i2<pts2.length;i2++){var p2=pts2[i2];ret.push(p2.x,p2.y)}return ret},standardGap=function standardGap2(edge){return edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").pfValue*2},defineArrowShape=function defineArrowShape2(name,defn){string(defn)&&(defn=arrowShapes[defn]),arrowShapes[name]=extend({name:name,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function collide(x,y,size,angle,translation,padding){var points=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,points)},roughCollide:bbCollide,draw:function draw2(context,size,angle,translation){var points=transformPoints(this.points,size,angle,translation);renderer3.arrowShapeImpl("polygon")(context,points)},spacing:function spacing(edge){return 0},gap:standardGap},defn)};defineArrowShape("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),defineArrowShape("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),defineArrowShape("arrow","triangle"),defineArrowShape("triangle-backcurve",{points:arrowShapes.triangle.points,controlPoint:[0,-.15],roughCollide:bbCollide,draw:function draw2(context,size,angle,translation,edgeWidth){var ptsTrans=transformPoints(this.points,size,angle,translation),ctrlPt=this.controlPoint,ctrlPtTrans=transform(ctrlPt[0],ctrlPt[1],size,angle,translation);renderer3.arrowShapeImpl(this.name)(context,ptsTrans,ctrlPtTrans)},gap:function gap(edge){return.8*standardGap(edge)}}),defineArrowShape("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function collide(x,y,size,angle,translation,edgeWidth,padding){var triPts=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation)),teePts=pointsToArr(transformPoints(this.pointsTee,size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,triPts)||pointInsidePolygonPoints(x,y,teePts)},draw:function draw2(context,size,angle,translation,edgeWidth){var triPts=transformPoints(this.points,size,angle,translation),teePts=transformPoints(this.pointsTee,size,angle,translation);renderer3.arrowShapeImpl(this.name)(context,triPts,teePts)}}),defineArrowShape("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function collide(x,y,size,angle,translation,edgeWidth,padding){var t=translation,circleInside=Math.pow(t.x-x,2)+Math.pow(t.y-y,2)<=Math.pow((size+2*padding)*this.radius,2),triPts=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,triPts)||circleInside},draw:function draw2(context,size,angle,translation,edgeWidth){var triPts=transformPoints(this.pointsTr,size,angle,translation);renderer3.arrowShapeImpl(this.name)(context,triPts,translation.x,translation.y,this.radius*size)},spacing:function spacing(edge){return renderer3.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.radius}}),defineArrowShape("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function crossLinePts(size,edgeWidth){var p2=this.baseCrossLinePts.slice(),shiftFactor=edgeWidth/size,y0=3,y1=5;return p2[y0]=p2[y0]-shiftFactor,p2[y1]=p2[y1]-shiftFactor,p2},collide:function collide(x,y,size,angle,translation,edgeWidth,padding){var triPts=pointsToArr(transformPoints(this.points,size+2*padding,angle,translation)),teePts=pointsToArr(transformPoints(this.crossLinePts(size,edgeWidth),size+2*padding,angle,translation));return pointInsidePolygonPoints(x,y,triPts)||pointInsidePolygonPoints(x,y,teePts)},draw:function draw2(context,size,angle,translation,edgeWidth){var triPts=transformPoints(this.points,size,angle,translation),crossLinePts=transformPoints(this.crossLinePts(size,edgeWidth),size,angle,translation);renderer3.arrowShapeImpl(this.name)(context,triPts,crossLinePts)}}),defineArrowShape("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function gap(edge){return.525*standardGap(edge)}}),defineArrowShape("circle",{radius:.15,collide:function collide(x,y,size,angle,translation,edgeWidth,padding){var t=translation;return Math.pow(t.x-x,2)+Math.pow(t.y-y,2)<=Math.pow((size+2*padding)*this.radius,2)},draw:function draw2(context,size,angle,translation,edgeWidth){renderer3.arrowShapeImpl(this.name)(context,translation.x,translation.y,this.radius*size)},spacing:function spacing(edge){return renderer3.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.radius}}),defineArrowShape("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function spacing(edge){return 1},gap:function gap(edge){return 1}}),defineArrowShape("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),defineArrowShape("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function gap(edge){return edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").value}}),defineArrowShape("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function gap(edge){return.95*edge.pstyle("width").pfValue*edge.pstyle("arrow-scale").value}})}},BRp$e={projectIntoViewport:function(clientX,clientY){var cy=this.cy,offsets=this.findContainerClientCoords(),offsetLeft=offsets[0],offsetTop=offsets[1],scale=offsets[4],pan=cy.pan(),zoom=cy.zoom();return[((clientX-offsetLeft)/scale-pan.x)/zoom,((clientY-offsetTop)/scale-pan.y)/zoom]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var container=this.container,rect=container.getBoundingClientRect(),style=this.cy.window().getComputedStyle(container),styleValue=function styleValue2(name){return parseFloat(style.getPropertyValue(name))},padding={left:styleValue("padding-left"),right:styleValue("padding-right"),top:styleValue("padding-top"),bottom:styleValue("padding-bottom")},border={left:styleValue("border-left-width"),right:styleValue("border-right-width"),top:styleValue("border-top-width"),bottom:styleValue("border-bottom-width")},clientWidth=container.clientWidth,clientHeight=container.clientHeight,paddingHor=padding.left+padding.right,paddingVer=padding.top+padding.bottom,borderHor=border.left+border.right,scale=rect.width/(clientWidth+borderHor),unscaledW=clientWidth-paddingHor,unscaledH=clientHeight-paddingVer,left=rect.left+padding.left+border.left,top=rect.top+padding.top+border.top;return this.containerBB=[left,top,unscaledW,unscaledH,scale]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(x,y,interactiveElementsOnly,isTouch){return this.findNearestElements(x,y,interactiveElementsOnly,isTouch)[0]},findNearestElements:function(x,y,interactiveElementsOnly,isTouch){var nearEdge,nearNode,self2=this,r=this,eles=r.getCachedZSortedEles(),near=[],zoom=r.cy.zoom(),hasCompounds=r.cy.hasCompoundNodes(),edgeThreshold=(isTouch?24:8)/zoom,nodeThreshold=(isTouch?8:2)/zoom,labelThreshold=(isTouch?8:2)/zoom,minSqDist=1/0;function addEle(ele2,sqDist){if(ele2.isNode()){if(nearNode)return;nearNode=ele2,near.push(ele2)}if(ele2.isEdge()&&(null==sqDist||sqDist<minSqDist))if(nearEdge){if(nearEdge.pstyle("z-compound-depth").value===ele2.pstyle("z-compound-depth").value&&nearEdge.pstyle("z-compound-depth").value===ele2.pstyle("z-compound-depth").value)for(var i3=0;i3<near.length;i3++)if(near[i3].isEdge()){near[i3]=ele2,nearEdge=ele2,minSqDist=null!=sqDist?sqDist:minSqDist;break}}else near.push(ele2),nearEdge=ele2,minSqDist=null!=sqDist?sqDist:minSqDist}function checkNode(node){var width=node.outerWidth()+2*nodeThreshold,height=node.outerHeight()+2*nodeThreshold,hw=width/2,hh=height/2,pos=node.position();if(pos.x-hw<=x&&x<=pos.x+hw&&pos.y-hh<=y&&y<=pos.y+hh&&r.nodeShapes[self2.getNodeShape(node)].checkPoint(x,y,0,width,height,pos.x,pos.y))return addEle(node,0),!0}function checkEdge(edge){var sqDist,_p=edge._private,rs=_p.rscratch,styleWidth=edge.pstyle("width").pfValue,scale=edge.pstyle("arrow-scale").value,width=styleWidth/2+edgeThreshold,widthSq=width*width,width2=2*width,src=_p.source,tgt=_p.target;if("segments"===rs.edgeType||"straight"===rs.edgeType||"haystack"===rs.edgeType){for(var pts2=rs.allpts,i3=0;i3+3<pts2.length;i3+=2)if(inLineVicinity(x,y,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3],width2)&&widthSq>(sqDist=sqdistToFiniteLine(x,y,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3])))return addEle(edge,sqDist),!0}else if("bezier"===rs.edgeType||"multibezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType)for(pts2=rs.allpts,i3=0;i3+5<rs.allpts.length;i3+=4)if(inBezierVicinity(x,y,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3],pts2[i3+4],pts2[i3+5],width2)&&widthSq>(sqDist=sqdistToQuadraticBezier(x,y,pts2[i3],pts2[i3+1],pts2[i3+2],pts2[i3+3],pts2[i3+4],pts2[i3+5])))return addEle(edge,sqDist),!0;src=src||_p.source,tgt=tgt||_p.target;var arSize=self2.getArrowWidth(styleWidth,scale),arrows=[{name:"source",x:rs.arrowStartX,y:rs.arrowStartY,angle:rs.srcArrowAngle},{name:"target",x:rs.arrowEndX,y:rs.arrowEndY,angle:rs.tgtArrowAngle},{name:"mid-source",x:rs.midX,y:rs.midY,angle:rs.midsrcArrowAngle},{name:"mid-target",x:rs.midX,y:rs.midY,angle:rs.midtgtArrowAngle}];for(i3=0;i3<arrows.length;i3++){var ar=arrows[i3],shape=r.arrowShapes[edge.pstyle(ar.name+"-arrow-shape").value],edgeWidth=edge.pstyle("width").pfValue;if(shape.roughCollide(x,y,arSize,ar.angle,{x:ar.x,y:ar.y},edgeWidth,edgeThreshold)&&shape.collide(x,y,arSize,ar.angle,{x:ar.x,y:ar.y},edgeWidth,edgeThreshold))return addEle(edge),!0}hasCompounds&&near.length>0&&(checkNode(src),checkNode(tgt))}function preprop(obj,name,pre){return getPrefixedProperty(obj,name,pre)}function checkLabel(ele2,prefix){var prefixDash,_p=ele2._private,th=labelThreshold;prefixDash=prefix?prefix+"-":"",ele2.boundingBox();var bb=_p.labelBounds[prefix||"main"],text=ele2.pstyle(prefixDash+"label").value;if("yes"===ele2.pstyle("text-events").strValue&&text){var lx=preprop(_p.rscratch,"labelX",prefix),ly=preprop(_p.rscratch,"labelY",prefix),theta=preprop(_p.rscratch,"labelAngle",prefix),ox=ele2.pstyle(prefixDash+"text-margin-x").pfValue,oy=ele2.pstyle(prefixDash+"text-margin-y").pfValue,lx1=bb.x1-th-ox,lx2=bb.x2+th-ox,ly1=bb.y1-th-oy,ly2=bb.y2+th-oy;if(theta){var cos2=Math.cos(theta),sin2=Math.sin(theta),rotate=function rotate2(x2,y2){return{x:(x2-=lx)*cos2-(y2-=ly)*sin2+lx,y:x2*sin2+y2*cos2+ly}},px1y1=rotate(lx1,ly1),px1y2=rotate(lx1,ly2),px2y1=rotate(lx2,ly1),px2y2=rotate(lx2,ly2),points=[px1y1.x+ox,px1y1.y+oy,px2y1.x+ox,px2y1.y+oy,px2y2.x+ox,px2y2.y+oy,px1y2.x+ox,px1y2.y+oy];if(pointInsidePolygonPoints(x,y,points))return addEle(ele2),!0}else if(inBoundingBox(bb,x,y))return addEle(ele2),!0}}interactiveElementsOnly&&(eles=eles.interactive);for(var i2=eles.length-1;i2>=0;i2--){var ele=eles[i2];ele.isNode()?checkNode(ele)||checkLabel(ele):checkEdge(ele)||checkLabel(ele)||checkLabel(ele,"source")||checkLabel(ele,"target")}return near},getAllInBox:function(x1,y1,x2,y2){for(var eles=this.getCachedZSortedEles().interactive,box=[],x1c=Math.min(x1,x2),x2c=Math.max(x1,x2),y1c=Math.min(y1,y2),y2c=Math.max(y1,y2),boxBb=makeBoundingBox({x1:x1=x1c,y1:y1=y1c,x2:x2=x2c,y2:y2=y2c}),e=0;e<eles.length;e++){var ele=eles[e];if(ele.isNode()){var node=ele,nodeBb=node.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});boundingBoxesIntersect(boxBb,nodeBb)&&!boundingBoxInBoundingBox(nodeBb,boxBb)&&box.push(node)}else{var edge=ele,_p=edge._private,rs=_p.rscratch;if(null!=rs.startX&&null!=rs.startY&&!inBoundingBox(boxBb,rs.startX,rs.startY))continue;if(null!=rs.endX&&null!=rs.endY&&!inBoundingBox(boxBb,rs.endX,rs.endY))continue;if("bezier"===rs.edgeType||"multibezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType||"segments"===rs.edgeType||"haystack"===rs.edgeType){for(var pts2=_p.rstyle.bezierPts||_p.rstyle.linePts||_p.rstyle.haystackPts,allInside=!0,i2=0;i2<pts2.length;i2++)if(!pointInBoundingBox(boxBb,pts2[i2])){allInside=!1;break}allInside&&box.push(edge)}else"haystack"!==rs.edgeType&&"straight"!==rs.edgeType||box.push(edge)}}return box}},BRp$d={calculateArrowAngles:function(edge){var dispX,dispY,startX,startY,endX,endY,rs=edge._private.rscratch,isHaystack="haystack"===rs.edgeType,isBezier="bezier"===rs.edgeType,isMultibezier="multibezier"===rs.edgeType,isSegments="segments"===rs.edgeType,isCompound="compound"===rs.edgeType,isSelf="self"===rs.edgeType;if(isHaystack?(startX=rs.haystackPts[0],startY=rs.haystackPts[1],endX=rs.haystackPts[2],endY=rs.haystackPts[3]):(startX=rs.arrowStartX,startY=rs.arrowStartY,endX=rs.arrowEndX,endY=rs.arrowEndY),midX=rs.midX,midY=rs.midY,isSegments)dispX=startX-rs.segpts[0],dispY=startY-rs.segpts[1];else if(isMultibezier||isCompound||isSelf||isBezier){var pts2=rs.allpts;dispX=startX-qbezierAt(pts2[0],pts2[2],pts2[4],.1),dispY=startY-qbezierAt(pts2[1],pts2[3],pts2[5],.1)}else dispX=startX-midX,dispY=startY-midY;rs.srcArrowAngle=getAngleFromDisp(dispX,dispY);var midX=rs.midX,midY=rs.midY;if(isHaystack&&(midX=(startX+endX)/2,midY=(startY+endY)/2),dispX=endX-startX,dispY=endY-startY,isSegments)if((pts2=rs.allpts).length/2%2==0){var i1=(i2=pts2.length/2)-2;dispX=pts2[i2]-pts2[i1],dispY=pts2[i2+1]-pts2[i1+1]}else{i1=(i2=pts2.length/2-1)-2;var i2,i3=i2+2;dispX=pts2[i2]-pts2[i1],dispY=pts2[i2+1]-pts2[i1+1]}else if(isMultibezier||isCompound||isSelf){var bp0x,bp0y,bp1x,bp1y,pts2=rs.allpts;if(rs.ctrlpts.length/2%2==0){var p1=2+(ic=2+(p0=pts2.length/2-1));bp0x=qbezierAt(pts2[p0],pts2[ic],pts2[p1],0),bp0y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],0),bp1x=qbezierAt(pts2[p0],pts2[ic],pts2[p1],1e-4),bp1y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],1e-4)}else{var ic,p0;p1=2+(ic=pts2.length/2-1),bp0x=qbezierAt(pts2[p0=ic-2],pts2[ic],pts2[p1],.4999),bp0y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],.4999),bp1x=qbezierAt(pts2[p0],pts2[ic],pts2[p1],.5),bp1y=qbezierAt(pts2[p0+1],pts2[ic+1],pts2[p1+1],.5)}dispX=bp1x-bp0x,dispY=bp1y-bp0y}if(rs.midtgtArrowAngle=getAngleFromDisp(dispX,dispY),rs.midDispX=dispX,rs.midDispY=dispY,dispX*=-1,dispY*=-1,isSegments&&((pts2=rs.allpts).length/2%2==0||(dispX=-(pts2[i3=2+(i2=pts2.length/2-1)]-pts2[i2]),dispY=-(pts2[i3+1]-pts2[i2+1]))),rs.midsrcArrowAngle=getAngleFromDisp(dispX,dispY),isSegments)dispX=endX-rs.segpts[rs.segpts.length-2],dispY=endY-rs.segpts[rs.segpts.length-1];else if(isMultibezier||isCompound||isSelf||isBezier){var l=(pts2=rs.allpts).length;dispX=endX-qbezierAt(pts2[l-6],pts2[l-4],pts2[l-2],.9),dispY=endY-qbezierAt(pts2[l-5],pts2[l-3],pts2[l-1],.9)}else dispX=endX-midX,dispY=endY-midY;rs.tgtArrowAngle=getAngleFromDisp(dispX,dispY)}};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(edgeWidth,scale){var cache2=this.arrowWidthCache=this.arrowWidthCache||{},cachedVal=cache2[edgeWidth+", "+scale];return cachedVal||(cachedVal=Math.max(Math.pow(13.37*edgeWidth,.9),29)*scale,cache2[edgeWidth+", "+scale]=cachedVal,cachedVal)};var BRp$c={};function getPts(pts2){var retPts=[];if(null!=pts2){for(var i2=0;i2<pts2.length;i2+=2){var x=pts2[i2],y=pts2[i2+1];retPts.push({x:x,y:y})}return retPts}}BRp$c.findMidptPtsEtc=function(edge,pairInfo){var midptPts,posPts=pairInfo.posPts,intersectionPts=pairInfo.intersectionPts,vectorNormInverse=pairInfo.vectorNormInverse,srcManEndpt=edge.pstyle("source-endpoint"),tgtManEndpt=edge.pstyle("target-endpoint"),haveManualEndPts=null!=srcManEndpt.units&&null!=tgtManEndpt.units,recalcVectorNormInverse=function recalcVectorNormInverse2(x12,y12,x22,y22){var dy=y22-y12,dx=x22-x12,l=Math.sqrt(dx*dx+dy*dy);return{x:-dy/l,y:dx/l}};switch(edge.pstyle("edge-distances").value){case"node-position":midptPts=posPts;break;case"intersection":midptPts=intersectionPts;break;case"endpoints":if(haveManualEndPts){var _this$manualEndptToPx2=_slicedToArray(this.manualEndptToPx(edge.source()[0],srcManEndpt),2),x1=_this$manualEndptToPx2[0],y1=_this$manualEndptToPx2[1],_this$manualEndptToPx4=_slicedToArray(this.manualEndptToPx(edge.target()[0],tgtManEndpt),2),x2=_this$manualEndptToPx4[0],y2=_this$manualEndptToPx4[1],endPts={x1:x1,y1:y1,x2:x2,y2:y2};vectorNormInverse=recalcVectorNormInverse(x1,y1,x2,y2),midptPts=endPts}else warn("Edge ".concat(edge.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),midptPts=intersectionPts}return{midptPts:midptPts,vectorNormInverse:vectorNormInverse}},BRp$c.findHaystackPoints=function(edges){for(var i2=0;i2<edges.length;i2++){var edge=edges[i2],_p=edge._private,rs=_p.rscratch;if(!rs.haystack){var angle=2*Math.random()*Math.PI;rs.source={x:Math.cos(angle),y:Math.sin(angle)},angle=2*Math.random()*Math.PI,rs.target={x:Math.cos(angle),y:Math.sin(angle)}}var src=_p.source,tgt=_p.target,srcPos=src.position(),tgtPos=tgt.position(),srcW=src.width(),tgtW=tgt.width(),srcH=src.height(),tgtH=tgt.height(),halfRadius=edge.pstyle("haystack-radius").value/2;rs.haystackPts=rs.allpts=[rs.source.x*srcW*halfRadius+srcPos.x,rs.source.y*srcH*halfRadius+srcPos.y,rs.target.x*tgtW*halfRadius+tgtPos.x,rs.target.y*tgtH*halfRadius+tgtPos.y],rs.midX=(rs.allpts[0]+rs.allpts[2])/2,rs.midY=(rs.allpts[1]+rs.allpts[3])/2,rs.edgeType="haystack",rs.haystack=!0,this.storeEdgeProjections(edge),this.calculateArrowAngles(edge),this.recalculateEdgeLabelProjections(edge),this.calculateLabelAngles(edge)}},BRp$c.findSegmentsPoints=function(edge,pairInfo){var rs=edge._private.rscratch,segmentWs=edge.pstyle("segment-weights"),segmentDs=edge.pstyle("segment-distances"),segmentsN=Math.min(segmentWs.pfValue.length,segmentDs.pfValue.length);rs.edgeType="segments",rs.segpts=[];for(var s=0;s<segmentsN;s++){var w=segmentWs.pfValue[s],d=segmentDs.pfValue[s],w1=1-w,w2=w,_this$findMidptPtsEtc=this.findMidptPtsEtc(edge,pairInfo),midptPts=_this$findMidptPtsEtc.midptPts,vectorNormInverse=_this$findMidptPtsEtc.vectorNormInverse,adjustedMidpt={x:midptPts.x1*w1+midptPts.x2*w2,y:midptPts.y1*w1+midptPts.y2*w2};rs.segpts.push(adjustedMidpt.x+vectorNormInverse.x*d,adjustedMidpt.y+vectorNormInverse.y*d)}},BRp$c.findLoopPoints=function(edge,pairInfo,i2,edgeIsUnbundled){var rs=edge._private.rscratch,dirCounts=pairInfo.dirCounts,srcPos=pairInfo.srcPos,ctrlptDists=edge.pstyle("control-point-distances"),ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,loopDir=edge.pstyle("loop-direction").pfValue,loopSwp=edge.pstyle("loop-sweep").pfValue,stepSize=edge.pstyle("control-point-step-size").pfValue;rs.edgeType="self";var j=i2,loopDist=stepSize;edgeIsUnbundled&&(j=0,loopDist=ctrlptDist);var loopAngle=loopDir-Math.PI/2,outAngle=loopAngle-loopSwp/2,inAngle=loopAngle+loopSwp/2,dc=String(loopDir+"_"+loopSwp);j=void 0===dirCounts[dc]?dirCounts[dc]=0:++dirCounts[dc],rs.ctrlpts=[srcPos.x+1.4*Math.cos(outAngle)*loopDist*(j/3+1),srcPos.y+1.4*Math.sin(outAngle)*loopDist*(j/3+1),srcPos.x+1.4*Math.cos(inAngle)*loopDist*(j/3+1),srcPos.y+1.4*Math.sin(inAngle)*loopDist*(j/3+1)]},BRp$c.findCompoundLoopPoints=function(edge,pairInfo,i2,edgeIsUnbundled){var rs=edge._private.rscratch;rs.edgeType="compound";var srcPos=pairInfo.srcPos,tgtPos=pairInfo.tgtPos,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,stepSize=edge.pstyle("control-point-step-size").pfValue,ctrlptDists=edge.pstyle("control-point-distances"),ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,j=i2,loopDist=stepSize;edgeIsUnbundled&&(j=0,loopDist=ctrlptDist);var loopW=50,loopaPos={x:srcPos.x-srcW/2,y:srcPos.y-srcH/2},loopbPos={x:tgtPos.x-tgtW/2,y:tgtPos.y-tgtH/2},loopPos={x:Math.min(loopaPos.x,loopbPos.x),y:Math.min(loopaPos.y,loopbPos.y)},minCompoundStretch=.5,compoundStretchA=Math.max(minCompoundStretch,Math.log(.01*srcW)),compoundStretchB=Math.max(minCompoundStretch,Math.log(.01*tgtW));rs.ctrlpts=[loopPos.x,loopPos.y-(1+Math.pow(loopW,1.12)/100)*loopDist*(j/3+1)*compoundStretchA,loopPos.x-(1+Math.pow(loopW,1.12)/100)*loopDist*(j/3+1)*compoundStretchB,loopPos.y]},BRp$c.findStraightEdgePoints=function(edge){edge._private.rscratch.edgeType="straight"},BRp$c.findBezierPoints=function(edge,pairInfo,i2,edgeIsUnbundled,edgeIsSwapped){var rs=edge._private.rscratch,stepSize=edge.pstyle("control-point-step-size").pfValue,ctrlptDists=edge.pstyle("control-point-distances"),ctrlptWs=edge.pstyle("control-point-weights"),bezierN=ctrlptDists&&ctrlptWs?Math.min(ctrlptDists.value.length,ctrlptWs.value.length):1,ctrlptDist=ctrlptDists?ctrlptDists.pfValue[0]:void 0,ctrlptWeight=ctrlptWs.value[0],multi=edgeIsUnbundled;rs.edgeType=multi?"multibezier":"bezier",rs.ctrlpts=[];for(var b=0;b<bezierN;b++){var normctrlptDist=(.5-pairInfo.eles.length/2+i2)*stepSize*(edgeIsSwapped?-1:1),manctrlptDist=void 0,sign=signum(normctrlptDist);multi&&(ctrlptDist=ctrlptDists?ctrlptDists.pfValue[b]:stepSize,ctrlptWeight=ctrlptWs.value[b]);var distanceFromMidpoint=void 0!==(manctrlptDist=edgeIsUnbundled?ctrlptDist:void 0!==ctrlptDist?sign*ctrlptDist:void 0)?manctrlptDist:normctrlptDist,w1=1-ctrlptWeight,w2=ctrlptWeight,_this$findMidptPtsEtc2=this.findMidptPtsEtc(edge,pairInfo),midptPts=_this$findMidptPtsEtc2.midptPts,vectorNormInverse=_this$findMidptPtsEtc2.vectorNormInverse,adjustedMidpt={x:midptPts.x1*w1+midptPts.x2*w2,y:midptPts.y1*w1+midptPts.y2*w2};rs.ctrlpts.push(adjustedMidpt.x+vectorNormInverse.x*distanceFromMidpoint,adjustedMidpt.y+vectorNormInverse.y*distanceFromMidpoint)}},BRp$c.findTaxiPoints=function(edge,pairInfo){var rs=edge._private.rscratch;rs.edgeType="segments";var VERTICAL="vertical",HORIZONTAL="horizontal",LEFTWARD="leftward",RIGHTWARD="rightward",DOWNWARD="downward",UPWARD="upward",AUTO="auto",posPts=pairInfo.posPts,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,dIncludesNodeBody="node-position"!==edge.pstyle("edge-distances").value,taxiDir=edge.pstyle("taxi-direction").value,rawTaxiDir=taxiDir,taxiTurn=edge.pstyle("taxi-turn"),turnIsPercent="%"===taxiTurn.units,taxiTurnPfVal=taxiTurn.pfValue,turnIsNegative=taxiTurnPfVal<0,minD=edge.pstyle("taxi-turn-min-distance").pfValue,dw=dIncludesNodeBody?(srcW+tgtW)/2:0,dh=dIncludesNodeBody?(srcH+tgtH)/2:0,pdx=posPts.x2-posPts.x1,pdy=posPts.y2-posPts.y1,subDWH=function subDWH2(dxy,dwh){return dxy>0?Math.max(dxy-dwh,0):Math.min(dxy+dwh,0)},dx=subDWH(pdx,dw),dy=subDWH(pdy,dh),isExplicitDir=!1;rawTaxiDir===AUTO?taxiDir=Math.abs(dx)>Math.abs(dy)?HORIZONTAL:VERTICAL:rawTaxiDir===UPWARD||rawTaxiDir===DOWNWARD?(taxiDir=VERTICAL,isExplicitDir=!0):rawTaxiDir!==LEFTWARD&&rawTaxiDir!==RIGHTWARD||(taxiDir=HORIZONTAL,isExplicitDir=!0);var d,isVert=taxiDir===VERTICAL,l=isVert?dy:dx,pl=isVert?pdy:pdx,sgnL=signum(pl),forcedDir=!1;isExplicitDir&&(turnIsPercent||turnIsNegative)||!(rawTaxiDir===DOWNWARD&&pl<0||rawTaxiDir===UPWARD&&pl>0||rawTaxiDir===LEFTWARD&&pl>0||rawTaxiDir===RIGHTWARD&&pl<0)||(l=(sgnL*=-1)*Math.abs(l),forcedDir=!0);var getIsTooClose=function getIsTooClose2(d2){return Math.abs(d2)<minD||Math.abs(d2)>=Math.abs(l)},isTooCloseSrc=getIsTooClose(d=turnIsPercent?(taxiTurnPfVal<0?1+taxiTurnPfVal:taxiTurnPfVal)*l:(taxiTurnPfVal<0?l:0)+taxiTurnPfVal*sgnL),isTooCloseTgt=getIsTooClose(Math.abs(l)-Math.abs(d));if(!isTooCloseSrc&&!isTooCloseTgt||forcedDir)if(isVert){var _y4=posPts.y1+d+(dIncludesNodeBody?srcH/2*sgnL:0),_x4=posPts.x1,_x5=posPts.x2;rs.segpts=[_x4,_y4,_x5,_y4]}else{var _x6=posPts.x1+d+(dIncludesNodeBody?srcW/2*sgnL:0),_y5=posPts.y1,_y6=posPts.y2;rs.segpts=[_x6,_y5,_x6,_y6]}else if(isVert){var lShapeInsideSrc=Math.abs(pl)<=srcH/2,lShapeInsideTgt=Math.abs(pdx)<=tgtW/2;if(lShapeInsideSrc){var x=(posPts.x1+posPts.x2)/2,y1=posPts.y1,y2=posPts.y2;rs.segpts=[x,y1,x,y2]}else if(lShapeInsideTgt){var y=(posPts.y1+posPts.y2)/2,x1=posPts.x1,x2=posPts.x2;rs.segpts=[x1,y,x2,y]}else rs.segpts=[posPts.x1,posPts.y2]}else{var _lShapeInsideSrc=Math.abs(pl)<=srcW/2,_lShapeInsideTgt=Math.abs(pdy)<=tgtH/2;if(_lShapeInsideSrc){var _y=(posPts.y1+posPts.y2)/2,_x=posPts.x1,_x2=posPts.x2;rs.segpts=[_x,_y,_x2,_y]}else if(_lShapeInsideTgt){var _x3=(posPts.x1+posPts.x2)/2,_y2=posPts.y1,_y3=posPts.y2;rs.segpts=[_x3,_y2,_x3,_y3]}else rs.segpts=[posPts.x2,posPts.y1]}},BRp$c.tryToCorrectInvalidPoints=function(edge,pairInfo){var rs=edge._private.rscratch;if("bezier"===rs.edgeType){var srcPos=pairInfo.srcPos,tgtPos=pairInfo.tgtPos,srcW=pairInfo.srcW,srcH=pairInfo.srcH,tgtW=pairInfo.tgtW,tgtH=pairInfo.tgtH,srcShape=pairInfo.srcShape,tgtShape=pairInfo.tgtShape,badStart=!number$1(rs.startX)||!number$1(rs.startY),badAStart=!number$1(rs.arrowStartX)||!number$1(rs.arrowStartY),badEnd=!number$1(rs.endX)||!number$1(rs.endY),badAEnd=!number$1(rs.arrowEndX)||!number$1(rs.arrowEndY),minCpADist=this.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,startACpDist=dist({x:rs.ctrlpts[0],y:rs.ctrlpts[1]},{x:rs.startX,y:rs.startY}),closeStartACp=startACpDist<minCpADist,endACpDist=dist({x:rs.ctrlpts[0],y:rs.ctrlpts[1]},{x:rs.endX,y:rs.endY}),closeEndACp=endACpDist<minCpADist,overlapping=!1;if(badStart||badAStart||closeStartACp){overlapping=!0;var cpD={x:rs.ctrlpts[0]-srcPos.x,y:rs.ctrlpts[1]-srcPos.y},cpL=Math.sqrt(cpD.x*cpD.x+cpD.y*cpD.y),cpM={x:cpD.x/cpL,y:cpD.y/cpL},radius=Math.max(srcW,srcH),cpProj={x:rs.ctrlpts[0]+2*cpM.x*radius,y:rs.ctrlpts[1]+2*cpM.y*radius},srcCtrlPtIntn=srcShape.intersectLine(srcPos.x,srcPos.y,srcW,srcH,cpProj.x,cpProj.y,0);closeStartACp?(rs.ctrlpts[0]=rs.ctrlpts[0]+cpM.x*(minCpADist-startACpDist),rs.ctrlpts[1]=rs.ctrlpts[1]+cpM.y*(minCpADist-startACpDist)):(rs.ctrlpts[0]=srcCtrlPtIntn[0]+cpM.x*minCpADist,rs.ctrlpts[1]=srcCtrlPtIntn[1]+cpM.y*minCpADist)}if(badEnd||badAEnd||closeEndACp){overlapping=!0;var _cpD={x:rs.ctrlpts[0]-tgtPos.x,y:rs.ctrlpts[1]-tgtPos.y},_cpL=Math.sqrt(_cpD.x*_cpD.x+_cpD.y*_cpD.y),_cpM={x:_cpD.x/_cpL,y:_cpD.y/_cpL},_radius=Math.max(srcW,srcH),_cpProj={x:rs.ctrlpts[0]+2*_cpM.x*_radius,y:rs.ctrlpts[1]+2*_cpM.y*_radius},tgtCtrlPtIntn=tgtShape.intersectLine(tgtPos.x,tgtPos.y,tgtW,tgtH,_cpProj.x,_cpProj.y,0);closeEndACp?(rs.ctrlpts[0]=rs.ctrlpts[0]+_cpM.x*(minCpADist-endACpDist),rs.ctrlpts[1]=rs.ctrlpts[1]+_cpM.y*(minCpADist-endACpDist)):(rs.ctrlpts[0]=tgtCtrlPtIntn[0]+_cpM.x*minCpADist,rs.ctrlpts[1]=tgtCtrlPtIntn[1]+_cpM.y*minCpADist)}overlapping&&this.findEndpoints(edge)}},BRp$c.storeAllpts=function(edge){var rs=edge._private.rscratch;if("multibezier"===rs.edgeType||"bezier"===rs.edgeType||"self"===rs.edgeType||"compound"===rs.edgeType){rs.allpts=[],rs.allpts.push(rs.startX,rs.startY);for(var b=0;b+1<rs.ctrlpts.length;b+=2)rs.allpts.push(rs.ctrlpts[b],rs.ctrlpts[b+1]),b+3<rs.ctrlpts.length&&rs.allpts.push((rs.ctrlpts[b]+rs.ctrlpts[b+2])/2,(rs.ctrlpts[b+1]+rs.ctrlpts[b+3])/2);var m,mt;rs.allpts.push(rs.endX,rs.endY),rs.ctrlpts.length/2%2==0?(m=rs.allpts.length/2-1,rs.midX=rs.allpts[m],rs.midY=rs.allpts[m+1]):(m=rs.allpts.length/2-3,mt=.5,rs.midX=qbezierAt(rs.allpts[m],rs.allpts[m+2],rs.allpts[m+4],mt),rs.midY=qbezierAt(rs.allpts[m+1],rs.allpts[m+3],rs.allpts[m+5],mt))}else if("straight"===rs.edgeType)rs.allpts=[rs.startX,rs.startY,rs.endX,rs.endY],rs.midX=(rs.startX+rs.endX+rs.arrowStartX+rs.arrowEndX)/4,rs.midY=(rs.startY+rs.endY+rs.arrowStartY+rs.arrowEndY)/4;else if("segments"===rs.edgeType)if(rs.allpts=[],rs.allpts.push(rs.startX,rs.startY),rs.allpts.push.apply(rs.allpts,rs.segpts),rs.allpts.push(rs.endX,rs.endY),rs.segpts.length%4==0){var i2=rs.segpts.length/2,i1=i2-2;rs.midX=(rs.segpts[i1]+rs.segpts[i2])/2,rs.midY=(rs.segpts[i1+1]+rs.segpts[i2+1])/2}else{var _i=rs.segpts.length/2-1;rs.midX=rs.segpts[_i],rs.midY=rs.segpts[_i+1]}},BRp$c.checkForInvalidEdgeWarning=function(edge){var rs=edge[0]._private.rscratch;rs.nodesOverlap||number$1(rs.startX)&&number$1(rs.startY)&&number$1(rs.endX)&&number$1(rs.endY)?rs.loggedErr=!1:rs.loggedErr||(rs.loggedErr=!0,warn("Edge `"+edge.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},BRp$c.findEdgeControlPoints=function(edges){var _this=this;if(edges&&0!==edges.length){for(var r=this,hasCompounds=r.cy.hasCompoundNodes(),hashTable={map:new Map$2,get:function get2(pairId2){var map2=this.map.get(pairId2[0]);return null!=map2?map2.get(pairId2[1]):null},set:function set2(pairId2,val){var map2=this.map.get(pairId2[0]);null==map2&&(map2=new Map$2,this.map.set(pairId2[0],map2)),map2.set(pairId2[1],val)}},pairIds=[],haystackEdges=[],i2=0;i2<edges.length;i2++){var edge=edges[i2],_p=edge._private,curveStyle=edge.pstyle("curve-style").value;if(!edge.removed()&&edge.takesUpSpace())if("haystack"!==curveStyle){var edgeIsUnbundled="unbundled-bezier"===curveStyle||"segments"===curveStyle||"straight"===curveStyle||"straight-triangle"===curveStyle||"taxi"===curveStyle,edgeIsBezier="unbundled-bezier"===curveStyle||"bezier"===curveStyle,src=_p.source,tgt=_p.target,pairId=[src.poolIndex(),tgt.poolIndex()].sort(),tableEntry=hashTable.get(pairId);null==tableEntry&&(tableEntry={eles:[]},hashTable.set(pairId,tableEntry),pairIds.push(pairId)),tableEntry.eles.push(edge),edgeIsUnbundled&&(tableEntry.hasUnbundled=!0),edgeIsBezier&&(tableEntry.hasBezier=!0)}else haystackEdges.push(edge)}for(var _loop=function _loop2(p3){var pairId2=pairIds[p3],pairInfo=hashTable.get(pairId2),swappedpairInfo=void 0;if(!pairInfo.hasUnbundled){var pllEdges=pairInfo.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));clearArray(pairInfo.eles),pllEdges.forEach((function(edge2){return pairInfo.eles.push(edge2)})),pairInfo.eles.sort((function(edge1,edge2){return edge1.poolIndex()-edge2.poolIndex()}))}var firstEdge=pairInfo.eles[0],src2=firstEdge.source(),tgt2=firstEdge.target();if(src2.poolIndex()>tgt2.poolIndex()){var temp=src2;src2=tgt2,tgt2=temp}var srcPos=pairInfo.srcPos=src2.position(),tgtPos=pairInfo.tgtPos=tgt2.position(),srcW=pairInfo.srcW=src2.outerWidth(),srcH=pairInfo.srcH=src2.outerHeight(),tgtW=pairInfo.tgtW=tgt2.outerWidth(),tgtH=pairInfo.tgtH=tgt2.outerHeight(),srcShape=pairInfo.srcShape=r.nodeShapes[_this.getNodeShape(src2)],tgtShape=pairInfo.tgtShape=r.nodeShapes[_this.getNodeShape(tgt2)];pairInfo.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _i2=0;_i2<pairInfo.eles.length;_i2++){var _edge=pairInfo.eles[_i2],rs=_edge[0]._private.rscratch,_curveStyle=_edge.pstyle("curve-style").value,_edgeIsUnbundled="unbundled-bezier"===_curveStyle||"segments"===_curveStyle||"taxi"===_curveStyle,edgeIsSwapped=!src2.same(_edge.source());if(!pairInfo.calculatedIntersection&&src2!==tgt2&&(pairInfo.hasBezier||pairInfo.hasUnbundled)){pairInfo.calculatedIntersection=!0;var srcOutside=srcShape.intersectLine(srcPos.x,srcPos.y,srcW,srcH,tgtPos.x,tgtPos.y,0),srcIntn=pairInfo.srcIntn=srcOutside,tgtOutside=tgtShape.intersectLine(tgtPos.x,tgtPos.y,tgtW,tgtH,srcPos.x,srcPos.y,0),tgtIntn=pairInfo.tgtIntn=tgtOutside,intersectionPts=pairInfo.intersectionPts={x1:srcOutside[0],x2:tgtOutside[0],y1:srcOutside[1],y2:tgtOutside[1]},posPts=pairInfo.posPts={x1:srcPos.x,x2:tgtPos.x,y1:srcPos.y,y2:tgtPos.y},dy=tgtOutside[1]-srcOutside[1],dx=tgtOutside[0]-srcOutside[0],l=Math.sqrt(dx*dx+dy*dy),vector=pairInfo.vector={x:dx,y:dy},vectorNorm=pairInfo.vectorNorm={x:vector.x/l,y:vector.y/l},vectorNormInverse={x:-vectorNorm.y,y:vectorNorm.x};pairInfo.nodesOverlap=!number$1(l)||tgtShape.checkPoint(srcOutside[0],srcOutside[1],0,tgtW,tgtH,tgtPos.x,tgtPos.y)||srcShape.checkPoint(tgtOutside[0],tgtOutside[1],0,srcW,srcH,srcPos.x,srcPos.y),pairInfo.vectorNormInverse=vectorNormInverse,swappedpairInfo={nodesOverlap:pairInfo.nodesOverlap,dirCounts:pairInfo.dirCounts,calculatedIntersection:!0,hasBezier:pairInfo.hasBezier,hasUnbundled:pairInfo.hasUnbundled,eles:pairInfo.eles,srcPos:tgtPos,tgtPos:srcPos,srcW:tgtW,srcH:tgtH,tgtW:srcW,tgtH:srcH,srcIntn:tgtIntn,tgtIntn:srcIntn,srcShape:tgtShape,tgtShape:srcShape,posPts:{x1:posPts.x2,y1:posPts.y2,x2:posPts.x1,y2:posPts.y1},intersectionPts:{x1:intersectionPts.x2,y1:intersectionPts.y2,x2:intersectionPts.x1,y2:intersectionPts.y1},vector:{x:-vector.x,y:-vector.y},vectorNorm:{x:-vectorNorm.x,y:-vectorNorm.y},vectorNormInverse:{x:-vectorNormInverse.x,y:-vectorNormInverse.y}}}var passedPairInfo=edgeIsSwapped?swappedpairInfo:pairInfo;rs.nodesOverlap=passedPairInfo.nodesOverlap,rs.srcIntn=passedPairInfo.srcIntn,rs.tgtIntn=passedPairInfo.tgtIntn,hasCompounds&&(src2.isParent()||src2.isChild()||tgt2.isParent()||tgt2.isChild())&&(src2.parents().anySame(tgt2)||tgt2.parents().anySame(src2)||src2.same(tgt2)&&src2.isParent())?_this.findCompoundLoopPoints(_edge,passedPairInfo,_i2,_edgeIsUnbundled):src2===tgt2?_this.findLoopPoints(_edge,passedPairInfo,_i2,_edgeIsUnbundled):"segments"===_curveStyle?_this.findSegmentsPoints(_edge,passedPairInfo):"taxi"===_curveStyle?_this.findTaxiPoints(_edge,passedPairInfo):"straight"===_curveStyle||!_edgeIsUnbundled&&pairInfo.eles.length%2==1&&_i2===Math.floor(pairInfo.eles.length/2)?_this.findStraightEdgePoints(_edge):_this.findBezierPoints(_edge,passedPairInfo,_i2,_edgeIsUnbundled,edgeIsSwapped),_this.findEndpoints(_edge),_this.tryToCorrectInvalidPoints(_edge,passedPairInfo),_this.checkForInvalidEdgeWarning(_edge),_this.storeAllpts(_edge),_this.storeEdgeProjections(_edge),_this.calculateArrowAngles(_edge),_this.recalculateEdgeLabelProjections(_edge),_this.calculateLabelAngles(_edge)}},p2=0;p2<pairIds.length;p2++)_loop(p2);this.findHaystackPoints(haystackEdges)}},BRp$c.getSegmentPoints=function(edge){var rs=edge[0]._private.rscratch;if("segments"===rs.edgeType)return this.recalculateRenderedStyle(edge),getPts(rs.segpts)},BRp$c.getControlPoints=function(edge){var rs=edge[0]._private.rscratch,type=rs.edgeType;if("bezier"===type||"multibezier"===type||"self"===type||"compound"===type)return this.recalculateRenderedStyle(edge),getPts(rs.ctrlpts)},BRp$c.getEdgeMidpoint=function(edge){var rs=edge[0]._private.rscratch;return this.recalculateRenderedStyle(edge),{x:rs.midX,y:rs.midY}};var BRp$b={manualEndptToPx:function(node,prop){var r=this,npos=node.position(),w=node.outerWidth(),h=node.outerHeight();if(2===prop.value.length){var p2=[prop.pfValue[0],prop.pfValue[1]];return"%"===prop.units[0]&&(p2[0]=p2[0]*w),"%"===prop.units[1]&&(p2[1]=p2[1]*h),p2[0]+=npos.x,p2[1]+=npos.y,p2}var angle=prop.pfValue[0];angle=-Math.PI/2+angle;var l=2*Math.max(w,h),_p=[npos.x+Math.cos(angle)*l,npos.y+Math.sin(angle)*l];return r.nodeShapes[this.getNodeShape(node)].intersectLine(npos.x,npos.y,w,h,_p[0],_p[1],0)},findEndpoints:function(edge){var intersect,p1,p2,p1_i,p2_i,r=this,source=edge.source()[0],target=edge.target()[0],srcPos=source.position(),tgtPos=target.position(),tgtArShape=edge.pstyle("target-arrow-shape").value,srcArShape=edge.pstyle("source-arrow-shape").value,tgtDist=edge.pstyle("target-distance-from-node").pfValue,srcDist=edge.pstyle("source-distance-from-node").pfValue,curveStyle=edge.pstyle("curve-style").value,rs=edge._private.rscratch,et=rs.edgeType,self2="self"===et||"compound"===et,bezier="bezier"===et||"multibezier"===et||self2,multi="bezier"!==et,lines="straight"===et||"segments"===et,segments="segments"===et,hasEndpts=bezier||multi||lines,overrideEndpts=self2||"taxi"===curveStyle,srcManEndpt=edge.pstyle("source-endpoint"),srcManEndptVal=overrideEndpts?"outside-to-node":srcManEndpt.value,tgtManEndpt=edge.pstyle("target-endpoint"),tgtManEndptVal=overrideEndpts?"outside-to-node":tgtManEndpt.value;if(rs.srcManEndpt=srcManEndpt,rs.tgtManEndpt=tgtManEndpt,bezier){var cpStart=[rs.ctrlpts[0],rs.ctrlpts[1]];p1=multi?[rs.ctrlpts[rs.ctrlpts.length-2],rs.ctrlpts[rs.ctrlpts.length-1]]:cpStart,p2=cpStart}else if(lines){var srcArrowFromPt=segments?rs.segpts.slice(0,2):[tgtPos.x,tgtPos.y];p1=segments?rs.segpts.slice(rs.segpts.length-2):[srcPos.x,srcPos.y],p2=srcArrowFromPt}if("inside-to-node"===tgtManEndptVal)intersect=[tgtPos.x,tgtPos.y];else if(tgtManEndpt.units)intersect=this.manualEndptToPx(target,tgtManEndpt);else if("outside-to-line"===tgtManEndptVal)intersect=rs.tgtIntn;else if("outside-to-node"===tgtManEndptVal||"outside-to-node-or-label"===tgtManEndptVal?p1_i=p1:"outside-to-line"!==tgtManEndptVal&&"outside-to-line-or-label"!==tgtManEndptVal||(p1_i=[srcPos.x,srcPos.y]),intersect=r.nodeShapes[this.getNodeShape(target)].intersectLine(tgtPos.x,tgtPos.y,target.outerWidth(),target.outerHeight(),p1_i[0],p1_i[1],0),"outside-to-node-or-label"===tgtManEndptVal||"outside-to-line-or-label"===tgtManEndptVal){var trs=target._private.rscratch,lw=trs.labelWidth,lh=trs.labelHeight,lx=trs.labelX,ly=trs.labelY,lw2=lw/2,lh2=lh/2,va=target.pstyle("text-valign").value;"top"===va?ly-=lh2:"bottom"===va&&(ly+=lh2);var ha=target.pstyle("text-halign").value;"left"===ha?lx-=lw2:"right"===ha&&(lx+=lw2);var labelIntersect=polygonIntersectLine(p1_i[0],p1_i[1],[lx-lw2,ly-lh2,lx+lw2,ly-lh2,lx+lw2,ly+lh2,lx-lw2,ly+lh2],tgtPos.x,tgtPos.y);if(labelIntersect.length>0){var refPt=srcPos,intSqdist=sqdist(refPt,array2point(intersect)),labIntSqdist=sqdist(refPt,array2point(labelIntersect)),minSqDist=intSqdist;labIntSqdist<intSqdist&&(intersect=labelIntersect,minSqDist=labIntSqdist),labelIntersect.length>2&&sqdist(refPt,{x:labelIntersect[2],y:labelIntersect[3]})<minSqDist&&(intersect=[labelIntersect[2],labelIntersect[3]])}}var arrowEnd=shortenIntersection(intersect,p1,r.arrowShapes[tgtArShape].spacing(edge)+tgtDist),edgeEnd=shortenIntersection(intersect,p1,r.arrowShapes[tgtArShape].gap(edge)+tgtDist);if(rs.endX=edgeEnd[0],rs.endY=edgeEnd[1],rs.arrowEndX=arrowEnd[0],rs.arrowEndY=arrowEnd[1],"inside-to-node"===srcManEndptVal)intersect=[srcPos.x,srcPos.y];else if(srcManEndpt.units)intersect=this.manualEndptToPx(source,srcManEndpt);else if("outside-to-line"===srcManEndptVal)intersect=rs.srcIntn;else if("outside-to-node"===srcManEndptVal||"outside-to-node-or-label"===srcManEndptVal?p2_i=p2:"outside-to-line"!==srcManEndptVal&&"outside-to-line-or-label"!==srcManEndptVal||(p2_i=[tgtPos.x,tgtPos.y]),intersect=r.nodeShapes[this.getNodeShape(source)].intersectLine(srcPos.x,srcPos.y,source.outerWidth(),source.outerHeight(),p2_i[0],p2_i[1],0),"outside-to-node-or-label"===srcManEndptVal||"outside-to-line-or-label"===srcManEndptVal){var srs=source._private.rscratch,_lw=srs.labelWidth,_lh=srs.labelHeight,_lx=srs.labelX,_ly=srs.labelY,_lw2=_lw/2,_lh2=_lh/2,_va=source.pstyle("text-valign").value;"top"===_va?_ly-=_lh2:"bottom"===_va&&(_ly+=_lh2);var _ha=source.pstyle("text-halign").value;"left"===_ha?_lx-=_lw2:"right"===_ha&&(_lx+=_lw2);var _labelIntersect=polygonIntersectLine(p2_i[0],p2_i[1],[_lx-_lw2,_ly-_lh2,_lx+_lw2,_ly-_lh2,_lx+_lw2,_ly+_lh2,_lx-_lw2,_ly+_lh2],srcPos.x,srcPos.y);if(_labelIntersect.length>0){var _refPt=tgtPos,_intSqdist=sqdist(_refPt,array2point(intersect)),_labIntSqdist=sqdist(_refPt,array2point(_labelIntersect)),_minSqDist=_intSqdist;_labIntSqdist<_intSqdist&&(intersect=[_labelIntersect[0],_labelIntersect[1]],_minSqDist=_labIntSqdist),_labelIntersect.length>2&&sqdist(_refPt,{x:_labelIntersect[2],y:_labelIntersect[3]})<_minSqDist&&(intersect=[_labelIntersect[2],_labelIntersect[3]])}}var arrowStart=shortenIntersection(intersect,p2,r.arrowShapes[srcArShape].spacing(edge)+srcDist),edgeStart=shortenIntersection(intersect,p2,r.arrowShapes[srcArShape].gap(edge)+srcDist);rs.startX=edgeStart[0],rs.startY=edgeStart[1],rs.arrowStartX=arrowStart[0],rs.arrowStartY=arrowStart[1],hasEndpts&&(number$1(rs.startX)&&number$1(rs.startY)&&number$1(rs.endX)&&number$1(rs.endY)?rs.badLine=!1:rs.badLine=!0)},getSourceEndpoint:function(edge){var rs=edge[0]._private.rscratch;return this.recalculateRenderedStyle(edge),"haystack"===rs.edgeType?{x:rs.haystackPts[0],y:rs.haystackPts[1]}:{x:rs.arrowStartX,y:rs.arrowStartY}},getTargetEndpoint:function(edge){var rs=edge[0]._private.rscratch;return this.recalculateRenderedStyle(edge),"haystack"===rs.edgeType?{x:rs.haystackPts[2],y:rs.haystackPts[3]}:{x:rs.arrowEndX,y:rs.arrowEndY}}},BRp$a={};function pushBezierPts(r,edge,pts2){for(var qbezierAt$1=function qbezierAt$12(p1,p22,p3,t){return qbezierAt(p1,p22,p3,t)},bpts=edge._private.rstyle.bezierPts,i2=0;i2<r.bezierProjPcts.length;i2++){var p2=r.bezierProjPcts[i2];bpts.push({x:qbezierAt$1(pts2[0],pts2[2],pts2[4],p2),y:qbezierAt$1(pts2[1],pts2[3],pts2[5],p2)})}}BRp$a.storeEdgeProjections=function(edge){var _p=edge._private,rs=_p.rscratch,et=rs.edgeType;if(_p.rstyle.bezierPts=null,_p.rstyle.linePts=null,_p.rstyle.haystackPts=null,"multibezier"===et||"bezier"===et||"self"===et||"compound"===et){_p.rstyle.bezierPts=[];for(var i2=0;i2+5<rs.allpts.length;i2+=4)pushBezierPts(this,edge,rs.allpts.slice(i2,i2+6))}else if("segments"===et){var lpts=_p.rstyle.linePts=[];for(i2=0;i2+1<rs.allpts.length;i2+=2)lpts.push({x:rs.allpts[i2],y:rs.allpts[i2+1]})}else if("haystack"===et){var hpts=rs.haystackPts;_p.rstyle.haystackPts=[{x:hpts[0],y:hpts[1]},{x:hpts[2],y:hpts[3]}]}_p.rstyle.arrowWidth=this.getArrowWidth(edge.pstyle("width").pfValue,edge.pstyle("arrow-scale").value)*this.arrowShapeWidth},BRp$a.recalculateEdgeProjections=function(edges){this.findEdgeControlPoints(edges)};var BRp$9={recalculateNodeLabelProjection:function(node){var content=node.pstyle("label").strValue;if(!emptyString(content)){var textX,textY,_p=node._private,nodeWidth=node.width(),nodeHeight=node.height(),padding=node.padding(),nodePos=node.position(),textHalign=node.pstyle("text-halign").strValue,textValign=node.pstyle("text-valign").strValue,rs=_p.rscratch,rstyle=_p.rstyle;switch(textHalign){case"left":textX=nodePos.x-nodeWidth/2-padding;break;case"right":textX=nodePos.x+nodeWidth/2+padding;break;default:textX=nodePos.x}switch(textValign){case"top":textY=nodePos.y-nodeHeight/2-padding;break;case"bottom":textY=nodePos.y+nodeHeight/2+padding;break;default:textY=nodePos.y}rs.labelX=textX,rs.labelY=textY,rstyle.labelX=textX,rstyle.labelY=textY,this.calculateLabelAngles(node),this.applyLabelDimensions(node)}}},lineAngleFromDelta=function lineAngleFromDelta2(dx,dy){var angle=Math.atan(dy/dx);return 0===dx&&angle<0&&(angle*=-1),angle},lineAngle=function lineAngle2(p0,p1){var dx=p1.x-p0.x,dy=p1.y-p0.y;return lineAngleFromDelta(dx,dy)},bezierAngle=function bezierAngle2(p0,p1,p2,t){var t0=bound(0,t-.001,1),t1=bound(0,t+.001,1),lp0=qbezierPtAt(p0,p1,p2,t0),lp1=qbezierPtAt(p0,p1,p2,t1);return lineAngle(lp0,lp1)};BRp$9.recalculateEdgeLabelProjections=function(edge){var p2,_p=edge._private,rs=_p.rscratch,r=this,content={mid:edge.pstyle("label").strValue,source:edge.pstyle("source-label").strValue,target:edge.pstyle("target-label").strValue};if(content.mid||content.source||content.target){p2={x:rs.midX,y:rs.midY};var setRs=function setRs2(propName,prefix,value){setPrefixedProperty(_p.rscratch,propName,prefix,value),setPrefixedProperty(_p.rstyle,propName,prefix,value)};setRs("labelX",null,p2.x),setRs("labelY",null,p2.y);var midAngle=lineAngleFromDelta(rs.midDispX,rs.midDispY);setRs("labelAutoAngle",null,midAngle);var createControlPointInfo=function createControlPointInfo2(){if(createControlPointInfo2.cache)return createControlPointInfo2.cache;for(var ctrlpts=[],i2=0;i2+5<rs.allpts.length;i2+=4){var p0={x:rs.allpts[i2],y:rs.allpts[i2+1]},p1={x:rs.allpts[i2+2],y:rs.allpts[i2+3]},p22={x:rs.allpts[i2+4],y:rs.allpts[i2+5]};ctrlpts.push({p0:p0,p1:p1,p2:p22,startDist:0,length:0,segments:[]})}var bpts=_p.rstyle.bezierPts,nProjs=r.bezierProjPcts.length;function addSegment(cp2,p02,p12,t0,t1){var length=dist(p02,p12),prevSegment=cp2.segments[cp2.segments.length-1],segment={p0:p02,p1:p12,t0:t0,t1:t1,startDist:prevSegment?prevSegment.startDist+prevSegment.length:0,length:length};cp2.segments.push(segment),cp2.length+=length}for(var _i=0;_i<ctrlpts.length;_i++){var cp=ctrlpts[_i],prevCp=ctrlpts[_i-1];prevCp&&(cp.startDist=prevCp.startDist+prevCp.length),addSegment(cp,cp.p0,bpts[_i*nProjs],0,r.bezierProjPcts[0]);for(var j=0;j<nProjs-1;j++)addSegment(cp,bpts[_i*nProjs+j],bpts[_i*nProjs+j+1],r.bezierProjPcts[j],r.bezierProjPcts[j+1]);addSegment(cp,bpts[_i*nProjs+nProjs-1],cp.p2,r.bezierProjPcts[nProjs-1],1)}return createControlPointInfo2.cache=ctrlpts},calculateEndProjection=function calculateEndProjection2(prefix){var angle,isSrc="source"===prefix;if(content[prefix]){var offset=edge.pstyle(prefix+"-text-offset").pfValue;switch(rs.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var selected,cps=createControlPointInfo(),startDist=0,totalDist=0,i2=0;i2<cps.length;i2++){for(var _cp=cps[isSrc?i2:cps.length-1-i2],j=0;j<_cp.segments.length;j++){var _seg=_cp.segments[isSrc?j:_cp.segments.length-1-j],lastSeg=i2===cps.length-1&&j===_cp.segments.length-1;if(startDist=totalDist,(totalDist+=_seg.length)>=offset||lastSeg){selected={cp:_cp,segment:_seg};break}}if(selected)break}var cp=selected.cp,seg=selected.segment,tSegment=(offset-startDist)/seg.length,segDt=seg.t1-seg.t0,t=isSrc?seg.t0+segDt*tSegment:seg.t1-segDt*tSegment;t=bound(0,t,1),p2=qbezierPtAt(cp.p0,cp.p1,cp.p2,t),angle=bezierAngle(cp.p0,cp.p1,cp.p2,t);break;case"straight":case"segments":case"haystack":for(var di,d0,p0,p1,d=0,l=rs.allpts.length,_i2=0;_i2+3<l&&(isSrc?(p0={x:rs.allpts[_i2],y:rs.allpts[_i2+1]},p1={x:rs.allpts[_i2+2],y:rs.allpts[_i2+3]}):(p0={x:rs.allpts[l-2-_i2],y:rs.allpts[l-1-_i2]},p1={x:rs.allpts[l-4-_i2],y:rs.allpts[l-3-_i2]}),d0=d,!((d+=di=dist(p0,p1))>=offset));_i2+=2);var _t=(offset-d0)/di;_t=bound(0,_t,1),p2=lineAt(p0,p1,_t),angle=lineAngle(p0,p1)}setRs("labelX",prefix,p2.x),setRs("labelY",prefix,p2.y),setRs("labelAutoAngle",prefix,angle)}};calculateEndProjection("source"),calculateEndProjection("target"),this.applyLabelDimensions(edge)}},BRp$9.applyLabelDimensions=function(ele){this.applyPrefixedLabelDimensions(ele),ele.isEdge()&&(this.applyPrefixedLabelDimensions(ele,"source"),this.applyPrefixedLabelDimensions(ele,"target"))},BRp$9.applyPrefixedLabelDimensions=function(ele,prefix){var _p=ele._private,text=this.getLabelText(ele,prefix),labelDims=this.calculateLabelDimensions(ele,text),lineHeight=ele.pstyle("line-height").pfValue,textWrap=ele.pstyle("text-wrap").strValue,lines=getPrefixedProperty(_p.rscratch,"labelWrapCachedLines",prefix)||[],numLines="wrap"!==textWrap?1:Math.max(lines.length,1),normPerLineHeight=labelDims.height/numLines,labelLineHeight=normPerLineHeight*lineHeight,width=labelDims.width,height=labelDims.height+(numLines-1)*(lineHeight-1)*normPerLineHeight;setPrefixedProperty(_p.rstyle,"labelWidth",prefix,width),setPrefixedProperty(_p.rscratch,"labelWidth",prefix,width),setPrefixedProperty(_p.rstyle,"labelHeight",prefix,height),setPrefixedProperty(_p.rscratch,"labelHeight",prefix,height),setPrefixedProperty(_p.rscratch,"labelLineHeight",prefix,labelLineHeight)},BRp$9.getLabelText=function(ele,prefix){var _p=ele._private,pfd=prefix?prefix+"-":"",text=ele.pstyle(pfd+"label").strValue,textTransform=ele.pstyle("text-transform").value,rscratch=function rscratch2(propName,value){return value?(setPrefixedProperty(_p.rscratch,propName,prefix,value),value):getPrefixedProperty(_p.rscratch,propName,prefix)};if(!text)return"";"none"==textTransform||("uppercase"==textTransform?text=text.toUpperCase():"lowercase"==textTransform&&(text=text.toLowerCase()));var wrapStyle=ele.pstyle("text-wrap").value;if("wrap"===wrapStyle){var labelKey=rscratch("labelKey");if(null!=labelKey&&rscratch("labelWrapKey")===labelKey)return rscratch("labelWrapCachedText");for(var zwsp="​",lines=text.split("\n"),maxW=ele.pstyle("text-max-width").pfValue,overflowAny="anywhere"===ele.pstyle("text-overflow-wrap").value,wrappedLines=[],wordsRegex=/[\s\u200b]+/,wordSeparator=overflowAny?"":" ",l=0;l<lines.length;l++){var line=lines[l],lineW=this.calculateLabelDimensions(ele,line).width;if(overflowAny){var processedLine=line.split("").join(zwsp);line=processedLine}if(lineW>maxW){for(var words=line.split(wordsRegex),subline="",w=0;w<words.length;w++){var word=words[w],testLine=0===subline.length?word:subline+wordSeparator+word;this.calculateLabelDimensions(ele,testLine).width<=maxW?subline+=word+wordSeparator:(subline&&wrappedLines.push(subline),subline=word+wordSeparator)}subline.match(/^[\s\u200b]+$/)||wrappedLines.push(subline)}else wrappedLines.push(line)}rscratch("labelWrapCachedLines",wrappedLines),text=rscratch("labelWrapCachedText",wrappedLines.join("\n")),rscratch("labelWrapKey",labelKey)}else if("ellipsis"===wrapStyle){var _maxW=ele.pstyle("text-max-width").pfValue,ellipsized="",ellipsis="…",incLastCh=!1;if(this.calculateLabelDimensions(ele,text).width<_maxW)return text;for(var i2=0;i2<text.length&&!(this.calculateLabelDimensions(ele,ellipsized+text[i2]+ellipsis).width>_maxW);i2++)ellipsized+=text[i2],i2===text.length-1&&(incLastCh=!0);return incLastCh||(ellipsized+=ellipsis),ellipsized}return text},BRp$9.getLabelJustification=function(ele){var justification=ele.pstyle("text-justification").strValue,textHalign=ele.pstyle("text-halign").strValue;if("auto"!==justification)return justification;if(!ele.isNode())return"center";switch(textHalign){case"left":return"right";case"right":return"left";default:return"center"}},BRp$9.calculateLabelDimensions=function(ele,text){var r=this,cacheKey=hashString(text,ele._private.labelDimsKey),cache2=r.labelDimCache||(r.labelDimCache=[]),existingVal=cache2[cacheKey];if(null!=existingVal)return existingVal;var padding=0,fStyle=ele.pstyle("font-style").strValue,size=ele.pstyle("font-size").pfValue,family=ele.pstyle("font-family").strValue,weight=ele.pstyle("font-weight").strValue,canvas=this.labelCalcCanvas,c2d=this.labelCalcCanvasContext;if(!canvas){canvas=this.labelCalcCanvas=document.createElement("canvas"),c2d=this.labelCalcCanvasContext=canvas.getContext("2d");var ds=canvas.style;ds.position="absolute",ds.left="-9999px",ds.top="-9999px",ds.zIndex="-1",ds.visibility="hidden",ds.pointerEvents="none"}c2d.font="".concat(fStyle," ").concat(weight," ").concat(size,"px ").concat(family);for(var width=0,height=0,lines=text.split("\n"),i2=0;i2<lines.length;i2++){var line=lines[i2],metrics=c2d.measureText(line),w=Math.ceil(metrics.width),h=size;width=Math.max(w,width),height+=h}return width+=padding,height+=padding,cache2[cacheKey]={width:width,height:height}},BRp$9.calculateLabelAngle=function(ele,prefix){var rs=ele._private.rscratch,isEdge=ele.isEdge(),prefixDash=prefix?prefix+"-":"",rot=ele.pstyle(prefixDash+"text-rotation"),rotStr=rot.strValue;return"none"===rotStr?0:isEdge&&"autorotate"===rotStr?rs.labelAutoAngle:"autorotate"===rotStr?0:rot.pfValue},BRp$9.calculateLabelAngles=function(ele){var r=this,isEdge=ele.isEdge(),rs=ele._private.rscratch;rs.labelAngle=r.calculateLabelAngle(ele),isEdge&&(rs.sourceLabelAngle=r.calculateLabelAngle(ele,"source"),rs.targetLabelAngle=r.calculateLabelAngle(ele,"target"))};var BRp$8={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$8.getNodeShape=function(node){var r=this,shape=node.pstyle("shape").value;if("cutrectangle"===shape&&(node.width()<TOO_SMALL_CUT_RECT||node.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(node.isParent())return"rectangle"===shape||"roundrectangle"===shape||"round-rectangle"===shape||"cutrectangle"===shape||"cut-rectangle"===shape||"barrel"===shape?shape:"rectangle";if("polygon"===shape){var points=node.pstyle("shape-polygon-points").value;return r.nodeShapes.makePolygon(points).name}return shape};var BRp$7={registerCalculationListeners:function(){var cy=this.cy,elesToUpdate=cy.collection(),r=this,enqueue=function enqueue2(eles){var dirtyStyleCaches=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(elesToUpdate.merge(eles),dirtyStyleCaches)for(var i2=0;i2<eles.length;i2++){var rstyle=eles[i2]._private.rstyle;rstyle.clean=!1,rstyle.cleanConnected=!1}};r.binder(cy).on("bounds.* dirty.*",(function onDirtyBounds(e){var ele=e.target;enqueue(ele)})).on("style.* background.*",(function onDirtyStyle(e){var ele=e.target;enqueue(ele,!1)}));var updateEleCalcs=function updateEleCalcs2(willDraw){if(willDraw){var fns=r.onUpdateEleCalcsFns;elesToUpdate.cleanStyle();for(var i2=0;i2<elesToUpdate.length;i2++){var ele=elesToUpdate[i2],rstyle=ele._private.rstyle;ele.isNode()&&!rstyle.cleanConnected&&(enqueue(ele.connectedEdges()),rstyle.cleanConnected=!0)}if(fns)for(var _i=0;_i<fns.length;_i++)(0,fns[_i])(willDraw,elesToUpdate);r.recalculateRenderedStyle(elesToUpdate),elesToUpdate=cy.collection()}};r.flushRenderedStyleQueue=function(){updateEleCalcs(!0)},r.beforeRender(updateEleCalcs,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(fn2){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(fn2)},recalculateRenderedStyle:function(eles,useCache){var isCleanConnected=function isCleanConnected2(ele2){return ele2._private.rstyle.cleanConnected},edges=[],nodes2=[];if(!this.destroyed){void 0===useCache&&(useCache=!0);for(var i2=0;i2<eles.length;i2++){var ele=eles[i2],_p=ele._private,rstyle=_p.rstyle;!ele.isEdge()||isCleanConnected(ele.source())&&isCleanConnected(ele.target())||(rstyle.clean=!1),useCache&&rstyle.clean||ele.removed()||"none"!==ele.pstyle("display").value&&("nodes"===_p.group?nodes2.push(ele):edges.push(ele),rstyle.clean=!0)}for(var _i2=0;_i2<nodes2.length;_i2++){var _ele=nodes2[_i2],_rstyle=_ele._private.rstyle,pos=_ele.position();this.recalculateNodeLabelProjection(_ele),_rstyle.nodeX=pos.x,_rstyle.nodeY=pos.y,_rstyle.nodeW=_ele.pstyle("width").pfValue,_rstyle.nodeH=_ele.pstyle("height").pfValue}this.recalculateEdgeProjections(edges);for(var _i3=0;_i3<edges.length;_i3++){var _p3=edges[_i3]._private,_rstyle2=_p3.rstyle,rs=_p3.rscratch;_rstyle2.srcX=rs.arrowStartX,_rstyle2.srcY=rs.arrowStartY,_rstyle2.tgtX=rs.arrowEndX,_rstyle2.tgtY=rs.arrowEndY,_rstyle2.midX=rs.midX,_rstyle2.midY=rs.midY,_rstyle2.labelAngle=rs.labelAngle,_rstyle2.sourceLabelAngle=rs.sourceLabelAngle,_rstyle2.targetLabelAngle=rs.targetLabelAngle}}}},BRp$6={updateCachedGrabbedEles:function(){var eles=this.cachedZSortedEles;if(eles){eles.drag=[],eles.nondrag=[];for(var grabTargets=[],i2=0;i2<eles.length;i2++){var rs=(ele=eles[i2])._private.rscratch;ele.grabbed()&&!ele.isParent()?grabTargets.push(ele):rs.inDragLayer?eles.drag.push(ele):eles.nondrag.push(ele)}for(i2=0;i2<grabTargets.length;i2++){var ele=grabTargets[i2];eles.drag.push(ele)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(forceRecalc){if(forceRecalc||!this.cachedZSortedEles){var eles=this.cy.mutableElements().toArray();eles.sort(zIndexSort),eles.interactive=eles.filter((function(ele){return ele.interactive()})),this.cachedZSortedEles=eles,this.updateCachedGrabbedEles()}else eles=this.cachedZSortedEles;return eles}},BRp$5={};[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach((function(props){extend(BRp$5,props)}));var BRp$4={getCachedImage:function(url,crossOrigin,onLoad){var r=this,imageCache=r.imageCache=r.imageCache||{},cache2=imageCache[url];if(cache2)return cache2.image.complete||cache2.image.addEventListener("load",onLoad),cache2.image;var image=(cache2=imageCache[url]=imageCache[url]||{}).image=new Image;image.addEventListener("load",onLoad),image.addEventListener("error",(function(){image.error=!0}));var dataUriPrefix="data:";return url.substring(0,dataUriPrefix.length).toLowerCase()===dataUriPrefix||(crossOrigin="null"===crossOrigin?null:crossOrigin,image.crossOrigin=crossOrigin),image.src=url,image}},BRp$3={registerBinding:function(target,event2,handler,useCapture){var args=Array.prototype.slice.apply(arguments,[1]),b=this.binder(target);return b.on.apply(b,args)},binder:function(tgt){var r=this,containerWindow=r.cy.window(),tgtIsDom=tgt===containerWindow||tgt===containerWindow.document||tgt===containerWindow.document.body||domElement(tgt);if(null==r.supportsPassiveEvents){var supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function get2(){return supportsPassive=!0,!0}});containerWindow.addEventListener("test",null,opts)}catch(err){}r.supportsPassiveEvents=supportsPassive}var on=function on2(event2,handler,useCapture){var args=Array.prototype.slice.call(arguments);return tgtIsDom&&r.supportsPassiveEvents&&(args[2]={capture:null!=useCapture&&useCapture,passive:!1,once:!1}),r.bindings.push({target:tgt,args:args}),(tgt.addEventListener||tgt.on).apply(tgt,args),this};return{on:on,addEventListener:on,addListener:on,bind:on}},nodeIsDraggable:function(node){return node&&node.isNode()&&!node.locked()&&node.grabbable()},nodeIsGrabbable:function(node){return this.nodeIsDraggable(node)&&node.interactive()},load:function(){var r=this,containerWindow=r.cy.window(),isSelected=function isSelected2(ele){return ele.selected()},triggerEvents=function triggerEvents2(target,names,e,position2){null==target&&(target=r.cy);for(var i2=0;i2<names.length;i2++){var name=names[i2];target.emit({originalEvent:e,type:name,position:position2})}},isMultSelKeyDown=function isMultSelKeyDown2(e){return e.shiftKey||e.metaKey||e.ctrlKey},allowPanningPassthrough=function allowPanningPassthrough2(down,downs){var allowPassthrough=!0;if(r.cy.hasCompoundNodes()&&down&&down.pannable()){for(var i2=0;downs&&i2<downs.length;i2++)if((down=downs[i2]).isNode()&&down.isParent()&&!down.pannable()){allowPassthrough=!1;break}}else allowPassthrough=!0;return allowPassthrough},setGrabbed=function setGrabbed2(ele){ele[0]._private.grabbed=!0},setFreed=function setFreed2(ele){ele[0]._private.grabbed=!1},setInDragLayer=function setInDragLayer2(ele){ele[0]._private.rscratch.inDragLayer=!0},setOutDragLayer=function setOutDragLayer2(ele){ele[0]._private.rscratch.inDragLayer=!1},setGrabTarget=function setGrabTarget2(ele){ele[0]._private.rscratch.isGrabTarget=!0},removeGrabTarget=function removeGrabTarget2(ele){ele[0]._private.rscratch.isGrabTarget=!1},addToDragList=function addToDragList2(ele,opts){var list=opts.addToList;list.has(ele)||!ele.grabbable()||ele.locked()||(list.merge(ele),setGrabbed(ele))},addDescendantsToDrag=function addDescendantsToDrag2(node,opts){if(node.cy().hasCompoundNodes()&&(null!=opts.inDragLayer||null!=opts.addToList)){var innerNodes=node.descendants();opts.inDragLayer&&(innerNodes.forEach(setInDragLayer),innerNodes.connectedEdges().forEach(setInDragLayer)),opts.addToList&&addToDragList(innerNodes,opts)}},addNodesToDrag=function addNodesToDrag2(nodes2,opts){opts=opts||{};var hasCompoundNodes=nodes2.cy().hasCompoundNodes();opts.inDragLayer&&(nodes2.forEach(setInDragLayer),nodes2.neighborhood().stdFilter((function(ele){return!hasCompoundNodes||ele.isEdge()})).forEach(setInDragLayer)),opts.addToList&&nodes2.forEach((function(ele){addToDragList(ele,opts)})),addDescendantsToDrag(nodes2,opts),updateAncestorsInDragLayer(nodes2,{inDragLayer:opts.inDragLayer}),r.updateCachedGrabbedEles()},addNodeToDrag=addNodesToDrag,freeDraggedElements=function freeDraggedElements2(grabbedEles){grabbedEles&&(r.getCachedZSortedEles().forEach((function(ele){setFreed(ele),setOutDragLayer(ele),removeGrabTarget(ele)})),r.updateCachedGrabbedEles())},updateAncestorsInDragLayer=function updateAncestorsInDragLayer2(node,opts){if((null!=opts.inDragLayer||null!=opts.addToList)&&node.cy().hasCompoundNodes()){var parent=node.ancestors().orphans();if(!parent.same(node)){var nodes2=parent.descendants().spawnSelf().merge(parent).unmerge(node).unmerge(node.descendants()),edges=nodes2.connectedEdges();opts.inDragLayer&&(edges.forEach(setInDragLayer),nodes2.forEach(setInDragLayer)),opts.addToList&&nodes2.forEach((function(ele){addToDragList(ele,opts)}))}}},blurActiveDomElement=function blurActiveDomElement2(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},haveMutationsApi="undefined"!=typeof MutationObserver,haveResizeObserverApi="undefined"!=typeof ResizeObserver;haveMutationsApi?(r.removeObserver=new MutationObserver((function(mutns){for(var i2=0;i2<mutns.length;i2++){var rNodes=mutns[i2].removedNodes;if(rNodes)for(var j=0;j<rNodes.length;j++)if(rNodes[j]===r.container){r.destroy();break}}})),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",(function(e){r.destroy()}));var onResize=debounce_1((function(){r.cy.resize()}),100);haveMutationsApi&&(r.styleObserver=new MutationObserver(onResize),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(containerWindow,"resize",onResize),haveResizeObserverApi&&(r.resizeObserver=new ResizeObserver(onResize),r.resizeObserver.observe(r.container));var invalidateCoords=function invalidateCoords2(){r.invalidateContainerClientCoordsCache()};(function forEachUp2(domEle,fn2){for(;null!=domEle;)fn2(domEle),domEle=domEle.parentNode})(r.container,(function(domEle){r.registerBinding(domEle,"transitionend",invalidateCoords),r.registerBinding(domEle,"animationend",invalidateCoords),r.registerBinding(domEle,"scroll",invalidateCoords)})),r.registerBinding(r.container,"contextmenu",(function(e){e.preventDefault()}));var clickTimeout,didDoubleClick,prevClickTimeStamp,inBoxSelection=function inBoxSelection2(){return 0!==r.selection[4]},eventInContainer=function eventInContainer2(e){for(var containerPageCoords=r.findContainerClientCoords(),x=containerPageCoords[0],y=containerPageCoords[1],width=containerPageCoords[2],height=containerPageCoords[3],positions=e.touches?e.touches:[e],atLeastOnePosInside=!1,i2=0;i2<positions.length;i2++){var p2=positions[i2];if(x<=p2.clientX&&p2.clientX<=x+width&&y<=p2.clientY&&p2.clientY<=y+height){atLeastOnePosInside=!0;break}}if(!atLeastOnePosInside)return!1;for(var container=r.container,tParent=e.target.parentNode,containerIsTarget=!1;tParent;){if(tParent===container){containerIsTarget=!0;break}tParent=tParent.parentNode}return!!containerIsTarget};r.registerBinding(r.container,"mousedown",(function mousedownHandler(e){if(eventInContainer(e)){e.preventDefault(),blurActiveDomElement(),r.hoverData.capture=!0,r.hoverData.which=e.which;var cy=r.cy,gpos=[e.clientX,e.clientY],pos=r.projectIntoViewport(gpos[0],gpos[1]),select=r.selection,nears=r.findNearestElements(pos[0],pos[1],!0,!1),near=nears[0],draggedElements=r.dragData.possibleDragElements;r.hoverData.mdownPos=pos,r.hoverData.mdownGPos=gpos;var checkForTaphold=function checkForTaphold2(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout((function(){if(!r.hoverData.tapholdCancelled){var ele=r.hoverData.down;ele?ele.emit({originalEvent:e,type:"taphold",position:{x:pos[0],y:pos[1]}}):cy.emit({originalEvent:e,type:"taphold",position:{x:pos[0],y:pos[1]}})}}),r.tapholdDuration)};if(3==e.which){r.hoverData.cxtStarted=!0;var cxtEvt={originalEvent:e,type:"cxttapstart",position:{x:pos[0],y:pos[1]}};near?(near.activate(),near.emit(cxtEvt),r.hoverData.down=near):cy.emit(cxtEvt),r.hoverData.downTime=(new Date).getTime(),r.hoverData.cxtDragged=!1}else if(1==e.which){if(near&&near.activate(),null!=near&&r.nodeIsGrabbable(near)){var makeEvent=function makeEvent2(type){return{originalEvent:e,type:type,position:{x:pos[0],y:pos[1]}}},triggerGrab=function triggerGrab2(ele){ele.emit(makeEvent("grab"))};if(setGrabTarget(near),near.selected()){draggedElements=r.dragData.possibleDragElements=cy.collection();var selectedNodes=cy.$((function(ele){return ele.isNode()&&ele.selected()&&r.nodeIsGrabbable(ele)}));addNodesToDrag(selectedNodes,{addToList:draggedElements}),near.emit(makeEvent("grabon")),selectedNodes.forEach(triggerGrab)}else draggedElements=r.dragData.possibleDragElements=cy.collection(),addNodeToDrag(near,{addToList:draggedElements}),near.emit(makeEvent("grabon")).emit(makeEvent("grab"));r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=near,r.hoverData.downs=nears,r.hoverData.downTime=(new Date).getTime(),triggerEvents(near,["mousedown","tapstart","vmousedown"],e,{x:pos[0],y:pos[1]}),null==near?(select[4]=1,r.data.bgActivePosistion={x:pos[0],y:pos[1]},r.redrawHint("select",!0),r.redraw()):near.pannable()&&(select[4]=1),checkForTaphold()}select[0]=select[2]=pos[0],select[1]=select[3]=pos[1]}}),!1),r.registerBinding(containerWindow,"mousemove",(function mousemoveHandler(e){if(r.hoverData.capture||eventInContainer(e)){var preventDefault=!1,cy=r.cy,zoom=cy.zoom(),gpos=[e.clientX,e.clientY],pos=r.projectIntoViewport(gpos[0],gpos[1]),mdownPos=r.hoverData.mdownPos,mdownGPos=r.hoverData.mdownGPos,select=r.selection,near=null;r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.selecting||(near=r.findNearestElement(pos[0],pos[1],!0,!1));var isOverThresholdDrag,last=r.hoverData.last,down=r.hoverData.down,disp=[pos[0]-select[2],pos[1]-select[3]],draggedElements=r.dragData.possibleDragElements;if(mdownGPos){var dx=gpos[0]-mdownGPos[0],dx2=dx*dx,dy=gpos[1]-mdownGPos[1],dist2=dx2+dy*dy;r.hoverData.isOverThresholdDrag=isOverThresholdDrag=dist2>=r.desktopTapThreshold2}var multSelKeyDown=isMultSelKeyDown(e);isOverThresholdDrag&&(r.hoverData.tapholdCancelled=!0);var updateDragDelta=function updateDragDelta2(){var dragDelta2=r.hoverData.dragDelta=r.hoverData.dragDelta||[];0===dragDelta2.length?(dragDelta2.push(disp[0]),dragDelta2.push(disp[1])):(dragDelta2[0]+=disp[0],dragDelta2[1]+=disp[1])};preventDefault=!0,triggerEvents(near,["mousemove","vmousemove","tapdrag"],e,{x:pos[0],y:pos[1]});var goIntoBoxMode=function goIntoBoxMode2(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||cy.emit({originalEvent:e,type:"boxstart",position:{x:pos[0],y:pos[1]}}),select[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(3===r.hoverData.which){if(isOverThresholdDrag){var cxtEvt={originalEvent:e,type:"cxtdrag",position:{x:pos[0],y:pos[1]}};down?down.emit(cxtEvt):cy.emit(cxtEvt),r.hoverData.cxtDragged=!0,r.hoverData.cxtOver&&near===r.hoverData.cxtOver||(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:pos[0],y:pos[1]}}),r.hoverData.cxtOver=near,near&&near.emit({originalEvent:e,type:"cxtdragover",position:{x:pos[0],y:pos[1]}}))}}else if(r.hoverData.dragging){if(preventDefault=!0,cy.panningEnabled()&&cy.userPanningEnabled()){var deltaP;if(r.hoverData.justStartedPan){var mdPos=r.hoverData.mdownPos;deltaP={x:(pos[0]-mdPos[0])*zoom,y:(pos[1]-mdPos[1])*zoom},r.hoverData.justStartedPan=!1}else deltaP={x:disp[0]*zoom,y:disp[1]*zoom};cy.panBy(deltaP),cy.emit("dragpan"),r.hoverData.dragged=!0}pos=r.projectIntoViewport(e.clientX,e.clientY)}else if(1!=select[4]||null!=down&&!down.pannable()){if(down&&down.pannable()&&down.active()&&down.unactivate(),down&&down.grabbed()||near==last||(last&&triggerEvents(last,["mouseout","tapdragout"],e,{x:pos[0],y:pos[1]}),near&&triggerEvents(near,["mouseover","tapdragover"],e,{x:pos[0],y:pos[1]}),r.hoverData.last=near),down)if(isOverThresholdDrag){if(cy.boxSelectionEnabled()&&multSelKeyDown)down&&down.grabbed()&&(freeDraggedElements(draggedElements),down.emit("freeon"),draggedElements.emit("free"),r.dragData.didDrag&&(down.emit("dragfreeon"),draggedElements.emit("dragfree"))),goIntoBoxMode();else if(down&&down.grabbed()&&r.nodeIsDraggable(down)){var justStartedDrag=!r.dragData.didDrag;justStartedDrag&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||addNodesToDrag(draggedElements,{inDragLayer:!0});var totalShift={x:0,y:0};if(number$1(disp[0])&&number$1(disp[1])&&(totalShift.x+=disp[0],totalShift.y+=disp[1],justStartedDrag)){var dragDelta=r.hoverData.dragDelta;dragDelta&&number$1(dragDelta[0])&&number$1(dragDelta[1])&&(totalShift.x+=dragDelta[0],totalShift.y+=dragDelta[1])}r.hoverData.draggingEles=!0,draggedElements.silentShift(totalShift).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else updateDragDelta();preventDefault=!0}else isOverThresholdDrag&&(r.hoverData.dragging||!cy.boxSelectionEnabled()||!multSelKeyDown&&cy.panningEnabled()&&cy.userPanningEnabled()?!r.hoverData.selecting&&cy.panningEnabled()&&cy.userPanningEnabled()&&allowPanningPassthrough(down,r.hoverData.downs)&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,select[4]=0,r.data.bgActivePosistion=array2point(mdownPos),r.redrawHint("select",!0),r.redraw()):goIntoBoxMode(),down&&down.pannable()&&down.active()&&down.unactivate());return select[2]=pos[0],select[3]=pos[1],preventDefault?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}}),!1),r.registerBinding(containerWindow,"mouseup",(function mouseupHandler(e){if(r.hoverData.capture){r.hoverData.capture=!1;var cy=r.cy,pos=r.projectIntoViewport(e.clientX,e.clientY),select=r.selection,near=r.findNearestElement(pos[0],pos[1],!0,!1),draggedElements=r.dragData.possibleDragElements,down=r.hoverData.down,multSelKeyDown=isMultSelKeyDown(e);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,down&&down.unactivate(),3===r.hoverData.which){var cxtEvt={originalEvent:e,type:"cxttapend",position:{x:pos[0],y:pos[1]}};if(down?down.emit(cxtEvt):cy.emit(cxtEvt),!r.hoverData.cxtDragged){var cxtTap={originalEvent:e,type:"cxttap",position:{x:pos[0],y:pos[1]}};down?down.emit(cxtTap):cy.emit(cxtTap)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(1===r.hoverData.which){if(triggerEvents(near,["mouseup","tapend","vmouseup"],e,{x:pos[0],y:pos[1]}),r.dragData.didDrag||r.hoverData.dragged||r.hoverData.selecting||r.hoverData.isOverThresholdDrag||(triggerEvents(down,["click","tap","vclick"],e,{x:pos[0],y:pos[1]}),didDoubleClick=!1,e.timeStamp-prevClickTimeStamp<=cy.multiClickDebounceTime()?(clickTimeout&&clearTimeout(clickTimeout),didDoubleClick=!0,prevClickTimeStamp=null,triggerEvents(down,["dblclick","dbltap","vdblclick"],e,{x:pos[0],y:pos[1]})):(clickTimeout=setTimeout((function(){didDoubleClick||triggerEvents(down,["oneclick","onetap","voneclick"],e,{x:pos[0],y:pos[1]})}),cy.multiClickDebounceTime()),prevClickTimeStamp=e.timeStamp)),null!=down||r.dragData.didDrag||r.hoverData.selecting||r.hoverData.dragged||isMultSelKeyDown(e)||(cy.$(isSelected).unselect(["tapunselect"]),draggedElements.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=draggedElements=cy.collection()),near!=down||r.dragData.didDrag||r.hoverData.selecting||null!=near&&near._private.selectable&&(r.hoverData.dragging||("additive"===cy.selectionType()||multSelKeyDown?near.selected()?near.unselect(["tapunselect"]):near.select(["tapselect"]):multSelKeyDown||(cy.$(isSelected).unmerge(near).unselect(["tapunselect"]),near.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var box=cy.collection(r.getAllInBox(select[0],select[1],select[2],select[3]));r.redrawHint("select",!0),box.length>0&&r.redrawHint("eles",!0),cy.emit({type:"boxend",originalEvent:e,position:{x:pos[0],y:pos[1]}});var eleWouldBeSelected=function eleWouldBeSelected2(ele){return ele.selectable()&&!ele.selected()};"additive"===cy.selectionType()||multSelKeyDown||cy.$(isSelected).unmerge(box).unselect(),box.emit("box").stdFilter(eleWouldBeSelected).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!select[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var downWasGrabbed=down&&down.grabbed();freeDraggedElements(draggedElements),downWasGrabbed&&(down.emit("freeon"),draggedElements.emit("free"),r.dragData.didDrag&&(down.emit("dragfreeon"),draggedElements.emit("dragfree")))}}select[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}}),!1);var f1x1,f1y1,f2x1,f2y1,distance1,distance1Sq,center1,modelCenter1,offsetLeft,offsetTop,containerWidth,containerHeight,twoFingersStartInside,wheelHandler=function wheelHandler2(e){if(!r.scrollingPage){var cy=r.cy,zoom=cy.zoom(),pan=cy.pan(),pos=r.projectIntoViewport(e.clientX,e.clientY),rpos=[pos[0]*zoom+pan.x,pos[1]*zoom+pan.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||inBoxSelection())e.preventDefault();else if(cy.panningEnabled()&&cy.userPanningEnabled()&&cy.zoomingEnabled()&&cy.userZoomingEnabled()){var diff;e.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout((function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()}),150),diff=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,diff*=r.wheelSensitivity,1===e.deltaMode&&(diff*=33);var newZoom=cy.zoom()*Math.pow(10,diff);"gesturechange"===e.type&&(newZoom=r.gestureStartZoom*e.scale),cy.zoom({level:newZoom,renderedPosition:{x:rpos[0],y:rpos[1]}}),cy.emit("gesturechange"===e.type?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",wheelHandler,!0),r.registerBinding(containerWindow,"scroll",(function scrollHandler(e){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout((function(){r.scrollingPage=!1}),250)}),!0),r.registerBinding(r.container,"gesturestart",(function gestureStartHandler(e){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||e.preventDefault()}),!0),r.registerBinding(r.container,"gesturechange",(function(e){r.hasTouchStarted||wheelHandler(e)}),!0),r.registerBinding(r.container,"mouseout",(function mouseOutHandler(e){var pos=r.projectIntoViewport(e.clientX,e.clientY);r.cy.emit({originalEvent:e,type:"mouseout",position:{x:pos[0],y:pos[1]}})}),!1),r.registerBinding(r.container,"mouseover",(function mouseOverHandler(e){var pos=r.projectIntoViewport(e.clientX,e.clientY);r.cy.emit({originalEvent:e,type:"mouseover",position:{x:pos[0],y:pos[1]}})}),!1);var touchstartHandler,touchmoveHandler,touchcancelHandler,touchendHandler,didDoubleTouch,touchTimeout,prevTouchTimeStamp,distance=function distance2(x1,y1,x2,y2){return Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))},distanceSq=function distanceSq2(x1,y1,x2,y2){return(x2-x1)*(x2-x1)+(y2-y1)*(y2-y1)};if(r.registerBinding(r.container,"touchstart",touchstartHandler=function touchstartHandler2(e){if(r.hasTouchStarted=!0,eventInContainer(e)){blurActiveDomElement(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var cy=r.cy,now2=r.touchData.now,earlier=r.touchData.earlier;if(e.touches[0]){var pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);now2[0]=pos[0],now2[1]=pos[1]}if(e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now2[2]=pos[0],now2[3]=pos[1]),e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),now2[4]=pos[0],now2[5]=pos[1]),e.touches[1]){r.touchData.singleTouchMoved=!0,freeDraggedElements(r.dragData.touchDragEles);var offsets=r.findContainerClientCoords();offsetLeft=offsets[0],offsetTop=offsets[1],containerWidth=offsets[2],containerHeight=offsets[3],f1x1=e.touches[0].clientX-offsetLeft,f1y1=e.touches[0].clientY-offsetTop,f2x1=e.touches[1].clientX-offsetLeft,f2y1=e.touches[1].clientY-offsetTop,twoFingersStartInside=0<=f1x1&&f1x1<=containerWidth&&0<=f2x1&&f2x1<=containerWidth&&0<=f1y1&&f1y1<=containerHeight&&0<=f2y1&&f2y1<=containerHeight;var pan=cy.pan(),zoom=cy.zoom();distance1=distance(f1x1,f1y1,f2x1,f2y1),distance1Sq=distanceSq(f1x1,f1y1,f2x1,f2y1),modelCenter1=[((center1=[(f1x1+f2x1)/2,(f1y1+f2y1)/2])[0]-pan.x)/zoom,(center1[1]-pan.y)/zoom];var cxtDistThreshold=200;if(distance1Sq<cxtDistThreshold*cxtDistThreshold&&!e.touches[2]){var near1=r.findNearestElement(now2[0],now2[1],!0,!0),near2=r.findNearestElement(now2[2],now2[3],!0,!0);return near1&&near1.isNode()?(near1.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:now2[0],y:now2[1]}}),r.touchData.start=near1):near2&&near2.isNode()?(near2.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:now2[0],y:now2[1]}}),r.touchData.start=near2):cy.emit({originalEvent:e,type:"cxttapstart",position:{x:now2[0],y:now2[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,void r.redraw()}}if(e.touches[2])cy.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var nears=r.findNearestElements(now2[0],now2[1],!0,!0),near=nears[0];if(null!=near&&(near.activate(),r.touchData.start=near,r.touchData.starts=nears,r.nodeIsGrabbable(near))){var draggedEles=r.dragData.touchDragEles=cy.collection(),selectedNodes=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),near.selected()?(selectedNodes=cy.$((function(ele){return ele.selected()&&r.nodeIsGrabbable(ele)})),addNodesToDrag(selectedNodes,{addToList:draggedEles})):addNodeToDrag(near,{addToList:draggedEles}),setGrabTarget(near);var makeEvent=function makeEvent2(type){return{originalEvent:e,type:type,position:{x:now2[0],y:now2[1]}}};near.emit(makeEvent("grabon")),selectedNodes?selectedNodes.forEach((function(n){n.emit(makeEvent("grab"))})):near.emit(makeEvent("grab"))}triggerEvents(near,["touchstart","tapstart","vmousedown"],e,{x:now2[0],y:now2[1]}),null==near&&(r.data.bgActivePosistion={x:pos[0],y:pos[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout((function(){!1!==r.touchData.singleTouchMoved||r.pinching||r.touchData.selecting||triggerEvents(r.touchData.start,["taphold"],e,{x:now2[0],y:now2[1]})}),r.tapholdDuration)}if(e.touches.length>=1){for(var sPos=r.touchData.startPosition=[null,null,null,null,null,null],i2=0;i2<now2.length;i2++)sPos[i2]=earlier[i2]=now2[i2];var touch0=e.touches[0];r.touchData.startGPosition=[touch0.clientX,touch0.clientY]}}},!1),r.registerBinding(window,"touchmove",touchmoveHandler=function touchmoveHandler2(e){var capture=r.touchData.capture;if(capture||eventInContainer(e)){var select=r.selection,cy=r.cy,now2=r.touchData.now,earlier=r.touchData.earlier,zoom=cy.zoom();if(e.touches[0]){var pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);now2[0]=pos[0],now2[1]=pos[1]}e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now2[2]=pos[0],now2[3]=pos[1]),e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),now2[4]=pos[0],now2[5]=pos[1]);var isOverThresholdDrag,startGPos=r.touchData.startGPosition;if(capture&&e.touches[0]&&startGPos){for(var disp=[],j=0;j<now2.length;j++)disp[j]=now2[j]-earlier[j];var dx=e.touches[0].clientX-startGPos[0],dx2=dx*dx,dy=e.touches[0].clientY-startGPos[1];isOverThresholdDrag=dx2+dy*dy>=r.touchTapThreshold2}if(capture&&r.touchData.cxt){e.preventDefault();var f1x2=e.touches[0].clientX-offsetLeft,f1y2=e.touches[0].clientY-offsetTop,f2x2=e.touches[1].clientX-offsetLeft,f2y2=e.touches[1].clientY-offsetTop,distance2Sq=distanceSq(f1x2,f1y2,f2x2,f2y2),distThreshold=150,factorThreshold=1.5;if(distance2Sq/distance1Sq>=factorThreshold*factorThreshold||distance2Sq>=distThreshold*distThreshold){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var cxtEvt={originalEvent:e,type:"cxttapend",position:{x:now2[0],y:now2[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(cxtEvt),r.touchData.start=null):cy.emit(cxtEvt)}}if(capture&&r.touchData.cxt){cxtEvt={originalEvent:e,type:"cxtdrag",position:{x:now2[0],y:now2[1]}},r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(cxtEvt):cy.emit(cxtEvt),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var near=r.findNearestElement(now2[0],now2[1],!0,!0);r.touchData.cxtOver&&near===r.touchData.cxtOver||(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:now2[0],y:now2[1]}}),r.touchData.cxtOver=near,near&&near.emit({originalEvent:e,type:"cxtdragover",position:{x:now2[0],y:now2[1]}}))}else if(capture&&e.touches[2]&&cy.boxSelectionEnabled())e.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||cy.emit({originalEvent:e,type:"boxstart",position:{x:now2[0],y:now2[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,select[4]=1,select&&0!==select.length&&void 0!==select[0]?(select[2]=(now2[0]+now2[2]+now2[4])/3,select[3]=(now2[1]+now2[3]+now2[5])/3):(select[0]=(now2[0]+now2[2]+now2[4])/3,select[1]=(now2[1]+now2[3]+now2[5])/3,select[2]=(now2[0]+now2[2]+now2[4])/3+1,select[3]=(now2[1]+now2[3]+now2[5])/3+1),r.redrawHint("select",!0),r.redraw();else if(capture&&e.touches[1]&&!r.touchData.didSelect&&cy.zoomingEnabled()&&cy.panningEnabled()&&cy.userZoomingEnabled()&&cy.userPanningEnabled()){if(e.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),draggedEles=r.dragData.touchDragEles){r.redrawHint("drag",!0);for(var i2=0;i2<draggedEles.length;i2++){var de_p=draggedEles[i2]._private;de_p.grabbed=!1,de_p.rscratch.inDragLayer=!1}}var _start=r.touchData.start,distance2=(f1x2=e.touches[0].clientX-offsetLeft,f1y2=e.touches[0].clientY-offsetTop,f2x2=e.touches[1].clientX-offsetLeft,f2y2=e.touches[1].clientY-offsetTop,distance(f1x2,f1y2,f2x2,f2y2)),factor=distance2/distance1;if(twoFingersStartInside){var tx=(f1x2-f1x1+(f2x2-f2x1))/2,ty=(f1y2-f1y1+(f2y2-f2y1))/2,zoom1=cy.zoom(),zoom2=zoom1*factor,pan1=cy.pan(),ctrx=modelCenter1[0]*zoom1+pan1.x,ctry=modelCenter1[1]*zoom1+pan1.y,pan2={x:-zoom2/zoom1*(ctrx-pan1.x-tx)+ctrx,y:-zoom2/zoom1*(ctry-pan1.y-ty)+ctry};if(_start&&_start.active()){var draggedEles=r.dragData.touchDragEles;freeDraggedElements(draggedEles),r.redrawHint("drag",!0),r.redrawHint("eles",!0),_start.unactivate().emit("freeon"),draggedEles.emit("free"),r.dragData.didDrag&&(_start.emit("dragfreeon"),draggedEles.emit("dragfree"))}cy.viewport({zoom:zoom2,pan:pan2,cancelOnFailedZoom:!0}),cy.emit("pinchzoom"),distance1=distance2,f1x1=f1x2,f1y1=f1y2,f2x1=f2x2,f2y1=f2y2,r.pinching=!0}e.touches[0]&&(pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),now2[0]=pos[0],now2[1]=pos[1]),e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now2[2]=pos[0],now2[3]=pos[1]),e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),now2[4]=pos[0],now2[5]=pos[1])}else if(e.touches[0]&&!r.touchData.didSelect){var start=r.touchData.start,last=r.touchData.last;if(r.hoverData.draggingEles||r.swipePanning||(near=r.findNearestElement(now2[0],now2[1],!0,!0)),capture&&null!=start&&e.preventDefault(),capture&&null!=start&&r.nodeIsDraggable(start))if(isOverThresholdDrag){draggedEles=r.dragData.touchDragEles;var justStartedDrag=!r.dragData.didDrag;justStartedDrag&&addNodesToDrag(draggedEles,{inDragLayer:!0}),r.dragData.didDrag=!0;var totalShift={x:0,y:0};number$1(disp[0])&&number$1(disp[1])&&(totalShift.x+=disp[0],totalShift.y+=disp[1],justStartedDrag&&(r.redrawHint("eles",!0),(dragDelta=r.touchData.dragDelta)&&number$1(dragDelta[0])&&number$1(dragDelta[1])&&(totalShift.x+=dragDelta[0],totalShift.y+=dragDelta[1]))),r.hoverData.draggingEles=!0,draggedEles.silentShift(totalShift).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==earlier[0]&&r.touchData.startPosition[1]==earlier[1]&&r.redrawHint("eles",!0),r.redraw()}else{var dragDelta;0===(dragDelta=r.touchData.dragDelta=r.touchData.dragDelta||[]).length?(dragDelta.push(disp[0]),dragDelta.push(disp[1])):(dragDelta[0]+=disp[0],dragDelta[1]+=disp[1])}if(triggerEvents(start||near,["touchmove","tapdrag","vmousemove"],e,{x:now2[0],y:now2[1]}),start&&start.grabbed()||near==last||(last&&last.emit({originalEvent:e,type:"tapdragout",position:{x:now2[0],y:now2[1]}}),near&&near.emit({originalEvent:e,type:"tapdragover",position:{x:now2[0],y:now2[1]}})),r.touchData.last=near,capture)for(i2=0;i2<now2.length;i2++)now2[i2]&&r.touchData.startPosition[i2]&&isOverThresholdDrag&&(r.touchData.singleTouchMoved=!0);capture&&(null==start||start.pannable())&&cy.panningEnabled()&&cy.userPanningEnabled()&&(allowPanningPassthrough(start,r.touchData.starts)&&(e.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=array2point(r.touchData.startPosition)),r.swipePanning?(cy.panBy({x:disp[0]*zoom,y:disp[1]*zoom}),cy.emit("dragpan")):isOverThresholdDrag&&(r.swipePanning=!0,cy.panBy({x:dx*zoom,y:dy*zoom}),cy.emit("dragpan"),start&&(start.unactivate(),r.redrawHint("select",!0),r.touchData.start=null))),pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),now2[0]=pos[0],now2[1]=pos[1])}for(j=0;j<now2.length;j++)earlier[j]=now2[j];capture&&e.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&null!=r.data.bgActivePosistion&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1),r.registerBinding(containerWindow,"touchcancel",touchcancelHandler=function touchcancelHandler2(e){var start=r.touchData.start;r.touchData.capture=!1,start&&start.unactivate()}),r.registerBinding(containerWindow,"touchend",touchendHandler=function touchendHandler2(e){var start=r.touchData.start;if(r.touchData.capture){0===e.touches.length&&(r.touchData.capture=!1),e.preventDefault();var select=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ctxTapend,cy=r.cy,zoom=cy.zoom(),now2=r.touchData.now,earlier=r.touchData.earlier;if(e.touches[0]){var pos=r.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);now2[0]=pos[0],now2[1]=pos[1]}if(e.touches[1]&&(pos=r.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),now2[2]=pos[0],now2[3]=pos[1]),e.touches[2]&&(pos=r.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),now2[4]=pos[0],now2[5]=pos[1]),start&&start.unactivate(),r.touchData.cxt){if(ctxTapend={originalEvent:e,type:"cxttapend",position:{x:now2[0],y:now2[1]}},start?start.emit(ctxTapend):cy.emit(ctxTapend),!r.touchData.cxtDragged){var ctxTap={originalEvent:e,type:"cxttap",position:{x:now2[0],y:now2[1]}};start?start.emit(ctxTap):cy.emit(ctxTap)}return r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,void r.redraw()}if(!e.touches[2]&&cy.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var box=cy.collection(r.getAllInBox(select[0],select[1],select[2],select[3]));select[0]=void 0,select[1]=void 0,select[2]=void 0,select[3]=void 0,select[4]=0,r.redrawHint("select",!0),cy.emit({type:"boxend",originalEvent:e,position:{x:now2[0],y:now2[1]}});var eleWouldBeSelected=function eleWouldBeSelected2(ele){return ele.selectable()&&!ele.selected()};box.emit("box").stdFilter(eleWouldBeSelected).select().emit("boxselect"),box.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(null!=start&&start.unactivate(),e.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(e.touches[1]);else if(e.touches[0]);else if(!e.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var draggedEles=r.dragData.touchDragEles;if(null!=start){var startWasGrabbed=start._private.grabbed;freeDraggedElements(draggedEles),r.redrawHint("drag",!0),r.redrawHint("eles",!0),startWasGrabbed&&(start.emit("freeon"),draggedEles.emit("free"),r.dragData.didDrag&&(start.emit("dragfreeon"),draggedEles.emit("dragfree"))),triggerEvents(start,["touchend","tapend","vmouseup","tapdragout"],e,{x:now2[0],y:now2[1]}),start.unactivate(),r.touchData.start=null}else{var near=r.findNearestElement(now2[0],now2[1],!0,!0);triggerEvents(near,["touchend","tapend","vmouseup","tapdragout"],e,{x:now2[0],y:now2[1]})}var dx=r.touchData.startPosition[0]-now2[0],dx2=dx*dx,dy=r.touchData.startPosition[1]-now2[1],rdist2=(dx2+dy*dy)*zoom*zoom;r.touchData.singleTouchMoved||(start||cy.$(":selected").unselect(["tapunselect"]),triggerEvents(start,["tap","vclick"],e,{x:now2[0],y:now2[1]}),didDoubleTouch=!1,e.timeStamp-prevTouchTimeStamp<=cy.multiClickDebounceTime()?(touchTimeout&&clearTimeout(touchTimeout),didDoubleTouch=!0,prevTouchTimeStamp=null,triggerEvents(start,["dbltap","vdblclick"],e,{x:now2[0],y:now2[1]})):(touchTimeout=setTimeout((function(){didDoubleTouch||triggerEvents(start,["onetap","voneclick"],e,{x:now2[0],y:now2[1]})}),cy.multiClickDebounceTime()),prevTouchTimeStamp=e.timeStamp)),null!=start&&!r.dragData.didDrag&&start._private.selectable&&rdist2<r.touchTapThreshold2&&!r.pinching&&("single"===cy.selectionType()?(cy.$(isSelected).unmerge(start).unselect(["tapunselect"]),start.select(["tapselect"])):start.selected()?start.unselect(["tapunselect"]):start.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}for(var j=0;j<now2.length;j++)earlier[j]=now2[j];r.dragData.didDrag=!1,0===e.touches.length&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),e.touches.length<2&&(1===e.touches.length&&(r.touchData.startGPosition=[e.touches[0].clientX,e.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())}},!1),"undefined"==typeof TouchEvent){var pointers=[],makeTouch=function makeTouch2(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},makePointer=function makePointer2(e){return{event:e,touch:makeTouch(e)}},addPointer=function addPointer2(e){pointers.push(makePointer(e))},removePointer=function removePointer2(e){for(var i2=0;i2<pointers.length;i2++)if(pointers[i2].event.pointerId===e.pointerId)return void pointers.splice(i2,1)},updatePointer=function updatePointer2(e){var p2=pointers.filter((function(p3){return p3.event.pointerId===e.pointerId}))[0];p2.event=e,p2.touch=makeTouch(e)},addTouchesToEvent=function addTouchesToEvent2(e){e.touches=pointers.map((function(p2){return p2.touch}))},pointerIsMouse=function pointerIsMouse2(e){return"mouse"===e.pointerType||4===e.pointerType};r.registerBinding(r.container,"pointerdown",(function(e){pointerIsMouse(e)||(e.preventDefault(),addPointer(e),addTouchesToEvent(e),touchstartHandler(e))})),r.registerBinding(r.container,"pointerup",(function(e){pointerIsMouse(e)||(removePointer(e),addTouchesToEvent(e),touchendHandler(e))})),r.registerBinding(r.container,"pointercancel",(function(e){pointerIsMouse(e)||(removePointer(e),addTouchesToEvent(e),touchcancelHandler(e))})),r.registerBinding(r.container,"pointermove",(function(e){pointerIsMouse(e)||(e.preventDefault(),updatePointer(e),addTouchesToEvent(e),touchmoveHandler(e))}))}}},BRp$2={generatePolygon:function(name,points){return this.nodeShapes[name]={renderer:this,name:name,points:points,draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl("polygon",context,centerX,centerY,width,height,this.points)},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){return polygonIntersectLine(x,y,this.points,nodeX,nodeY,width/2,height/2,padding)},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){return pointInsidePolygon(x,y,this.points,centerX,centerY,width,height,[0,-1],padding)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){return intersectLineEllipse(x,y,nodeX,nodeY,width/2+padding,height/2+padding)},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){return checkInEllipse(x,y,width,height,centerX,centerY,padding)}}},generateRoundPolygon:function(name,points){for(var allPoints=new Array(2*points.length),i2=0;i2<points.length/2;i2++){var sourceIndex=2*i2,destIndex=void 0;destIndex=i2<points.length/2-1?2*(i2+1):0,allPoints[4*i2]=points[sourceIndex],allPoints[4*i2+1]=points[sourceIndex+1];var xDest=points[destIndex]-points[sourceIndex],yDest=points[destIndex+1]-points[sourceIndex+1],norm=Math.sqrt(xDest*xDest+yDest*yDest);allPoints[4*i2+2]=xDest/norm,allPoints[4*i2+3]=yDest/norm}return this.nodeShapes[name]={renderer:this,name:name,points:allPoints,draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl("round-polygon",context,centerX,centerY,width,height,this.points)},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){return roundPolygonIntersectLine(x,y,this.points,nodeX,nodeY,width,height)},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){return pointInsideRoundPolygon(x,y,this.points,centerX,centerY,width,height)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){return roundRectangleIntersectLine(x,y,nodeX,nodeY,width,height,padding)},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){var cornerRadius=getRoundRectangleRadius(width,height),diam=2*cornerRadius;return!!(pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-diam,[0,-1],padding)||pointInsidePolygon(x,y,this.points,centerX,centerY,width-diam,height,[0,-1],padding)||checkInEllipse(x,y,diam,diam,centerX-width/2+cornerRadius,centerY-height/2+cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX+width/2-cornerRadius,centerY-height/2+cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX+width/2-cornerRadius,centerY+height/2-cornerRadius,padding)||checkInEllipse(x,y,diam,diam,centerX-width/2+cornerRadius,centerY+height/2-cornerRadius,padding))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},generateCutTrianglePts:function generateCutTrianglePts(width,height,centerX,centerY){var cl=this.cornerLength,hh=height/2,hw=width/2,xBegin=centerX-hw,xEnd=centerX+hw,yBegin=centerY-hh,yEnd=centerY+hh;return{topLeft:[xBegin,yBegin+cl,xBegin+cl,yBegin,xBegin+cl,yBegin+cl],topRight:[xEnd-cl,yBegin,xEnd,yBegin+cl,xEnd-cl,yBegin+cl],bottomRight:[xEnd,yEnd-cl,xEnd-cl,yEnd,xEnd-cl,yEnd-cl],bottomLeft:[xBegin+cl,yEnd,xBegin,yEnd-cl,xBegin+cl,yEnd-cl]}},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){var cPts=this.generateCutTrianglePts(width+2*padding,height+2*padding,nodeX,nodeY),pts2=[].concat.apply([],[cPts.topLeft.splice(0,4),cPts.topRight.splice(0,4),cPts.bottomRight.splice(0,4),cPts.bottomLeft.splice(0,4)]);return polygonIntersectLine(x,y,pts2,nodeX,nodeY)},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){if(pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-2*this.cornerLength,[0,-1],padding))return!0;if(pointInsidePolygon(x,y,this.points,centerX,centerY,width-2*this.cornerLength,height,[0,-1],padding))return!0;var cutTrianglePts=this.generateCutTrianglePts(width,height,centerX,centerY);return pointInsidePolygonPoints(x,y,cutTrianglePts.topLeft)||pointInsidePolygonPoints(x,y,cutTrianglePts.topRight)||pointInsidePolygonPoints(x,y,cutTrianglePts.bottomRight)||pointInsidePolygonPoints(x,y,cutTrianglePts.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){var t0=.15,t1=.5,t2=.85,bPts=this.generateBarrelBezierPts(width+2*padding,height+2*padding,nodeX,nodeY),approximateBarrelCurvePts=function approximateBarrelCurvePts2(pts3){var m0=qbezierPtAt({x:pts3[0],y:pts3[1]},{x:pts3[2],y:pts3[3]},{x:pts3[4],y:pts3[5]},t0),m1=qbezierPtAt({x:pts3[0],y:pts3[1]},{x:pts3[2],y:pts3[3]},{x:pts3[4],y:pts3[5]},t1),m2=qbezierPtAt({x:pts3[0],y:pts3[1]},{x:pts3[2],y:pts3[3]},{x:pts3[4],y:pts3[5]},t2);return[pts3[0],pts3[1],m0.x,m0.y,m1.x,m1.y,m2.x,m2.y,pts3[4],pts3[5]]},pts2=[].concat(approximateBarrelCurvePts(bPts.topLeft),approximateBarrelCurvePts(bPts.topRight),approximateBarrelCurvePts(bPts.bottomRight),approximateBarrelCurvePts(bPts.bottomLeft));return polygonIntersectLine(x,y,pts2,nodeX,nodeY)},generateBarrelBezierPts:function generateBarrelBezierPts(width,height,centerX,centerY){var hh=height/2,hw=width/2,xBegin=centerX-hw,xEnd=centerX+hw,yBegin=centerY-hh,yEnd=centerY+hh,curveConstants=getBarrelCurveConstants(width,height),hOffset=curveConstants.heightOffset,wOffset=curveConstants.widthOffset,ctrlPtXOffset=curveConstants.ctrlPtOffsetPct*width,pts2={topLeft:[xBegin,yBegin+hOffset,xBegin+ctrlPtXOffset,yBegin,xBegin+wOffset,yBegin],topRight:[xEnd-wOffset,yBegin,xEnd-ctrlPtXOffset,yBegin,xEnd,yBegin+hOffset],bottomRight:[xEnd,yEnd-hOffset,xEnd-ctrlPtXOffset,yEnd,xEnd-wOffset,yEnd],bottomLeft:[xBegin+wOffset,yEnd,xBegin+ctrlPtXOffset,yEnd,xBegin,yEnd-hOffset]};return pts2.topLeft.isTop=!0,pts2.topRight.isTop=!0,pts2.bottomLeft.isBottom=!0,pts2.bottomRight.isBottom=!0,pts2},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){var curveConstants=getBarrelCurveConstants(width,height),hOffset=curveConstants.heightOffset,wOffset=curveConstants.widthOffset;if(pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-2*hOffset,[0,-1],padding))return!0;if(pointInsidePolygon(x,y,this.points,centerX,centerY,width-2*wOffset,height,[0,-1],padding))return!0;for(var barrelCurvePts=this.generateBarrelBezierPts(width,height,centerX,centerY),getCurveT=function getCurveT2(x2,y3,curvePts){var x0=curvePts[4],x1=curvePts[2],x22=curvePts[0],y02=curvePts[5],y22=curvePts[1],xMin=Math.min(x0,x22),xMax=Math.max(x0,x22),yMin=Math.min(y02,y22),yMax=Math.max(y02,y22);if(xMin<=x2&&x2<=xMax&&yMin<=y3&&y3<=yMax){var coeff=bezierPtsToQuadCoeff(x0,x1,x22),validRoots=solveQuadratic(coeff[0],coeff[1],coeff[2],x2).filter((function(r){return 0<=r&&r<=1}));if(validRoots.length>0)return validRoots[0]}return null},curveRegions=Object.keys(barrelCurvePts),i2=0;i2<curveRegions.length;i2++){var cornerPts=barrelCurvePts[curveRegions[i2]],t=getCurveT(x,y,cornerPts);if(null!=t){var y0=cornerPts[5],y1=cornerPts[3],y2=cornerPts[1],bezY=qbezierAt(y0,y1,y2,t);if(cornerPts.isTop&&bezY<=y)return!0;if(cornerPts.isBottom&&y<=bezY)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function draw2(context,centerX,centerY,width,height){this.renderer.nodeShapeImpl(this.name,context,centerX,centerY,width,height)},intersectLine:function intersectLine(nodeX,nodeY,width,height,x,y,padding){var topStartY=nodeY-(height/2+padding),topIntersections=finiteLinesIntersect(x,y,nodeX,nodeY,nodeX-(width/2+padding),topStartY,nodeX+(width/2+padding),topStartY,!1);return topIntersections.length>0?topIntersections:roundRectangleIntersectLine(x,y,nodeX,nodeY,width,height,padding)},checkPoint:function checkPoint(x,y,padding,width,height,centerX,centerY){var cornerRadius=getRoundRectangleRadius(width,height),diam=2*cornerRadius;if(pointInsidePolygon(x,y,this.points,centerX,centerY,width,height-diam,[0,-1],padding))return!0;if(pointInsidePolygon(x,y,this.points,centerX,centerY,width-diam,height,[0,-1],padding))return!0;var outerWidth=width/2+2*padding,outerHeight=height/2+2*padding;return!!pointInsidePolygonPoints(x,y,[centerX-outerWidth,centerY-outerHeight,centerX-outerWidth,centerY,centerX+outerWidth,centerY,centerX+outerWidth,centerY-outerHeight])||!!checkInEllipse(x,y,diam,diam,centerX+width/2-cornerRadius,centerY+height/2-cornerRadius,padding)||!!checkInEllipse(x,y,diam,diam,centerX-width/2+cornerRadius,centerY+height/2-cornerRadius,padding)}}},registerNodeShapes:function(){var nodeShapes=this.nodeShapes={},renderer3=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),nodeShapes.square=nodeShapes.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var diamondPoints=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",diamondPoints),this.generateRoundPolygon("round-diamond",diamondPoints),this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var star5Points=new Array(20),outerPoints=generateUnitNgonPoints(5,0),innerPoints=generateUnitNgonPoints(5,Math.PI/5),innerRadius=.5*(3-Math.sqrt(5));innerRadius*=1.57;for(var i2=0;i2<innerPoints.length/2;i2++)innerPoints[2*i2]*=innerRadius,innerPoints[2*i2+1]*=innerRadius;for(i2=0;i2<5;i2++)star5Points[4*i2]=outerPoints[2*i2],star5Points[4*i2+1]=outerPoints[2*i2+1],star5Points[4*i2+2]=innerPoints[2*i2],star5Points[4*i2+3]=innerPoints[2*i2+1];star5Points=fitPolygonToSquare(star5Points),this.generatePolygon("star",star5Points),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var tagPoints=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",tagPoints),this.generateRoundPolygon("round-tag",tagPoints),nodeShapes.makePolygon=function(points){var shape,name="polygon-"+points.join("$");return(shape=this[name])?shape:renderer3.generatePolygon(name,points)}}},BRp$1={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(options){options=options||staticEmptyObject();var r=this;void 0===r.averageRedrawTime&&(r.averageRedrawTime=0),void 0===r.lastRedrawTime&&(r.lastRedrawTime=0),void 0===r.lastDrawTime&&(r.lastDrawTime=0),r.requestedFrame=!0,r.renderOptions=options},beforeRender:function(fn2,priority){if(!this.destroyed){null==priority&&error("Priority is not optional for beforeRender");var cbs=this.beforeRenderCallbacks;cbs.push({fn:fn2,priority:priority}),cbs.sort((function(a,b){return b.priority-a.priority}))}}},beforeRenderCallbacks=function beforeRenderCallbacks2(r,willDraw,startTime){for(var cbs=r.beforeRenderCallbacks,i2=0;i2<cbs.length;i2++)cbs[i2].fn(willDraw,startTime)};BRp$1.startRenderLoop=function(){var r=this,cy=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var renderFn=function renderFn2(requestTime){if(!r.destroyed){if(cy.batching());else if(r.requestedFrame&&!r.skipFrame){beforeRenderCallbacks(r,!0,requestTime);var startTime=performanceNow();r.render(r.renderOptions);var endTime=r.lastDrawTime=performanceNow();void 0===r.averageRedrawTime&&(r.averageRedrawTime=endTime-startTime),void 0===r.redrawCount&&(r.redrawCount=0),r.redrawCount++,void 0===r.redrawTotalTime&&(r.redrawTotalTime=0);var duration=endTime-startTime;r.redrawTotalTime+=duration,r.lastRedrawTime=duration,r.averageRedrawTime=r.averageRedrawTime/2+duration/2,r.requestedFrame=!1}else beforeRenderCallbacks(r,!1,requestTime);r.skipFrame=!1,requestAnimationFrame2(renderFn2)}};requestAnimationFrame2(renderFn)}};var BR=function BaseRenderer2(options){this.init(options)},BRp=BR.prototype;BRp.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],BRp.init=function(options){var r=this;r.options=options,r.cy=options.cy;var ctr=r.container=options.cy.container(),containerWindow=r.cy.window();if(containerWindow){var document2=containerWindow.document,head=document2.head,stylesheetId="__________cytoscape_stylesheet",className="__________cytoscape_container",stylesheetAlreadyExists=null!=document2.getElementById(stylesheetId);if(ctr.className.indexOf(className)<0&&(ctr.className=(ctr.className||"")+" "+className),!stylesheetAlreadyExists){var stylesheet2=document2.createElement("style");stylesheet2.id=stylesheetId,stylesheet2.textContent="."+className+" { position: relative; }",head.insertBefore(stylesheet2,head.children[0])}"static"===containerWindow.getComputedStyle(ctr).getPropertyValue("position")&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}r.selection=[void 0,void 0,void 0,void 0,0],r.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],r.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},r.dragData={possibleDragElements:[]},r.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},r.redraws=0,r.showFps=options.showFps,r.debug=options.debug,r.hideEdgesOnViewport=options.hideEdgesOnViewport,r.textureOnViewport=options.textureOnViewport,r.wheelSensitivity=options.wheelSensitivity,r.motionBlurEnabled=options.motionBlur,r.forcedPixelRatio=number$1(options.pixelRatio)?options.pixelRatio:null,r.motionBlur=options.motionBlur,r.motionBlurOpacity=options.motionBlurOpacity,r.motionBlurTransparency=1-r.motionBlurOpacity,r.motionBlurPxRatio=1,r.mbPxRBlurry=1,r.minMbLowQualFrames=4,r.fullQualityMb=!1,r.clearedForMotionBlur=[],r.desktopTapThreshold=options.desktopTapThreshold,r.desktopTapThreshold2=options.desktopTapThreshold*options.desktopTapThreshold,r.touchTapThreshold=options.touchTapThreshold,r.touchTapThreshold2=options.touchTapThreshold*options.touchTapThreshold,r.tapholdDuration=500,r.bindings=[],r.beforeRenderCallbacks=[],r.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},r.registerNodeShapes(),r.registerArrowShapes(),r.registerCalculationListeners()},BRp.notify=function(eventName,eles){var r=this,cy=r.cy;this.destroyed||("init"!==eventName?"destroy"!==eventName?(("add"===eventName||"remove"===eventName||"move"===eventName&&cy.hasCompoundNodes()||"load"===eventName||"zorder"===eventName||"mount"===eventName)&&r.invalidateCachedZSortedEles(),"viewport"===eventName&&r.redrawHint("select",!0),"load"!==eventName&&"resize"!==eventName&&"mount"!==eventName||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},BRp.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var i2=0;i2<r.bindings.length;i2++){var b=r.bindings[i2],tgt=b.target;(tgt.off||tgt.removeEventListener).apply(tgt,b.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch(e){}},BRp.isHeadless=function(){return!1},[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach((function(props){extend(BRp,props)}));var fullFpsTime=1e3/60,defs={setupDequeueing:function setupDequeueing(opts){return function setupDequeueingImpl(){var self2=this,r=this.renderer;if(!self2.dequeueingSetup){self2.dequeueingSetup=!0;var queueRedraw=debounce_1((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),opts.deqRedrawThreshold),dequeue=function dequeue2(willDraw,frameStartTime){var startTime=performanceNow(),avgRenderTime=r.averageRedrawTime,renderTime=r.lastRedrawTime,deqd=[],extent=r.cy.extent(),pixelRatio=r.getPixelRatio();for(willDraw||r.flushRenderedStyleQueue();;){var now2=performanceNow(),duration=now2-startTime,frameDuration=now2-frameStartTime;if(renderTime<fullFpsTime){var timeAvailable=fullFpsTime-(willDraw?avgRenderTime:0);if(frameDuration>=opts.deqFastCost*timeAvailable)break}else if(willDraw){if(duration>=opts.deqCost*renderTime||duration>=opts.deqAvgCost*avgRenderTime)break}else if(frameDuration>=opts.deqNoDrawCost*fullFpsTime)break;var thisDeqd=opts.deq(self2,pixelRatio,extent);if(!(thisDeqd.length>0))break;for(var i2=0;i2<thisDeqd.length;i2++)deqd.push(thisDeqd[i2])}deqd.length>0&&(opts.onDeqd(self2,deqd),!willDraw&&opts.shouldRedraw(self2,deqd,pixelRatio,extent)&&queueRedraw())},priority=opts.priority||noop$1;r.beforeRender(dequeue,priority(self2))}}}},ElementTextureCacheLookup=function(){function ElementTextureCacheLookup2(getKey2){var doesEleInvalidateKey=arguments.length>1&&void 0!==arguments[1]?arguments[1]:falsify;_classCallCheck(this,ElementTextureCacheLookup2),this.idsByKey=new Map$2,this.keyForId=new Map$2,this.cachesByLvl=new Map$2,this.lvls=[],this.getKey=getKey2,this.doesEleInvalidateKey=doesEleInvalidateKey}return _createClass(ElementTextureCacheLookup2,[{key:"getIdsFor",value:function getIdsFor(key){null==key&&error("Can not get id list for null key");var idsByKey=this.idsByKey,ids=this.idsByKey.get(key);return ids||(ids=new Set$1,idsByKey.set(key,ids)),ids}},{key:"addIdForKey",value:function addIdForKey(key,id){null!=key&&this.getIdsFor(key).add(id)}},{key:"deleteIdForKey",value:function deleteIdForKey(key,id){null!=key&&this.getIdsFor(key).delete(id)}},{key:"getNumberOfIdsForKey",value:function getNumberOfIdsForKey(key){return null==key?0:this.getIdsFor(key).size}},{key:"updateKeyMappingFor",value:function updateKeyMappingFor(ele){var id=ele.id(),prevKey=this.keyForId.get(id),currKey=this.getKey(ele);this.deleteIdForKey(prevKey,id),this.addIdForKey(currKey,id),this.keyForId.set(id,currKey)}},{key:"deleteKeyMappingFor",value:function deleteKeyMappingFor(ele){var id=ele.id(),prevKey=this.keyForId.get(id);this.deleteIdForKey(prevKey,id),this.keyForId.delete(id)}},{key:"keyHasChangedFor",value:function keyHasChangedFor(ele){var id=ele.id();return this.keyForId.get(id)!==this.getKey(ele)}},{key:"isInvalid",value:function isInvalid(ele){return this.keyHasChangedFor(ele)||this.doesEleInvalidateKey(ele)}},{key:"getCachesAt",value:function getCachesAt(lvl){var cachesByLvl=this.cachesByLvl,lvls=this.lvls,caches=cachesByLvl.get(lvl);return caches||(caches=new Map$2,cachesByLvl.set(lvl,caches),lvls.push(lvl)),caches}},{key:"getCache",value:function getCache(key,lvl){return this.getCachesAt(lvl).get(key)}},{key:"get",value:function get2(ele,lvl){var key=this.getKey(ele),cache2=this.getCache(key,lvl);return null!=cache2&&this.updateKeyMappingFor(ele),cache2}},{key:"getForCachedKey",value:function getForCachedKey(ele,lvl){var key=this.keyForId.get(ele.id());return this.getCache(key,lvl)}},{key:"hasCache",value:function hasCache(key,lvl){return this.getCachesAt(lvl).has(key)}},{key:"has",value:function has(ele,lvl){var key=this.getKey(ele);return this.hasCache(key,lvl)}},{key:"setCache",value:function setCache(key,lvl,cache2){cache2.key=key,this.getCachesAt(lvl).set(key,cache2)}},{key:"set",value:function set2(ele,lvl,cache2){var key=this.getKey(ele);this.setCache(key,lvl,cache2),this.updateKeyMappingFor(ele)}},{key:"deleteCache",value:function deleteCache(key,lvl){this.getCachesAt(lvl).delete(key)}},{key:"delete",value:function _delete(ele,lvl){var key=this.getKey(ele);this.deleteCache(key,lvl)}},{key:"invalidateKey",value:function invalidateKey(key){var _this=this;this.lvls.forEach((function(lvl){return _this.deleteCache(key,lvl)}))}},{key:"invalidate",value:function invalidate(ele){var id=ele.id(),key=this.keyForId.get(id);this.deleteKeyMappingFor(ele);var entireKeyInvalidated=this.doesEleInvalidateKey(ele);return entireKeyInvalidated&&this.invalidateKey(key),entireKeyInvalidated||0===this.getNumberOfIdsForKey(key)}}]),ElementTextureCacheLookup2}(),minTxrH=25,txrStepH=50,minLvl$1=-4,maxLvl$1=3,maxZoom$1=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,deqRedrawThreshold$1=100,maxDeqSize$1=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function ElementTextureCache2(renderer3,initOptions){var self2=this;self2.renderer=renderer3,self2.onDequeues=[];var opts=initDefaults(initOptions);extend(self2,opts),self2.lookup=new ElementTextureCacheLookup(opts.getKey,opts.doesEleInvalidateKey),self2.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons,ETCp.getTextureQueue=function(txrH){var self2=this;return self2.eleImgCaches=self2.eleImgCaches||{},self2.eleImgCaches[txrH]=self2.eleImgCaches[txrH]||[]},ETCp.getRetiredTextureQueue=function(txrH){var self2=this,rtxtrQs=self2.eleImgCaches.retired=self2.eleImgCaches.retired||{};return rtxtrQs[txrH]=rtxtrQs[txrH]||[]},ETCp.getElementQueue=function(){var self2=this;return self2.eleCacheQueue=self2.eleCacheQueue||new heap((function(a,b){return b.reqs-a.reqs}))},ETCp.getElementKeyToQueue=function(){var self2=this;return self2.eleKeyToCacheQueue=self2.eleKeyToCacheQueue||{}},ETCp.getElement=function(ele,bb,pxRatio,lvl,reason){var self2=this,r=this.renderer,zoom=r.cy.zoom(),lookup2=this.lookup;if(!bb||0===bb.w||0===bb.h||isNaN(bb.w)||isNaN(bb.h)||!ele.visible()||ele.removed())return null;if(!self2.allowEdgeTxrCaching&&ele.isEdge()||!self2.allowParentTxrCaching&&ele.isParent())return null;if(null==lvl&&(lvl=Math.ceil(log2(zoom*pxRatio))),lvl<minLvl$1)lvl=minLvl$1;else if(zoom>=maxZoom$1||lvl>maxLvl$1)return null;var scale=Math.pow(2,lvl),eleScaledH=bb.h*scale,eleScaledW=bb.w*scale,scaledLabelShown=r.eleTextBiggerThanMin(ele,scale);if(!this.isVisible(ele,scaledLabelShown))return null;var txrH,eleCache=lookup2.get(ele,lvl);if(eleCache&&eleCache.invalidated&&(eleCache.invalidated=!1,eleCache.texture.invalidatedWidth-=eleCache.width),eleCache)return eleCache;if(txrH=eleScaledH<=minTxrH?minTxrH:eleScaledH<=txrStepH?txrStepH:Math.ceil(eleScaledH/txrStepH)*txrStepH,eleScaledH>maxTxrH||eleScaledW>maxTxrW)return null;var txrQ=self2.getTextureQueue(txrH),txr=txrQ[txrQ.length-2],addNewTxr=function addNewTxr2(){return self2.recycleTexture(txrH,eleScaledW)||self2.addTexture(txrH,eleScaledW)};txr||(txr=txrQ[txrQ.length-1]),txr||(txr=addNewTxr()),txr.width-txr.usedWidth<eleScaledW&&(txr=addNewTxr());for(var higherCache,scalableFrom=function scalableFrom2(otherCache){return otherCache&&otherCache.scaledLabelShown===scaledLabelShown},deqing=reason&&reason===getTxrReasons.dequeue,highQualityReq=reason&&reason===getTxrReasons.highQuality,downscaleReq=reason&&reason===getTxrReasons.downscale,l=lvl+1;l<=maxLvl$1;l++){var c=lookup2.get(ele,l);if(c){higherCache=c;break}}var oneUpCache=higherCache&&higherCache.level===lvl+1?higherCache:null,downscale=function downscale2(){txr.context.drawImage(oneUpCache.texture.canvas,oneUpCache.x,0,oneUpCache.width,oneUpCache.height,txr.usedWidth,0,eleScaledW,eleScaledH)};if(txr.context.setTransform(1,0,0,1,0,0),txr.context.clearRect(txr.usedWidth,0,eleScaledW,txrH),scalableFrom(oneUpCache))downscale();else if(scalableFrom(higherCache)){if(!highQualityReq)return self2.queueElement(ele,higherCache.level-1),higherCache;for(var _l=higherCache.level;_l>lvl;_l--)oneUpCache=self2.getElement(ele,bb,pxRatio,_l,getTxrReasons.downscale);downscale()}else{var lowerCache;if(!deqing&&!highQualityReq&&!downscaleReq)for(var _l2=lvl-1;_l2>=minLvl$1;_l2--){var _c=lookup2.get(ele,_l2);if(_c){lowerCache=_c;break}}if(scalableFrom(lowerCache))return self2.queueElement(ele,lvl),lowerCache;txr.context.translate(txr.usedWidth,0),txr.context.scale(scale,scale),this.drawElement(txr.context,ele,bb,scaledLabelShown,!1),txr.context.scale(1/scale,1/scale),txr.context.translate(-txr.usedWidth,0)}return eleCache={x:txr.usedWidth,texture:txr,level:lvl,scale:scale,width:eleScaledW,height:eleScaledH,scaledLabelShown:scaledLabelShown},txr.usedWidth+=Math.ceil(eleScaledW+eleTxrSpacing),txr.eleCaches.push(eleCache),lookup2.set(ele,lvl,eleCache),self2.checkTextureFullness(txr),eleCache},ETCp.invalidateElements=function(eles){for(var i2=0;i2<eles.length;i2++)this.invalidateElement(eles[i2])},ETCp.invalidateElement=function(ele){var self2=this,lookup2=self2.lookup,caches=[];if(lookup2.isInvalid(ele)){for(var lvl=minLvl$1;lvl<=maxLvl$1;lvl++){var cache2=lookup2.getForCachedKey(ele,lvl);cache2&&caches.push(cache2)}if(lookup2.invalidate(ele))for(var i2=0;i2<caches.length;i2++){var _cache=caches[i2],txr=_cache.texture;txr.invalidatedWidth+=_cache.width,_cache.invalidated=!0,self2.checkTextureUtility(txr)}self2.removeFromQueue(ele)}},ETCp.checkTextureUtility=function(txr){txr.invalidatedWidth>=minUtility*txr.width&&this.retireTexture(txr)},ETCp.checkTextureFullness=function(txr){var txrQ=this.getTextureQueue(txr.height);txr.usedWidth/txr.width>maxFullness&&txr.fullnessChecks>=maxFullnessChecks?removeFromArray(txrQ,txr):txr.fullnessChecks++},ETCp.retireTexture=function(txr){var self2=this,txrH=txr.height,txrQ=self2.getTextureQueue(txrH),lookup2=this.lookup;removeFromArray(txrQ,txr),txr.retired=!0;for(var eleCaches=txr.eleCaches,i2=0;i2<eleCaches.length;i2++){var eleCache=eleCaches[i2];lookup2.deleteCache(eleCache.key,eleCache.level)}clearArray(eleCaches),self2.getRetiredTextureQueue(txrH).push(txr)},ETCp.addTexture=function(txrH,minW){var self2=this,txr={};return self2.getTextureQueue(txrH).push(txr),txr.eleCaches=[],txr.height=txrH,txr.width=Math.max(defTxrWidth,minW),txr.usedWidth=0,txr.invalidatedWidth=0,txr.fullnessChecks=0,txr.canvas=self2.renderer.makeOffscreenCanvas(txr.width,txr.height),txr.context=txr.canvas.getContext("2d"),txr},ETCp.recycleTexture=function(txrH,minW){for(var self2=this,txrQ=self2.getTextureQueue(txrH),rtxtrQ=self2.getRetiredTextureQueue(txrH),i2=0;i2<rtxtrQ.length;i2++){var txr=rtxtrQ[i2];if(txr.width>=minW)return txr.retired=!1,txr.usedWidth=0,txr.invalidatedWidth=0,txr.fullnessChecks=0,clearArray(txr.eleCaches),txr.context.setTransform(1,0,0,1,0,0),txr.context.clearRect(0,0,txr.width,txr.height),removeFromArray(rtxtrQ,txr),txrQ.push(txr),txr}},ETCp.queueElement=function(ele,lvl){var self2=this,q=self2.getElementQueue(),k2q=self2.getElementKeyToQueue(),key=this.getKey(ele),existingReq=k2q[key];if(existingReq)existingReq.level=Math.max(existingReq.level,lvl),existingReq.eles.merge(ele),existingReq.reqs++,q.updateItem(existingReq);else{var req={eles:ele.spawn().merge(ele),level:lvl,reqs:1,key:key};q.push(req),k2q[key]=req}},ETCp.dequeue=function(pxRatio){for(var self2=this,q=self2.getElementQueue(),k2q=self2.getElementKeyToQueue(),dequeued=[],lookup2=self2.lookup,i2=0;i2<maxDeqSize$1&&q.size()>0;i2++){var req=q.pop(),key=req.key,ele=req.eles[0],cacheExists=lookup2.hasCache(ele,req.level);if(k2q[key]=null,!cacheExists){dequeued.push(req);var bb=self2.getBoundingBox(ele);self2.getElement(ele,bb,pxRatio,req.level,getTxrReasons.dequeue)}}return dequeued},ETCp.removeFromQueue=function(ele){var self2=this,q=self2.getElementQueue(),k2q=self2.getElementKeyToQueue(),key=this.getKey(ele),req=k2q[key];null!=req&&(1===req.eles.length?(req.reqs=MAX_INT$1,q.updateItem(req),q.pop(),k2q[key]=null):req.eles.unmerge(ele))},ETCp.onDequeue=function(fn2){this.onDequeues.push(fn2)},ETCp.offDequeue=function(fn2){removeFromArray(this.onDequeues,fn2)},ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function deq(self2,pxRatio,extent){return self2.dequeue(pxRatio,extent)},onDeqd:function onDeqd(self2,deqd){for(var i2=0;i2<self2.onDequeues.length;i2++)(0,self2.onDequeues[i2])(deqd)},shouldRedraw:function shouldRedraw(self2,deqd,pxRatio,extent){for(var i2=0;i2<deqd.length;i2++)for(var eles=deqd[i2].eles,j=0;j<eles.length;j++){var bb=eles[j].boundingBox();if(boundingBoxesIntersect(bb,extent))return!0}return!1},priority:function priority(self2){return self2.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl=-4,maxLvl=2,maxZoom=3.99,deqRedrawThreshold=50,refineEleDebounceTime=50,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,maxDeqSize=1,invalidThreshold=250,maxLayerArea=16e6,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function LayeredTextureCache2(renderer3){var self2=this,r=self2.renderer=renderer3,cy=r.cy;self2.layersByLevel={},self2.firstGet=!0,self2.lastInvalidationTime=performanceNow()-2*invalidThreshold,self2.skipping=!1,self2.eleTxrDeqs=cy.collection(),self2.scheduleElementRefinement=debounce_1((function(){self2.refineElementTextures(self2.eleTxrDeqs),self2.eleTxrDeqs.unmerge(self2.eleTxrDeqs)}),refineEleDebounceTime),r.beforeRender((function(willDraw,now2){now2-self2.lastInvalidationTime<=invalidThreshold?self2.skipping=!0:self2.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);var qSort=function qSort2(a,b){return b.reqs-a.reqs};self2.layersQueue=new heap(qSort),self2.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(bb,lvl){var scale=Math.pow(2,lvl),w=Math.ceil(bb.w*scale),h=Math.ceil(bb.h*scale),canvas=this.renderer.makeOffscreenCanvas(w,h),layer={id:layerIdPool=++layerIdPool%MAX_INT,bb:bb,level:lvl,width:w,height:h,canvas:canvas,context:canvas.getContext("2d"),eles:[],elesQueue:[],reqs:0},cxt=layer.context,dx=-layer.bb.x1,dy=-layer.bb.y1;return cxt.scale(scale,scale),cxt.translate(dx,dy),layer},LTCp.getLayers=function(eles,pxRatio,lvl){var self2=this,zoom=self2.renderer.cy.zoom(),firstGet=self2.firstGet;if(self2.firstGet=!1,null==lvl)if((lvl=Math.ceil(log2(zoom*pxRatio)))<minLvl)lvl=minLvl;else if(zoom>=maxZoom||lvl>maxLvl)return null;self2.validateLayersElesOrdering(lvl,eles);var bb,tmpLayers,layersByLvl=self2.layersByLevel,scale=Math.pow(2,lvl),layers=layersByLvl[lvl]=layersByLvl[lvl]||[];if(self2.levelIsComplete(lvl,eles))return layers;!function checkTempLevels2(){var canUseAsTmpLvl=function canUseAsTmpLvl2(l){if(self2.validateLayersElesOrdering(l,eles),self2.levelIsComplete(l,eles))return tmpLayers=layersByLvl[l],!0},checkLvls=function checkLvls2(dir){if(!tmpLayers)for(var l=lvl+dir;minLvl<=l&&l<=maxLvl&&!canUseAsTmpLvl(l);l+=dir);};checkLvls(1),checkLvls(-1);for(var i3=layers.length-1;i3>=0;i3--){var layer2=layers[i3];layer2.invalid&&removeFromArray(layers,layer2)}}();var getBb=function getBb2(){if(!bb){bb=makeBoundingBox();for(var i3=0;i3<eles.length;i3++)updateBoundingBox(bb,eles[i3].boundingBox())}return bb},makeLayer=function makeLayer2(opts){var after=(opts=opts||{}).after;if(getBb(),bb.w*scale*(bb.h*scale)>maxLayerArea)return null;var layer2=self2.makeLayer(bb,lvl);if(null!=after){var index=layers.indexOf(after)+1;layers.splice(index,0,layer2)}else(void 0===opts.insert||opts.insert)&&layers.unshift(layer2);return layer2};if(self2.skipping&&!firstGet)return null;for(var layer=null,maxElesPerLayer=eles.length/defNumLayers,allowLazyQueueing=!firstGet,i2=0;i2<eles.length;i2++){var ele=eles[i2],rs=ele._private.rscratch,caches=rs.imgLayerCaches=rs.imgLayerCaches||{},existingLayer=caches[lvl];if(existingLayer)layer=existingLayer;else{if((!layer||layer.eles.length>=maxElesPerLayer||!boundingBoxInBoundingBox(layer.bb,ele.boundingBox()))&&!(layer=makeLayer({insert:!0,after:layer})))return null;tmpLayers||allowLazyQueueing?self2.queueLayer(layer,ele):self2.drawEleInLayer(layer,ele,lvl,pxRatio),layer.eles.push(ele),caches[lvl]=layer}}return tmpLayers||(allowLazyQueueing?null:layers)},LTCp.getEleLevelForLayerLevel=function(lvl,pxRatio){return lvl},LTCp.drawEleInLayer=function(layer,ele,lvl,pxRatio){var self2=this,r=this.renderer,context=layer.context,bb=ele.boundingBox();0!==bb.w&&0!==bb.h&&ele.visible()&&(lvl=self2.getEleLevelForLayerLevel(lvl,pxRatio),r.setImgSmoothing(context,!1),r.drawCachedElement(context,ele,null,null,lvl,useHighQualityEleTxrReqs),r.setImgSmoothing(context,!0))},LTCp.levelIsComplete=function(lvl,eles){var layers=this.layersByLevel[lvl];if(!layers||0===layers.length)return!1;for(var numElesInLayers=0,i2=0;i2<layers.length;i2++){var layer=layers[i2];if(layer.reqs>0)return!1;if(layer.invalid)return!1;numElesInLayers+=layer.eles.length}return numElesInLayers===eles.length},LTCp.validateLayersElesOrdering=function(lvl,eles){var layers=this.layersByLevel[lvl];if(layers)for(var i2=0;i2<layers.length;i2++){for(var layer=layers[i2],offset=-1,j=0;j<eles.length;j++)if(layer.eles[0]===eles[j]){offset=j;break}if(offset<0)this.invalidateLayer(layer);else{var o=offset;for(j=0;j<layer.eles.length;j++)if(layer.eles[j]!==eles[o+j]){this.invalidateLayer(layer);break}}}},LTCp.updateElementsInLayers=function(eles,update2){for(var self2=this,isEles=element(eles[0]),i2=0;i2<eles.length;i2++)for(var req=isEles?null:eles[i2],ele=isEles?eles[i2]:eles[i2].ele,rs=ele._private.rscratch,caches=rs.imgLayerCaches=rs.imgLayerCaches||{},l=minLvl;l<=maxLvl;l++){var layer=caches[l];layer&&(req&&self2.getEleLevelForLayerLevel(layer.level)!==req.level||update2(layer,ele,req))}},LTCp.haveLayers=function(){for(var self2=this,haveLayers=!1,l=minLvl;l<=maxLvl;l++){var layers=self2.layersByLevel[l];if(layers&&layers.length>0){haveLayers=!0;break}}return haveLayers},LTCp.invalidateElements=function(eles){var self2=this;0!==eles.length&&(self2.lastInvalidationTime=performanceNow(),0!==eles.length&&self2.haveLayers()&&self2.updateElementsInLayers(eles,(function invalAssocLayers(layer,ele,req){self2.invalidateLayer(layer)})))},LTCp.invalidateLayer=function(layer){if(this.lastInvalidationTime=performanceNow(),!layer.invalid){var lvl=layer.level,eles=layer.eles,layers=this.layersByLevel[lvl];removeFromArray(layers,layer),layer.elesQueue=[],layer.invalid=!0,layer.replacement&&(layer.replacement.invalid=!0);for(var i2=0;i2<eles.length;i2++){var caches=eles[i2]._private.rscratch.imgLayerCaches;caches&&(caches[lvl]=null)}}},LTCp.refineElementTextures=function(eles){var self2=this;self2.updateElementsInLayers(eles,(function refineEachEle(layer,ele,req){var rLyr=layer.replacement;if(rLyr||((rLyr=layer.replacement=self2.makeLayer(layer.bb,layer.level)).replaces=layer,rLyr.eles=layer.eles),!rLyr.reqs)for(var i2=0;i2<rLyr.eles.length;i2++)self2.queueLayer(rLyr,rLyr.eles[i2])}))},LTCp.enqueueElementRefinement=function(ele){this.eleTxrDeqs.merge(ele),this.scheduleElementRefinement()},LTCp.queueLayer=function(layer,ele){var q=this.layersQueue,elesQ=layer.elesQueue,hasId=elesQ.hasId=elesQ.hasId||{};if(!layer.replacement){if(ele){if(hasId[ele.id()])return;elesQ.push(ele),hasId[ele.id()]=!0}layer.reqs?(layer.reqs++,q.updateItem(layer)):(layer.reqs=1,q.push(layer))}},LTCp.dequeue=function(pxRatio){for(var self2=this,q=self2.layersQueue,deqd=[],eleDeqs=0;eleDeqs<maxDeqSize&&0!==q.size();){var layer=q.peek();if(layer.replacement)q.pop();else if(layer.replaces&&layer!==layer.replaces.replacement)q.pop();else if(layer.invalid)q.pop();else{var ele=layer.elesQueue.shift();ele&&(self2.drawEleInLayer(layer,ele,layer.level,pxRatio),eleDeqs++),0===deqd.length&&deqd.push(!0),0===layer.elesQueue.length&&(q.pop(),layer.reqs=0,layer.replaces&&self2.applyLayerReplacement(layer),self2.requestRedraw())}}return deqd},LTCp.applyLayerReplacement=function(layer){var self2=this,layersInLevel=self2.layersByLevel[layer.level],replaced=layer.replaces,index=layersInLevel.indexOf(replaced);if(!(index<0||replaced.invalid)){layersInLevel[index]=layer;for(var i2=0;i2<layer.eles.length;i2++){var _p=layer.eles[i2]._private,cache2=_p.imgLayerCaches=_p.imgLayerCaches||{};cache2&&(cache2[layer.level]=layer)}self2.requestRedraw()}},LTCp.requestRedraw=debounce_1((function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),100),LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold,deqCost:deqCost,deqAvgCost:deqAvgCost,deqNoDrawCost:deqNoDrawCost,deqFastCost:deqFastCost,deq:function deq(self2,pxRatio){return self2.dequeue(pxRatio)},onDeqd:noop$1,shouldRedraw:trueify,priority:function priority(self2){return self2.renderer.beforeRenderPriorities.lyrTxrDeq}});var impl,CRp$a={};function polygon(context,points){for(var i2=0;i2<points.length;i2++){var pt=points[i2];context.lineTo(pt.x,pt.y)}}function triangleBackcurve(context,points,controlPoint){for(var firstPt,i2=0;i2<points.length;i2++){var pt=points[i2];0===i2&&(firstPt=pt),context.lineTo(pt.x,pt.y)}context.quadraticCurveTo(controlPoint.x,controlPoint.y,firstPt.x,firstPt.y)}function triangleTee(context,trianglePoints,teePoints){context.beginPath&&context.beginPath();for(var triPts=trianglePoints,i2=0;i2<triPts.length;i2++){var pt=triPts[i2];context.lineTo(pt.x,pt.y)}var teePts=teePoints,firstTeePt=teePoints[0];for(context.moveTo(firstTeePt.x,firstTeePt.y),i2=1;i2<teePts.length;i2++)pt=teePts[i2],context.lineTo(pt.x,pt.y);context.closePath&&context.closePath()}function circleTriangle(context,trianglePoints,rx,ry,r){context.beginPath&&context.beginPath(),context.arc(rx,ry,r,0,2*Math.PI,!1);var triPts=trianglePoints,firstTrPt=triPts[0];context.moveTo(firstTrPt.x,firstTrPt.y);for(var i2=0;i2<triPts.length;i2++){var pt=triPts[i2];context.lineTo(pt.x,pt.y)}context.closePath&&context.closePath()}function circle(context,rx,ry,r){context.arc(rx,ry,r,0,2*Math.PI,!1)}CRp$a.arrowShapeImpl=function(name){return(impl||(impl={polygon:polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle}))[name]};var CRp$9={drawElement:function(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity){var r=this;ele.isNode()?r.drawNode(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity):r.drawEdge(context,ele,shiftToOriginWithBb,showLabel,showOverlay,showOpacity)},drawElementOverlay:function(context,ele){var r=this;ele.isNode()?r.drawNodeOverlay(context,ele):r.drawEdgeOverlay(context,ele)},drawElementUnderlay:function(context,ele){var r=this;ele.isNode()?r.drawNodeUnderlay(context,ele):r.drawEdgeUnderlay(context,ele)},drawCachedElementPortion:function(context,ele,eleTxrCache,pxRatio,lvl,reason,getRotation,getOpacity2){var r=this,bb=eleTxrCache.getBoundingBox(ele);if(0!==bb.w&&0!==bb.h){var eleCache=eleTxrCache.getElement(ele,bb,pxRatio,lvl,reason);if(null!=eleCache){var opacity=getOpacity2(r,ele);if(0===opacity)return;var x,y,sx,sy,smooth,oldGlobalAlpha,theta=getRotation(r,ele),x1=bb.x1,y1=bb.y1,w=bb.w,h=bb.h;if(0!==theta){var rotPt=eleTxrCache.getRotationPoint(ele);sx=rotPt.x,sy=rotPt.y,context.translate(sx,sy),context.rotate(theta),(smooth=r.getImgSmoothing(context))||r.setImgSmoothing(context,!0);var off=eleTxrCache.getRotationOffset(ele);x=off.x,y=off.y}else x=x1,y=y1;1!==opacity&&(oldGlobalAlpha=context.globalAlpha,context.globalAlpha=oldGlobalAlpha*opacity),context.drawImage(eleCache.texture.canvas,eleCache.x,0,eleCache.width,eleCache.height,x,y,w,h),1!==opacity&&(context.globalAlpha=oldGlobalAlpha),0!==theta&&(context.rotate(-theta),context.translate(-sx,-sy),smooth||r.setImgSmoothing(context,!1))}else eleTxrCache.drawElement(context,ele)}}},getZeroRotation=function getZeroRotation2(){return 0},getLabelRotation=function getLabelRotation2(r,ele){return r.getTextAngle(ele,null)},getSourceLabelRotation=function getSourceLabelRotation2(r,ele){return r.getTextAngle(ele,"source")},getTargetLabelRotation=function getTargetLabelRotation2(r,ele){return r.getTextAngle(ele,"target")},getOpacity=function getOpacity2(r,ele){return ele.effectiveOpacity()},getTextOpacity=function getTextOpacity2(e,ele){return ele.pstyle("text-opacity").pfValue*ele.effectiveOpacity()};CRp$9.drawCachedElement=function(context,ele,pxRatio,extent,lvl,requestHighQuality){var r=this,_r$data=r.data,eleTxrCache=_r$data.eleTxrCache,lblTxrCache=_r$data.lblTxrCache,slbTxrCache=_r$data.slbTxrCache,tlbTxrCache=_r$data.tlbTxrCache,bb=ele.boundingBox(),reason=!0===requestHighQuality?eleTxrCache.reasons.highQuality:null;if(0!==bb.w&&0!==bb.h&&ele.visible()&&(!extent||boundingBoxesIntersect(bb,extent))){var isEdge=ele.isEdge(),badLine=ele.element()._private.rscratch.badLine;r.drawElementUnderlay(context,ele),r.drawCachedElementPortion(context,ele,eleTxrCache,pxRatio,lvl,reason,getZeroRotation,getOpacity),isEdge&&badLine||r.drawCachedElementPortion(context,ele,lblTxrCache,pxRatio,lvl,reason,getLabelRotation,getTextOpacity),isEdge&&!badLine&&(r.drawCachedElementPortion(context,ele,slbTxrCache,pxRatio,lvl,reason,getSourceLabelRotation,getTextOpacity),r.drawCachedElementPortion(context,ele,tlbTxrCache,pxRatio,lvl,reason,getTargetLabelRotation,getTextOpacity)),r.drawElementOverlay(context,ele)}},CRp$9.drawElements=function(context,eles){for(var r=this,i2=0;i2<eles.length;i2++){var ele=eles[i2];r.drawElement(context,ele)}},CRp$9.drawCachedElements=function(context,eles,pxRatio,extent){for(var r=this,i2=0;i2<eles.length;i2++){var ele=eles[i2];r.drawCachedElement(context,ele,pxRatio,extent)}},CRp$9.drawCachedNodes=function(context,eles,pxRatio,extent){for(var r=this,i2=0;i2<eles.length;i2++){var ele=eles[i2];ele.isNode()&&r.drawCachedElement(context,ele,pxRatio,extent)}},CRp$9.drawLayeredElements=function(context,eles,pxRatio,extent){var r=this,layers=r.data.lyrTxrCache.getLayers(eles,pxRatio);if(layers)for(var i2=0;i2<layers.length;i2++){var layer=layers[i2],bb=layer.bb;0!==bb.w&&0!==bb.h&&context.drawImage(layer.canvas,bb.x1,bb.y1,bb.w,bb.h)}else r.drawCachedElements(context,eles,pxRatio,extent)};var CRp$8={drawEdge:function(context,edge,shiftToOriginWithBb){var drawLabel=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],shouldDrawOverlay=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],shouldDrawOpacity=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=this,rs=edge._private.rscratch;if((!shouldDrawOpacity||edge.visible())&&!rs.badLine&&null!=rs.allpts&&!isNaN(rs.allpts[0])){var bb;shiftToOriginWithBb&&(bb=shiftToOriginWithBb,context.translate(-bb.x1,-bb.y1));var opacity=shouldDrawOpacity?edge.pstyle("opacity").value:1,lineOpacity=shouldDrawOpacity?edge.pstyle("line-opacity").value:1,curveStyle=edge.pstyle("curve-style").value,lineStyle=edge.pstyle("line-style").value,edgeWidth=edge.pstyle("width").pfValue,lineCap=edge.pstyle("line-cap").value,effectiveLineOpacity=opacity*lineOpacity,effectiveArrowOpacity=opacity*lineOpacity,drawLine=function drawLine2(){var strokeOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:effectiveLineOpacity;"straight-triangle"===curveStyle?(r.eleStrokeStyle(context,edge,strokeOpacity),r.drawEdgeTrianglePath(edge,context,rs.allpts)):(context.lineWidth=edgeWidth,context.lineCap=lineCap,r.eleStrokeStyle(context,edge,strokeOpacity),r.drawEdgePath(edge,context,rs.allpts,lineStyle),context.lineCap="butt")},drawOverlay=function drawOverlay2(){shouldDrawOverlay&&r.drawEdgeOverlay(context,edge)},drawUnderlay=function drawUnderlay2(){shouldDrawOverlay&&r.drawEdgeUnderlay(context,edge)},drawArrows=function drawArrows2(){var arrowOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:effectiveArrowOpacity;r.drawArrowheads(context,edge,arrowOpacity)},drawText=function drawText2(){r.drawElementText(context,edge,null,drawLabel)};if(context.lineJoin="round","yes"===edge.pstyle("ghost").value){var gx=edge.pstyle("ghost-offset-x").pfValue,gy=edge.pstyle("ghost-offset-y").pfValue,ghostOpacity=edge.pstyle("ghost-opacity").value,effectiveGhostOpacity=effectiveLineOpacity*ghostOpacity;context.translate(gx,gy),drawLine(effectiveGhostOpacity),drawArrows(effectiveGhostOpacity),context.translate(-gx,-gy)}drawUnderlay(),drawLine(),drawArrows(),drawOverlay(),drawText(),shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)}}},drawEdgeOverlayUnderlay=function drawEdgeOverlayUnderlay2(overlayOrUnderlay){if(!["overlay","underlay"].includes(overlayOrUnderlay))throw new Error("Invalid state");return function(context,edge){if(edge.visible()){var opacity=edge.pstyle("".concat(overlayOrUnderlay,"-opacity")).value;if(0!==opacity){var r=this,usePaths=r.usePaths(),rs=edge._private.rscratch,width=2*edge.pstyle("".concat(overlayOrUnderlay,"-padding")).pfValue,color=edge.pstyle("".concat(overlayOrUnderlay,"-color")).value;context.lineWidth=width,"self"!==rs.edgeType||usePaths?context.lineCap="round":context.lineCap="butt",r.colorStrokeStyle(context,color[0],color[1],color[2],opacity),r.drawEdgePath(edge,context,rs.allpts,"solid")}}}};CRp$8.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay"),CRp$8.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay"),CRp$8.drawEdgePath=function(edge,context,pts2,type){var path,rs=edge._private.rscratch,canvasCxt=context,pathCacheHit=!1,usePaths=this.usePaths(),lineDashPattern=edge.pstyle("line-dash-pattern").pfValue,lineDashOffset=edge.pstyle("line-dash-offset").pfValue;if(usePaths){var pathCacheKey=pts2.join("$");rs.pathCacheKey&&rs.pathCacheKey===pathCacheKey?(path=context=rs.pathCache,pathCacheHit=!0):(path=context=new Path2D,rs.pathCacheKey=pathCacheKey,rs.pathCache=path)}if(canvasCxt.setLineDash)switch(type){case"dotted":canvasCxt.setLineDash([1,1]);break;case"dashed":canvasCxt.setLineDash(lineDashPattern),canvasCxt.lineDashOffset=lineDashOffset;break;case"solid":canvasCxt.setLineDash([])}if(!pathCacheHit&&!rs.badLine)switch(context.beginPath&&context.beginPath(),context.moveTo(pts2[0],pts2[1]),rs.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var i2=2;i2+3<pts2.length;i2+=4)context.quadraticCurveTo(pts2[i2],pts2[i2+1],pts2[i2+2],pts2[i2+3]);break;case"straight":case"segments":case"haystack":for(var _i=2;_i+1<pts2.length;_i+=2)context.lineTo(pts2[_i],pts2[_i+1])}context=canvasCxt,usePaths?context.stroke(path):context.stroke(),context.setLineDash&&context.setLineDash([])},CRp$8.drawEdgeTrianglePath=function(edge,context,pts2){context.fillStyle=context.strokeStyle;for(var edgeWidth=edge.pstyle("width").pfValue,i2=0;i2+1<pts2.length;i2+=2){var vector=[pts2[i2+2]-pts2[i2],pts2[i2+3]-pts2[i2+1]],length=Math.sqrt(vector[0]*vector[0]+vector[1]*vector[1]),normal=[vector[1]/length,-vector[0]/length],triangleHead=[normal[0]*edgeWidth/2,normal[1]*edgeWidth/2];context.beginPath(),context.moveTo(pts2[i2]-triangleHead[0],pts2[i2+1]-triangleHead[1]),context.lineTo(pts2[i2]+triangleHead[0],pts2[i2+1]+triangleHead[1]),context.lineTo(pts2[i2+2],pts2[i2+3]),context.closePath(),context.fill()}},CRp$8.drawArrowheads=function(context,edge,opacity){var rs=edge._private.rscratch,isHaystack="haystack"===rs.edgeType;isHaystack||this.drawArrowhead(context,edge,"source",rs.arrowStartX,rs.arrowStartY,rs.srcArrowAngle,opacity),this.drawArrowhead(context,edge,"mid-target",rs.midX,rs.midY,rs.midtgtArrowAngle,opacity),this.drawArrowhead(context,edge,"mid-source",rs.midX,rs.midY,rs.midsrcArrowAngle,opacity),isHaystack||this.drawArrowhead(context,edge,"target",rs.arrowEndX,rs.arrowEndY,rs.tgtArrowAngle,opacity)},CRp$8.drawArrowhead=function(context,edge,prefix,x,y,angle,opacity){if(!(isNaN(x)||null==x||isNaN(y)||null==y||isNaN(angle)||null==angle)){var self2=this,arrowShape=edge.pstyle(prefix+"-arrow-shape").value;if("none"!==arrowShape){var arrowClearFill="hollow"===edge.pstyle(prefix+"-arrow-fill").value?"both":"filled",arrowFill=edge.pstyle(prefix+"-arrow-fill").value,edgeWidth=edge.pstyle("width").pfValue,pArrowWidth=edge.pstyle(prefix+"-arrow-width"),arrowWidth="match-line"===pArrowWidth.value?edgeWidth:pArrowWidth.pfValue;"%"===pArrowWidth.units&&(arrowWidth*=edgeWidth);var edgeOpacity=edge.pstyle("opacity").value;void 0===opacity&&(opacity=edgeOpacity);var gco=context.globalCompositeOperation;1===opacity&&"hollow"!==arrowFill||(context.globalCompositeOperation="destination-out",self2.colorFillStyle(context,255,255,255,1),self2.colorStrokeStyle(context,255,255,255,1),self2.drawArrowShape(edge,context,arrowClearFill,edgeWidth,arrowShape,arrowWidth,x,y,angle),context.globalCompositeOperation=gco);var color=edge.pstyle(prefix+"-arrow-color").value;self2.colorFillStyle(context,color[0],color[1],color[2],opacity),self2.colorStrokeStyle(context,color[0],color[1],color[2],opacity),self2.drawArrowShape(edge,context,arrowFill,edgeWidth,arrowShape,arrowWidth,x,y,angle)}}},CRp$8.drawArrowShape=function(edge,context,fill,edgeWidth,shape,shapeWidth,x,y,angle){var path,r=this,usePaths=this.usePaths()&&"triangle-cross"!==shape,pathCacheHit=!1,canvasContext=context,translation={x:x,y:y},scale=edge.pstyle("arrow-scale").value,size=this.getArrowWidth(edgeWidth,scale),shapeImpl=r.arrowShapes[shape];if(usePaths){var cache2=r.arrowPathCache=r.arrowPathCache||[],key=hashString(shape),cachedPath=cache2[key];null!=cachedPath?(path=context=cachedPath,pathCacheHit=!0):(path=context=new Path2D,cache2[key]=path)}pathCacheHit||(context.beginPath&&context.beginPath(),usePaths?shapeImpl.draw(context,1,0,{x:0,y:0},1):shapeImpl.draw(context,size,angle,translation,edgeWidth),context.closePath&&context.closePath()),context=canvasContext,usePaths&&(context.translate(x,y),context.rotate(angle),context.scale(size,size)),"filled"!==fill&&"both"!==fill||(usePaths?context.fill(path):context.fill()),"hollow"!==fill&&"both"!==fill||(context.lineWidth=shapeWidth/(usePaths?size:1),context.lineJoin="miter",usePaths?context.stroke(path):context.stroke()),usePaths&&(context.scale(1/size,1/size),context.rotate(-angle),context.translate(-x,-y))};var CRp$7={safeDrawImage:function(context,img,ix,iy,iw,ih,x,y,w,h){if(!(iw<=0||ih<=0||w<=0||h<=0))try{context.drawImage(img,ix,iy,iw,ih,x,y,w,h)}catch(e){warn(e)}},drawInscribedImage:function(context,img,node,index,nodeOpacity){var r=this,pos=node.position(),nodeX=pos.x,nodeY=pos.y,styleObj=node.cy().style(),getIndexedStyle=styleObj.getIndexedStyle.bind(styleObj),fit=getIndexedStyle(node,"background-fit","value",index),repeat=getIndexedStyle(node,"background-repeat","value",index),nodeW=node.width(),nodeH=node.height(),paddingX2=2*node.padding(),nodeTW=nodeW+("inner"===getIndexedStyle(node,"background-width-relative-to","value",index)?0:paddingX2),nodeTH=nodeH+("inner"===getIndexedStyle(node,"background-height-relative-to","value",index)?0:paddingX2),rs=node._private.rscratch,shouldClip="node"===getIndexedStyle(node,"background-clip","value",index),imgOpacity=getIndexedStyle(node,"background-image-opacity","value",index)*nodeOpacity,smooth=getIndexedStyle(node,"background-image-smoothing","value",index),imgW=img.width||img.cachedW,imgH=img.height||img.cachedH;null!=imgW&&null!=imgH||(document.body.appendChild(img),imgW=img.cachedW=img.width||img.offsetWidth,imgH=img.cachedH=img.height||img.offsetHeight,document.body.removeChild(img));var w=imgW,h=imgH;if("auto"!==getIndexedStyle(node,"background-width","value",index)&&(w="%"===getIndexedStyle(node,"background-width","units",index)?getIndexedStyle(node,"background-width","pfValue",index)*nodeTW:getIndexedStyle(node,"background-width","pfValue",index)),"auto"!==getIndexedStyle(node,"background-height","value",index)&&(h="%"===getIndexedStyle(node,"background-height","units",index)?getIndexedStyle(node,"background-height","pfValue",index)*nodeTH:getIndexedStyle(node,"background-height","pfValue",index)),0!==w&&0!==h){if("contain"===fit)w*=scale=Math.min(nodeTW/w,nodeTH/h),h*=scale;else if("cover"===fit){var scale;w*=scale=Math.max(nodeTW/w,nodeTH/h),h*=scale}var x=nodeX-nodeTW/2,posXUnits=getIndexedStyle(node,"background-position-x","units",index),posXPfVal=getIndexedStyle(node,"background-position-x","pfValue",index);x+="%"===posXUnits?(nodeTW-w)*posXPfVal:posXPfVal;var offXUnits=getIndexedStyle(node,"background-offset-x","units",index),offXPfVal=getIndexedStyle(node,"background-offset-x","pfValue",index);x+="%"===offXUnits?(nodeTW-w)*offXPfVal:offXPfVal;var y=nodeY-nodeTH/2,posYUnits=getIndexedStyle(node,"background-position-y","units",index),posYPfVal=getIndexedStyle(node,"background-position-y","pfValue",index);y+="%"===posYUnits?(nodeTH-h)*posYPfVal:posYPfVal;var offYUnits=getIndexedStyle(node,"background-offset-y","units",index),offYPfVal=getIndexedStyle(node,"background-offset-y","pfValue",index);y+="%"===offYUnits?(nodeTH-h)*offYPfVal:offYPfVal,rs.pathCache&&(x-=nodeX,y-=nodeY,nodeX=0,nodeY=0);var gAlpha=context.globalAlpha;context.globalAlpha=imgOpacity;var smoothingEnabled=r.getImgSmoothing(context),isSmoothingSwitched=!1;if("no"===smooth&&smoothingEnabled?(r.setImgSmoothing(context,!1),isSmoothingSwitched=!0):"yes"!==smooth||smoothingEnabled||(r.setImgSmoothing(context,!0),isSmoothingSwitched=!0),"no-repeat"===repeat)shouldClip&&(context.save(),rs.pathCache?context.clip(rs.pathCache):(r.nodeShapes[r.getNodeShape(node)].draw(context,nodeX,nodeY,nodeTW,nodeTH),context.clip())),r.safeDrawImage(context,img,0,0,imgW,imgH,x,y,w,h),shouldClip&&context.restore();else{var pattern=context.createPattern(img,repeat);context.fillStyle=pattern,r.nodeShapes[r.getNodeShape(node)].draw(context,nodeX,nodeY,nodeTW,nodeTH),context.translate(x,y),context.fill(),context.translate(-x,-y)}context.globalAlpha=gAlpha,isSmoothingSwitched&&r.setImgSmoothing(context,smoothingEnabled)}}},CRp$6={};function roundRect(ctx,x,y,width,height){var radius=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,stroke=arguments.length>6?arguments[6]:void 0;ctx.beginPath(),ctx.moveTo(x+radius,y),ctx.lineTo(x+width-radius,y),ctx.quadraticCurveTo(x+width,y,x+width,y+radius),ctx.lineTo(x+width,y+height-radius),ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),ctx.lineTo(x+radius,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-radius),ctx.lineTo(x,y+radius),ctx.quadraticCurveTo(x,y,x+radius,y),ctx.closePath(),stroke?ctx.stroke():ctx.fill()}CRp$6.eleTextBiggerThanMin=function(ele,scale){if(!scale){var zoom=ele.cy().zoom(),pxRatio=this.getPixelRatio(),lvl=Math.ceil(log2(zoom*pxRatio));scale=Math.pow(2,lvl)}return!(ele.pstyle("font-size").pfValue*scale<ele.pstyle("min-zoomed-font-size").pfValue)},CRp$6.drawElementText=function(context,ele,shiftToOriginWithBb,force,prefix){var useEleOpacity=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=this;if(null==force){if(useEleOpacity&&!r.eleTextBiggerThanMin(ele))return}else if(!1===force)return;if(ele.isNode()){var label=ele.pstyle("label");if(!label||!label.value)return;var justification=r.getLabelJustification(ele);context.textAlign=justification,context.textBaseline="bottom"}else{var badLine=ele.element()._private.rscratch.badLine,_label=ele.pstyle("label"),srcLabel=ele.pstyle("source-label"),tgtLabel=ele.pstyle("target-label");if(badLine||(!_label||!_label.value)&&(!srcLabel||!srcLabel.value)&&(!tgtLabel||!tgtLabel.value))return;context.textAlign="center",context.textBaseline="bottom"}var bb,applyRotation=!shiftToOriginWithBb;shiftToOriginWithBb&&(bb=shiftToOriginWithBb,context.translate(-bb.x1,-bb.y1)),null==prefix?(r.drawText(context,ele,null,applyRotation,useEleOpacity),ele.isEdge()&&(r.drawText(context,ele,"source",applyRotation,useEleOpacity),r.drawText(context,ele,"target",applyRotation,useEleOpacity))):r.drawText(context,ele,prefix,applyRotation,useEleOpacity),shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)},CRp$6.getFontCache=function(context){var cache2;this.fontCaches=this.fontCaches||[];for(var i2=0;i2<this.fontCaches.length;i2++)if((cache2=this.fontCaches[i2]).context===context)return cache2;return cache2={context:context},this.fontCaches.push(cache2),cache2},CRp$6.setupTextStyle=function(context,ele){var useEleOpacity=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],labelStyle=ele.pstyle("font-style").strValue,labelSize=ele.pstyle("font-size").pfValue+"px",labelFamily=ele.pstyle("font-family").strValue,labelWeight=ele.pstyle("font-weight").strValue,opacity=useEleOpacity?ele.effectiveOpacity()*ele.pstyle("text-opacity").value:1,outlineOpacity=ele.pstyle("text-outline-opacity").value*opacity,color=ele.pstyle("color").value,outlineColor=ele.pstyle("text-outline-color").value;context.font=labelStyle+" "+labelWeight+" "+labelSize+" "+labelFamily,context.lineJoin="round",this.colorFillStyle(context,color[0],color[1],color[2],opacity),this.colorStrokeStyle(context,outlineColor[0],outlineColor[1],outlineColor[2],outlineOpacity)},CRp$6.getTextAngle=function(ele,prefix){var rscratch=ele._private.rscratch,pdash=prefix?prefix+"-":"",rotation=ele.pstyle(pdash+"text-rotation"),textAngle=getPrefixedProperty(rscratch,"labelAngle",prefix);return"autorotate"===rotation.strValue?ele.isEdge()?textAngle:0:"none"===rotation.strValue?0:rotation.pfValue},CRp$6.drawText=function(context,ele,prefix){var applyRotation=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],useEleOpacity=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],rscratch=ele._private.rscratch,parentOpacity=useEleOpacity?ele.effectiveOpacity():1;if(!useEleOpacity||0!==parentOpacity&&0!==ele.pstyle("text-opacity").value){"main"===prefix&&(prefix=null);var orgTextX,orgTextY,textX=getPrefixedProperty(rscratch,"labelX",prefix),textY=getPrefixedProperty(rscratch,"labelY",prefix),text=this.getLabelText(ele,prefix);if(null!=text&&""!==text&&!isNaN(textX)&&!isNaN(textY)){this.setupTextStyle(context,ele,useEleOpacity);var theta,pdash=prefix?prefix+"-":"",textW=getPrefixedProperty(rscratch,"labelWidth",prefix),textH=getPrefixedProperty(rscratch,"labelHeight",prefix),marginX=ele.pstyle(pdash+"text-margin-x").pfValue,marginY=ele.pstyle(pdash+"text-margin-y").pfValue,isEdge=ele.isEdge(),halign=ele.pstyle("text-halign").value,valign=ele.pstyle("text-valign").value;switch(isEdge&&(halign="center",valign="center"),textX+=marginX,textY+=marginY,0!==(theta=applyRotation?this.getTextAngle(ele,prefix):0)&&(orgTextX=textX,orgTextY=textY,context.translate(orgTextX,orgTextY),context.rotate(theta),textX=0,textY=0),valign){case"top":break;case"center":textY+=textH/2;break;case"bottom":textY+=textH}var backgroundOpacity=ele.pstyle("text-background-opacity").value,borderOpacity=ele.pstyle("text-border-opacity").value,textBorderWidth=ele.pstyle("text-border-width").pfValue,backgroundPadding=ele.pstyle("text-background-padding").pfValue,rounded=0===ele.pstyle("text-background-shape").strValue.indexOf("round"),roundRadius=2;if(backgroundOpacity>0||textBorderWidth>0&&borderOpacity>0){var bgX=textX-backgroundPadding;switch(halign){case"left":bgX-=textW;break;case"center":bgX-=textW/2}var bgY=textY-textH-backgroundPadding,bgW=textW+2*backgroundPadding,bgH=textH+2*backgroundPadding;if(backgroundOpacity>0){var textFill=context.fillStyle,textBackgroundColor=ele.pstyle("text-background-color").value;context.fillStyle="rgba("+textBackgroundColor[0]+","+textBackgroundColor[1]+","+textBackgroundColor[2]+","+backgroundOpacity*parentOpacity+")",rounded?roundRect(context,bgX,bgY,bgW,bgH,roundRadius):context.fillRect(bgX,bgY,bgW,bgH),context.fillStyle=textFill}if(textBorderWidth>0&&borderOpacity>0){var textStroke=context.strokeStyle,textLineWidth=context.lineWidth,textBorderColor=ele.pstyle("text-border-color").value,textBorderStyle=ele.pstyle("text-border-style").value;if(context.strokeStyle="rgba("+textBorderColor[0]+","+textBorderColor[1]+","+textBorderColor[2]+","+borderOpacity*parentOpacity+")",context.lineWidth=textBorderWidth,context.setLineDash)switch(textBorderStyle){case"dotted":context.setLineDash([1,1]);break;case"dashed":context.setLineDash([4,2]);break;case"double":context.lineWidth=textBorderWidth/4,context.setLineDash([]);break;case"solid":context.setLineDash([])}if(rounded?roundRect(context,bgX,bgY,bgW,bgH,roundRadius,"stroke"):context.strokeRect(bgX,bgY,bgW,bgH),"double"===textBorderStyle){var whiteWidth=textBorderWidth/2;rounded?roundRect(context,bgX+whiteWidth,bgY+whiteWidth,bgW-2*whiteWidth,bgH-2*whiteWidth,roundRadius,"stroke"):context.strokeRect(bgX+whiteWidth,bgY+whiteWidth,bgW-2*whiteWidth,bgH-2*whiteWidth)}context.setLineDash&&context.setLineDash([]),context.lineWidth=textLineWidth,context.strokeStyle=textStroke}}var lineWidth=2*ele.pstyle("text-outline-width").pfValue;if(lineWidth>0&&(context.lineWidth=lineWidth),"wrap"===ele.pstyle("text-wrap").value){var lines=getPrefixedProperty(rscratch,"labelWrapCachedLines",prefix),lineHeight=getPrefixedProperty(rscratch,"labelLineHeight",prefix),halfTextW=textW/2,justification=this.getLabelJustification(ele);switch("auto"===justification||("left"===halign?"left"===justification?textX+=-textW:"center"===justification&&(textX+=-halfTextW):"center"===halign?"left"===justification?textX+=-halfTextW:"right"===justification&&(textX+=halfTextW):"right"===halign&&("center"===justification?textX+=halfTextW:"right"===justification&&(textX+=textW))),valign){case"top":case"center":case"bottom":textY-=(lines.length-1)*lineHeight}for(var l=0;l<lines.length;l++)lineWidth>0&&context.strokeText(lines[l],textX,textY),context.fillText(lines[l],textX,textY),textY+=lineHeight}else lineWidth>0&&context.strokeText(text,textX,textY),context.fillText(text,textX,textY);0!==theta&&(context.rotate(-theta),context.translate(-orgTextX,-orgTextY))}}};var CRp$5={drawNode:function(context,node,shiftToOriginWithBb){var nodeWidth,nodeHeight,drawLabel=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],shouldDrawOverlay=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],shouldDrawOpacity=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=this,_p=node._private,rs=_p.rscratch,pos=node.position();if(number$1(pos.x)&&number$1(pos.y)&&(!shouldDrawOpacity||node.visible())){var path,bb,eleOpacity=shouldDrawOpacity?node.effectiveOpacity():1,usePaths=r.usePaths(),pathCacheHit=!1,padding=node.padding();nodeWidth=node.width()+2*padding,nodeHeight=node.height()+2*padding,shiftToOriginWithBb&&(bb=shiftToOriginWithBb,context.translate(-bb.x1,-bb.y1));for(var urls=node.pstyle("background-image").value,urlDefined=new Array(urls.length),image=new Array(urls.length),numImages=0,i2=0;i2<urls.length;i2++){var url=urls[i2];if(urlDefined[i2]=null!=url&&"none"!==url){var bgImgCrossOrigin=node.cy().style().getIndexedStyle(node,"background-image-crossorigin","value",i2);numImages++,image[i2]=r.getCachedImage(url,bgImgCrossOrigin,(function(){_p.backgroundTimestamp=Date.now(),node.emitAndNotify("background")}))}}var darkness=node.pstyle("background-blacken").value,borderWidth=node.pstyle("border-width").pfValue,bgOpacity=node.pstyle("background-opacity").value*eleOpacity,borderColor=node.pstyle("border-color").value,borderStyle=node.pstyle("border-style").value,borderOpacity=node.pstyle("border-opacity").value*eleOpacity,outlineWidth=node.pstyle("outline-width").pfValue,outlineColor=node.pstyle("outline-color").value,outlineStyle=node.pstyle("outline-style").value,outlineOpacity=node.pstyle("outline-opacity").value*eleOpacity,outlineOffset=node.pstyle("outline-offset").value;context.lineJoin="miter";var setupShapeColor=function setupShapeColor2(){var bgOpy=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bgOpacity;r.eleFillStyle(context,node,bgOpy)},setupBorderColor=function setupBorderColor2(){var bdrOpy=arguments.length>0&&void 0!==arguments[0]?arguments[0]:borderOpacity;r.colorStrokeStyle(context,borderColor[0],borderColor[1],borderColor[2],bdrOpy)},setupOutlineColor=function setupOutlineColor2(){var otlnOpy=arguments.length>0&&void 0!==arguments[0]?arguments[0]:outlineOpacity;r.colorStrokeStyle(context,outlineColor[0],outlineColor[1],outlineColor[2],otlnOpy)},getPath=function getPath2(width,height,shape,points){var path2,pathCache=r.nodePathCache=r.nodePathCache||[],key=hashStrings("polygon"===shape?shape+","+points.join(","):shape,""+height,""+width),cachedPath=pathCache[key],cacheHit=!1;return null!=cachedPath?(path2=cachedPath,cacheHit=!0,rs.pathCache=path2):(path2=new Path2D,pathCache[key]=rs.pathCache=path2),{path:path2,cacheHit:cacheHit}},styleShape=node.pstyle("shape").strValue,shapePts=node.pstyle("shape-polygon-points").pfValue;if(usePaths){context.translate(pos.x,pos.y);var shapePath=getPath(nodeWidth,nodeHeight,styleShape,shapePts);path=shapePath.path,pathCacheHit=shapePath.cacheHit}var drawShape=function drawShape2(){if(!pathCacheHit){var npos=pos;usePaths&&(npos={x:0,y:0}),r.nodeShapes[r.getNodeShape(node)].draw(path||context,npos.x,npos.y,nodeWidth,nodeHeight)}usePaths?context.fill(path):context.fill()},drawImages=function drawImages2(){for(var nodeOpacity=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eleOpacity,inside=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],prevBging=_p.backgrounding,totalCompleted=0,_i=0;_i<image.length;_i++){var bgContainment=node.cy().style().getIndexedStyle(node,"background-image-containment","value",_i);inside&&"over"===bgContainment||!inside&&"inside"===bgContainment?totalCompleted++:urlDefined[_i]&&image[_i].complete&&!image[_i].error&&(totalCompleted++,r.drawInscribedImage(context,image[_i],node,_i,nodeOpacity))}_p.backgrounding=!(totalCompleted===numImages),prevBging!==_p.backgrounding&&node.updateStyle(!1)},drawPie=function drawPie2(){var redrawShape=arguments.length>0&&void 0!==arguments[0]&&arguments[0],pieOpacity=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eleOpacity;r.hasPie(node)&&(r.drawPie(context,node,pieOpacity),redrawShape&&(usePaths||r.nodeShapes[r.getNodeShape(node)].draw(context,pos.x,pos.y,nodeWidth,nodeHeight)))},darken2=function darken3(){var opacity=(darkness>0?darkness:-darkness)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:eleOpacity),c=darkness>0?0:255;0!==darkness&&(r.colorFillStyle(context,c,c,c,opacity),usePaths?context.fill(path):context.fill())},drawBorder=function drawBorder2(){if(borderWidth>0){if(context.lineWidth=borderWidth,context.lineCap="butt",context.setLineDash)switch(borderStyle){case"dotted":context.setLineDash([1,1]);break;case"dashed":context.setLineDash([4,2]);break;case"solid":case"double":context.setLineDash([])}if(usePaths?context.stroke(path):context.stroke(),"double"===borderStyle){context.lineWidth=borderWidth/3;var gco=context.globalCompositeOperation;context.globalCompositeOperation="destination-out",usePaths?context.stroke(path):context.stroke(),context.globalCompositeOperation=gco}context.setLineDash&&context.setLineDash([])}},drawOutline=function drawOutline2(){if(outlineWidth>0){if(context.lineWidth=outlineWidth,context.lineCap="butt",context.setLineDash)switch(outlineStyle){case"dotted":context.setLineDash([1,1]);break;case"dashed":context.setLineDash([4,2]);break;case"solid":case"double":context.setLineDash([])}var npos=pos;usePaths&&(npos={x:0,y:0});var _path,shape=r.getNodeShape(node),scaleX=(nodeWidth+borderWidth+(outlineWidth+outlineOffset))/nodeWidth,scaleY=(nodeHeight+borderWidth+(outlineWidth+outlineOffset))/nodeHeight,sWidth=nodeWidth*scaleX,sHeight=nodeHeight*scaleY,points=r.nodeShapes[shape].points;if(usePaths&&(_path=getPath(sWidth,sHeight,shape,points).path),"ellipse"===shape)r.drawEllipsePath(_path||context,npos.x,npos.y,sWidth,sHeight);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(shape)){var sMult=0,offsetX=0,offsetY=0;"round-diamond"===shape?sMult=1.4*(borderWidth+outlineOffset+outlineWidth):"round-heptagon"===shape?(sMult=1.075*(borderWidth+outlineOffset+outlineWidth),offsetY=-(borderWidth/2+outlineOffset+outlineWidth)/35):"round-hexagon"===shape?sMult=1.12*(borderWidth+outlineOffset+outlineWidth):"round-pentagon"===shape?(sMult=1.13*(borderWidth+outlineOffset+outlineWidth),offsetY=-(borderWidth/2+outlineOffset+outlineWidth)/15):"round-tag"===shape?(sMult=1.12*(borderWidth+outlineOffset+outlineWidth),offsetX=.07*(borderWidth/2+outlineWidth+outlineOffset)):"round-triangle"===shape&&(sMult=(borderWidth+outlineOffset+outlineWidth)*(Math.PI/2),offsetY=-(borderWidth+outlineOffset/2+outlineWidth)/Math.PI),0!==sMult&&(scaleX=(nodeWidth+sMult)/nodeWidth,scaleY=(nodeHeight+sMult)/nodeHeight),r.drawRoundPolygonPath(_path||context,npos.x+offsetX,npos.y+offsetY,nodeWidth*scaleX,nodeHeight*scaleY,points)}else["roundrectangle","round-rectangle"].includes(shape)?r.drawRoundRectanglePath(_path||context,npos.x,npos.y,sWidth,sHeight):["cutrectangle","cut-rectangle"].includes(shape)?r.drawCutRectanglePath(_path||context,npos.x,npos.y,sWidth,sHeight):["bottomroundrectangle","bottom-round-rectangle"].includes(shape)?r.drawBottomRoundRectanglePath(_path||context,npos.x,npos.y,sWidth,sHeight):"barrel"===shape?r.drawBarrelPath(_path||context,npos.x,npos.y,sWidth,sHeight):shape.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(shape)?(points=joinLines(expandPolygon(points,(borderWidth+outlineWidth+outlineOffset)/nodeWidth)),r.drawPolygonPath(_path||context,npos.x,npos.y,nodeWidth,nodeHeight,points)):(points=joinLines(expandPolygon(points,-(borderWidth+outlineWidth+outlineOffset)/nodeWidth)),r.drawPolygonPath(_path||context,npos.x,npos.y,nodeWidth,nodeHeight,points));if(usePaths?context.stroke(_path):context.stroke(),"double"===outlineStyle){context.lineWidth=borderWidth/3;var gco=context.globalCompositeOperation;context.globalCompositeOperation="destination-out",usePaths?context.stroke(_path):context.stroke(),context.globalCompositeOperation=gco}context.setLineDash&&context.setLineDash([])}},drawOverlay=function drawOverlay2(){shouldDrawOverlay&&r.drawNodeOverlay(context,node,pos,nodeWidth,nodeHeight)},drawUnderlay=function drawUnderlay2(){shouldDrawOverlay&&r.drawNodeUnderlay(context,node,pos,nodeWidth,nodeHeight)},drawText=function drawText2(){r.drawElementText(context,node,null,drawLabel)};if("yes"===node.pstyle("ghost").value){var gx=node.pstyle("ghost-offset-x").pfValue,gy=node.pstyle("ghost-offset-y").pfValue,ghostOpacity=node.pstyle("ghost-opacity").value,effGhostOpacity=ghostOpacity*eleOpacity;context.translate(gx,gy),setupOutlineColor(),drawOutline(),setupShapeColor(ghostOpacity*bgOpacity),drawShape(),drawImages(effGhostOpacity,!0),setupBorderColor(ghostOpacity*borderOpacity),drawBorder(),drawPie(0!==darkness||0!==borderWidth),drawImages(effGhostOpacity,!1),darken2(effGhostOpacity),context.translate(-gx,-gy)}usePaths&&context.translate(-pos.x,-pos.y),drawUnderlay(),usePaths&&context.translate(pos.x,pos.y),setupOutlineColor(),drawOutline(),setupShapeColor(),drawShape(),drawImages(eleOpacity,!0),setupBorderColor(),drawBorder(),drawPie(0!==darkness||0!==borderWidth),drawImages(eleOpacity,!1),darken2(),usePaths&&context.translate(-pos.x,-pos.y),drawText(),drawOverlay(),shiftToOriginWithBb&&context.translate(bb.x1,bb.y1)}}},drawNodeOverlayUnderlay=function drawNodeOverlayUnderlay2(overlayOrUnderlay){if(!["overlay","underlay"].includes(overlayOrUnderlay))throw new Error("Invalid state");return function(context,node,pos,nodeWidth,nodeHeight){var r=this;if(node.visible()){var padding=node.pstyle("".concat(overlayOrUnderlay,"-padding")).pfValue,opacity=node.pstyle("".concat(overlayOrUnderlay,"-opacity")).value,color=node.pstyle("".concat(overlayOrUnderlay,"-color")).value,shape=node.pstyle("".concat(overlayOrUnderlay,"-shape")).value;if(opacity>0){if(pos=pos||node.position(),null==nodeWidth||null==nodeHeight){var _padding=node.padding();nodeWidth=node.width()+2*_padding,nodeHeight=node.height()+2*_padding}r.colorFillStyle(context,color[0],color[1],color[2],opacity),r.nodeShapes[shape].draw(context,pos.x,pos.y,nodeWidth+2*padding,nodeHeight+2*padding),context.fill()}}}};CRp$5.drawNodeOverlay=drawNodeOverlayUnderlay("overlay"),CRp$5.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay"),CRp$5.hasPie=function(node){return(node=node[0])._private.hasPie},CRp$5.drawPie=function(context,node,nodeOpacity,pos){node=node[0],pos=pos||node.position();var cyStyle=node.cy().style(),pieSize=node.pstyle("pie-size"),x=pos.x,y=pos.y,nodeW=node.width(),nodeH=node.height(),radius=Math.min(nodeW,nodeH)/2,lastPercent=0;this.usePaths()&&(x=0,y=0),"%"===pieSize.units?radius*=pieSize.pfValue:void 0!==pieSize.pfValue&&(radius=pieSize.pfValue/2);for(var i2=1;i2<=cyStyle.pieBackgroundN;i2++){var size=node.pstyle("pie-"+i2+"-background-size").value,color=node.pstyle("pie-"+i2+"-background-color").value,opacity=node.pstyle("pie-"+i2+"-background-opacity").value*nodeOpacity,percent=size/100;percent+lastPercent>1&&(percent=1-lastPercent);var angleStart=1.5*Math.PI+2*Math.PI*lastPercent,angleEnd=angleStart+2*Math.PI*percent;0===size||lastPercent>=1||lastPercent+percent>1||(context.beginPath(),context.moveTo(x,y),context.arc(x,y,radius,angleStart,angleEnd),context.closePath(),this.colorFillStyle(context,color[0],color[1],color[2],opacity),context.fill(),lastPercent+=percent)}};var CRp$4={},motionBlurDelay=100;CRp$4.getPixelRatio=function(){var context=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var backingStore=context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/backingStore},CRp$4.paintCache=function(context){for(var cache2,caches=this.paintCaches=this.paintCaches||[],needToCreateCache=!0,i2=0;i2<caches.length;i2++)if((cache2=caches[i2]).context===context){needToCreateCache=!1;break}return needToCreateCache&&(cache2={context:context},caches.push(cache2)),cache2},CRp$4.createGradientStyleFor=function(context,shapeStyleName,ele,fill,opacity){var gradientStyle,usePaths=this.usePaths(),colors2=ele.pstyle(shapeStyleName+"-gradient-stop-colors").value,positions=ele.pstyle(shapeStyleName+"-gradient-stop-positions").pfValue;if("radial-gradient"===fill)if(ele.isEdge()){var start=ele.sourceEndpoint(),end=ele.targetEndpoint(),mid=ele.midpoint(),d1=dist(start,mid),d2=dist(end,mid);gradientStyle=context.createRadialGradient(mid.x,mid.y,0,mid.x,mid.y,Math.max(d1,d2))}else{var pos=usePaths?{x:0,y:0}:ele.position(),width=ele.paddedWidth(),height=ele.paddedHeight();gradientStyle=context.createRadialGradient(pos.x,pos.y,0,pos.x,pos.y,Math.max(width,height))}else if(ele.isEdge()){var _start=ele.sourceEndpoint(),_end=ele.targetEndpoint();gradientStyle=context.createLinearGradient(_start.x,_start.y,_end.x,_end.y)}else{var _pos=usePaths?{x:0,y:0}:ele.position(),halfWidth=ele.paddedWidth()/2,halfHeight=ele.paddedHeight()/2;switch(ele.pstyle("background-gradient-direction").value){case"to-bottom":gradientStyle=context.createLinearGradient(_pos.x,_pos.y-halfHeight,_pos.x,_pos.y+halfHeight);break;case"to-top":gradientStyle=context.createLinearGradient(_pos.x,_pos.y+halfHeight,_pos.x,_pos.y-halfHeight);break;case"to-left":gradientStyle=context.createLinearGradient(_pos.x+halfWidth,_pos.y,_pos.x-halfWidth,_pos.y);break;case"to-right":gradientStyle=context.createLinearGradient(_pos.x-halfWidth,_pos.y,_pos.x+halfWidth,_pos.y);break;case"to-bottom-right":case"to-right-bottom":gradientStyle=context.createLinearGradient(_pos.x-halfWidth,_pos.y-halfHeight,_pos.x+halfWidth,_pos.y+halfHeight);break;case"to-top-right":case"to-right-top":gradientStyle=context.createLinearGradient(_pos.x-halfWidth,_pos.y+halfHeight,_pos.x+halfWidth,_pos.y-halfHeight);break;case"to-bottom-left":case"to-left-bottom":gradientStyle=context.createLinearGradient(_pos.x+halfWidth,_pos.y-halfHeight,_pos.x-halfWidth,_pos.y+halfHeight);break;case"to-top-left":case"to-left-top":gradientStyle=context.createLinearGradient(_pos.x+halfWidth,_pos.y+halfHeight,_pos.x-halfWidth,_pos.y-halfHeight)}}if(!gradientStyle)return null;for(var hasPositions=positions.length===colors2.length,length=colors2.length,i2=0;i2<length;i2++)gradientStyle.addColorStop(hasPositions?positions[i2]:i2/(length-1),"rgba("+colors2[i2][0]+","+colors2[i2][1]+","+colors2[i2][2]+","+opacity+")");return gradientStyle},CRp$4.gradientFillStyle=function(context,ele,fill,opacity){var gradientStyle=this.createGradientStyleFor(context,"background",ele,fill,opacity);if(!gradientStyle)return null;context.fillStyle=gradientStyle},CRp$4.colorFillStyle=function(context,r,g,b,a){context.fillStyle="rgba("+r+","+g+","+b+","+a+")"},CRp$4.eleFillStyle=function(context,ele,opacity){var backgroundFill=ele.pstyle("background-fill").value;if("linear-gradient"===backgroundFill||"radial-gradient"===backgroundFill)this.gradientFillStyle(context,ele,backgroundFill,opacity);else{var backgroundColor=ele.pstyle("background-color").value;this.colorFillStyle(context,backgroundColor[0],backgroundColor[1],backgroundColor[2],opacity)}},CRp$4.gradientStrokeStyle=function(context,ele,fill,opacity){var gradientStyle=this.createGradientStyleFor(context,"line",ele,fill,opacity);if(!gradientStyle)return null;context.strokeStyle=gradientStyle},CRp$4.colorStrokeStyle=function(context,r,g,b,a){context.strokeStyle="rgba("+r+","+g+","+b+","+a+")"},CRp$4.eleStrokeStyle=function(context,ele,opacity){var lineFill=ele.pstyle("line-fill").value;if("linear-gradient"===lineFill||"radial-gradient"===lineFill)this.gradientStrokeStyle(context,ele,lineFill,opacity);else{var lineColor=ele.pstyle("line-color").value;this.colorStrokeStyle(context,lineColor[0],lineColor[1],lineColor[2],opacity)}},CRp$4.matchCanvasSize=function(container){var r=this,data2=r.data,bb=r.findContainerClientCoords(),width=bb[2],height=bb[3],pixelRatio=r.getPixelRatio(),mbPxRatio=r.motionBlurPxRatio;container!==r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_NODE]&&container!==r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_DRAG]||(pixelRatio=mbPxRatio);var canvas,canvasWidth=width*pixelRatio,canvasHeight=height*pixelRatio;if(canvasWidth!==r.canvasWidth||canvasHeight!==r.canvasHeight){r.fontCaches=null;var canvasContainer=data2.canvasContainer;canvasContainer.style.width=width+"px",canvasContainer.style.height=height+"px";for(var i2=0;i2<r.CANVAS_LAYERS;i2++)(canvas=data2.canvases[i2]).width=canvasWidth,canvas.height=canvasHeight,canvas.style.width=width+"px",canvas.style.height=height+"px";for(i2=0;i2<r.BUFFER_COUNT;i2++)(canvas=data2.bufferCanvases[i2]).width=canvasWidth,canvas.height=canvasHeight,canvas.style.width=width+"px",canvas.style.height=height+"px";r.textureMult=1,pixelRatio<=1&&(canvas=data2.bufferCanvases[r.TEXTURE_BUFFER],r.textureMult=2,canvas.width=canvasWidth*r.textureMult,canvas.height=canvasHeight*r.textureMult),r.canvasWidth=canvasWidth,r.canvasHeight=canvasHeight}},CRp$4.renderTo=function(cxt,zoom,pan,pxRatio){this.render({forcedContext:cxt,forcedZoom:zoom,forcedPan:pan,drawAllLayers:!0,forcedPxRatio:pxRatio})},CRp$4.render=function(options){var forcedContext=(options=options||staticEmptyObject()).forcedContext,drawAllLayers=options.drawAllLayers,drawOnlyNodeLayer=options.drawOnlyNodeLayer,forcedZoom=options.forcedZoom,forcedPan=options.forcedPan,r=this,pixelRatio=void 0===options.forcedPxRatio?this.getPixelRatio():options.forcedPxRatio,cy=r.cy,data2=r.data,needDraw=data2.canvasNeedsRedraw,textureDraw=r.textureOnViewport&&!forcedContext&&(r.pinching||r.hoverData.dragging||r.swipePanning||r.data.wheelZooming),motionBlur=void 0!==options.motionBlur?options.motionBlur:r.motionBlur,mbPxRatio=r.motionBlurPxRatio,hasCompoundNodes=cy.hasCompoundNodes(),inNodeDragGesture=r.hoverData.draggingEles,inBoxSelection=!(!r.hoverData.selecting&&!r.touchData.selecting),motionBlurFadeEffect=motionBlur=motionBlur&&!forcedContext&&r.motionBlurEnabled&&!inBoxSelection;forcedContext||(r.prevPxRatio!==pixelRatio&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container),r.redrawHint("eles",!0),r.redrawHint("drag",!0)),r.prevPxRatio=pixelRatio),!forcedContext&&r.motionBlurTimeout&&clearTimeout(r.motionBlurTimeout),motionBlur&&(null==r.mbFrames&&(r.mbFrames=0),r.mbFrames++,r.mbFrames<3&&(motionBlurFadeEffect=!1),r.mbFrames>r.minMbLowQualFrames&&(r.motionBlurPxRatio=r.mbPxRBlurry)),r.clearingMotionBlur&&(r.motionBlurPxRatio=1),r.textureDrawLastFrame&&!textureDraw&&(needDraw[r.NODE]=!0,needDraw[r.SELECT_BOX]=!0);var style=cy.style(),zoom=cy.zoom(),effectiveZoom=void 0!==forcedZoom?forcedZoom:zoom,pan=cy.pan(),effectivePan={x:pan.x,y:pan.y},vp={zoom:zoom,pan:{x:pan.x,y:pan.y}},prevVp=r.prevViewport;void 0===prevVp||vp.zoom!==prevVp.zoom||vp.pan.x!==prevVp.pan.x||vp.pan.y!==prevVp.pan.y||inNodeDragGesture&&!hasCompoundNodes||(r.motionBlurPxRatio=1),forcedPan&&(effectivePan=forcedPan),effectiveZoom*=pixelRatio,effectivePan.x*=pixelRatio,effectivePan.y*=pixelRatio;var eles=r.getCachedZSortedEles();function mbclear(context2,x,y,w,h){var gco=context2.globalCompositeOperation;context2.globalCompositeOperation="destination-out",r.colorFillStyle(context2,255,255,255,r.motionBlurTransparency),context2.fillRect(x,y,w,h),context2.globalCompositeOperation=gco}function setContextTransform(context2,clear3){var ePan,eZoom,w,h;r.clearingMotionBlur||context2!==data2.bufferContexts[r.MOTIONBLUR_BUFFER_NODE]&&context2!==data2.bufferContexts[r.MOTIONBLUR_BUFFER_DRAG]?(ePan=effectivePan,eZoom=effectiveZoom,w=r.canvasWidth,h=r.canvasHeight):(ePan={x:pan.x*mbPxRatio,y:pan.y*mbPxRatio},eZoom=zoom*mbPxRatio,w=r.canvasWidth*mbPxRatio,h=r.canvasHeight*mbPxRatio),context2.setTransform(1,0,0,1,0,0),"motionBlur"===clear3?mbclear(context2,0,0,w,h):forcedContext||void 0!==clear3&&!clear3||context2.clearRect(0,0,w,h),drawAllLayers||(context2.translate(ePan.x,ePan.y),context2.scale(eZoom,eZoom)),forcedPan&&context2.translate(forcedPan.x,forcedPan.y),forcedZoom&&context2.scale(forcedZoom,forcedZoom)}if(textureDraw||(r.textureDrawLastFrame=!1),textureDraw){if(r.textureDrawLastFrame=!0,!r.textureCache){r.textureCache={},r.textureCache.bb=cy.mutableElements().boundingBox(),r.textureCache.texture=r.data.bufferCanvases[r.TEXTURE_BUFFER];var cxt=r.data.bufferContexts[r.TEXTURE_BUFFER];cxt.setTransform(1,0,0,1,0,0),cxt.clearRect(0,0,r.canvasWidth*r.textureMult,r.canvasHeight*r.textureMult),r.render({forcedContext:cxt,drawOnlyNodeLayer:!0,forcedPxRatio:pixelRatio*r.textureMult}),(vp=r.textureCache.viewport={zoom:cy.zoom(),pan:cy.pan(),width:r.canvasWidth,height:r.canvasHeight}).mpan={x:(0-vp.pan.x)/vp.zoom,y:(0-vp.pan.y)/vp.zoom}}needDraw[r.DRAG]=!1,needDraw[r.NODE]=!1;var context=data2.contexts[r.NODE],texture=r.textureCache.texture;vp=r.textureCache.viewport,context.setTransform(1,0,0,1,0,0),motionBlur?mbclear(context,0,0,vp.width,vp.height):context.clearRect(0,0,vp.width,vp.height);var outsideBgColor=style.core("outside-texture-bg-color").value,outsideBgOpacity=style.core("outside-texture-bg-opacity").value;r.colorFillStyle(context,outsideBgColor[0],outsideBgColor[1],outsideBgColor[2],outsideBgOpacity),context.fillRect(0,0,vp.width,vp.height),zoom=cy.zoom(),setContextTransform(context,!1),context.clearRect(vp.mpan.x,vp.mpan.y,vp.width/vp.zoom/pixelRatio,vp.height/vp.zoom/pixelRatio),context.drawImage(texture,vp.mpan.x,vp.mpan.y,vp.width/vp.zoom/pixelRatio,vp.height/vp.zoom/pixelRatio)}else r.textureOnViewport&&!forcedContext&&(r.textureCache=null);var extent=cy.extent(),vpManip=r.pinching||r.hoverData.dragging||r.swipePanning||r.data.wheelZooming||r.hoverData.draggingEles||r.cy.animated(),hideEdges=r.hideEdgesOnViewport&&vpManip,needMbClear=[];if(needMbClear[r.NODE]=!needDraw[r.NODE]&&motionBlur&&!r.clearedForMotionBlur[r.NODE]||r.clearingMotionBlur,needMbClear[r.NODE]&&(r.clearedForMotionBlur[r.NODE]=!0),needMbClear[r.DRAG]=!needDraw[r.DRAG]&&motionBlur&&!r.clearedForMotionBlur[r.DRAG]||r.clearingMotionBlur,needMbClear[r.DRAG]&&(r.clearedForMotionBlur[r.DRAG]=!0),needDraw[r.NODE]||drawAllLayers||drawOnlyNodeLayer||needMbClear[r.NODE]){var useBuffer=motionBlur&&!needMbClear[r.NODE]&&1!==mbPxRatio;setContextTransform(context=forcedContext||(useBuffer?r.data.bufferContexts[r.MOTIONBLUR_BUFFER_NODE]:data2.contexts[r.NODE]),motionBlur&&!useBuffer?"motionBlur":void 0),hideEdges?r.drawCachedNodes(context,eles.nondrag,pixelRatio,extent):r.drawLayeredElements(context,eles.nondrag,pixelRatio,extent),r.debug&&r.drawDebugPoints(context,eles.nondrag),drawAllLayers||motionBlur||(needDraw[r.NODE]=!1)}if(!drawOnlyNodeLayer&&(needDraw[r.DRAG]||drawAllLayers||needMbClear[r.DRAG])&&(useBuffer=motionBlur&&!needMbClear[r.DRAG]&&1!==mbPxRatio,setContextTransform(context=forcedContext||(useBuffer?r.data.bufferContexts[r.MOTIONBLUR_BUFFER_DRAG]:data2.contexts[r.DRAG]),motionBlur&&!useBuffer?"motionBlur":void 0),hideEdges?r.drawCachedNodes(context,eles.drag,pixelRatio,extent):r.drawCachedElements(context,eles.drag,pixelRatio,extent),r.debug&&r.drawDebugPoints(context,eles.drag),drawAllLayers||motionBlur||(needDraw[r.DRAG]=!1)),r.showFps||!drawOnlyNodeLayer&&needDraw[r.SELECT_BOX]&&!drawAllLayers){if(setContextTransform(context=forcedContext||data2.contexts[r.SELECT_BOX]),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)){zoom=r.cy.zoom();var borderWidth=style.core("selection-box-border-width").value/zoom;context.lineWidth=borderWidth,context.fillStyle="rgba("+style.core("selection-box-color").value[0]+","+style.core("selection-box-color").value[1]+","+style.core("selection-box-color").value[2]+","+style.core("selection-box-opacity").value+")",context.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),borderWidth>0&&(context.strokeStyle="rgba("+style.core("selection-box-border-color").value[0]+","+style.core("selection-box-border-color").value[1]+","+style.core("selection-box-border-color").value[2]+","+style.core("selection-box-opacity").value+")",context.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(data2.bgActivePosistion&&!r.hoverData.selecting){zoom=r.cy.zoom();var pos=data2.bgActivePosistion;context.fillStyle="rgba("+style.core("active-bg-color").value[0]+","+style.core("active-bg-color").value[1]+","+style.core("active-bg-color").value[2]+","+style.core("active-bg-opacity").value+")",context.beginPath(),context.arc(pos.x,pos.y,style.core("active-bg-size").pfValue/zoom,0,2*Math.PI),context.fill()}var timeToRender=r.lastRedrawTime;if(r.showFps&&timeToRender){timeToRender=Math.round(timeToRender);var fps=Math.round(1e3/timeToRender);context.setTransform(1,0,0,1,0,0),context.fillStyle="rgba(255, 0, 0, 0.75)",context.strokeStyle="rgba(255, 0, 0, 0.75)",context.lineWidth=1,context.fillText("1 frame = "+timeToRender+" ms = "+fps+" fps",0,20);var maxFps=60;context.strokeRect(0,30,250,20),context.fillRect(0,30,250*Math.min(fps/maxFps,1),20)}drawAllLayers||(needDraw[r.SELECT_BOX]=!1)}if(motionBlur&&1!==mbPxRatio){var cxtNode=data2.contexts[r.NODE],txtNode=r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_NODE],cxtDrag=data2.contexts[r.DRAG],txtDrag=r.data.bufferCanvases[r.MOTIONBLUR_BUFFER_DRAG],drawMotionBlur=function drawMotionBlur2(cxt2,txt,needClear){cxt2.setTransform(1,0,0,1,0,0),needClear||!motionBlurFadeEffect?cxt2.clearRect(0,0,r.canvasWidth,r.canvasHeight):mbclear(cxt2,0,0,r.canvasWidth,r.canvasHeight);var pxr=mbPxRatio;cxt2.drawImage(txt,0,0,r.canvasWidth*pxr,r.canvasHeight*pxr,0,0,r.canvasWidth,r.canvasHeight)};(needDraw[r.NODE]||needMbClear[r.NODE])&&(drawMotionBlur(cxtNode,txtNode,needMbClear[r.NODE]),needDraw[r.NODE]=!1),(needDraw[r.DRAG]||needMbClear[r.DRAG])&&(drawMotionBlur(cxtDrag,txtDrag,needMbClear[r.DRAG]),needDraw[r.DRAG]=!1)}r.prevViewport=vp,r.clearingMotionBlur&&(r.clearingMotionBlur=!1,r.motionBlurCleared=!0,r.motionBlur=!0),motionBlur&&(r.motionBlurTimeout=setTimeout((function(){r.motionBlurTimeout=null,r.clearedForMotionBlur[r.NODE]=!1,r.clearedForMotionBlur[r.DRAG]=!1,r.motionBlur=!1,r.clearingMotionBlur=!textureDraw,r.mbFrames=0,needDraw[r.NODE]=!0,needDraw[r.DRAG]=!0,r.redraw()}),motionBlurDelay)),forcedContext||cy.emit("render")};for(var CRp$3={drawPolygonPath:function(context,x,y,width,height,points){var halfW=width/2,halfH=height/2;context.beginPath&&context.beginPath(),context.moveTo(x+halfW*points[0],y+halfH*points[1]);for(var i2=1;i2<points.length/2;i2++)context.lineTo(x+halfW*points[2*i2],y+halfH*points[2*i2+1]);context.closePath()},drawRoundPolygonPath:function(context,x,y,width,height,points){var halfW=width/2,halfH=height/2,cornerRadius=getRoundPolygonRadius(width,height);context.beginPath&&context.beginPath();for(var _i=0;_i<points.length/4;_i++){var sourceUv=void 0,destUv=void 0;sourceUv=0===_i?points.length-2:4*_i-2,destUv=4*_i+2;var px=x+halfW*points[4*_i],py=y+halfH*points[4*_i+1],cosTheta=-points[sourceUv]*points[destUv]-points[sourceUv+1]*points[destUv+1],offset=cornerRadius/Math.tan(Math.acos(cosTheta)/2),cp0x=px-offset*points[sourceUv],cp0y=py-offset*points[sourceUv+1],cp1x=px+offset*points[destUv],cp1y=py+offset*points[destUv+1];0===_i?context.moveTo(cp0x,cp0y):context.lineTo(cp0x,cp0y),context.arcTo(px,py,cp1x,cp1y,cornerRadius)}context.closePath()},drawRoundRectanglePath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2,cornerRadius=getRoundRectangleRadius(width,height);context.beginPath&&context.beginPath(),context.moveTo(x,y-halfHeight),context.arcTo(x+halfWidth,y-halfHeight,x+halfWidth,y,cornerRadius),context.arcTo(x+halfWidth,y+halfHeight,x,y+halfHeight,cornerRadius),context.arcTo(x-halfWidth,y+halfHeight,x-halfWidth,y,cornerRadius),context.arcTo(x-halfWidth,y-halfHeight,x,y-halfHeight,cornerRadius),context.lineTo(x,y-halfHeight),context.closePath()},drawBottomRoundRectanglePath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2,cornerRadius=getRoundRectangleRadius(width,height);context.beginPath&&context.beginPath(),context.moveTo(x,y-halfHeight),context.lineTo(x+halfWidth,y-halfHeight),context.lineTo(x+halfWidth,y),context.arcTo(x+halfWidth,y+halfHeight,x,y+halfHeight,cornerRadius),context.arcTo(x-halfWidth,y+halfHeight,x-halfWidth,y,cornerRadius),context.lineTo(x-halfWidth,y-halfHeight),context.lineTo(x,y-halfHeight),context.closePath()},drawCutRectanglePath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2,cornerLength=getCutRectangleCornerLength();context.beginPath&&context.beginPath(),context.moveTo(x-halfWidth+cornerLength,y-halfHeight),context.lineTo(x+halfWidth-cornerLength,y-halfHeight),context.lineTo(x+halfWidth,y-halfHeight+cornerLength),context.lineTo(x+halfWidth,y+halfHeight-cornerLength),context.lineTo(x+halfWidth-cornerLength,y+halfHeight),context.lineTo(x-halfWidth+cornerLength,y+halfHeight),context.lineTo(x-halfWidth,y+halfHeight-cornerLength),context.lineTo(x-halfWidth,y-halfHeight+cornerLength),context.closePath()},drawBarrelPath:function(context,x,y,width,height){var halfWidth=width/2,halfHeight=height/2,xBegin=x-halfWidth,xEnd=x+halfWidth,yBegin=y-halfHeight,yEnd=y+halfHeight,barrelCurveConstants=getBarrelCurveConstants(width,height),wOffset=barrelCurveConstants.widthOffset,hOffset=barrelCurveConstants.heightOffset,ctrlPtXOffset=barrelCurveConstants.ctrlPtOffsetPct*wOffset;context.beginPath&&context.beginPath(),context.moveTo(xBegin,yBegin+hOffset),context.lineTo(xBegin,yEnd-hOffset),context.quadraticCurveTo(xBegin+ctrlPtXOffset,yEnd,xBegin+wOffset,yEnd),context.lineTo(xEnd-wOffset,yEnd),context.quadraticCurveTo(xEnd-ctrlPtXOffset,yEnd,xEnd,yEnd-hOffset),context.lineTo(xEnd,yBegin+hOffset),context.quadraticCurveTo(xEnd-ctrlPtXOffset,yBegin,xEnd-wOffset,yBegin),context.lineTo(xBegin+wOffset,yBegin),context.quadraticCurveTo(xBegin+ctrlPtXOffset,yBegin,xBegin,yBegin+hOffset),context.closePath()}},sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40,i=0*Math.PI;i<2*Math.PI;i+=ellipseStepSize)sin[i]=Math.sin(i),cos[i]=Math.cos(i);CRp$3.drawEllipsePath=function(context,centerX,centerY,width,height){if(context.beginPath&&context.beginPath(),context.ellipse)context.ellipse(centerX,centerY,width/2,height/2,0,0,2*Math.PI);else for(var xPos,yPos,rw=width/2,rh=height/2,i2=0*Math.PI;i2<2*Math.PI;i2+=ellipseStepSize)xPos=centerX-rw*sin[i2]*sin0+rw*cos[i2]*cos0,yPos=centerY+rh*cos[i2]*sin0+rh*sin[i2]*cos0,0===i2?context.moveTo(xPos,yPos):context.lineTo(xPos,yPos);context.closePath()};var CRp$2={};function b64ToBlob(b64,mimeType){for(var bytes=atob(b64),buff=new ArrayBuffer(bytes.length),buffUint8=new Uint8Array(buff),i2=0;i2<bytes.length;i2++)buffUint8[i2]=bytes.charCodeAt(i2);return new Blob([buff],{type:mimeType})}function b64UriToB64(b64uri){var i2=b64uri.indexOf(",");return b64uri.substr(i2+1)}function output(options,canvas,mimeType){var getB64Uri=function getB64Uri2(){return canvas.toDataURL(mimeType,options.quality)};switch(options.output){case"blob-promise":return new Promise$1((function(resolve2,reject){try{canvas.toBlob((function(blob){null!=blob?resolve2(blob):reject(new Error("`canvas.toBlob()` sent a null value in its callback"))}),mimeType,options.quality)}catch(err){reject(err)}}));case"blob":return b64ToBlob(b64UriToB64(getB64Uri()),mimeType);case"base64":return b64UriToB64(getB64Uri());default:return getB64Uri()}}CRp$2.createBuffer=function(w,h){var buffer=document.createElement("canvas");return buffer.width=w,buffer.height=h,[buffer,buffer.getContext("2d")]},CRp$2.bufferCanvasImage=function(options){var cy=this.cy,bb=cy.mutableElements().boundingBox(),ctrRect=this.findContainerClientCoords(),width=options.full?Math.ceil(bb.w):ctrRect[2],height=options.full?Math.ceil(bb.h):ctrRect[3],specdMaxDims=number$1(options.maxWidth)||number$1(options.maxHeight),pxRatio=this.getPixelRatio(),scale=1;if(void 0!==options.scale)width*=options.scale,height*=options.scale,scale=options.scale;else if(specdMaxDims){var maxScaleW=1/0,maxScaleH=1/0;number$1(options.maxWidth)&&(maxScaleW=scale*options.maxWidth/width),number$1(options.maxHeight)&&(maxScaleH=scale*options.maxHeight/height),width*=scale=Math.min(maxScaleW,maxScaleH),height*=scale}specdMaxDims||(width*=pxRatio,height*=pxRatio,scale*=pxRatio);var buffCanvas=document.createElement("canvas");buffCanvas.width=width,buffCanvas.height=height,buffCanvas.style.width=width+"px",buffCanvas.style.height=height+"px";var buffCxt=buffCanvas.getContext("2d");if(width>0&&height>0){buffCxt.clearRect(0,0,width,height),buffCxt.globalCompositeOperation="source-over";var zsortedEles=this.getCachedZSortedEles();if(options.full)buffCxt.translate(-bb.x1*scale,-bb.y1*scale),buffCxt.scale(scale,scale),this.drawElements(buffCxt,zsortedEles),buffCxt.scale(1/scale,1/scale),buffCxt.translate(bb.x1*scale,bb.y1*scale);else{var pan=cy.pan(),translation={x:pan.x*scale,y:pan.y*scale};scale*=cy.zoom(),buffCxt.translate(translation.x,translation.y),buffCxt.scale(scale,scale),this.drawElements(buffCxt,zsortedEles),buffCxt.scale(1/scale,1/scale),buffCxt.translate(-translation.x,-translation.y)}options.bg&&(buffCxt.globalCompositeOperation="destination-over",buffCxt.fillStyle=options.bg,buffCxt.rect(0,0,width,height),buffCxt.fill())}return buffCanvas},CRp$2.png=function(options){return output(options,this.bufferCanvasImage(options),"image/png")},CRp$2.jpg=function(options){return output(options,this.bufferCanvasImage(options),"image/jpeg")};var CRp$1={nodeShapeImpl:function(name,context,centerX,centerY,width,height,points){switch(name){case"ellipse":return this.drawEllipsePath(context,centerX,centerY,width,height);case"polygon":return this.drawPolygonPath(context,centerX,centerY,width,height,points);case"round-polygon":return this.drawRoundPolygonPath(context,centerX,centerY,width,height,points);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(context,centerX,centerY,width,height);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(context,centerX,centerY,width,height);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(context,centerX,centerY,width,height);case"barrel":return this.drawBarrelPath(context,centerX,centerY,width,height)}}},CR=CanvasRenderer,CRp=CanvasRenderer.prototype;function CanvasRenderer(options){var r=this;r.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};var tapHlOffAttr="-webkit-tap-highlight-color",tapHlOffStyle="rgba(0,0,0,0)";r.data.canvasContainer=document.createElement("div");var containerStyle=r.data.canvasContainer.style;r.data.canvasContainer.style[tapHlOffAttr]=tapHlOffStyle,containerStyle.position="relative",containerStyle.zIndex="0",containerStyle.overflow="hidden";var container=options.cy.container();container.appendChild(r.data.canvasContainer),container.style[tapHlOffAttr]=tapHlOffStyle;var styleMap={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(styleMap["-ms-touch-action"]="none",styleMap["touch-action"]="none");for(var i2=0;i2<CRp.CANVAS_LAYERS;i2++){var canvas=r.data.canvases[i2]=document.createElement("canvas");r.data.contexts[i2]=canvas.getContext("2d"),Object.keys(styleMap).forEach((function(k){canvas.style[k]=styleMap[k]})),canvas.style.position="absolute",canvas.setAttribute("data-id","layer"+i2),canvas.style.zIndex=String(CRp.CANVAS_LAYERS-i2),r.data.canvasContainer.appendChild(canvas),r.data.canvasNeedsRedraw[i2]=!1}for(r.data.topCanvas=r.data.canvases[0],r.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),r.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),r.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag"),i2=0;i2<CRp.BUFFER_COUNT;i2++)r.data.bufferCanvases[i2]=document.createElement("canvas"),r.data.bufferContexts[i2]=r.data.bufferCanvases[i2].getContext("2d"),r.data.bufferCanvases[i2].style.position="absolute",r.data.bufferCanvases[i2].setAttribute("data-id","buffer"+i2),r.data.bufferCanvases[i2].style.zIndex=String(-i2-1),r.data.bufferCanvases[i2].style.visibility="hidden";r.pathsEnabled=!0;var emptyBb=makeBoundingBox(),getBoxCenter=function getBoxCenter2(bb){return{x:(bb.x1+bb.x2)/2,y:(bb.y1+bb.y2)/2}},getCenterOffset=function getCenterOffset2(bb){return{x:-bb.w/2,y:-bb.h/2}},backgroundTimestampHasChanged=function backgroundTimestampHasChanged2(ele){var _p=ele[0]._private;return!(_p.oldBackgroundTimestamp===_p.backgroundTimestamp)},getStyleKey=function getStyleKey2(ele){return ele[0]._private.nodeKey},getLabelKey=function getLabelKey2(ele){return ele[0]._private.labelStyleKey},getSourceLabelKey=function getSourceLabelKey2(ele){return ele[0]._private.sourceLabelStyleKey},getTargetLabelKey=function getTargetLabelKey2(ele){return ele[0]._private.targetLabelStyleKey},drawElement=function drawElement2(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElement(context,ele,bb,!1,!1,useEleOpacity)},drawLabel=function drawLabel2(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElementText(context,ele,bb,scaledLabelShown,"main",useEleOpacity)},drawSourceLabel=function drawSourceLabel2(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElementText(context,ele,bb,scaledLabelShown,"source",useEleOpacity)},drawTargetLabel=function drawTargetLabel2(context,ele,bb,scaledLabelShown,useEleOpacity){return r.drawElementText(context,ele,bb,scaledLabelShown,"target",useEleOpacity)},getElementBox=function getElementBox2(ele){return ele.boundingBox(),ele[0]._private.bodyBounds},getLabelBox=function getLabelBox2(ele){return ele.boundingBox(),ele[0]._private.labelBounds.main||emptyBb},getSourceLabelBox=function getSourceLabelBox2(ele){return ele.boundingBox(),ele[0]._private.labelBounds.source||emptyBb},getTargetLabelBox=function getTargetLabelBox2(ele){return ele.boundingBox(),ele[0]._private.labelBounds.target||emptyBb},isLabelVisibleAtScale=function isLabelVisibleAtScale2(ele,scaledLabelShown){return scaledLabelShown},getElementRotationPoint=function getElementRotationPoint2(ele){return getBoxCenter(getElementBox(ele))},addTextMargin=function addTextMargin2(prefix,pt,ele){var pre=prefix?prefix+"-":"";return{x:pt.x+ele.pstyle(pre+"text-margin-x").pfValue,y:pt.y+ele.pstyle(pre+"text-margin-y").pfValue}},getRsPt=function getRsPt2(ele,x,y){var rs=ele[0]._private.rscratch;return{x:rs[x],y:rs[y]}},getLabelRotationPoint=function getLabelRotationPoint2(ele){return addTextMargin("",getRsPt(ele,"labelX","labelY"),ele)},getSourceLabelRotationPoint=function getSourceLabelRotationPoint2(ele){return addTextMargin("source",getRsPt(ele,"sourceLabelX","sourceLabelY"),ele)},getTargetLabelRotationPoint=function getTargetLabelRotationPoint2(ele){return addTextMargin("target",getRsPt(ele,"targetLabelX","targetLabelY"),ele)},getElementRotationOffset=function getElementRotationOffset2(ele){return getCenterOffset(getElementBox(ele))},getSourceLabelRotationOffset=function getSourceLabelRotationOffset2(ele){return getCenterOffset(getSourceLabelBox(ele))},getTargetLabelRotationOffset=function getTargetLabelRotationOffset2(ele){return getCenterOffset(getTargetLabelBox(ele))},getLabelRotationOffset=function getLabelRotationOffset2(ele){var bb=getLabelBox(ele),p2=getCenterOffset(getLabelBox(ele));if(ele.isNode()){switch(ele.pstyle("text-halign").value){case"left":p2.x=-bb.w;break;case"right":p2.x=0}switch(ele.pstyle("text-valign").value){case"top":p2.y=-bb.h;break;case"bottom":p2.y=0}}return p2},eleTxrCache=r.data.eleTxrCache=new ElementTextureCache(r,{getKey:getStyleKey,doesEleInvalidateKey:backgroundTimestampHasChanged,drawElement:drawElement,getBoundingBox:getElementBox,getRotationPoint:getElementRotationPoint,getRotationOffset:getElementRotationOffset,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),lblTxrCache=r.data.lblTxrCache=new ElementTextureCache(r,{getKey:getLabelKey,drawElement:drawLabel,getBoundingBox:getLabelBox,getRotationPoint:getLabelRotationPoint,getRotationOffset:getLabelRotationOffset,isVisible:isLabelVisibleAtScale}),slbTxrCache=r.data.slbTxrCache=new ElementTextureCache(r,{getKey:getSourceLabelKey,drawElement:drawSourceLabel,getBoundingBox:getSourceLabelBox,getRotationPoint:getSourceLabelRotationPoint,getRotationOffset:getSourceLabelRotationOffset,isVisible:isLabelVisibleAtScale}),tlbTxrCache=r.data.tlbTxrCache=new ElementTextureCache(r,{getKey:getTargetLabelKey,drawElement:drawTargetLabel,getBoundingBox:getTargetLabelBox,getRotationPoint:getTargetLabelRotationPoint,getRotationOffset:getTargetLabelRotationOffset,isVisible:isLabelVisibleAtScale}),lyrTxrCache=r.data.lyrTxrCache=new LayeredTextureCache(r);r.onUpdateEleCalcs((function invalidateTextureCaches(willDraw,eles){eleTxrCache.invalidateElements(eles),lblTxrCache.invalidateElements(eles),slbTxrCache.invalidateElements(eles),tlbTxrCache.invalidateElements(eles),lyrTxrCache.invalidateElements(eles);for(var _i=0;_i<eles.length;_i++){var _p=eles[_i]._private;_p.oldBackgroundTimestamp=_p.backgroundTimestamp}}));var refineInLayers=function refineInLayers2(reqs){for(var i3=0;i3<reqs.length;i3++)lyrTxrCache.enqueueElementRefinement(reqs[i3].ele)};eleTxrCache.onDequeue(refineInLayers),lblTxrCache.onDequeue(refineInLayers),slbTxrCache.onDequeue(refineInLayers),tlbTxrCache.onDequeue(refineInLayers)}CRp.CANVAS_LAYERS=3,CRp.SELECT_BOX=0,CRp.DRAG=1,CRp.NODE=2,CRp.BUFFER_COUNT=3,CRp.TEXTURE_BUFFER=0,CRp.MOTIONBLUR_BUFFER_NODE=1,CRp.MOTIONBLUR_BUFFER_DRAG=2,CRp.redrawHint=function(group,bool){var r=this;switch(group){case"eles":r.data.canvasNeedsRedraw[CRp.NODE]=bool;break;case"drag":r.data.canvasNeedsRedraw[CRp.DRAG]=bool;break;case"select":r.data.canvasNeedsRedraw[CRp.SELECT_BOX]=bool}};var pathsImpld="undefined"!=typeof Path2D;CRp.path2dEnabled=function(on){if(void 0===on)return this.pathsEnabled;this.pathsEnabled=!!on},CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled},CRp.setImgSmoothing=function(context,bool){null!=context.imageSmoothingEnabled?context.imageSmoothingEnabled=bool:(context.webkitImageSmoothingEnabled=bool,context.mozImageSmoothingEnabled=bool,context.msImageSmoothingEnabled=bool)},CRp.getImgSmoothing=function(context){return null!=context.imageSmoothingEnabled?context.imageSmoothingEnabled:context.webkitImageSmoothingEnabled||context.mozImageSmoothingEnabled||context.msImageSmoothingEnabled},CRp.makeOffscreenCanvas=function(width,height){var canvas;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas))?canvas=new OffscreenCanvas(width,height):((canvas=document.createElement("canvas")).width=width,canvas.height=height),canvas},[CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach((function(props){extend(CRp,props)}));var incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}]}],extensions={},modules={};function setExtension(type,name,registrant){var ext=registrant,overrideErr=function overrideErr2(field){warn("Can not register `"+name+"` for `"+type+"` since `"+field+"` already exists in the prototype and can not be overridden")};if("core"===type){if(Core.prototype[name])return overrideErr(name);Core.prototype[name]=registrant}else if("collection"===type){if(Collection.prototype[name])return overrideErr(name);Collection.prototype[name]=registrant}else if("layout"===type){for(var Layout2=function Layout3(options){this.options=options,registrant.call(this,options),plainObject(this._private)||(this._private={}),this._private.cy=options.cy,this._private.listeners=[],this.createEmitter()},layoutProto=Layout2.prototype=Object.create(registrant.prototype),optLayoutFns=[],i2=0;i2<optLayoutFns.length;i2++){var fnName=optLayoutFns[i2];layoutProto[fnName]=layoutProto[fnName]||function(){return this}}layoutProto.start&&!layoutProto.run?layoutProto.run=function(){return this.start(),this}:!layoutProto.start&&layoutProto.run&&(layoutProto.start=function(){return this.run(),this});var regStop=registrant.prototype.stop;layoutProto.stop=function(){var opts=this.options;if(opts&&opts.animate){var anis=this.animations;if(anis)for(var _i=0;_i<anis.length;_i++)anis[_i].stop()}return regStop?regStop.call(this):this.emit("layoutstop"),this},layoutProto.destroy||(layoutProto.destroy=function(){return this}),layoutProto.cy=function(){return this._private.cy};var getCy=function getCy2(layout2){return layout2._private.cy},emitterOpts={addEventFields:function addEventFields(layout2,evt){evt.layout=layout2,evt.cy=getCy(layout2),evt.target=layout2},bubble:function bubble(){return!0},parent:function parent(layout2){return getCy(layout2)}};extend(layoutProto,{createEmitter:function createEmitter(){return this._private.emitter=new Emitter(emitterOpts,this),this},emitter:function emitter(){return this._private.emitter},on:function on(evt,cb){return this.emitter().on(evt,cb),this},one:function one(evt,cb){return this.emitter().one(evt,cb),this},once:function once(evt,cb){return this.emitter().one(evt,cb),this},removeListener:function removeListener(evt,cb){return this.emitter().removeListener(evt,cb),this},removeAllListeners:function removeAllListeners(){return this.emitter().removeAllListeners(),this},emit:function emit(evt,params){return this.emitter().emit(evt,params),this}}),define.eventAliasesOn(layoutProto),ext=Layout2}else if("renderer"===type&&"null"!==name&&"base"!==name){var BaseRenderer2=getExtension("renderer","base"),bProto=BaseRenderer2.prototype,RegistrantRenderer=registrant,rProto=registrant.prototype,Renderer=function Renderer2(){BaseRenderer2.apply(this,arguments),RegistrantRenderer.apply(this,arguments)},proto=Renderer.prototype;for(var pName in bProto){var pVal=bProto[pName];if(null!=rProto[pName])return overrideErr(pName);proto[pName]=pVal}for(var _pName in rProto)proto[_pName]=rProto[_pName];bProto.clientFunctions.forEach((function(name2){proto[name2]=proto[name2]||function(){error("Renderer does not implement `renderer."+name2+"()` on its prototype")}})),ext=Renderer}else if("__proto__"===type||"constructor"===type||"prototype"===type)return error(type+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[type,name],value:ext})}function getExtension(type,name){return getMap({map:extensions,keys:[type,name]})}function setModule(type,name,moduleType,moduleName,registrant){return setMap({map:modules,keys:[type,name,moduleType,moduleName],value:registrant})}function getModule(type,name,moduleType,moduleName){return getMap({map:modules,keys:[type,name,moduleType,moduleName]})}var extension=function extension2(){return 2===arguments.length?getExtension.apply(null,arguments):3===arguments.length?setExtension.apply(null,arguments):4===arguments.length?getModule.apply(null,arguments):5===arguments.length?setModule.apply(null,arguments):void error("Invalid extension access syntax")};Core.prototype.extension=extension,incExts.forEach((function(group){group.extensions.forEach((function(ext){setExtension(group.type,ext.name,ext.impl)}))}));var Stylesheet=function Stylesheet2(){if(!(this instanceof Stylesheet2))return new Stylesheet2;this.length=0},sheetfn=Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"},sheetfn.selector=function(selector){return this[this.length++]={selector:selector,properties:[]},this},sheetfn.css=function(name,value){var i2=this.length-1;if(string(name))this[i2].properties.push({name:name,value:value});else if(plainObject(name))for(var map=name,propNames=Object.keys(map),j=0;j<propNames.length;j++){var key=propNames[j],mapVal=map[key];if(null!=mapVal){var prop=Style.properties[key]||Style.properties[dash2camel(key)];if(null!=prop){var _name=prop.name,_value=mapVal;this[i2].properties.push({name:_name,value:_value})}}}return this},sheetfn.style=sheetfn.css,sheetfn.generateStyle=function(cy){var style=new Style(cy);return this.appendToStyle(style)},sheetfn.appendToStyle=function(style){for(var i2=0;i2<this.length;i2++){var context=this[i2],selector=context.selector,props=context.properties;style.selector(selector);for(var j=0;j<props.length;j++){var prop=props[j];style.css(prop.name,prop.value)}}return style};var version="3.28.1",cytoscape2=function cytoscape3(options){return void 0===options&&(options={}),plainObject(options)?new Core(options):string(options)?extension.apply(extension,arguments):void 0};return cytoscape2.use=function(ext){var args=Array.prototype.slice.call(arguments,1);return args.unshift(cytoscape2),ext.apply(null,args),this},cytoscape2.warnings=function(bool){return warnings(bool)},cytoscape2.version=version,cytoscape2.stylesheet=cytoscape2.Stylesheet=Stylesheet,cytoscape2}();var cytoscape_umdExports=cytoscape_umd.exports;const cytoscape$1=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.P)(cytoscape_umdExports);var hasRequiredLayoutBase,hasRequiredCoseBase,cytoscapeCoseBilkent={exports:{}},coseBase={exports:{}},layoutBase={exports:{}};function requireLayoutBase(){return hasRequiredLayoutBase||(hasRequiredLayoutBase=1,function(module,exports){!function webpackUniversalModuleDefinition(root,factory){module.exports=factory()}(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.O,(function(){return function(modules){var installedModules={};function __nested_webpack_require_944571__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module2.exports,module2,module2.exports,__nested_webpack_require_944571__),module2.l=!0,module2.exports}return __nested_webpack_require_944571__.m=modules,__nested_webpack_require_944571__.c=installedModules,__nested_webpack_require_944571__.i=function(value){return value},__nested_webpack_require_944571__.d=function(exports2,name,getter){__nested_webpack_require_944571__.o(exports2,name)||Object.defineProperty(exports2,name,{configurable:!1,enumerable:!0,get:getter})},__nested_webpack_require_944571__.n=function(module2){var getter=module2&&module2.__esModule?function getDefault(){return module2.default}:function getModuleExports(){return module2};return __nested_webpack_require_944571__.d(getter,"a",getter),getter},__nested_webpack_require_944571__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__nested_webpack_require_944571__.p="",__nested_webpack_require_944571__(__nested_webpack_require_944571__.s=26)}([function(module2,exports2,__webpack_require__){function LayoutConstants(){}LayoutConstants.QUALITY=1,LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,LayoutConstants.DEFAULT_INCREMENTAL=!1,LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT=!0,LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT=!1,LayoutConstants.DEFAULT_ANIMATION_PERIOD=50,LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,LayoutConstants.DEFAULT_GRAPH_MARGIN=15,LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=!1,LayoutConstants.SIMPLE_NODE_SIZE=40,LayoutConstants.SIMPLE_NODE_HALF_SIZE=LayoutConstants.SIMPLE_NODE_SIZE/2,LayoutConstants.EMPTY_COMPOUND_NODE_SIZE=40,LayoutConstants.MIN_EDGE_LENGTH=1,LayoutConstants.WORLD_BOUNDARY=1e6,LayoutConstants.INITIAL_WORLD_BOUNDARY=LayoutConstants.WORLD_BOUNDARY/1e3,LayoutConstants.WORLD_CENTER_X=1200,LayoutConstants.WORLD_CENTER_Y=900,module2.exports=LayoutConstants},function(module2,exports2,__nested_webpack_require_947826__){var LGraphObject=__nested_webpack_require_947826__(2),IGeometry=__nested_webpack_require_947826__(8),IMath=__nested_webpack_require_947826__(9);function LEdge(source,target,vEdge){LGraphObject.call(this,vEdge),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=vEdge,this.bendpoints=[],this.source=source,this.target=target}for(var prop in LEdge.prototype=Object.create(LGraphObject.prototype),LGraphObject)LEdge[prop]=LGraphObject[prop];LEdge.prototype.getSource=function(){return this.source},LEdge.prototype.getTarget=function(){return this.target},LEdge.prototype.isInterGraph=function(){return this.isInterGraph},LEdge.prototype.getLength=function(){return this.length},LEdge.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},LEdge.prototype.getBendpoints=function(){return this.bendpoints},LEdge.prototype.getLca=function(){return this.lca},LEdge.prototype.getSourceInLca=function(){return this.sourceInLca},LEdge.prototype.getTargetInLca=function(){return this.targetInLca},LEdge.prototype.getOtherEnd=function(node){if(this.source===node)return this.target;if(this.target===node)return this.source;throw"Node is not incident with this edge"},LEdge.prototype.getOtherEndInGraph=function(node,graph){for(var otherEnd=this.getOtherEnd(node),root=graph.getGraphManager().getRoot();;){if(otherEnd.getOwner()==graph)return otherEnd;if(otherEnd.getOwner()==root)break;otherEnd=otherEnd.getOwner().getParent()}return null},LEdge.prototype.updateLength=function(){var clipPointCoordinates=new Array(4);this.isOverlapingSourceAndTarget=IGeometry.getIntersection(this.target.getRect(),this.source.getRect(),clipPointCoordinates),this.isOverlapingSourceAndTarget||(this.lengthX=clipPointCoordinates[0]-clipPointCoordinates[2],this.lengthY=clipPointCoordinates[1]-clipPointCoordinates[3],Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},LEdge.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=IMath.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=IMath.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},module2.exports=LEdge},function(module2,exports2,__webpack_require__){module2.exports=function LGraphObject(vGraphObject){this.vGraphObject=vGraphObject}},function(module2,exports2,__nested_webpack_require_952180__){var LGraphObject=__nested_webpack_require_952180__(2),Integer=__nested_webpack_require_952180__(10),RectangleD=__nested_webpack_require_952180__(13),LayoutConstants=__nested_webpack_require_952180__(0),RandomSeed=__nested_webpack_require_952180__(16),PointD=__nested_webpack_require_952180__(4);function LNode(gm,loc,size,vNode){null==size&&null==vNode&&(vNode=loc),LGraphObject.call(this,vNode),null!=gm.graphManager&&(gm=gm.graphManager),this.estimatedSize=Integer.MIN_VALUE,this.inclusionTreeDepth=Integer.MAX_VALUE,this.vGraphObject=vNode,this.edges=[],this.graphManager=gm,this.rect=null!=size&&null!=loc?new RectangleD(loc.x,loc.y,size.width,size.height):new RectangleD}for(var prop in LNode.prototype=Object.create(LGraphObject.prototype),LGraphObject)LNode[prop]=LGraphObject[prop];LNode.prototype.getEdges=function(){return this.edges},LNode.prototype.getChild=function(){return this.child},LNode.prototype.getOwner=function(){return this.owner},LNode.prototype.getWidth=function(){return this.rect.width},LNode.prototype.setWidth=function(width){this.rect.width=width},LNode.prototype.getHeight=function(){return this.rect.height},LNode.prototype.setHeight=function(height){this.rect.height=height},LNode.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},LNode.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},LNode.prototype.getCenter=function(){return new PointD(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},LNode.prototype.getLocation=function(){return new PointD(this.rect.x,this.rect.y)},LNode.prototype.getRect=function(){return this.rect},LNode.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},LNode.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},LNode.prototype.setRect=function(upperLeft,dimension){this.rect.x=upperLeft.x,this.rect.y=upperLeft.y,this.rect.width=dimension.width,this.rect.height=dimension.height},LNode.prototype.setCenter=function(cx,cy){this.rect.x=cx-this.rect.width/2,this.rect.y=cy-this.rect.height/2},LNode.prototype.setLocation=function(x,y){this.rect.x=x,this.rect.y=y},LNode.prototype.moveBy=function(dx,dy){this.rect.x+=dx,this.rect.y+=dy},LNode.prototype.getEdgeListToNode=function(to){var edgeList=[],self2=this;return self2.edges.forEach((function(edge){if(edge.target==to){if(edge.source!=self2)throw"Incorrect edge source!";edgeList.push(edge)}})),edgeList},LNode.prototype.getEdgesBetween=function(other){var edgeList=[],self2=this;return self2.edges.forEach((function(edge){if(edge.source!=self2&&edge.target!=self2)throw"Incorrect edge source and/or target";edge.target!=other&&edge.source!=other||edgeList.push(edge)})),edgeList},LNode.prototype.getNeighborsList=function(){var neighbors=new Set,self2=this;return self2.edges.forEach((function(edge){if(edge.source==self2)neighbors.add(edge.target);else{if(edge.target!=self2)throw"Incorrect incidency!";neighbors.add(edge.source)}})),neighbors},LNode.prototype.withChildren=function(){var withNeighborsList=new Set;if(withNeighborsList.add(this),null!=this.child)for(var nodes2=this.child.getNodes(),i=0;i<nodes2.length;i++)nodes2[i].withChildren().forEach((function(node){withNeighborsList.add(node)}));return withNeighborsList},LNode.prototype.getNoOfChildren=function(){var noOfChildren=0;if(null==this.child)noOfChildren=1;else for(var nodes2=this.child.getNodes(),i=0;i<nodes2.length;i++)noOfChildren+=nodes2[i].getNoOfChildren();return 0==noOfChildren&&(noOfChildren=1),noOfChildren},LNode.prototype.getEstimatedSize=function(){if(this.estimatedSize==Integer.MIN_VALUE)throw"assert failed";return this.estimatedSize},LNode.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},LNode.prototype.scatter=function(){var randomCenterX,randomCenterY,minX=-LayoutConstants.INITIAL_WORLD_BOUNDARY,maxX=LayoutConstants.INITIAL_WORLD_BOUNDARY;randomCenterX=LayoutConstants.WORLD_CENTER_X+RandomSeed.nextDouble()*(maxX-minX)+minX;var minY=-LayoutConstants.INITIAL_WORLD_BOUNDARY,maxY=LayoutConstants.INITIAL_WORLD_BOUNDARY;randomCenterY=LayoutConstants.WORLD_CENTER_Y+RandomSeed.nextDouble()*(maxY-minY)+minY,this.rect.x=randomCenterX,this.rect.y=randomCenterY},LNode.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var childGraph=this.getChild();if(childGraph.updateBounds(!0),this.rect.x=childGraph.getLeft(),this.rect.y=childGraph.getTop(),this.setWidth(childGraph.getRight()-childGraph.getLeft()),this.setHeight(childGraph.getBottom()-childGraph.getTop()),LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS){var width=childGraph.getRight()-childGraph.getLeft(),height=childGraph.getBottom()-childGraph.getTop();this.labelWidth>width&&(this.rect.x-=(this.labelWidth-width)/2,this.setWidth(this.labelWidth)),this.labelHeight>height&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-height)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-height),this.setHeight(this.labelHeight))}}},LNode.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==Integer.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},LNode.prototype.transform=function(trans){var left=this.rect.x;left>LayoutConstants.WORLD_BOUNDARY?left=LayoutConstants.WORLD_BOUNDARY:left<-LayoutConstants.WORLD_BOUNDARY&&(left=-LayoutConstants.WORLD_BOUNDARY);var top=this.rect.y;top>LayoutConstants.WORLD_BOUNDARY?top=LayoutConstants.WORLD_BOUNDARY:top<-LayoutConstants.WORLD_BOUNDARY&&(top=-LayoutConstants.WORLD_BOUNDARY);var leftTop=new PointD(left,top),vLeftTop=trans.inverseTransformPoint(leftTop);this.setLocation(vLeftTop.x,vLeftTop.y)},LNode.prototype.getLeft=function(){return this.rect.x},LNode.prototype.getRight=function(){return this.rect.x+this.rect.width},LNode.prototype.getTop=function(){return this.rect.y},LNode.prototype.getBottom=function(){return this.rect.y+this.rect.height},LNode.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},module2.exports=LNode},function(module2,exports2,__webpack_require__){function PointD(x,y){null==x&&null==y?(this.x=0,this.y=0):(this.x=x,this.y=y)}PointD.prototype.getX=function(){return this.x},PointD.prototype.getY=function(){return this.y},PointD.prototype.setX=function(x){this.x=x},PointD.prototype.setY=function(y){this.y=y},PointD.prototype.getDifference=function(pt){return new DimensionD(this.x-pt.x,this.y-pt.y)},PointD.prototype.getCopy=function(){return new PointD(this.x,this.y)},PointD.prototype.translate=function(dim){return this.x+=dim.width,this.y+=dim.height,this},module2.exports=PointD},function(module2,exports2,__nested_webpack_require_964498__){var LGraphObject=__nested_webpack_require_964498__(2),Integer=__nested_webpack_require_964498__(10),LayoutConstants=__nested_webpack_require_964498__(0),LGraphManager=__nested_webpack_require_964498__(6),LNode=__nested_webpack_require_964498__(3),LEdge=__nested_webpack_require_964498__(1),RectangleD=__nested_webpack_require_964498__(13),Point2=__nested_webpack_require_964498__(12),LinkedList=__nested_webpack_require_964498__(11);function LGraph(parent,obj2,vGraph){LGraphObject.call(this,vGraph),this.estimatedSize=Integer.MIN_VALUE,this.margin=LayoutConstants.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=parent,null!=obj2&&obj2 instanceof LGraphManager?this.graphManager=obj2:null!=obj2&&obj2 instanceof Layout&&(this.graphManager=obj2.graphManager)}for(var prop in LGraph.prototype=Object.create(LGraphObject.prototype),LGraphObject)LGraph[prop]=LGraphObject[prop];LGraph.prototype.getNodes=function(){return this.nodes},LGraph.prototype.getEdges=function(){return this.edges},LGraph.prototype.getGraphManager=function(){return this.graphManager},LGraph.prototype.getParent=function(){return this.parent},LGraph.prototype.getLeft=function(){return this.left},LGraph.prototype.getRight=function(){return this.right},LGraph.prototype.getTop=function(){return this.top},LGraph.prototype.getBottom=function(){return this.bottom},LGraph.prototype.isConnected=function(){return this.isConnected},LGraph.prototype.add=function(obj1,sourceNode,targetNode){if(null==sourceNode&&null==targetNode){var newNode=obj1;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(newNode)>-1)throw"Node already in graph!";return newNode.owner=this,this.getNodes().push(newNode),newNode}var newEdge=obj1;if(!(this.getNodes().indexOf(sourceNode)>-1&&this.getNodes().indexOf(targetNode)>-1))throw"Source or target not in graph!";if(sourceNode.owner!=targetNode.owner||sourceNode.owner!=this)throw"Both owners must be this graph!";return sourceNode.owner!=targetNode.owner?null:(newEdge.source=sourceNode,newEdge.target=targetNode,newEdge.isInterGraph=!1,this.getEdges().push(newEdge),sourceNode.edges.push(newEdge),targetNode!=sourceNode&&targetNode.edges.push(newEdge),newEdge)},LGraph.prototype.remove=function(obj){var node=obj;if(obj instanceof LNode){if(null==node)throw"Node is null!";if(null==node.owner||node.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var edgesToBeRemoved=node.edges.slice(),s=edgesToBeRemoved.length,i=0;i<s;i++)(edge=edgesToBeRemoved[i]).isInterGraph?this.graphManager.remove(edge):edge.source.owner.remove(edge);if(-1==(index=this.nodes.indexOf(node)))throw"Node not in owner node list!";this.nodes.splice(index,1)}else if(obj instanceof LEdge){var edge;if(null==(edge=obj))throw"Edge is null!";if(null==edge.source||null==edge.target)throw"Source and/or target is null!";if(null==edge.source.owner||null==edge.target.owner||edge.source.owner!=this||edge.target.owner!=this)throw"Source and/or target owner is invalid!";var index,sourceIndex=edge.source.edges.indexOf(edge),targetIndex=edge.target.edges.indexOf(edge);if(!(sourceIndex>-1&&targetIndex>-1))throw"Source and/or target doesn't know this edge!";if(edge.source.edges.splice(sourceIndex,1),edge.target!=edge.source&&edge.target.edges.splice(targetIndex,1),-1==(index=edge.source.owner.getEdges().indexOf(edge)))throw"Not in owner's edge list!";edge.source.owner.getEdges().splice(index,1)}},LGraph.prototype.updateLeftTop=function(){for(var nodeTop,nodeLeft,margin,top=Integer.MAX_VALUE,left=Integer.MAX_VALUE,nodes2=this.getNodes(),s=nodes2.length,i=0;i<s;i++){var lNode=nodes2[i];top>(nodeTop=lNode.getTop())&&(top=nodeTop),left>(nodeLeft=lNode.getLeft())&&(left=nodeLeft)}return top==Integer.MAX_VALUE?null:(margin=null!=nodes2[0].getParent().paddingLeft?nodes2[0].getParent().paddingLeft:this.margin,this.left=left-margin,this.top=top-margin,new Point2(this.left,this.top))},LGraph.prototype.updateBounds=function(recursive){for(var nodeLeft,nodeRight,nodeTop,nodeBottom,margin,left=Integer.MAX_VALUE,right=-Integer.MAX_VALUE,top=Integer.MAX_VALUE,bottom=-Integer.MAX_VALUE,nodes2=this.nodes,s=nodes2.length,i=0;i<s;i++){var lNode=nodes2[i];recursive&&null!=lNode.child&&lNode.updateBounds(),left>(nodeLeft=lNode.getLeft())&&(left=nodeLeft),right<(nodeRight=lNode.getRight())&&(right=nodeRight),top>(nodeTop=lNode.getTop())&&(top=nodeTop),bottom<(nodeBottom=lNode.getBottom())&&(bottom=nodeBottom)}var boundingRect=new RectangleD(left,top,right-left,bottom-top);left==Integer.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),margin=null!=nodes2[0].getParent().paddingLeft?nodes2[0].getParent().paddingLeft:this.margin,this.left=boundingRect.x-margin,this.right=boundingRect.x+boundingRect.width+margin,this.top=boundingRect.y-margin,this.bottom=boundingRect.y+boundingRect.height+margin},LGraph.calculateBounds=function(nodes2){for(var nodeLeft,nodeRight,nodeTop,nodeBottom,left=Integer.MAX_VALUE,right=-Integer.MAX_VALUE,top=Integer.MAX_VALUE,bottom=-Integer.MAX_VALUE,s=nodes2.length,i=0;i<s;i++){var lNode=nodes2[i];left>(nodeLeft=lNode.getLeft())&&(left=nodeLeft),right<(nodeRight=lNode.getRight())&&(right=nodeRight),top>(nodeTop=lNode.getTop())&&(top=nodeTop),bottom<(nodeBottom=lNode.getBottom())&&(bottom=nodeBottom)}return new RectangleD(left,top,right-left,bottom-top)},LGraph.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},LGraph.prototype.getEstimatedSize=function(){if(this.estimatedSize==Integer.MIN_VALUE)throw"assert failed";return this.estimatedSize},LGraph.prototype.calcEstimatedSize=function(){for(var size=0,nodes2=this.nodes,s=nodes2.length,i=0;i<s;i++){size+=nodes2[i].calcEstimatedSize()}return this.estimatedSize=0==size?LayoutConstants.EMPTY_COMPOUND_NODE_SIZE:size/Math.sqrt(this.nodes.length),this.estimatedSize},LGraph.prototype.updateConnected=function(){var self2=this;if(0!=this.nodes.length){var neighborEdges,currentNeighbor,queue=new LinkedList,visited=new Set,currentNode=this.nodes[0];for(currentNode.withChildren().forEach((function(node){queue.push(node),visited.add(node)}));0!==queue.length;)for(var size=(neighborEdges=(currentNode=queue.shift()).getEdges()).length,i=0;i<size;i++){if(null!=(currentNeighbor=neighborEdges[i].getOtherEndInGraph(currentNode,this))&&!visited.has(currentNeighbor))currentNeighbor.withChildren().forEach((function(node){queue.push(node),visited.add(node)}))}if(this.isConnected=!1,visited.size>=this.nodes.length){var noOfVisitedInThisGraph=0;visited.forEach((function(visitedNode){visitedNode.owner==self2&&noOfVisitedInThisGraph++})),noOfVisitedInThisGraph==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},module2.exports=LGraph},function(module2,exports2,__nested_webpack_require_978071__){var LGraph,LEdge=__nested_webpack_require_978071__(1);function LGraphManager(layout){LGraph=__nested_webpack_require_978071__(5),this.layout=layout,this.graphs=[],this.edges=[]}LGraphManager.prototype.addRoot=function(){var ngraph=this.layout.newGraph(),nnode=this.layout.newNode(null),root=this.add(ngraph,nnode);return this.setRootGraph(root),this.rootGraph},LGraphManager.prototype.add=function(newGraph,parentNode,newEdge,sourceNode,targetNode){if(null==newEdge&&null==sourceNode&&null==targetNode){if(null==newGraph)throw"Graph is null!";if(null==parentNode)throw"Parent node is null!";if(this.graphs.indexOf(newGraph)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(newGraph),null!=newGraph.parent)throw"Already has a parent!";if(null!=parentNode.child)throw"Already has a child!";return newGraph.parent=parentNode,parentNode.child=newGraph,newGraph}targetNode=newEdge,newEdge=newGraph;var sourceGraph=(sourceNode=parentNode).getOwner(),targetGraph=targetNode.getOwner();if(null==sourceGraph||sourceGraph.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==targetGraph||targetGraph.getGraphManager()!=this)throw"Target not in this graph mgr!";if(sourceGraph==targetGraph)return newEdge.isInterGraph=!1,sourceGraph.add(newEdge,sourceNode,targetNode);if(newEdge.isInterGraph=!0,newEdge.source=sourceNode,newEdge.target=targetNode,this.edges.indexOf(newEdge)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(newEdge),null==newEdge.source||null==newEdge.target)throw"Edge source and/or target is null!";if(-1!=newEdge.source.edges.indexOf(newEdge)||-1!=newEdge.target.edges.indexOf(newEdge))throw"Edge already in source and/or target incidency list!";return newEdge.source.edges.push(newEdge),newEdge.target.edges.push(newEdge),newEdge},LGraphManager.prototype.remove=function(lObj){if(lObj instanceof LGraph){var graph=lObj;if(graph.getGraphManager()!=this)throw"Graph not in this graph mgr";if(graph!=this.rootGraph&&(null==graph.parent||graph.parent.graphManager!=this))throw"Invalid parent node!";for(var edge,edgesToBeRemoved=[],s=(edgesToBeRemoved=edgesToBeRemoved.concat(graph.getEdges())).length,i=0;i<s;i++)edge=edgesToBeRemoved[i],graph.remove(edge);var node,nodesToBeRemoved=[];s=(nodesToBeRemoved=nodesToBeRemoved.concat(graph.getNodes())).length;for(i=0;i<s;i++)node=nodesToBeRemoved[i],graph.remove(node);graph==this.rootGraph&&this.setRootGraph(null);var index=this.graphs.indexOf(graph);this.graphs.splice(index,1),graph.parent=null}else if(lObj instanceof LEdge){if(null==(edge=lObj))throw"Edge is null!";if(!edge.isInterGraph)throw"Not an inter-graph edge!";if(null==edge.source||null==edge.target)throw"Source and/or target is null!";if(-1==edge.source.edges.indexOf(edge)||-1==edge.target.edges.indexOf(edge))throw"Source and/or target doesn't know this edge!";index=edge.source.edges.indexOf(edge);if(edge.source.edges.splice(index,1),index=edge.target.edges.indexOf(edge),edge.target.edges.splice(index,1),null==edge.source.owner||null==edge.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==edge.source.owner.getGraphManager().edges.indexOf(edge))throw"Not in owner graph manager's edge list!";index=edge.source.owner.getGraphManager().edges.indexOf(edge);edge.source.owner.getGraphManager().edges.splice(index,1)}},LGraphManager.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},LGraphManager.prototype.getGraphs=function(){return this.graphs},LGraphManager.prototype.getAllNodes=function(){if(null==this.allNodes){for(var nodeList=[],graphs=this.getGraphs(),s=graphs.length,i=0;i<s;i++)nodeList=nodeList.concat(graphs[i].getNodes());this.allNodes=nodeList}return this.allNodes},LGraphManager.prototype.resetAllNodes=function(){this.allNodes=null},LGraphManager.prototype.resetAllEdges=function(){this.allEdges=null},LGraphManager.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},LGraphManager.prototype.getAllEdges=function(){if(null==this.allEdges){var edgeList=[],graphs=this.getGraphs();graphs.length;for(var i=0;i<graphs.length;i++)edgeList=edgeList.concat(graphs[i].getEdges());edgeList=edgeList.concat(this.edges),this.allEdges=edgeList}return this.allEdges},LGraphManager.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},LGraphManager.prototype.setAllNodesToApplyGravitation=function(nodeList){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=nodeList},LGraphManager.prototype.getRoot=function(){return this.rootGraph},LGraphManager.prototype.setRootGraph=function(graph){if(graph.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=graph,null==graph.parent&&(graph.parent=this.layout.newNode("Root node"))},LGraphManager.prototype.getLayout=function(){return this.layout},LGraphManager.prototype.isOneAncestorOfOther=function(firstNode,secondNode){if(null==firstNode||null==secondNode)throw"assert failed";if(firstNode==secondNode)return!0;for(var parentNode,ownerGraph=firstNode.getOwner();;){if(null==(parentNode=ownerGraph.getParent()))break;if(parentNode==secondNode)return!0;if(null==(ownerGraph=parentNode.getOwner()))break}for(ownerGraph=secondNode.getOwner();;){if(null==(parentNode=ownerGraph.getParent()))break;if(parentNode==firstNode)return!0;if(null==(ownerGraph=parentNode.getOwner()))break}return!1},LGraphManager.prototype.calcLowestCommonAncestors=function(){for(var edge,sourceNode,targetNode,sourceAncestorGraph,targetAncestorGraph,edges=this.getAllEdges(),s=edges.length,i=0;i<s;i++)if(sourceNode=(edge=edges[i]).source,targetNode=edge.target,edge.lca=null,edge.sourceInLca=sourceNode,edge.targetInLca=targetNode,sourceNode!=targetNode){for(sourceAncestorGraph=sourceNode.getOwner();null==edge.lca;){for(edge.targetInLca=targetNode,targetAncestorGraph=targetNode.getOwner();null==edge.lca;){if(targetAncestorGraph==sourceAncestorGraph){edge.lca=targetAncestorGraph;break}if(targetAncestorGraph==this.rootGraph)break;if(null!=edge.lca)throw"assert failed";edge.targetInLca=targetAncestorGraph.getParent(),targetAncestorGraph=edge.targetInLca.getOwner()}if(sourceAncestorGraph==this.rootGraph)break;null==edge.lca&&(edge.sourceInLca=sourceAncestorGraph.getParent(),sourceAncestorGraph=edge.sourceInLca.getOwner())}if(null==edge.lca)throw"assert failed"}else edge.lca=sourceNode.getOwner()},LGraphManager.prototype.calcLowestCommonAncestor=function(firstNode,secondNode){if(firstNode==secondNode)return firstNode.getOwner();for(var firstOwnerGraph=firstNode.getOwner();;){if(null==firstOwnerGraph)break;for(var secondOwnerGraph=secondNode.getOwner();;){if(null==secondOwnerGraph)break;if(secondOwnerGraph==firstOwnerGraph)return secondOwnerGraph;secondOwnerGraph=secondOwnerGraph.getParent().getOwner()}firstOwnerGraph=firstOwnerGraph.getParent().getOwner()}return firstOwnerGraph},LGraphManager.prototype.calcInclusionTreeDepths=function(graph,depth){var node;null==graph&&null==depth&&(graph=this.rootGraph,depth=1);for(var nodes2=graph.getNodes(),s=nodes2.length,i=0;i<s;i++)(node=nodes2[i]).inclusionTreeDepth=depth,null!=node.child&&this.calcInclusionTreeDepths(node.child,depth+1)},LGraphManager.prototype.includesInvalidEdge=function(){for(var edge,s=this.edges.length,i=0;i<s;i++)if(edge=this.edges[i],this.isOneAncestorOfOther(edge.source,edge.target))return!0;return!1},module2.exports=LGraphManager},function(module2,exports2,__nested_webpack_require_992148__){var LayoutConstants=__nested_webpack_require_992148__(0);function FDLayoutConstants(){}for(var prop in LayoutConstants)FDLayoutConstants[prop]=LayoutConstants[prop];FDLayoutConstants.MAX_ITERATIONS=2500,FDLayoutConstants.DEFAULT_EDGE_LENGTH=50,FDLayoutConstants.DEFAULT_SPRING_STRENGTH=.45,FDLayoutConstants.DEFAULT_REPULSION_STRENGTH=4500,FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=.4,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,FDLayoutConstants.COOLING_ADAPTATION_FACTOR=.33,FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT=1e3,FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT=5e3,FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,FDLayoutConstants.MAX_NODE_DISPLACEMENT=3*FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL,FDLayoutConstants.MIN_REPULSION_DIST=FDLayoutConstants.DEFAULT_EDGE_LENGTH/10,FDLayoutConstants.CONVERGENCE_CHECK_PERIOD=100,FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,FDLayoutConstants.MIN_EDGE_LENGTH=1,FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD=10,module2.exports=FDLayoutConstants},function(module2,exports2,__nested_webpack_require_994017__){var Point2=__nested_webpack_require_994017__(12);function IGeometry(){}IGeometry.calcSeparationAmount=function(rectA,rectB,overlapAmount,separationBuffer){if(!rectA.intersects(rectB))throw"assert failed";var directions=new Array(2);this.decideDirectionsForOverlappingNodes(rectA,rectB,directions),overlapAmount[0]=Math.min(rectA.getRight(),rectB.getRight())-Math.max(rectA.x,rectB.x),overlapAmount[1]=Math.min(rectA.getBottom(),rectB.getBottom())-Math.max(rectA.y,rectB.y),rectA.getX()<=rectB.getX()&&rectA.getRight()>=rectB.getRight()?overlapAmount[0]+=Math.min(rectB.getX()-rectA.getX(),rectA.getRight()-rectB.getRight()):rectB.getX()<=rectA.getX()&&rectB.getRight()>=rectA.getRight()&&(overlapAmount[0]+=Math.min(rectA.getX()-rectB.getX(),rectB.getRight()-rectA.getRight())),rectA.getY()<=rectB.getY()&&rectA.getBottom()>=rectB.getBottom()?overlapAmount[1]+=Math.min(rectB.getY()-rectA.getY(),rectA.getBottom()-rectB.getBottom()):rectB.getY()<=rectA.getY()&&rectB.getBottom()>=rectA.getBottom()&&(overlapAmount[1]+=Math.min(rectA.getY()-rectB.getY(),rectB.getBottom()-rectA.getBottom()));var slope=Math.abs((rectB.getCenterY()-rectA.getCenterY())/(rectB.getCenterX()-rectA.getCenterX()));rectB.getCenterY()===rectA.getCenterY()&&rectB.getCenterX()===rectA.getCenterX()&&(slope=1);var moveByY=slope*overlapAmount[0],moveByX=overlapAmount[1]/slope;overlapAmount[0]<moveByX?moveByX=overlapAmount[0]:moveByY=overlapAmount[1],overlapAmount[0]=-1*directions[0]*(moveByX/2+separationBuffer),overlapAmount[1]=-1*directions[1]*(moveByY/2+separationBuffer)},IGeometry.decideDirectionsForOverlappingNodes=function(rectA,rectB,directions){rectA.getCenterX()<rectB.getCenterX()?directions[0]=-1:directions[0]=1,rectA.getCenterY()<rectB.getCenterY()?directions[1]=-1:directions[1]=1},IGeometry.getIntersection2=function(rectA,rectB,result){var p1x=rectA.getCenterX(),p1y=rectA.getCenterY(),p2x=rectB.getCenterX(),p2y=rectB.getCenterY();if(rectA.intersects(rectB))return result[0]=p1x,result[1]=p1y,result[2]=p2x,result[3]=p2y,!0;var topLeftAx=rectA.getX(),topLeftAy=rectA.getY(),topRightAx=rectA.getRight(),bottomLeftAx=rectA.getX(),bottomLeftAy=rectA.getBottom(),bottomRightAx=rectA.getRight(),halfWidthA=rectA.getWidthHalf(),halfHeightA=rectA.getHeightHalf(),topLeftBx=rectB.getX(),topLeftBy=rectB.getY(),topRightBx=rectB.getRight(),bottomLeftBx=rectB.getX(),bottomLeftBy=rectB.getBottom(),bottomRightBx=rectB.getRight(),halfWidthB=rectB.getWidthHalf(),halfHeightB=rectB.getHeightHalf(),clipPointAFound=!1,clipPointBFound=!1;if(p1x===p2x){if(p1y>p2y)return result[0]=p1x,result[1]=topLeftAy,result[2]=p2x,result[3]=bottomLeftBy,!1;if(p1y<p2y)return result[0]=p1x,result[1]=bottomLeftAy,result[2]=p2x,result[3]=topLeftBy,!1}else if(p1y===p2y){if(p1x>p2x)return result[0]=topLeftAx,result[1]=p1y,result[2]=topRightBx,result[3]=p2y,!1;if(p1x<p2x)return result[0]=topRightAx,result[1]=p1y,result[2]=topLeftBx,result[3]=p2y,!1}else{var slopeA=rectA.height/rectA.width,slopeB=rectB.height/rectB.width,slopePrime=(p2y-p1y)/(p2x-p1x),cardinalDirectionA=void 0,cardinalDirectionB=void 0,tempPointAx=void 0,tempPointAy=void 0,tempPointBx=void 0,tempPointBy=void 0;if(-slopeA===slopePrime?p1x>p2x?(result[0]=bottomLeftAx,result[1]=bottomLeftAy,clipPointAFound=!0):(result[0]=topRightAx,result[1]=topLeftAy,clipPointAFound=!0):slopeA===slopePrime&&(p1x>p2x?(result[0]=topLeftAx,result[1]=topLeftAy,clipPointAFound=!0):(result[0]=bottomRightAx,result[1]=bottomLeftAy,clipPointAFound=!0)),-slopeB===slopePrime?p2x>p1x?(result[2]=bottomLeftBx,result[3]=bottomLeftBy,clipPointBFound=!0):(result[2]=topRightBx,result[3]=topLeftBy,clipPointBFound=!0):slopeB===slopePrime&&(p2x>p1x?(result[2]=topLeftBx,result[3]=topLeftBy,clipPointBFound=!0):(result[2]=bottomRightBx,result[3]=bottomLeftBy,clipPointBFound=!0)),clipPointAFound&&clipPointBFound)return!1;if(p1x>p2x?p1y>p2y?(cardinalDirectionA=this.getCardinalDirection(slopeA,slopePrime,4),cardinalDirectionB=this.getCardinalDirection(slopeB,slopePrime,2)):(cardinalDirectionA=this.getCardinalDirection(-slopeA,slopePrime,3),cardinalDirectionB=this.getCardinalDirection(-slopeB,slopePrime,1)):p1y>p2y?(cardinalDirectionA=this.getCardinalDirection(-slopeA,slopePrime,1),cardinalDirectionB=this.getCardinalDirection(-slopeB,slopePrime,3)):(cardinalDirectionA=this.getCardinalDirection(slopeA,slopePrime,2),cardinalDirectionB=this.getCardinalDirection(slopeB,slopePrime,4)),!clipPointAFound)switch(cardinalDirectionA){case 1:tempPointAy=topLeftAy,tempPointAx=p1x+-halfHeightA/slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 2:tempPointAx=bottomRightAx,tempPointAy=p1y+halfWidthA*slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 3:tempPointAy=bottomLeftAy,tempPointAx=p1x+halfHeightA/slopePrime,result[0]=tempPointAx,result[1]=tempPointAy;break;case 4:tempPointAx=bottomLeftAx,tempPointAy=p1y+-halfWidthA*slopePrime,result[0]=tempPointAx,result[1]=tempPointAy}if(!clipPointBFound)switch(cardinalDirectionB){case 1:tempPointBy=topLeftBy,tempPointBx=p2x+-halfHeightB/slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 2:tempPointBx=bottomRightBx,tempPointBy=p2y+halfWidthB*slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 3:tempPointBy=bottomLeftBy,tempPointBx=p2x+halfHeightB/slopePrime,result[2]=tempPointBx,result[3]=tempPointBy;break;case 4:tempPointBx=bottomLeftBx,tempPointBy=p2y+-halfWidthB*slopePrime,result[2]=tempPointBx,result[3]=tempPointBy}}return!1},IGeometry.getCardinalDirection=function(slope,slopePrime,line){return slope>slopePrime?line:1+line%4},IGeometry.getIntersection=function(s1,s2,f1,f2){if(null==f2)return this.getIntersection2(s1,s2,f1);var a1,a2,b1,b2,c1,c2,denom,x1=s1.x,y1=s1.y,x2=s2.x,y2=s2.y,x3=f1.x,y3=f1.y,x4=f2.x,y4=f2.y;return 0===(denom=(a1=y2-y1)*(b2=x3-x4)-(a2=y4-y3)*(b1=x1-x2))?null:new Point2((b1*(c2=x4*y3-x3*y4)-b2*(c1=x2*y1-x1*y2))/denom,(a2*c1-a1*c2)/denom)},IGeometry.angleOfVector=function(Cx,Cy,Nx,Ny){var C_angle=void 0;return Cx!==Nx?(C_angle=Math.atan((Ny-Cy)/(Nx-Cx)),Nx<Cx?C_angle+=Math.PI:Ny<Cy&&(C_angle+=this.TWO_PI)):C_angle=Ny<Cy?this.ONE_AND_HALF_PI:this.HALF_PI,C_angle},IGeometry.doIntersect=function(p1,p2,p3,p4){var a=p1.x,b=p1.y,c=p2.x,d=p2.y,p=p3.x,q=p3.y,r=p4.x,s=p4.y,det=(c-a)*(s-q)-(r-p)*(d-b);if(0===det)return!1;var lambda=((s-q)*(r-a)+(p-r)*(s-b))/det,gamma=((b-d)*(r-a)+(c-a)*(s-b))/det;return 0<lambda&&lambda<1&&0<gamma&&gamma<1},IGeometry.HALF_PI=.5*Math.PI,IGeometry.ONE_AND_HALF_PI=1.5*Math.PI,IGeometry.TWO_PI=2*Math.PI,IGeometry.THREE_PI=3*Math.PI,module2.exports=IGeometry},function(module2,exports2,__webpack_require__){function IMath(){}IMath.sign=function(value){return value>0?1:value<0?-1:0},IMath.floor=function(value){return value<0?Math.ceil(value):Math.floor(value)},IMath.ceil=function(value){return value<0?Math.floor(value):Math.ceil(value)},module2.exports=IMath},function(module2,exports2,__webpack_require__){function Integer(){}Integer.MAX_VALUE=2147483647,Integer.MIN_VALUE=-2147483648,module2.exports=Integer},function(module2,exports2,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var nodeFrom=function nodeFrom2(value){return{value:value,next:null,prev:null}},add=function add2(prev,node,next2,list){return null!==prev?prev.next=node:list.head=node,null!==next2?next2.prev=node:list.tail=node,node.prev=prev,node.next=next2,list.length++,node},_remove=function _remove2(node,list){var prev=node.prev,next2=node.next;return null!==prev?prev.next=next2:list.head=next2,null!==next2?next2.prev=prev:list.tail=prev,node.prev=node.next=null,list.length--,node},LinkedList=function(){function LinkedList2(vals){var _this=this;!function _classCallCheck(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LinkedList2),this.length=0,this.head=null,this.tail=null,null!=vals&&vals.forEach((function(v){return _this.push(v)}))}return _createClass(LinkedList2,[{key:"size",value:function size(){return this.length}},{key:"insertBefore",value:function insertBefore(val,otherNode){return add(otherNode.prev,nodeFrom(val),otherNode,this)}},{key:"insertAfter",value:function insertAfter(val,otherNode){return add(otherNode,nodeFrom(val),otherNode.next,this)}},{key:"insertNodeBefore",value:function insertNodeBefore(newNode,otherNode){return add(otherNode.prev,newNode,otherNode,this)}},{key:"insertNodeAfter",value:function insertNodeAfter(newNode,otherNode){return add(otherNode,newNode,otherNode.next,this)}},{key:"push",value:function push(val){return add(this.tail,nodeFrom(val),null,this)}},{key:"unshift",value:function unshift(val){return add(null,nodeFrom(val),this.head,this)}},{key:"remove",value:function remove(node){return _remove(node,this)}},{key:"pop",value:function pop(){return _remove(this.tail,this).value}},{key:"popNode",value:function popNode(){return _remove(this.tail,this)}},{key:"shift",value:function shift(){return _remove(this.head,this).value}},{key:"shiftNode",value:function shiftNode(){return _remove(this.head,this)}},{key:"get_object_at",value:function get_object_at(index){if(index<=this.length()){for(var i=1,current=this.head;i<index;)current=current.next,i++;return current.value}}},{key:"set_object_at",value:function set_object_at(index,value){if(index<=this.length()){for(var i=1,current=this.head;i<index;)current=current.next,i++;current.value=value}}}]),LinkedList2}();module2.exports=LinkedList},function(module2,exports2,__webpack_require__){function Point2(x,y,p){this.x=null,this.y=null,null==x&&null==y&&null==p?(this.x=0,this.y=0):"number"==typeof x&&"number"==typeof y&&null==p?(this.x=x,this.y=y):"Point"==x.constructor.name&&null==y&&null==p&&(p=x,this.x=p.x,this.y=p.y)}Point2.prototype.getX=function(){return this.x},Point2.prototype.getY=function(){return this.y},Point2.prototype.getLocation=function(){return new Point2(this.x,this.y)},Point2.prototype.setLocation=function(x,y,p){"Point"==x.constructor.name&&null==y&&null==p?(p=x,this.setLocation(p.x,p.y)):"number"==typeof x&&"number"==typeof y&&null==p&&(parseInt(x)==x&&parseInt(y)==y?this.move(x,y):(this.x=Math.floor(x+.5),this.y=Math.floor(y+.5)))},Point2.prototype.move=function(x,y){this.x=x,this.y=y},Point2.prototype.translate=function(dx,dy){this.x+=dx,this.y+=dy},Point2.prototype.equals=function(obj){if("Point"==obj.constructor.name){var pt=obj;return this.x==pt.x&&this.y==pt.y}return this==obj},Point2.prototype.toString=function(){return(new Point2).constructor.name+"[x="+this.x+",y="+this.y+"]"},module2.exports=Point2},function(module2,exports2,__webpack_require__){function RectangleD(x,y,width,height){this.x=0,this.y=0,this.width=0,this.height=0,null!=x&&null!=y&&null!=width&&null!=height&&(this.x=x,this.y=y,this.width=width,this.height=height)}RectangleD.prototype.getX=function(){return this.x},RectangleD.prototype.setX=function(x){this.x=x},RectangleD.prototype.getY=function(){return this.y},RectangleD.prototype.setY=function(y){this.y=y},RectangleD.prototype.getWidth=function(){return this.width},RectangleD.prototype.setWidth=function(width){this.width=width},RectangleD.prototype.getHeight=function(){return this.height},RectangleD.prototype.setHeight=function(height){this.height=height},RectangleD.prototype.getRight=function(){return this.x+this.width},RectangleD.prototype.getBottom=function(){return this.y+this.height},RectangleD.prototype.intersects=function(a){return!(this.getRight()<a.x)&&(!(this.getBottom()<a.y)&&(!(a.getRight()<this.x)&&!(a.getBottom()<this.y)))},RectangleD.prototype.getCenterX=function(){return this.x+this.width/2},RectangleD.prototype.getMinX=function(){return this.getX()},RectangleD.prototype.getMaxX=function(){return this.getX()+this.width},RectangleD.prototype.getCenterY=function(){return this.y+this.height/2},RectangleD.prototype.getMinY=function(){return this.getY()},RectangleD.prototype.getMaxY=function(){return this.getY()+this.height},RectangleD.prototype.getWidthHalf=function(){return this.width/2},RectangleD.prototype.getHeightHalf=function(){return this.height/2},module2.exports=RectangleD},function(module2,exports2,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function UniqueIDGeneretor(){}UniqueIDGeneretor.lastID=0,UniqueIDGeneretor.createID=function(obj){return UniqueIDGeneretor.isPrimitive(obj)?obj:(null!=obj.uniqueID||(obj.uniqueID=UniqueIDGeneretor.getString(),UniqueIDGeneretor.lastID++),obj.uniqueID)},UniqueIDGeneretor.getString=function(id){return null==id&&(id=UniqueIDGeneretor.lastID),"Object#"+id},UniqueIDGeneretor.isPrimitive=function(arg){var type=void 0===arg?"undefined":_typeof(arg);return null==arg||"object"!=type&&"function"!=type},module2.exports=UniqueIDGeneretor},function(module2,exports2,__nested_webpack_require_1021259__){function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var LayoutConstants=__nested_webpack_require_1021259__(0),LGraphManager=__nested_webpack_require_1021259__(6),LNode=__nested_webpack_require_1021259__(3),LEdge=__nested_webpack_require_1021259__(1),LGraph=__nested_webpack_require_1021259__(5),PointD=__nested_webpack_require_1021259__(4),Transform=__nested_webpack_require_1021259__(17),Emitter=__nested_webpack_require_1021259__(27);function Layout2(isRemoteUse){Emitter.call(this),this.layoutQuality=LayoutConstants.QUALITY,this.createBendsAsNeeded=LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=LayoutConstants.DEFAULT_INCREMENTAL,this.animationOnLayout=LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=LayoutConstants.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new LGraphManager(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=isRemoteUse&&(this.isRemoteUse=isRemoteUse)}Layout2.RANDOM_SEED=1,Layout2.prototype=Object.create(Emitter.prototype),Layout2.prototype.getGraphManager=function(){return this.graphManager},Layout2.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},Layout2.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},Layout2.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},Layout2.prototype.newGraphManager=function(){var gm=new LGraphManager(this);return this.graphManager=gm,gm},Layout2.prototype.newGraph=function(vGraph){return new LGraph(null,this.graphManager,vGraph)},Layout2.prototype.newNode=function(vNode){return new LNode(this.graphManager,vNode)},Layout2.prototype.newEdge=function(vEdge){return new LEdge(null,null,vEdge)},Layout2.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},Layout2.prototype.runLayout=function(){var isLayoutSuccessfull;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),isLayoutSuccessfull=!this.checkLayoutSuccess()&&this.layout(),"during"!==LayoutConstants.ANIMATE&&(isLayoutSuccessfull&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,isLayoutSuccessfull)},Layout2.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},Layout2.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var allEdges=this.graphManager.getAllEdges(),i=0;i<allEdges.length;i++)allEdges[i];var nodes2=this.graphManager.getRoot().getNodes();for(i=0;i<nodes2.length;i++)nodes2[i];this.update(this.graphManager.getRoot())}},Layout2.prototype.update=function(obj){if(null==obj)this.update2();else if(obj instanceof LNode){var node=obj;if(null!=node.getChild())for(var nodes2=node.getChild().getNodes(),i=0;i<nodes2.length;i++)update(nodes2[i]);if(null!=node.vGraphObject)node.vGraphObject.update(node)}else if(obj instanceof LEdge){var edge=obj;if(null!=edge.vGraphObject)edge.vGraphObject.update(edge)}else if(obj instanceof LGraph){var graph=obj;if(null!=graph.vGraphObject)graph.vGraphObject.update(graph)}},Layout2.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=LayoutConstants.QUALITY,this.animationDuringLayout=LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=LayoutConstants.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=LayoutConstants.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},Layout2.prototype.transform=function(newLeftTop){if(null==newLeftTop)this.transform(new PointD(0,0));else{var trans=new Transform,leftTop=this.graphManager.getRoot().updateLeftTop();if(null!=leftTop){trans.setWorldOrgX(newLeftTop.x),trans.setWorldOrgY(newLeftTop.y),trans.setDeviceOrgX(leftTop.x),trans.setDeviceOrgY(leftTop.y);for(var nodes2=this.getAllNodes(),i=0;i<nodes2.length;i++)nodes2[i].transform(trans)}}},Layout2.prototype.positionNodesRandomly=function(graph){if(null==graph)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var lNode,childGraph,nodes2=graph.getNodes(),i=0;i<nodes2.length;i++)null==(childGraph=(lNode=nodes2[i]).getChild())||0==childGraph.getNodes().length?lNode.scatter():(this.positionNodesRandomly(childGraph),lNode.updateBounds())},Layout2.prototype.getFlatForest=function(){for(var flatForest=[],isForest=!0,allNodes=this.graphManager.getRoot().getNodes(),isFlat=!0,i=0;i<allNodes.length;i++)null!=allNodes[i].getChild()&&(isFlat=!1);if(!isFlat)return flatForest;var visited=new Set,toBeVisited=[],parents=new Map,unProcessedNodes=[];for(unProcessedNodes=unProcessedNodes.concat(allNodes);unProcessedNodes.length>0&&isForest;){for(toBeVisited.push(unProcessedNodes[0]);toBeVisited.length>0&&isForest;){var currentNode=toBeVisited[0];toBeVisited.splice(0,1),visited.add(currentNode);var neighborEdges=currentNode.getEdges();for(i=0;i<neighborEdges.length;i++){var currentNeighbor=neighborEdges[i].getOtherEnd(currentNode);if(parents.get(currentNode)!=currentNeighbor){if(visited.has(currentNeighbor)){isForest=!1;break}toBeVisited.push(currentNeighbor),parents.set(currentNeighbor,currentNode)}}}if(isForest){var temp=[].concat(_toConsumableArray(visited));flatForest.push(temp);for(i=0;i<temp.length;i++){var value=temp[i],index=unProcessedNodes.indexOf(value);index>-1&&unProcessedNodes.splice(index,1)}visited=new Set,parents=new Map}else flatForest=[]}return flatForest},Layout2.prototype.createDummyNodesForBendpoints=function(edge){for(var dummyNodes=[],prev=edge.source,graph=this.graphManager.calcLowestCommonAncestor(edge.source,edge.target),i=0;i<edge.bendpoints.length;i++){var dummyNode=this.newNode(null);dummyNode.setRect(new Point(0,0),new Dimension(1,1)),graph.add(dummyNode);var dummyEdge=this.newEdge(null);this.graphManager.add(dummyEdge,prev,dummyNode),dummyNodes.add(dummyNode),prev=dummyNode}dummyEdge=this.newEdge(null);return this.graphManager.add(dummyEdge,prev,edge.target),this.edgeToDummyNodes.set(edge,dummyNodes),edge.isInterGraph()?this.graphManager.remove(edge):graph.remove(edge),dummyNodes},Layout2.prototype.createBendpointsFromDummyNodes=function(){var edges=[];edges=edges.concat(this.graphManager.getAllEdges()),edges=[].concat(_toConsumableArray(this.edgeToDummyNodes.keys())).concat(edges);for(var k=0;k<edges.length;k++){var lEdge=edges[k];if(lEdge.bendpoints.length>0){for(var path=this.edgeToDummyNodes.get(lEdge),i=0;i<path.length;i++){var dummyNode=path[i],p=new PointD(dummyNode.getCenterX(),dummyNode.getCenterY()),ebp=lEdge.bendpoints.get(i);ebp.x=p.x,ebp.y=p.y,dummyNode.getOwner().remove(dummyNode)}this.graphManager.add(lEdge,lEdge.source,lEdge.target)}}},Layout2.transform=function(sliderValue,defaultValue,minDiv,maxMul){if(null!=minDiv&&null!=maxMul){var value=defaultValue;if(sliderValue<=50)value-=(defaultValue-defaultValue/minDiv)/50*(50-sliderValue);else value+=(defaultValue*maxMul-defaultValue)/50*(sliderValue-50);return value}var a,b;return sliderValue<=50?(a=9*defaultValue/500,b=defaultValue/10):(a=9*defaultValue/50,b=-8*defaultValue),a*sliderValue+b},Layout2.findCenterOfTree=function(nodes2){var list=[];list=list.concat(nodes2);var removedNodes=[],remainingDegrees=new Map,foundCenter=!1,centerNode=null;1!=list.length&&2!=list.length||(foundCenter=!0,centerNode=list[0]);for(var i=0;i<list.length;i++){var degree=(node=list[i]).getNeighborsList().size;remainingDegrees.set(node,node.getNeighborsList().size),1==degree&&removedNodes.push(node)}var tempList=[];for(tempList=tempList.concat(removedNodes);!foundCenter;){var tempList2=[];tempList2=tempList2.concat(tempList),tempList=[];for(i=0;i<list.length;i++){var node=list[i],index=list.indexOf(node);index>=0&&list.splice(index,1),node.getNeighborsList().forEach((function(neighbour){if(removedNodes.indexOf(neighbour)<0){var newDegree=remainingDegrees.get(neighbour)-1;1==newDegree&&tempList.push(neighbour),remainingDegrees.set(neighbour,newDegree)}}))}removedNodes=removedNodes.concat(tempList),1!=list.length&&2!=list.length||(foundCenter=!0,centerNode=list[0])}return centerNode},Layout2.prototype.setGraphManager=function(gm){this.graphManager=gm},module2.exports=Layout2},function(module2,exports2,__webpack_require__){function RandomSeed(){}RandomSeed.seed=1,RandomSeed.x=0,RandomSeed.nextDouble=function(){return RandomSeed.x=1e4*Math.sin(RandomSeed.seed++),RandomSeed.x-Math.floor(RandomSeed.x)},module2.exports=RandomSeed},function(module2,exports2,__nested_webpack_require_1038233__){var PointD=__nested_webpack_require_1038233__(4);function Transform(x,y){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}Transform.prototype.getWorldOrgX=function(){return this.lworldOrgX},Transform.prototype.setWorldOrgX=function(wox){this.lworldOrgX=wox},Transform.prototype.getWorldOrgY=function(){return this.lworldOrgY},Transform.prototype.setWorldOrgY=function(woy){this.lworldOrgY=woy},Transform.prototype.getWorldExtX=function(){return this.lworldExtX},Transform.prototype.setWorldExtX=function(wex){this.lworldExtX=wex},Transform.prototype.getWorldExtY=function(){return this.lworldExtY},Transform.prototype.setWorldExtY=function(wey){this.lworldExtY=wey},Transform.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},Transform.prototype.setDeviceOrgX=function(dox){this.ldeviceOrgX=dox},Transform.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},Transform.prototype.setDeviceOrgY=function(doy){this.ldeviceOrgY=doy},Transform.prototype.getDeviceExtX=function(){return this.ldeviceExtX},Transform.prototype.setDeviceExtX=function(dex){this.ldeviceExtX=dex},Transform.prototype.getDeviceExtY=function(){return this.ldeviceExtY},Transform.prototype.setDeviceExtY=function(dey){this.ldeviceExtY=dey},Transform.prototype.transformX=function(x){var xDevice=0,worldExtX=this.lworldExtX;return 0!=worldExtX&&(xDevice=this.ldeviceOrgX+(x-this.lworldOrgX)*this.ldeviceExtX/worldExtX),xDevice},Transform.prototype.transformY=function(y){var yDevice=0,worldExtY=this.lworldExtY;return 0!=worldExtY&&(yDevice=this.ldeviceOrgY+(y-this.lworldOrgY)*this.ldeviceExtY/worldExtY),yDevice},Transform.prototype.inverseTransformX=function(x){var xWorld=0,deviceExtX=this.ldeviceExtX;return 0!=deviceExtX&&(xWorld=this.lworldOrgX+(x-this.ldeviceOrgX)*this.lworldExtX/deviceExtX),xWorld},Transform.prototype.inverseTransformY=function(y){var yWorld=0,deviceExtY=this.ldeviceExtY;return 0!=deviceExtY&&(yWorld=this.lworldOrgY+(y-this.ldeviceOrgY)*this.lworldExtY/deviceExtY),yWorld},Transform.prototype.inverseTransformPoint=function(inPoint){return new PointD(this.inverseTransformX(inPoint.x),this.inverseTransformY(inPoint.y))},module2.exports=Transform},function(module2,exports2,__nested_webpack_require_1042188__){var Layout2=__nested_webpack_require_1042188__(15),FDLayoutConstants=__nested_webpack_require_1042188__(7),LayoutConstants=__nested_webpack_require_1042188__(0),IGeometry=__nested_webpack_require_1042188__(8),IMath=__nested_webpack_require_1042188__(9);function FDLayout(){Layout2.call(this),this.useSmartIdealEdgeLengthCalculation=FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=FDLayoutConstants.DEFAULT_EDGE_LENGTH,this.springConstant=FDLayoutConstants.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*FDLayoutConstants.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=FDLayoutConstants.MAX_ITERATIONS}for(var prop in FDLayout.prototype=Object.create(Layout2.prototype),Layout2)FDLayout[prop]=Layout2[prop];FDLayout.prototype.initParameters=function(){Layout2.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},FDLayout.prototype.calcIdealEdgeLengths=function(){for(var edge,lcaDepth,source,target,sizeOfSourceInLca,sizeOfTargetInLca,allEdges=this.getGraphManager().getAllEdges(),i=0;i<allEdges.length;i++)(edge=allEdges[i]).idealLength=this.idealEdgeLength,edge.isInterGraph&&(source=edge.getSource(),target=edge.getTarget(),sizeOfSourceInLca=edge.getSourceInLca().getEstimatedSize(),sizeOfTargetInLca=edge.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(edge.idealLength+=sizeOfSourceInLca+sizeOfTargetInLca-2*LayoutConstants.SIMPLE_NODE_SIZE),lcaDepth=edge.getLca().getInclusionTreeDepth(),edge.idealLength+=FDLayoutConstants.DEFAULT_EDGE_LENGTH*FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(source.getInclusionTreeDepth()+target.getInclusionTreeDepth()-2*lcaDepth))},FDLayout.prototype.initSpringEmbedder=function(){var s=this.getAllNodes().length;this.incremental?(s>FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*FDLayoutConstants.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(s-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)/(FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-FDLayoutConstants.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL):(s>FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(FDLayoutConstants.COOLING_ADAPTATION_FACTOR,1-(s-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)/(FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT-FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT)*(1-FDLayoutConstants.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=FDLayoutConstants.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},FDLayout.prototype.calcSpringForces=function(){for(var edge,lEdges=this.getAllEdges(),i=0;i<lEdges.length;i++)edge=lEdges[i],this.calcSpringForce(edge,edge.idealLength)},FDLayout.prototype.calcRepulsionForces=function(){var i,j,nodeA,nodeB,processedNodeSet,gridUpdateAllowed=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],forceToNodeSurroundingUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1],lNodes=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD==1&&gridUpdateAllowed&&this.updateGrid(),processedNodeSet=new Set,i=0;i<lNodes.length;i++)nodeA=lNodes[i],this.calculateRepulsionForceOfANode(nodeA,processedNodeSet,gridUpdateAllowed,forceToNodeSurroundingUpdate),processedNodeSet.add(nodeA);else for(i=0;i<lNodes.length;i++)for(nodeA=lNodes[i],j=i+1;j<lNodes.length;j++)nodeB=lNodes[j],nodeA.getOwner()==nodeB.getOwner()&&this.calcRepulsionForce(nodeA,nodeB)},FDLayout.prototype.calcGravitationalForces=function(){for(var node,lNodes=this.getAllNodesToApplyGravitation(),i=0;i<lNodes.length;i++)node=lNodes[i],this.calcGravitationalForce(node)},FDLayout.prototype.moveNodes=function(){for(var lNodes=this.getAllNodes(),i=0;i<lNodes.length;i++)lNodes[i].move()},FDLayout.prototype.calcSpringForce=function(edge,idealLength){var length,springForce,springForceX,springForceY,sourceNode=edge.getSource(),targetNode=edge.getTarget();if(this.uniformLeafNodeSizes&&null==sourceNode.getChild()&&null==targetNode.getChild())edge.updateLengthSimple();else if(edge.updateLength(),edge.isOverlapingSourceAndTarget)return;0!=(length=edge.getLength())&&(springForceX=(springForce=this.springConstant*(length-idealLength))*(edge.lengthX/length),springForceY=springForce*(edge.lengthY/length),sourceNode.springForceX+=springForceX,sourceNode.springForceY+=springForceY,targetNode.springForceX-=springForceX,targetNode.springForceY-=springForceY)},FDLayout.prototype.calcRepulsionForce=function(nodeA,nodeB){var distanceX,distanceY,distanceSquared,distance,repulsionForce,repulsionForceX,repulsionForceY,rectA=nodeA.getRect(),rectB=nodeB.getRect(),overlapAmount=new Array(2),clipPoints=new Array(4);if(rectA.intersects(rectB)){IGeometry.calcSeparationAmount(rectA,rectB,overlapAmount,FDLayoutConstants.DEFAULT_EDGE_LENGTH/2),repulsionForceX=2*overlapAmount[0],repulsionForceY=2*overlapAmount[1];var childrenConstant=nodeA.noOfChildren*nodeB.noOfChildren/(nodeA.noOfChildren+nodeB.noOfChildren);nodeA.repulsionForceX-=childrenConstant*repulsionForceX,nodeA.repulsionForceY-=childrenConstant*repulsionForceY,nodeB.repulsionForceX+=childrenConstant*repulsionForceX,nodeB.repulsionForceY+=childrenConstant*repulsionForceY}else this.uniformLeafNodeSizes&&null==nodeA.getChild()&&null==nodeB.getChild()?(distanceX=rectB.getCenterX()-rectA.getCenterX(),distanceY=rectB.getCenterY()-rectA.getCenterY()):(IGeometry.getIntersection(rectA,rectB,clipPoints),distanceX=clipPoints[2]-clipPoints[0],distanceY=clipPoints[3]-clipPoints[1]),Math.abs(distanceX)<FDLayoutConstants.MIN_REPULSION_DIST&&(distanceX=IMath.sign(distanceX)*FDLayoutConstants.MIN_REPULSION_DIST),Math.abs(distanceY)<FDLayoutConstants.MIN_REPULSION_DIST&&(distanceY=IMath.sign(distanceY)*FDLayoutConstants.MIN_REPULSION_DIST),distanceSquared=distanceX*distanceX+distanceY*distanceY,distance=Math.sqrt(distanceSquared),repulsionForceX=(repulsionForce=this.repulsionConstant*nodeA.noOfChildren*nodeB.noOfChildren/distanceSquared)*distanceX/distance,repulsionForceY=repulsionForce*distanceY/distance,nodeA.repulsionForceX-=repulsionForceX,nodeA.repulsionForceY-=repulsionForceY,nodeB.repulsionForceX+=repulsionForceX,nodeB.repulsionForceY+=repulsionForceY},FDLayout.prototype.calcGravitationalForce=function(node){var ownerGraph,ownerCenterX,ownerCenterY,distanceX,distanceY,absDistanceX,absDistanceY,estimatedSize;ownerCenterX=((ownerGraph=node.getOwner()).getRight()+ownerGraph.getLeft())/2,ownerCenterY=(ownerGraph.getTop()+ownerGraph.getBottom())/2,distanceX=node.getCenterX()-ownerCenterX,distanceY=node.getCenterY()-ownerCenterY,absDistanceX=Math.abs(distanceX)+node.getWidth()/2,absDistanceY=Math.abs(distanceY)+node.getHeight()/2,node.getOwner()==this.graphManager.getRoot()?(absDistanceX>(estimatedSize=ownerGraph.getEstimatedSize()*this.gravityRangeFactor)||absDistanceY>estimatedSize)&&(node.gravitationForceX=-this.gravityConstant*distanceX,node.gravitationForceY=-this.gravityConstant*distanceY):(absDistanceX>(estimatedSize=ownerGraph.getEstimatedSize()*this.compoundGravityRangeFactor)||absDistanceY>estimatedSize)&&(node.gravitationForceX=-this.gravityConstant*distanceX*this.compoundGravityConstant,node.gravitationForceY=-this.gravityConstant*distanceY*this.compoundGravityConstant)},FDLayout.prototype.isConverged=function(){var converged,oscilating=!1;return this.totalIterations>this.maxIterations/3&&(oscilating=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),converged=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,converged||oscilating},FDLayout.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},FDLayout.prototype.calcNoOfChildrenForAllNodes=function(){for(var node,allNodes=this.graphManager.getAllNodes(),i=0;i<allNodes.length;i++)(node=allNodes[i]).noOfChildren=node.getNoOfChildren()},FDLayout.prototype.calcGrid=function(graph){var sizeX,sizeY;sizeX=parseInt(Math.ceil((graph.getRight()-graph.getLeft())/this.repulsionRange)),sizeY=parseInt(Math.ceil((graph.getBottom()-graph.getTop())/this.repulsionRange));for(var grid=new Array(sizeX),i=0;i<sizeX;i++)grid[i]=new Array(sizeY);for(i=0;i<sizeX;i++)for(var j=0;j<sizeY;j++)grid[i][j]=new Array;return grid},FDLayout.prototype.addNodeToGrid=function(v,left,top){var startX,finishX,startY,finishY;startX=parseInt(Math.floor((v.getRect().x-left)/this.repulsionRange)),finishX=parseInt(Math.floor((v.getRect().width+v.getRect().x-left)/this.repulsionRange)),startY=parseInt(Math.floor((v.getRect().y-top)/this.repulsionRange)),finishY=parseInt(Math.floor((v.getRect().height+v.getRect().y-top)/this.repulsionRange));for(var i=startX;i<=finishX;i++)for(var j=startY;j<=finishY;j++)this.grid[i][j].push(v),v.setGridCoordinates(startX,finishX,startY,finishY)},FDLayout.prototype.updateGrid=function(){var i,nodeA,lNodes=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),i=0;i<lNodes.length;i++)nodeA=lNodes[i],this.addNodeToGrid(nodeA,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},FDLayout.prototype.calculateRepulsionForceOfANode=function(nodeA,processedNodeSet,gridUpdateAllowed,forceToNodeSurroundingUpdate){if(this.totalIterations%FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD==1&&gridUpdateAllowed||forceToNodeSurroundingUpdate){var nodeB,surrounding=new Set;nodeA.surrounding=new Array;for(var grid=this.grid,i=nodeA.startX-1;i<nodeA.finishX+2;i++)for(var j=nodeA.startY-1;j<nodeA.finishY+2;j++)if(!(i<0||j<0||i>=grid.length||j>=grid[0].length))for(var k=0;k<grid[i][j].length;k++)if(nodeB=grid[i][j][k],nodeA.getOwner()==nodeB.getOwner()&&nodeA!=nodeB&&!processedNodeSet.has(nodeB)&&!surrounding.has(nodeB)){var distanceX=Math.abs(nodeA.getCenterX()-nodeB.getCenterX())-(nodeA.getWidth()/2+nodeB.getWidth()/2),distanceY=Math.abs(nodeA.getCenterY()-nodeB.getCenterY())-(nodeA.getHeight()/2+nodeB.getHeight()/2);distanceX<=this.repulsionRange&&distanceY<=this.repulsionRange&&surrounding.add(nodeB)}nodeA.surrounding=[].concat(function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(surrounding))}for(i=0;i<nodeA.surrounding.length;i++)this.calcRepulsionForce(nodeA,nodeA.surrounding[i])},FDLayout.prototype.calcRepulsionRange=function(){return 0},module2.exports=FDLayout},function(module2,exports2,__nested_webpack_require_1060933__){var LEdge=__nested_webpack_require_1060933__(1),FDLayoutConstants=__nested_webpack_require_1060933__(7);function FDLayoutEdge(source,target,vEdge){LEdge.call(this,source,target,vEdge),this.idealLength=FDLayoutConstants.DEFAULT_EDGE_LENGTH}for(var prop in FDLayoutEdge.prototype=Object.create(LEdge.prototype),LEdge)FDLayoutEdge[prop]=LEdge[prop];module2.exports=FDLayoutEdge},function(module2,exports2,__nested_webpack_require_1061563__){var LNode=__nested_webpack_require_1061563__(3);function FDLayoutNode(gm,loc,size,vNode){LNode.call(this,gm,loc,size,vNode),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var prop in FDLayoutNode.prototype=Object.create(LNode.prototype),LNode)FDLayoutNode[prop]=LNode[prop];FDLayoutNode.prototype.setGridCoordinates=function(_startX,_finishX,_startY,_finishY){this.startX=_startX,this.finishX=_finishX,this.startY=_startY,this.finishY=_finishY},module2.exports=FDLayoutNode},function(module2,exports2,__webpack_require__){function DimensionD2(width,height){this.width=0,this.height=0,null!==width&&null!==height&&(this.height=height,this.width=width)}DimensionD2.prototype.getWidth=function(){return this.width},DimensionD2.prototype.setWidth=function(width){this.width=width},DimensionD2.prototype.getHeight=function(){return this.height},DimensionD2.prototype.setHeight=function(height){this.height=height},module2.exports=DimensionD2},function(module2,exports2,__nested_webpack_require_1063672__){var UniqueIDGeneretor=__nested_webpack_require_1063672__(14);function HashMap(){this.map={},this.keys=[]}HashMap.prototype.put=function(key,value){var theId=UniqueIDGeneretor.createID(key);this.contains(theId)||(this.map[theId]=value,this.keys.push(key))},HashMap.prototype.contains=function(key){return UniqueIDGeneretor.createID(key),null!=this.map[key]},HashMap.prototype.get=function(key){var theId=UniqueIDGeneretor.createID(key);return this.map[theId]},HashMap.prototype.keySet=function(){return this.keys},module2.exports=HashMap},function(module2,exports2,__nested_webpack_require_1064683__){var UniqueIDGeneretor=__nested_webpack_require_1064683__(14);function HashSet(){this.set={}}HashSet.prototype.add=function(obj){var theId=UniqueIDGeneretor.createID(obj);this.contains(theId)||(this.set[theId]=obj)},HashSet.prototype.remove=function(obj){delete this.set[UniqueIDGeneretor.createID(obj)]},HashSet.prototype.clear=function(){this.set={}},HashSet.prototype.contains=function(obj){return this.set[UniqueIDGeneretor.createID(obj)]==obj},HashSet.prototype.isEmpty=function(){return 0===this.size()},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAllTo=function(list){for(var keys=Object.keys(this.set),length=keys.length,i=0;i<length;i++)list.push(this.set[keys[i]])},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAll=function(list){for(var s=list.length,i=0;i<s;i++){var v=list[i];this.add(v)}},module2.exports=HashSet},function(module2,exports2,__nested_webpack_require_1066386__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var LinkedList=__nested_webpack_require_1066386__(11),Quicksort=function(){function Quicksort2(A,compareFunction){!function _classCallCheck(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Quicksort2),null===compareFunction&&void 0===compareFunction||(this.compareFunction=this._defaultCompareFunction);var length=void 0;length=A instanceof LinkedList?A.size():A.length,this._quicksort(A,0,length-1)}return _createClass(Quicksort2,[{key:"_quicksort",value:function _quicksort(A,p,r){if(p<r){var q=this._partition(A,p,r);this._quicksort(A,p,q),this._quicksort(A,q+1,r)}}},{key:"_partition",value:function _partition(A,p,r){for(var x=this._get(A,p),i=p,j=r;;){for(;this.compareFunction(x,this._get(A,j));)j--;for(;this.compareFunction(this._get(A,i),x);)i++;if(!(i<j))return j;this._swap(A,i,j),i++,j--}}},{key:"_get",value:function _get(object,index){return object instanceof LinkedList?object.get_object_at(index):object[index]}},{key:"_set",value:function _set(object,index,value){object instanceof LinkedList?object.set_object_at(index,value):object[index]=value}},{key:"_swap",value:function _swap(A,i,j){var temp=this._get(A,i);this._set(A,i,this._get(A,j)),this._set(A,j,temp)}},{key:"_defaultCompareFunction",value:function _defaultCompareFunction(a,b){return b>a}}]),Quicksort2}();module2.exports=Quicksort},function(module2,exports2,__webpack_require__){var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var NeedlemanWunsch=function(){function NeedlemanWunsch2(sequence1,sequence2){var match_score=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,mismatch_penalty=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,gap_penalty=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;_classCallCheck(this,NeedlemanWunsch2),this.sequence1=sequence1,this.sequence2=sequence2,this.match_score=match_score,this.mismatch_penalty=mismatch_penalty,this.gap_penalty=gap_penalty,this.iMax=sequence1.length+1,this.jMax=sequence2.length+1,this.grid=new Array(this.iMax);for(var i=0;i<this.iMax;i++){this.grid[i]=new Array(this.jMax);for(var j=0;j<this.jMax;j++)this.grid[i][j]=0}this.tracebackGrid=new Array(this.iMax);for(var _i=0;_i<this.iMax;_i++){this.tracebackGrid[_i]=new Array(this.jMax);for(var _j=0;_j<this.jMax;_j++)this.tracebackGrid[_i][_j]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return _createClass(NeedlemanWunsch2,[{key:"getScore",value:function getScore(){return this.score}},{key:"getAlignments",value:function getAlignments(){return this.alignments}},{key:"computeGrids",value:function computeGrids(){for(var j=1;j<this.jMax;j++)this.grid[0][j]=this.grid[0][j-1]+this.gap_penalty,this.tracebackGrid[0][j]=[!1,!1,!0];for(var i=1;i<this.iMax;i++)this.grid[i][0]=this.grid[i-1][0]+this.gap_penalty,this.tracebackGrid[i][0]=[!1,!0,!1];for(var _i2=1;_i2<this.iMax;_i2++)for(var _j2=1;_j2<this.jMax;_j2++){var maxOf=[this.sequence1[_i2-1]===this.sequence2[_j2-1]?this.grid[_i2-1][_j2-1]+this.match_score:this.grid[_i2-1][_j2-1]+this.mismatch_penalty,this.grid[_i2-1][_j2]+this.gap_penalty,this.grid[_i2][_j2-1]+this.gap_penalty],indices=this.arrayAllMaxIndexes(maxOf);this.grid[_i2][_j2]=maxOf[indices[0]],this.tracebackGrid[_i2][_j2]=[indices.includes(0),indices.includes(1),indices.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function alignmentTraceback(){var inProcessAlignments=[];for(inProcessAlignments.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});inProcessAlignments[0];){var current=inProcessAlignments[0],directions=this.tracebackGrid[current.pos[0]][current.pos[1]];directions[0]&&inProcessAlignments.push({pos:[current.pos[0]-1,current.pos[1]-1],seq1:this.sequence1[current.pos[0]-1]+current.seq1,seq2:this.sequence2[current.pos[1]-1]+current.seq2}),directions[1]&&inProcessAlignments.push({pos:[current.pos[0]-1,current.pos[1]],seq1:this.sequence1[current.pos[0]-1]+current.seq1,seq2:"-"+current.seq2}),directions[2]&&inProcessAlignments.push({pos:[current.pos[0],current.pos[1]-1],seq1:"-"+current.seq1,seq2:this.sequence2[current.pos[1]-1]+current.seq2}),0===current.pos[0]&&0===current.pos[1]&&this.alignments.push({sequence1:current.seq1,sequence2:current.seq2}),inProcessAlignments.shift()}return this.alignments}},{key:"getAllIndexes",value:function getAllIndexes(arr,val){for(var indexes=[],i=-1;-1!==(i=arr.indexOf(val,i+1));)indexes.push(i);return indexes}},{key:"arrayAllMaxIndexes",value:function arrayAllMaxIndexes(array){return this.getAllIndexes(array,Math.max.apply(null,array))}}]),NeedlemanWunsch2}();module2.exports=NeedlemanWunsch},function(module2,exports2,__nested_webpack_require_1077890__){var layoutBase2=function layoutBase3(){};layoutBase2.FDLayout=__nested_webpack_require_1077890__(18),layoutBase2.FDLayoutConstants=__nested_webpack_require_1077890__(7),layoutBase2.FDLayoutEdge=__nested_webpack_require_1077890__(19),layoutBase2.FDLayoutNode=__nested_webpack_require_1077890__(20),layoutBase2.DimensionD=__nested_webpack_require_1077890__(21),layoutBase2.HashMap=__nested_webpack_require_1077890__(22),layoutBase2.HashSet=__nested_webpack_require_1077890__(23),layoutBase2.IGeometry=__nested_webpack_require_1077890__(8),layoutBase2.IMath=__nested_webpack_require_1077890__(9),layoutBase2.Integer=__nested_webpack_require_1077890__(10),layoutBase2.Point=__nested_webpack_require_1077890__(12),layoutBase2.PointD=__nested_webpack_require_1077890__(4),layoutBase2.RandomSeed=__nested_webpack_require_1077890__(16),layoutBase2.RectangleD=__nested_webpack_require_1077890__(13),layoutBase2.Transform=__nested_webpack_require_1077890__(17),layoutBase2.UniqueIDGeneretor=__nested_webpack_require_1077890__(14),layoutBase2.Quicksort=__nested_webpack_require_1077890__(24),layoutBase2.LinkedList=__nested_webpack_require_1077890__(11),layoutBase2.LGraphObject=__nested_webpack_require_1077890__(2),layoutBase2.LGraph=__nested_webpack_require_1077890__(5),layoutBase2.LEdge=__nested_webpack_require_1077890__(1),layoutBase2.LGraphManager=__nested_webpack_require_1077890__(6),layoutBase2.LNode=__nested_webpack_require_1077890__(3),layoutBase2.Layout=__nested_webpack_require_1077890__(15),layoutBase2.LayoutConstants=__nested_webpack_require_1077890__(0),layoutBase2.NeedlemanWunsch=__nested_webpack_require_1077890__(25),module2.exports=layoutBase2},function(module2,exports2,__webpack_require__){function Emitter(){this.listeners=[]}var p=Emitter.prototype;p.addListener=function(event,callback){this.listeners.push({event:event,callback:callback})},p.removeListener=function(event,callback){for(var i=this.listeners.length;i>=0;i--){var l=this.listeners[i];l.event===event&&l.callback===callback&&this.listeners.splice(i,1)}},p.emit=function(event,data){for(var i=0;i<this.listeners.length;i++){var l=this.listeners[i];event===l.event&&l.callback(data)}},module2.exports=Emitter}])}))}(layoutBase)),layoutBase.exports}!function(module,exports){!function webpackUniversalModuleDefinition(root,factory){module.exports=factory(function requireCoseBase(){return hasRequiredCoseBase||(hasRequiredCoseBase=1,function(module,exports){!function webpackUniversalModuleDefinition(root,factory){module.exports=factory(requireLayoutBase())}(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.O,(function(__WEBPACK_EXTERNAL_MODULE_0__){return function(modules){var installedModules={};function __nested_webpack_require_1081253__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module2.exports,module2,module2.exports,__nested_webpack_require_1081253__),module2.l=!0,module2.exports}return __nested_webpack_require_1081253__.m=modules,__nested_webpack_require_1081253__.c=installedModules,__nested_webpack_require_1081253__.i=function(value){return value},__nested_webpack_require_1081253__.d=function(exports2,name,getter){__nested_webpack_require_1081253__.o(exports2,name)||Object.defineProperty(exports2,name,{configurable:!1,enumerable:!0,get:getter})},__nested_webpack_require_1081253__.n=function(module2){var getter=module2&&module2.__esModule?function getDefault(){return module2.default}:function getModuleExports(){return module2};return __nested_webpack_require_1081253__.d(getter,"a",getter),getter},__nested_webpack_require_1081253__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__nested_webpack_require_1081253__.p="",__nested_webpack_require_1081253__(__nested_webpack_require_1081253__.s=7)}([function(module2,exports2){module2.exports=__WEBPACK_EXTERNAL_MODULE_0__},function(module2,exports2,__nested_webpack_require_1083404__){var FDLayoutConstants=__nested_webpack_require_1083404__(0).FDLayoutConstants;function CoSEConstants(){}for(var prop in FDLayoutConstants)CoSEConstants[prop]=FDLayoutConstants[prop];CoSEConstants.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,CoSEConstants.DEFAULT_RADIAL_SEPARATION=FDLayoutConstants.DEFAULT_EDGE_LENGTH,CoSEConstants.DEFAULT_COMPONENT_SEPERATION=60,CoSEConstants.TILE=!0,CoSEConstants.TILING_PADDING_VERTICAL=10,CoSEConstants.TILING_PADDING_HORIZONTAL=10,CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL=!1,module2.exports=CoSEConstants},function(module2,exports2,__nested_webpack_require_1084252__){var FDLayoutEdge=__nested_webpack_require_1084252__(0).FDLayoutEdge;function CoSEEdge(source,target,vEdge){FDLayoutEdge.call(this,source,target,vEdge)}for(var prop in CoSEEdge.prototype=Object.create(FDLayoutEdge.prototype),FDLayoutEdge)CoSEEdge[prop]=FDLayoutEdge[prop];module2.exports=CoSEEdge},function(module2,exports2,__nested_webpack_require_1084781__){var LGraph=__nested_webpack_require_1084781__(0).LGraph;function CoSEGraph(parent,graphMgr,vGraph){LGraph.call(this,parent,graphMgr,vGraph)}for(var prop in CoSEGraph.prototype=Object.create(LGraph.prototype),LGraph)CoSEGraph[prop]=LGraph[prop];module2.exports=CoSEGraph},function(module2,exports2,__nested_webpack_require_1085284__){var LGraphManager=__nested_webpack_require_1085284__(0).LGraphManager;function CoSEGraphManager(layout){LGraphManager.call(this,layout)}for(var prop in CoSEGraphManager.prototype=Object.create(LGraphManager.prototype),LGraphManager)CoSEGraphManager[prop]=LGraphManager[prop];module2.exports=CoSEGraphManager},function(module2,exports2,__nested_webpack_require_1085821__){var FDLayoutNode=__nested_webpack_require_1085821__(0).FDLayoutNode,IMath=__nested_webpack_require_1085821__(0).IMath;function CoSENode(gm,loc,size,vNode){FDLayoutNode.call(this,gm,loc,size,vNode)}for(var prop in CoSENode.prototype=Object.create(FDLayoutNode.prototype),FDLayoutNode)CoSENode[prop]=FDLayoutNode[prop];CoSENode.prototype.move=function(){var layout=this.graphManager.getLayout();this.displacementX=layout.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=layout.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>layout.coolingFactor*layout.maxNodeDisplacement&&(this.displacementX=layout.coolingFactor*layout.maxNodeDisplacement*IMath.sign(this.displacementX)),Math.abs(this.displacementY)>layout.coolingFactor*layout.maxNodeDisplacement&&(this.displacementY=layout.coolingFactor*layout.maxNodeDisplacement*IMath.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),layout.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},CoSENode.prototype.propogateDisplacementToChildren=function(dX,dY){for(var node,nodes2=this.getChild().getNodes(),i=0;i<nodes2.length;i++)null==(node=nodes2[i]).getChild()?(node.moveBy(dX,dY),node.displacementX+=dX,node.displacementY+=dY):node.propogateDisplacementToChildren(dX,dY)},CoSENode.prototype.setPred1=function(pred12){this.pred1=pred12},CoSENode.prototype.getPred1=function(){return pred1},CoSENode.prototype.getPred2=function(){return pred2},CoSENode.prototype.setNext=function(next2){this.next=next2},CoSENode.prototype.getNext=function(){return next},CoSENode.prototype.setProcessed=function(processed2){this.processed=processed2},CoSENode.prototype.isProcessed=function(){return processed},module2.exports=CoSENode},function(module2,exports2,__nested_webpack_require_1089395__){var FDLayout=__nested_webpack_require_1089395__(0).FDLayout,CoSEGraphManager=__nested_webpack_require_1089395__(4),CoSEGraph=__nested_webpack_require_1089395__(3),CoSENode=__nested_webpack_require_1089395__(5),CoSEEdge=__nested_webpack_require_1089395__(2),CoSEConstants=__nested_webpack_require_1089395__(1),FDLayoutConstants=__nested_webpack_require_1089395__(0).FDLayoutConstants,LayoutConstants=__nested_webpack_require_1089395__(0).LayoutConstants,Point2=__nested_webpack_require_1089395__(0).Point,PointD=__nested_webpack_require_1089395__(0).PointD,Layout2=__nested_webpack_require_1089395__(0).Layout,Integer=__nested_webpack_require_1089395__(0).Integer,IGeometry=__nested_webpack_require_1089395__(0).IGeometry,LGraph=__nested_webpack_require_1089395__(0).LGraph,Transform=__nested_webpack_require_1089395__(0).Transform;function CoSELayout(){FDLayout.call(this),this.toBeTiled={}}for(var prop in CoSELayout.prototype=Object.create(FDLayout.prototype),FDLayout)CoSELayout[prop]=FDLayout[prop];CoSELayout.prototype.newGraphManager=function(){var gm=new CoSEGraphManager(this);return this.graphManager=gm,gm},CoSELayout.prototype.newGraph=function(vGraph){return new CoSEGraph(null,this.graphManager,vGraph)},CoSELayout.prototype.newNode=function(vNode){return new CoSENode(this.graphManager,vNode)},CoSELayout.prototype.newEdge=function(vEdge){return new CoSEEdge(null,null,vEdge)},CoSELayout.prototype.initParameters=function(){FDLayout.prototype.initParameters.call(this,arguments),this.isSubLayout||(CoSEConstants.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=CoSEConstants.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=CoSEConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=FDLayoutConstants.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/FDLayoutConstants.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=FDLayoutConstants.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},CoSELayout.prototype.layout=function(){return LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},CoSELayout.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),allNodes=new Set(this.getAllNodes()),intersection=this.nodesWithGravity.filter((function(x){return allNodes.has(x)})),this.graphManager.setAllNodesToApplyGravitation(intersection));else{var forest=this.getFlatForest();if(forest.length>0)this.positionNodesRadially(forest);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var allNodes=new Set(this.getAllNodes()),intersection=this.nodesWithGravity.filter((function(x){return allNodes.has(x)}));this.graphManager.setAllNodesToApplyGravitation(intersection),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},CoSELayout.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%FDLayoutConstants.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var allNodes=new Set(this.getAllNodes()),intersection=this.nodesWithGravity.filter((function(x){return allNodes.has(x)}));this.graphManager.setAllNodesToApplyGravitation(intersection),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var gridUpdateAllowed=!this.isTreeGrowing&&!this.isGrowthFinished,forceToNodeSurroundingUpdate=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(gridUpdateAllowed,forceToNodeSurroundingUpdate),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},CoSELayout.prototype.getPositionsData=function(){for(var allNodes=this.graphManager.getAllNodes(),pData={},i=0;i<allNodes.length;i++){var rect=allNodes[i].rect,id=allNodes[i].id;pData[id]={id:id,x:rect.getCenterX(),y:rect.getCenterY(),w:rect.width,h:rect.height}}return pData},CoSELayout.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var layoutEnded=!1;if("during"===FDLayoutConstants.ANIMATE)this.emit("layoutstarted");else{for(;!layoutEnded;)layoutEnded=this.tick();this.graphManager.updateBounds()}},CoSELayout.prototype.calculateNodesToApplyGravitationTo=function(){var graph,i,nodeList=[],graphs=this.graphManager.getGraphs(),size=graphs.length;for(i=0;i<size;i++)(graph=graphs[i]).updateConnected(),graph.isConnected||(nodeList=nodeList.concat(graph.getNodes()));return nodeList},CoSELayout.prototype.createBendpoints=function(){var edges=[];edges=edges.concat(this.graphManager.getAllEdges());var i,visited=new Set;for(i=0;i<edges.length;i++){var edge=edges[i];if(!visited.has(edge)){var source=edge.getSource(),target=edge.getTarget();if(source==target)edge.getBendpoints().push(new PointD),edge.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(edge),visited.add(edge);else{var edgeList=[];if(edgeList=(edgeList=edgeList.concat(source.getEdgeListToNode(target))).concat(target.getEdgeListToNode(source)),!visited.has(edgeList[0])){var k;if(edgeList.length>1)for(k=0;k<edgeList.length;k++){var multiEdge=edgeList[k];multiEdge.getBendpoints().push(new PointD),this.createDummyNodesForBendpoints(multiEdge)}edgeList.forEach((function(edge2){visited.add(edge2)}))}}}if(visited.size==edges.length)break}},CoSELayout.prototype.positionNodesRadially=function(forest){for(var currentStartingPoint=new Point2(0,0),numberOfColumns=Math.ceil(Math.sqrt(forest.length)),height=0,currentY=0,currentX=0,point=new PointD(0,0),i=0;i<forest.length;i++){i%numberOfColumns==0&&(currentX=0,currentY=height,0!=i&&(currentY+=CoSEConstants.DEFAULT_COMPONENT_SEPERATION),height=0);var tree=forest[i],centerNode=Layout2.findCenterOfTree(tree);currentStartingPoint.x=currentX,currentStartingPoint.y=currentY,(point=CoSELayout.radialLayout(tree,centerNode,currentStartingPoint)).y>height&&(height=Math.floor(point.y)),currentX=Math.floor(point.x+CoSEConstants.DEFAULT_COMPONENT_SEPERATION)}this.transform(new PointD(LayoutConstants.WORLD_CENTER_X-point.x/2,LayoutConstants.WORLD_CENTER_Y-point.y/2))},CoSELayout.radialLayout=function(tree,centerNode,startingPoint){var radialSep=Math.max(this.maxDiagonalInTree(tree),CoSEConstants.DEFAULT_RADIAL_SEPARATION);CoSELayout.branchRadialLayout(centerNode,null,0,359,0,radialSep);var bounds=LGraph.calculateBounds(tree),transform=new Transform;transform.setDeviceOrgX(bounds.getMinX()),transform.setDeviceOrgY(bounds.getMinY()),transform.setWorldOrgX(startingPoint.x),transform.setWorldOrgY(startingPoint.y);for(var i=0;i<tree.length;i++)tree[i].transform(transform);var bottomRight=new PointD(bounds.getMaxX(),bounds.getMaxY());return transform.inverseTransformPoint(bottomRight)},CoSELayout.branchRadialLayout=function(node,parentOfNode,startAngle,endAngle,distance,radialSeparation){var halfInterval=(endAngle-startAngle+1)/2;halfInterval<0&&(halfInterval+=180);var teta=(halfInterval+startAngle)%360*IGeometry.TWO_PI/360,x_=distance*Math.cos(teta),y_=distance*Math.sin(teta);node.setCenter(x_,y_);var neighborEdges=[],childCount=(neighborEdges=neighborEdges.concat(node.getEdges())).length;null!=parentOfNode&&childCount--;for(var startIndex,branchCount=0,incEdgesCount=neighborEdges.length,edges=node.getEdgesBetween(parentOfNode);edges.length>1;){var temp=edges[0];edges.splice(0,1);var index=neighborEdges.indexOf(temp);index>=0&&neighborEdges.splice(index,1),incEdgesCount--,childCount--}startIndex=null!=parentOfNode?(neighborEdges.indexOf(edges[0])+1)%incEdgesCount:0;for(var stepAngle=Math.abs(endAngle-startAngle)/childCount,i=startIndex;branchCount!=childCount;i=++i%incEdgesCount){var currentNeighbor=neighborEdges[i].getOtherEnd(node);if(currentNeighbor!=parentOfNode){var childStartAngle=(startAngle+branchCount*stepAngle)%360,childEndAngle=(childStartAngle+stepAngle)%360;CoSELayout.branchRadialLayout(currentNeighbor,node,childStartAngle,childEndAngle,distance+radialSeparation,radialSeparation),branchCount++}}},CoSELayout.maxDiagonalInTree=function(tree){for(var maxDiagonal=Integer.MIN_VALUE,i=0;i<tree.length;i++){var diagonal=tree[i].getDiagonal();diagonal>maxDiagonal&&(maxDiagonal=diagonal)}return maxDiagonal},CoSELayout.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},CoSELayout.prototype.groupZeroDegreeMembers=function(){var self2=this,tempMemberGroups={};this.memberGroups={},this.idToDummyNode={};for(var zeroDegree=[],allNodes=this.graphManager.getAllNodes(),i=0;i<allNodes.length;i++){var parent=(node=allNodes[i]).getParent();0!==this.getNodeDegreeWithChildren(node)||null!=parent.id&&this.getToBeTiled(parent)||zeroDegree.push(node)}for(i=0;i<zeroDegree.length;i++){var node,p_id=(node=zeroDegree[i]).getParent().id;void 0===tempMemberGroups[p_id]&&(tempMemberGroups[p_id]=[]),tempMemberGroups[p_id]=tempMemberGroups[p_id].concat(node)}Object.keys(tempMemberGroups).forEach((function(p_id2){if(tempMemberGroups[p_id2].length>1){var dummyCompoundId="DummyCompound_"+p_id2;self2.memberGroups[dummyCompoundId]=tempMemberGroups[p_id2];var parent2=tempMemberGroups[p_id2][0].getParent(),dummyCompound=new CoSENode(self2.graphManager);dummyCompound.id=dummyCompoundId,dummyCompound.paddingLeft=parent2.paddingLeft||0,dummyCompound.paddingRight=parent2.paddingRight||0,dummyCompound.paddingBottom=parent2.paddingBottom||0,dummyCompound.paddingTop=parent2.paddingTop||0,self2.idToDummyNode[dummyCompoundId]=dummyCompound;var dummyParentGraph=self2.getGraphManager().add(self2.newGraph(),dummyCompound),parentGraph=parent2.getChild();parentGraph.add(dummyCompound);for(var i2=0;i2<tempMemberGroups[p_id2].length;i2++){var node2=tempMemberGroups[p_id2][i2];parentGraph.remove(node2),dummyParentGraph.add(node2)}}}))},CoSELayout.prototype.clearCompounds=function(){var childGraphMap={},idToNode={};this.performDFSOnCompounds();for(var i=0;i<this.compoundOrder.length;i++)idToNode[this.compoundOrder[i].id]=this.compoundOrder[i],childGraphMap[this.compoundOrder[i].id]=[].concat(this.compoundOrder[i].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[i].getChild()),this.compoundOrder[i].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(childGraphMap,idToNode)},CoSELayout.prototype.clearZeroDegreeMembers=function(){var self2=this,tiledZeroDegreePack=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(id){var compoundNode=self2.idToDummyNode[id];tiledZeroDegreePack[id]=self2.tileNodes(self2.memberGroups[id],compoundNode.paddingLeft+compoundNode.paddingRight),compoundNode.rect.width=tiledZeroDegreePack[id].width,compoundNode.rect.height=tiledZeroDegreePack[id].height}))},CoSELayout.prototype.repopulateCompounds=function(){for(var i=this.compoundOrder.length-1;i>=0;i--){var lCompoundNode=this.compoundOrder[i],id=lCompoundNode.id,horizontalMargin=lCompoundNode.paddingLeft,verticalMargin=lCompoundNode.paddingTop;this.adjustLocations(this.tiledMemberPack[id],lCompoundNode.rect.x,lCompoundNode.rect.y,horizontalMargin,verticalMargin)}},CoSELayout.prototype.repopulateZeroDegreeMembers=function(){var self2=this,tiledPack=this.tiledZeroDegreePack;Object.keys(tiledPack).forEach((function(id){var compoundNode=self2.idToDummyNode[id],horizontalMargin=compoundNode.paddingLeft,verticalMargin=compoundNode.paddingTop;self2.adjustLocations(tiledPack[id],compoundNode.rect.x,compoundNode.rect.y,horizontalMargin,verticalMargin)}))},CoSELayout.prototype.getToBeTiled=function(node){var id=node.id;if(null!=this.toBeTiled[id])return this.toBeTiled[id];var childGraph=node.getChild();if(null==childGraph)return this.toBeTiled[id]=!1,!1;for(var children=childGraph.getNodes(),i=0;i<children.length;i++){var theChild=children[i];if(this.getNodeDegree(theChild)>0)return this.toBeTiled[id]=!1,!1;if(null!=theChild.getChild()){if(!this.getToBeTiled(theChild))return this.toBeTiled[id]=!1,!1}else this.toBeTiled[theChild.id]=!1}return this.toBeTiled[id]=!0,!0},CoSELayout.prototype.getNodeDegree=function(node){node.id;for(var edges=node.getEdges(),degree=0,i=0;i<edges.length;i++){var edge=edges[i];edge.getSource().id!==edge.getTarget().id&&(degree+=1)}return degree},CoSELayout.prototype.getNodeDegreeWithChildren=function(node){var degree=this.getNodeDegree(node);if(null==node.getChild())return degree;for(var children=node.getChild().getNodes(),i=0;i<children.length;i++){var child=children[i];degree+=this.getNodeDegreeWithChildren(child)}return degree},CoSELayout.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},CoSELayout.prototype.fillCompexOrderByDFS=function(children){for(var i=0;i<children.length;i++){var child=children[i];null!=child.getChild()&&this.fillCompexOrderByDFS(child.getChild().getNodes()),this.getToBeTiled(child)&&this.compoundOrder.push(child)}},CoSELayout.prototype.adjustLocations=function(organization,x,y,compoundHorizontalMargin,compoundVerticalMargin){y+=compoundVerticalMargin;for(var left=x+=compoundHorizontalMargin,i=0;i<organization.rows.length;i++){var row=organization.rows[i];x=left;for(var maxHeight=0,j=0;j<row.length;j++){var lnode=row[j];lnode.rect.x=x,lnode.rect.y=y,x+=lnode.rect.width+organization.horizontalPadding,lnode.rect.height>maxHeight&&(maxHeight=lnode.rect.height)}y+=maxHeight+organization.verticalPadding}},CoSELayout.prototype.tileCompoundMembers=function(childGraphMap,idToNode){var self2=this;this.tiledMemberPack=[],Object.keys(childGraphMap).forEach((function(id){var compoundNode=idToNode[id];self2.tiledMemberPack[id]=self2.tileNodes(childGraphMap[id],compoundNode.paddingLeft+compoundNode.paddingRight),compoundNode.rect.width=self2.tiledMemberPack[id].width,compoundNode.rect.height=self2.tiledMemberPack[id].height}))},CoSELayout.prototype.tileNodes=function(nodes2,minWidth){var organization={rows:[],rowWidth:[],rowHeight:[],width:0,height:minWidth,verticalPadding:CoSEConstants.TILING_PADDING_VERTICAL,horizontalPadding:CoSEConstants.TILING_PADDING_HORIZONTAL};nodes2.sort((function(n1,n2){return n1.rect.width*n1.rect.height>n2.rect.width*n2.rect.height?-1:n1.rect.width*n1.rect.height<n2.rect.width*n2.rect.height?1:0}));for(var i=0;i<nodes2.length;i++){var lNode=nodes2[i];0==organization.rows.length?this.insertNodeToRow(organization,lNode,0,minWidth):this.canAddHorizontal(organization,lNode.rect.width,lNode.rect.height)?this.insertNodeToRow(organization,lNode,this.getShortestRowIndex(organization),minWidth):this.insertNodeToRow(organization,lNode,organization.rows.length,minWidth),this.shiftToLastRow(organization)}return organization},CoSELayout.prototype.insertNodeToRow=function(organization,node,rowIndex,minWidth){var minCompoundSize=minWidth;rowIndex==organization.rows.length&&(organization.rows.push([]),organization.rowWidth.push(minCompoundSize),organization.rowHeight.push(0));var w=organization.rowWidth[rowIndex]+node.rect.width;organization.rows[rowIndex].length>0&&(w+=organization.horizontalPadding),organization.rowWidth[rowIndex]=w,organization.width<w&&(organization.width=w);var h=node.rect.height;rowIndex>0&&(h+=organization.verticalPadding);var extraHeight=0;h>organization.rowHeight[rowIndex]&&(extraHeight=organization.rowHeight[rowIndex],organization.rowHeight[rowIndex]=h,extraHeight=organization.rowHeight[rowIndex]-extraHeight),organization.height+=extraHeight,organization.rows[rowIndex].push(node)},CoSELayout.prototype.getShortestRowIndex=function(organization){for(var r=-1,min=Number.MAX_VALUE,i=0;i<organization.rows.length;i++)organization.rowWidth[i]<min&&(r=i,min=organization.rowWidth[i]);return r},CoSELayout.prototype.getLongestRowIndex=function(organization){for(var r=-1,max=Number.MIN_VALUE,i=0;i<organization.rows.length;i++)organization.rowWidth[i]>max&&(r=i,max=organization.rowWidth[i]);return r},CoSELayout.prototype.canAddHorizontal=function(organization,extraWidth,extraHeight){var sri=this.getShortestRowIndex(organization);if(sri<0)return!0;var min=organization.rowWidth[sri];if(min+organization.horizontalPadding+extraWidth<=organization.width)return!0;var add_to_row_ratio,add_new_row_ratio,hDiff=0;return organization.rowHeight[sri]<extraHeight&&sri>0&&(hDiff=extraHeight+organization.verticalPadding-organization.rowHeight[sri]),add_to_row_ratio=organization.width-min>=extraWidth+organization.horizontalPadding?(organization.height+hDiff)/(min+extraWidth+organization.horizontalPadding):(organization.height+hDiff)/organization.width,hDiff=extraHeight+organization.verticalPadding,(add_new_row_ratio=organization.width<extraWidth?(organization.height+hDiff)/extraWidth:(organization.height+hDiff)/organization.width)<1&&(add_new_row_ratio=1/add_new_row_ratio),add_to_row_ratio<1&&(add_to_row_ratio=1/add_to_row_ratio),add_to_row_ratio<add_new_row_ratio},CoSELayout.prototype.shiftToLastRow=function(organization){var longest=this.getLongestRowIndex(organization),last=organization.rowWidth.length-1,row=organization.rows[longest],node=row[row.length-1],diff=node.width+organization.horizontalPadding;if(organization.width-organization.rowWidth[last]>diff&&longest!=last){row.splice(-1,1),organization.rows[last].push(node),organization.rowWidth[longest]=organization.rowWidth[longest]-diff,organization.rowWidth[last]=organization.rowWidth[last]+diff,organization.width=organization.rowWidth[instance.getLongestRowIndex(organization)];for(var maxHeight=Number.MIN_VALUE,i=0;i<row.length;i++)row[i].height>maxHeight&&(maxHeight=row[i].height);longest>0&&(maxHeight+=organization.verticalPadding);var prevTotal=organization.rowHeight[longest]+organization.rowHeight[last];organization.rowHeight[longest]=maxHeight,organization.rowHeight[last]<node.height+organization.verticalPadding&&(organization.rowHeight[last]=node.height+organization.verticalPadding);var finalTotal=organization.rowHeight[longest]+organization.rowHeight[last];organization.height+=finalTotal-prevTotal,this.shiftToLastRow(organization)}},CoSELayout.prototype.tilingPreLayout=function(){CoSEConstants.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},CoSELayout.prototype.tilingPostLayout=function(){CoSEConstants.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},CoSELayout.prototype.reduceTrees=function(){for(var node,prunedNodesAll=[],containsLeaf=!0;containsLeaf;){var allNodes=this.graphManager.getAllNodes(),prunedNodesInStepTemp=[];containsLeaf=!1;for(var i=0;i<allNodes.length;i++)1!=(node=allNodes[i]).getEdges().length||node.getEdges()[0].isInterGraph||null!=node.getChild()||(prunedNodesInStepTemp.push([node,node.getEdges()[0],node.getOwner()]),containsLeaf=!0);if(1==containsLeaf){for(var prunedNodesInStep=[],j=0;j<prunedNodesInStepTemp.length;j++)1==prunedNodesInStepTemp[j][0].getEdges().length&&(prunedNodesInStep.push(prunedNodesInStepTemp[j]),prunedNodesInStepTemp[j][0].getOwner().remove(prunedNodesInStepTemp[j][0]));prunedNodesAll.push(prunedNodesInStep),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=prunedNodesAll},CoSELayout.prototype.growTree=function(prunedNodesAll){for(var nodeData,prunedNodesInStep=prunedNodesAll[prunedNodesAll.length-1],i=0;i<prunedNodesInStep.length;i++)nodeData=prunedNodesInStep[i],this.findPlaceforPrunedNode(nodeData),nodeData[2].add(nodeData[0]),nodeData[2].add(nodeData[1],nodeData[1].source,nodeData[1].target);prunedNodesAll.splice(prunedNodesAll.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},CoSELayout.prototype.findPlaceforPrunedNode=function(nodeData){var gridForPrunedNode,nodeToConnect,prunedNode=nodeData[0],startGridX=(nodeToConnect=prunedNode==nodeData[1].source?nodeData[1].target:nodeData[1].source).startX,finishGridX=nodeToConnect.finishX,startGridY=nodeToConnect.startY,finishGridY=nodeToConnect.finishY,controlRegions=[0,0,0,0];if(startGridY>0)for(var i=startGridX;i<=finishGridX;i++)controlRegions[0]+=this.grid[i][startGridY-1].length+this.grid[i][startGridY].length-1;if(finishGridX<this.grid.length-1)for(i=startGridY;i<=finishGridY;i++)controlRegions[1]+=this.grid[finishGridX+1][i].length+this.grid[finishGridX][i].length-1;if(finishGridY<this.grid[0].length-1)for(i=startGridX;i<=finishGridX;i++)controlRegions[2]+=this.grid[i][finishGridY+1].length+this.grid[i][finishGridY].length-1;if(startGridX>0)for(i=startGridY;i<=finishGridY;i++)controlRegions[3]+=this.grid[startGridX-1][i].length+this.grid[startGridX][i].length-1;for(var minCount,minIndex,min=Integer.MAX_VALUE,j=0;j<controlRegions.length;j++)controlRegions[j]<min?(min=controlRegions[j],minCount=1,minIndex=j):controlRegions[j]==min&&minCount++;if(3==minCount&&0==min)0==controlRegions[0]&&0==controlRegions[1]&&0==controlRegions[2]?gridForPrunedNode=1:0==controlRegions[0]&&0==controlRegions[1]&&0==controlRegions[3]?gridForPrunedNode=0:0==controlRegions[0]&&0==controlRegions[2]&&0==controlRegions[3]?gridForPrunedNode=3:0==controlRegions[1]&&0==controlRegions[2]&&0==controlRegions[3]&&(gridForPrunedNode=2);else if(2==minCount&&0==min){var random=Math.floor(2*Math.random());gridForPrunedNode=0==controlRegions[0]&&0==controlRegions[1]?0==random?0:1:0==controlRegions[0]&&0==controlRegions[2]?0==random?0:2:0==controlRegions[0]&&0==controlRegions[3]?0==random?0:3:0==controlRegions[1]&&0==controlRegions[2]?0==random?1:2:0==controlRegions[1]&&0==controlRegions[3]?0==random?1:3:0==random?2:3}else gridForPrunedNode=4==minCount&&0==min?random=Math.floor(4*Math.random()):minIndex;0==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX(),nodeToConnect.getCenterY()-nodeToConnect.getHeight()/2-FDLayoutConstants.DEFAULT_EDGE_LENGTH-prunedNode.getHeight()/2):1==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX()+nodeToConnect.getWidth()/2+FDLayoutConstants.DEFAULT_EDGE_LENGTH+prunedNode.getWidth()/2,nodeToConnect.getCenterY()):2==gridForPrunedNode?prunedNode.setCenter(nodeToConnect.getCenterX(),nodeToConnect.getCenterY()+nodeToConnect.getHeight()/2+FDLayoutConstants.DEFAULT_EDGE_LENGTH+prunedNode.getHeight()/2):prunedNode.setCenter(nodeToConnect.getCenterX()-nodeToConnect.getWidth()/2-FDLayoutConstants.DEFAULT_EDGE_LENGTH-prunedNode.getWidth()/2,nodeToConnect.getCenterY())},module2.exports=CoSELayout},function(module2,exports2,__nested_webpack_require_1131836__){var coseBase2={};coseBase2.layoutBase=__nested_webpack_require_1131836__(0),coseBase2.CoSEConstants=__nested_webpack_require_1131836__(1),coseBase2.CoSEEdge=__nested_webpack_require_1131836__(2),coseBase2.CoSEGraph=__nested_webpack_require_1131836__(3),coseBase2.CoSEGraphManager=__nested_webpack_require_1131836__(4),coseBase2.CoSELayout=__nested_webpack_require_1131836__(6),coseBase2.CoSENode=__nested_webpack_require_1131836__(5),module2.exports=coseBase2}])}))}(coseBase)),coseBase.exports}())}(_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.O,(function(__WEBPACK_EXTERNAL_MODULE_0__){return function(modules){var installedModules={};function __nested_webpack_require_1132753__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module2=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module2.exports,module2,module2.exports,__nested_webpack_require_1132753__),module2.l=!0,module2.exports}return __nested_webpack_require_1132753__.m=modules,__nested_webpack_require_1132753__.c=installedModules,__nested_webpack_require_1132753__.i=function(value){return value},__nested_webpack_require_1132753__.d=function(exports2,name,getter){__nested_webpack_require_1132753__.o(exports2,name)||Object.defineProperty(exports2,name,{configurable:!1,enumerable:!0,get:getter})},__nested_webpack_require_1132753__.n=function(module2){var getter=module2&&module2.__esModule?function getDefault(){return module2.default}:function getModuleExports(){return module2};return __nested_webpack_require_1132753__.d(getter,"a",getter),getter},__nested_webpack_require_1132753__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__nested_webpack_require_1132753__.p="",__nested_webpack_require_1132753__(__nested_webpack_require_1132753__.s=1)}([function(module2,exports2){module2.exports=__WEBPACK_EXTERNAL_MODULE_0__},function(module2,exports2,__nested_webpack_require_1134778__){var LayoutConstants=__nested_webpack_require_1134778__(0).layoutBase.LayoutConstants,FDLayoutConstants=__nested_webpack_require_1134778__(0).layoutBase.FDLayoutConstants,CoSEConstants=__nested_webpack_require_1134778__(0).CoSEConstants,CoSELayout=__nested_webpack_require_1134778__(0).CoSELayout,CoSENode=__nested_webpack_require_1134778__(0).CoSENode,PointD=__nested_webpack_require_1134778__(0).layoutBase.PointD,DimensionD2=__nested_webpack_require_1134778__(0).layoutBase.DimensionD,defaults={ready:function ready(){},stop:function stop(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function _CoSELayout(_options){this.options=function extend(defaults2,options){var obj={};for(var i in defaults2)obj[i]=defaults2[i];for(var i in options)obj[i]=options[i];return obj}(defaults,_options),getUserOptions(this.options)}var getUserOptions=function getUserOptions2(options){null!=options.nodeRepulsion&&(CoSEConstants.DEFAULT_REPULSION_STRENGTH=FDLayoutConstants.DEFAULT_REPULSION_STRENGTH=options.nodeRepulsion),null!=options.idealEdgeLength&&(CoSEConstants.DEFAULT_EDGE_LENGTH=FDLayoutConstants.DEFAULT_EDGE_LENGTH=options.idealEdgeLength),null!=options.edgeElasticity&&(CoSEConstants.DEFAULT_SPRING_STRENGTH=FDLayoutConstants.DEFAULT_SPRING_STRENGTH=options.edgeElasticity),null!=options.nestingFactor&&(CoSEConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=options.nestingFactor),null!=options.gravity&&(CoSEConstants.DEFAULT_GRAVITY_STRENGTH=FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=options.gravity),null!=options.numIter&&(CoSEConstants.MAX_ITERATIONS=FDLayoutConstants.MAX_ITERATIONS=options.numIter),null!=options.gravityRange&&(CoSEConstants.DEFAULT_GRAVITY_RANGE_FACTOR=FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=options.gravityRange),null!=options.gravityCompound&&(CoSEConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=options.gravityCompound),null!=options.gravityRangeCompound&&(CoSEConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=options.gravityRangeCompound),null!=options.initialEnergyOnIncremental&&(CoSEConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=options.initialEnergyOnIncremental),"draft"==options.quality?LayoutConstants.QUALITY=0:"proof"==options.quality?LayoutConstants.QUALITY=2:LayoutConstants.QUALITY=1,CoSEConstants.NODE_DIMENSIONS_INCLUDE_LABELS=FDLayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=options.nodeDimensionsIncludeLabels,CoSEConstants.DEFAULT_INCREMENTAL=FDLayoutConstants.DEFAULT_INCREMENTAL=LayoutConstants.DEFAULT_INCREMENTAL=!options.randomize,CoSEConstants.ANIMATE=FDLayoutConstants.ANIMATE=LayoutConstants.ANIMATE=options.animate,CoSEConstants.TILE=options.tile,CoSEConstants.TILING_PADDING_VERTICAL="function"==typeof options.tilingPaddingVertical?options.tilingPaddingVertical.call():options.tilingPaddingVertical,CoSEConstants.TILING_PADDING_HORIZONTAL="function"==typeof options.tilingPaddingHorizontal?options.tilingPaddingHorizontal.call():options.tilingPaddingHorizontal};_CoSELayout.prototype.run=function(){var ready,frameId,options=this.options;this.idToLNode={};var layout=this.layout=new CoSELayout,self2=this;self2.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var gm=layout.newGraphManager();this.gm=gm;var nodes2=this.options.eles.nodes(),edges=this.options.eles.edges();this.root=gm.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(nodes2),layout);for(var i=0;i<edges.length;i++){var edge=edges[i],sourceNode=this.idToLNode[edge.data("source")],targetNode=this.idToLNode[edge.data("target")];if(sourceNode!==targetNode&&0==sourceNode.getEdgesBetween(targetNode).length)gm.add(layout.newEdge(),sourceNode,targetNode).id=edge.id()}var getPositions=function getPositions2(ele,i2){"number"==typeof ele&&(ele=i2);var theId=ele.data("id"),lNode=self2.idToLNode[theId];return{x:lNode.getRect().getCenterX(),y:lNode.getRect().getCenterY()}},iterateAnimated=function iterateAnimated2(){for(var isDone,afterReposition=function afterReposition2(){options.fit&&options.cy.fit(options.eles,options.padding),ready||(ready=!0,self2.cy.one("layoutready",options.ready),self2.cy.trigger({type:"layoutready",layout:self2}))},ticksPerFrame=self2.options.refresh,i2=0;i2<ticksPerFrame&&!isDone;i2++)isDone=self2.stopped||self2.layout.tick();if(isDone)return layout.checkLayoutSuccess()&&!layout.isSubLayout&&layout.doPostLayout(),layout.tilingPostLayout&&layout.tilingPostLayout(),layout.isLayoutFinished=!0,self2.options.eles.nodes().positions(getPositions),afterReposition(),self2.cy.one("layoutstop",self2.options.stop),self2.cy.trigger({type:"layoutstop",layout:self2}),frameId&&cancelAnimationFrame(frameId),void(ready=!1);var animationData=self2.layout.getPositionsData();options.eles.nodes().positions((function(ele,i3){if("number"==typeof ele&&(ele=i3),!ele.isParent()){for(var theId=ele.id(),pNode=animationData[theId],temp=ele;null==pNode&&(pNode=animationData[temp.data("parent")]||animationData["DummyCompound_"+temp.data("parent")],animationData[theId]=pNode,null!=(temp=temp.parent()[0])););return null!=pNode?{x:pNode.x,y:pNode.y}:{x:ele.position("x"),y:ele.position("y")}}})),afterReposition(),frameId=requestAnimationFrame(iterateAnimated2)};return layout.addListener("layoutstarted",(function(){"during"===self2.options.animate&&(frameId=requestAnimationFrame(iterateAnimated))})),layout.runLayout(),"during"!==this.options.animate&&(self2.options.eles.nodes().not(":parent").layoutPositions(self2,self2.options,getPositions),ready=!1),this},_CoSELayout.prototype.getTopMostNodes=function(nodes2){for(var nodesMap={},i=0;i<nodes2.length;i++)nodesMap[nodes2[i].id()]=!0;return nodes2.filter((function(ele,i2){"number"==typeof ele&&(ele=i2);for(var parent=ele.parent()[0];null!=parent;){if(nodesMap[parent.id()])return!1;parent=parent.parent()[0]}return!0}))},_CoSELayout.prototype.processChildrenList=function(parent,children,layout){for(var size=children.length,i=0;i<size;i++){var theNode,theNewGraph,theChild=children[i],children_of_children=theChild.children(),dimensions=theChild.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((theNode=null!=theChild.outerWidth()&&null!=theChild.outerHeight()?parent.add(new CoSENode(layout.graphManager,new PointD(theChild.position("x")-dimensions.w/2,theChild.position("y")-dimensions.h/2),new DimensionD2(parseFloat(dimensions.w),parseFloat(dimensions.h)))):parent.add(new CoSENode(this.graphManager))).id=theChild.data("id"),theNode.paddingLeft=parseInt(theChild.css("padding")),theNode.paddingTop=parseInt(theChild.css("padding")),theNode.paddingRight=parseInt(theChild.css("padding")),theNode.paddingBottom=parseInt(theChild.css("padding")),this.options.nodeDimensionsIncludeLabels&&theChild.isParent()){var labelWidth=theChild.boundingBox({includeLabels:!0,includeNodes:!1}).w,labelHeight=theChild.boundingBox({includeLabels:!0,includeNodes:!1}).h,labelPos=theChild.css("text-halign");theNode.labelWidth=labelWidth,theNode.labelHeight=labelHeight,theNode.labelPos=labelPos}if(this.idToLNode[theChild.data("id")]=theNode,isNaN(theNode.rect.x)&&(theNode.rect.x=0),isNaN(theNode.rect.y)&&(theNode.rect.y=0),null!=children_of_children&&children_of_children.length>0)theNewGraph=layout.getGraphManager().add(layout.newGraph(),theNode),this.processChildrenList(theNewGraph,children_of_children,layout)}},_CoSELayout.prototype.stop=function(){return this.stopped=!0,this};var register=function register2(cytoscape2){cytoscape2("layout","cose-bilkent",_CoSELayout)};"undefined"!=typeof cytoscape&&register(cytoscape),module2.exports=register}])}))}(cytoscapeCoseBilkent);var cytoscapeCoseBilkentExports=cytoscapeCoseBilkent.exports;const coseBilkent=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.P)(cytoscapeCoseBilkentExports);function drawNodes(db2,svg,mindmap,section,conf){!function(db2,elem,node,fullSection,conf){const htmlLabels=conf.htmlLabels,section=fullSection%11,nodeElem=elem.append("g");node.section=section;let sectionClass="section-"+section;section<0&&(sectionClass+=" section-root"),nodeElem.attr("class",(node.class?node.class+" ":"")+"mindmap-node "+sectionClass);const bkgElem=nodeElem.append("g"),textElem=nodeElem.append("g"),description=node.descr.replace(/(<br\/*>)/g,"\n");(0,_createText_ac1cb2fc_js__WEBPACK_IMPORTED_MODULE_1__.a)(textElem,description,{useHtmlLabels:htmlLabels,width:node.width,classes:"mindmap-node-label"}),htmlLabels||textElem.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const bbox=textElem.node().getBBox(),[fontSize]=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.X)(conf.fontSize);if(node.height=bbox.height+1.1*fontSize*.5+node.padding,node.width=bbox.width+2*node.padding,node.icon)if(node.type===db2.nodeType.CIRCLE)node.height+=50,node.width+=50,nodeElem.append("foreignObject").attr("height","50px").attr("width",node.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+section+" "+node.icon),textElem.attr("transform","translate("+node.width/2+", "+(node.height/2-1.5*node.padding)+")");else{node.width+=50;const orgHeight=node.height;node.height=Math.max(orgHeight,60);const heightDiff=Math.abs(node.height-orgHeight);nodeElem.append("foreignObject").attr("width","60px").attr("height",node.height).attr("style","text-align: center;margin-top:"+heightDiff/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+section+" "+node.icon),textElem.attr("transform","translate("+(25+node.width/2)+", "+(heightDiff/2+node.padding/2)+")")}else if(htmlLabels){const dx=(node.width-bbox.width)/2,dy=(node.height-bbox.height)/2;textElem.attr("transform","translate("+dx+", "+dy+")")}else{const dx=node.width/2,dy=node.padding/2;textElem.attr("transform","translate("+dx+", "+dy+")")}switch(node.type){case db2.nodeType.DEFAULT:!function(db2,elem,node,section){elem.append("path").attr("id","node-"+node.id).attr("class","node-bkg node-"+db2.type2Str(node.type)).attr("d",`M0 ${node.height-5} v${10-node.height} q0,-5 5,-5 h${node.width-10} q5,0 5,5 v${node.height-5} H0 Z`),elem.append("line").attr("class","node-line-"+section).attr("x1",0).attr("y1",node.height).attr("x2",node.width).attr("y2",node.height)}(db2,bkgElem,node,section);break;case db2.nodeType.ROUNDED_RECT:!function(db2,elem,node){elem.append("rect").attr("id","node-"+node.id).attr("class","node-bkg node-"+db2.type2Str(node.type)).attr("height",node.height).attr("rx",node.padding).attr("ry",node.padding).attr("width",node.width)}(db2,bkgElem,node);break;case db2.nodeType.RECT:!function(db2,elem,node){elem.append("rect").attr("id","node-"+node.id).attr("class","node-bkg node-"+db2.type2Str(node.type)).attr("height",node.height).attr("width",node.width)}(db2,bkgElem,node);break;case db2.nodeType.CIRCLE:bkgElem.attr("transform","translate("+node.width/2+", "+ +node.height/2+")"),function(db2,elem,node){elem.append("circle").attr("id","node-"+node.id).attr("class","node-bkg node-"+db2.type2Str(node.type)).attr("r",node.width/2)}(db2,bkgElem,node);break;case db2.nodeType.CLOUD:!function(db2,elem,node){const w=node.width,h=node.height,r1=.15*w,r2=.25*w,r3=.35*w,r4=.2*w;elem.append("path").attr("id","node-"+node.id).attr("class","node-bkg node-"+db2.type2Str(node.type)).attr("d",`M0 0 a${r1},${r1} 0 0,1 ${.25*w},${-1*w*.1}\n      a${r3},${r3} 1 0,1 ${.4*w},${-1*w*.1}\n      a${r2},${r2} 1 0,1 ${.35*w},${1*w*.2}\n\n      a${r1},${r1} 1 0,1 ${.15*w},${1*h*.35}\n      a${r4},${r4} 1 0,1 ${-1*w*.15},${1*h*.65}\n\n      a${r2},${r1} 1 0,1 ${-1*w*.25},${.15*w}\n      a${r3},${r3} 1 0,1 ${-1*w*.5},0\n      a${r1},${r1} 1 0,1 ${-1*w*.25},${-1*w*.15}\n\n      a${r1},${r1} 1 0,1 ${-1*w*.1},${-1*h*.35}\n      a${r4},${r4} 1 0,1 ${.1*w},${-1*h*.65}\n\n    H0 V0 Z`)}(db2,bkgElem,node);break;case db2.nodeType.BANG:!function(db2,elem,node){const w=node.width,h=node.height,r=.15*w;elem.append("path").attr("id","node-"+node.id).attr("class","node-bkg node-"+db2.type2Str(node.type)).attr("d",`M0 0 a${r},${r} 1 0,0 ${.25*w},${-1*h*.1}\n      a${r},${r} 1 0,0 ${.25*w},0\n      a${r},${r} 1 0,0 ${.25*w},0\n      a${r},${r} 1 0,0 ${.25*w},${1*h*.1}\n\n      a${r},${r} 1 0,0 ${.15*w},${1*h*.33}\n      a${.8*r},${.8*r} 1 0,0 0,${1*h*.34}\n      a${r},${r} 1 0,0 ${-1*w*.15},${1*h*.33}\n\n      a${r},${r} 1 0,0 ${-1*w*.25},${.15*h}\n      a${r},${r} 1 0,0 ${-1*w*.25},0\n      a${r},${r} 1 0,0 ${-1*w*.25},0\n      a${r},${r} 1 0,0 ${-1*w*.25},${-1*h*.15}\n\n      a${r},${r} 1 0,0 ${-1*w*.1},${-1*h*.33}\n      a${.8*r},${.8*r} 1 0,0 0,${-1*h*.34}\n      a${r},${r} 1 0,0 ${.1*w},${-1*h*.33}\n\n    H0 V0 Z`)}(db2,bkgElem,node);break;case db2.nodeType.HEXAGON:!function(_db,elem,node){const h=node.height,m=h/4,w=node.width-node.padding+2*m;!function insertPolygonShape(parent,w,h,points,node){parent.insert("polygon",":first-child").attr("points",points.map((function(d){return d.x+","+d.y})).join(" ")).attr("transform","translate("+(node.width-w)/2+", "+h+")")}(elem,w,h,[{x:m,y:0},{x:w-m,y:0},{x:w,y:-h/2},{x:w-m,y:-h},{x:m,y:-h},{x:0,y:-h/2}],node)}(0,bkgElem,node)}db2.setElementForId(node.id,nodeElem),node.height}(db2,svg,mindmap,section,conf),mindmap.children&&mindmap.children.forEach(((child,index)=>{drawNodes(db2,svg,child,section<0?index:section,conf)}))}function addNodes(mindmap,cy,conf,level){cy.add({group:"nodes",data:{id:mindmap.id.toString(),labelText:mindmap.descr,height:mindmap.height,width:mindmap.width,level:level,nodeId:mindmap.id,padding:mindmap.padding,type:mindmap.type},position:{x:mindmap.x,y:mindmap.y}}),mindmap.children&&mindmap.children.forEach((child=>{addNodes(child,cy,conf,level+1),cy.add({group:"edges",data:{id:`${mindmap.id}_${child.id}`,source:mindmap.id,target:child.id,depth:level,section:child.section}})}))}function layoutMindmap(node,conf){return new Promise((resolve=>{const renderEl=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.j)("body").append("div").attr("id","cy").attr("style","display:none"),cy=cytoscape$1({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});renderEl.remove(),addNodes(node,cy,conf,0),cy.nodes().forEach((function(n){n.layoutDimensions=()=>{const data=n.data();return{w:data.width,h:data.height}}})),cy.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),cy.ready((e=>{_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l.info("Ready",e),resolve(cy)}))}))}cytoscape$1.use(coseBilkent);const diagram={db:db$1,renderer:{draw:async(text,id,_version,diagObj)=>{var _a,_b;_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l.debug("Rendering mindmap diagram\n"+text);const db2=diagObj.db,mm=db2.getMindmap();if(!mm)return;const conf=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.c)();conf.htmlLabels=!1;const svg=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.T)(id),edgesElem=svg.append("g");edgesElem.attr("class","mindmap-edges");const nodesElem=svg.append("g");nodesElem.attr("class","mindmap-nodes"),drawNodes(db2,nodesElem,mm,-1,conf);const cy=await layoutMindmap(mm,conf);!function drawEdges(edgesEl,cy){cy.edges().map(((edge,id)=>{const data=edge.data();if(edge[0]._private.bodyBounds){const bounds=edge[0]._private.rscratch;_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l.trace("Edge: ",id,data),edgesEl.insert("path").attr("d",`M ${bounds.startX},${bounds.startY} L ${bounds.midX},${bounds.midY} L${bounds.endX},${bounds.endY} `).attr("class","edge section-edge-"+data.section+" edge-depth-"+data.depth)}}))}(edgesElem,cy),function positionNodes(db2,cy){cy.nodes().map(((node,id)=>{const data=node.data();data.x=node.position().x,data.y=node.position().y,function(db2,node){const nodeElem=db2.getElementById(node.id),x=node.x||0,y=node.y||0;nodeElem.attr("transform","translate("+x+","+y+")")}(db2,data);const el=db2.getElementById(data.nodeId);_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.l.info("Id:",id,"Position: (",node.position().x,", ",node.position().y,")",data),el.attr("transform",`translate(${node.position().x-data.width/2}, ${node.position().y-data.height/2})`),el.attr("attr",`apa-${id})`)}))}(db2,cy),(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.r)(void 0,svg,(null==(_a=conf.mindmap)?void 0:_a.padding)??_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.V.mindmap.padding,(null==(_b=conf.mindmap)?void 0:_b.useMaxWidth)??_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.V.mindmap.useMaxWidth)}},parser:parser$1,styles:options=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${(options=>{let sections="";for(let i=0;i<options.THEME_COLOR_LIMIT;i++)options["lineColor"+i]=options["lineColor"+i]||options["cScaleInv"+i],(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.aq)(options["lineColor"+i])?options["lineColor"+i]=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.ar)(options["lineColor"+i],20):options["lineColor"+i]=(0,_mermaid_4f066ae1_js__WEBPACK_IMPORTED_MODULE_0__.as)(options["lineColor"+i],20);for(let i=0;i<options.THEME_COLOR_LIMIT;i++){const sw=""+(17-3*i);sections+=`\n    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {\n      fill: ${options["cScale"+i]};\n    }\n    .section-${i-1} text {\n     fill: ${options["cScaleLabel"+i]};\n    }\n    .node-icon-${i-1} {\n      font-size: 40px;\n      color: ${options["cScaleLabel"+i]};\n    }\n    .section-edge-${i-1}{\n      stroke: ${options["cScale"+i]};\n    }\n    .edge-depth-${i-1}{\n      stroke-width: ${sw};\n    }\n    .section-${i-1} line {\n      stroke: ${options["cScaleInv"+i]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return sections})(options)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${options.git0};\n  }\n  .section-root text {\n    fill: ${options.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`}}}]);